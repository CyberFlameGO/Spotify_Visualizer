(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"001a":function(t,e,n){"use strict";function r(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}var i=r(n("c23d")),o=n("9ab4"),a=n("4be4"),s={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},u=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return o.__extends(e,t),e}(Error);function c(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function h(t,e,n){var r=c(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var h=a.status;if("string"===typeof h){if(!s[h])return new u("internal","internal");r=s[h],i=h}var l=a.message;"string"===typeof l&&(i=l),o=a.details,void 0!==o&&(o=n.decode(o))}}catch(f){}return"ok"===r?null:new u(r,i,o)}var l=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=e.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}(),f="type.googleapis.com/google.protobuf.Int64Value",p="type.googleapis.com/google.protobuf.UInt64Value";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var v=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return d(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case f:case p:var n=Number(t["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?d(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(t){return new Promise((function(e,n){setTimeout((function(){n(new u("deadline-exceeded","deadline-exceeded"))}),t)}))}var g=function(){function t(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new v,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new l(e,n),this.cancelAllRequests=new Promise((function(t){i.deleteService=function(){return t()}}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;if(null!==this.emulatorOrigin){var r=this.emulatorOrigin;return r+"/"+e+"/"+n+"/"+t}return"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,c,l,f,p,d;return o.__generator(this,(function(o){switch(o.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},a=new Headers,[4,this.contextProvider.getContext()];case 1:return s=o.sent(),s.authToken&&a.append("Authorization","Bearer "+s.authToken),s.instanceIdToken&&a.append("Firebase-Instance-ID-Token",s.instanceIdToken),c=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,a),m(c),this.cancelAllRequests])];case 2:if(l=o.sent(),!l)throw new u("cancelled","Firebase Functions instance was deleted.");if(f=h(l.status,l.json,this.serializer),f)throw f;if(!l.json)throw new u("internal","Response is not valid JSON object.");if(p=l.json.data,"undefined"===typeof p&&(p=l.json.result),"undefined"===typeof p)throw new u("internal","Response is missing data field.");return d=this.serializer.decode(p),[2,{data:d}]}}))}))},t}(),y="functions";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new g(n,r,i,e)}function _(t){var e={Functions:g};t.INTERNAL.registerComponent(new a.Component(y,b,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}var w="@firebase/functions",x="0.4.38";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
_(i),i.registerVersion(w,x)},"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},"0366":function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"0538":function(t,e,n){"use strict";var r=n("1c0b"),i=n("861d"),o=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(a.prototype=e.prototype),a}},"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},"06cf":function(t,e,n){var r=n("83ab"),i=n("d1e7"),o=n("5c6c"),a=n("fc6a"),s=n("c04e"),u=n("5135"),c=n("0cfb"),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=s(e,!0),c)try{return h(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},"09fe":function(t,e,n){"use strict";var r=n("80f2"),i=n.n(r);i.a},"0a06":function(t,e,n){"use strict";var r=n("c532"),i=n("30b5"),o=n("f6b4"),a=n("5270"),s=n("4a7b");function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=s(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[a,void 0],n=Promise.resolve(t);this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));while(e.length)n=n.then(e.shift(),e.shift());return n},u.prototype.getUri=function(t){return t=s(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}})),r.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,n,i){return this.request(r.merge(i||{},{method:t,url:e,data:n}))}})),t.exports=u},"0b25":function(t,e,n){var r=n("a691"),i=n("50c4");t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0df6":function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},"0fa6":function(t,e,n){"use strict";var r=n("4695"),i=n.n(r);i.a},1016:function(t,e,n){"use strict";var r=n("fdeb"),i=n.n(r);i.a},"10e6":function(t,e,n){"use strict";var r=n("9628"),i=n.n(r);i.a},1148:function(t,e,n){"use strict";var r=n("a691"),i=n("1d80");t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},1276:function(t,e,n){"use strict";var r=n("d784"),i=n("44e7"),o=n("825a"),a=n("1d80"),s=n("4840"),u=n("8aa59"),c=n("50c4"),h=n("14c3"),l=n("9263"),f=n("d039"),p=[].push,d=Math.min,v=4294967295,m=!f((function(){return!RegExp(v,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?v:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);var s,u,c,h=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,m=new RegExp(t.source,f+"g");while(s=l.call(m,r)){if(u=m.lastIndex,u>d&&(h.push(r.slice(d,s.index)),s.length>1&&s.index<r.length&&p.apply(h,s.slice(1)),c=s[0].length,d=u,h.length>=o))break;m.lastIndex===s.index&&m.lastIndex++}return d===r.length?!c&&m.test("")||h.push(""):h.push(r.slice(d)),h.length>o?h.slice(0,o):h}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var l=o(t),f=String(this),p=s(l,RegExp),g=l.unicode,y=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(m?"y":"g"),b=new p(m?l:"^(?:"+l.source+")",y),_=void 0===i?v:i>>>0;if(0===_)return[];if(0===f.length)return null===h(b,f)?[f]:[];var w=0,x=0,E=[];while(x<f.length){b.lastIndex=m?x:0;var S,T=h(b,m?f:f.slice(x));if(null===T||(S=d(c(b.lastIndex+(m?0:x)),f.length))===w)x=u(f,x,g);else{if(E.push(f.slice(w,x)),E.length===_)return E;for(var M=1;M<=T.length-1;M++)if(E.push(T[M]),E.length===_)return E;x=w=S}}return E.push(f.slice(w)),E}]}),!m)},"131a":function(t,e,n){var r=n("23e7"),i=n("d2bb");r({target:"Object",stat:!0},{setPrototypeOf:i})},"13d5":function(t,e,n){"use strict";var r=n("23e7"),i=n("d58f").left,o=n("a640"),a=n("ae40"),s=o("reduce"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"145e":function(t,e,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("50c4"),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),u=i(t,s),c=i(e,s),h=arguments.length>2?arguments[2]:void 0,l=a((void 0===h?s:i(h,s))-c,s-u),f=1;c<u&&u<c+l&&(f=-1,c+=l-1,u+=l-1);while(l-- >0)c in n?n[u]=n[c]:delete n[u],u+=f,c+=f;return n}},"14c3":function(t,e,n){var r=n("c6b6"),i=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("17c2"),a=n("9112");for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(h){c.forEach=o}}},"16b3":function(t,e,n){"use strict";var r=n("e63a"),i=n.n(r);i.a},"16ed":function(t,e,n){var r;(function(){"use strict";var i=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,a=1/3,s=1/6,u=(Math.sqrt(5)-1)/4,c=(5-Math.sqrt(5))/20;function h(t){var e;e="function"==typeof t?t:t?f(t):Math.random,this.p=l(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function l(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var r=e+~~(t()*(256-e)),i=n[e];n[e]=n[r],n[r]=i}return n}function f(){var t=0,e=0,n=0,r=1,i=p();t=i(" "),e=i(" "),n=i(" ");for(var o=0;o<arguments.length;o++)t-=i(arguments[o]),t<0&&(t+=1),e-=i(arguments[o]),e<0&&(e+=1),n-=i(arguments[o]),n<0&&(n+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*r;return t=e,e=n,n=i-(r=0|i)}}function p(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){t+=e.charCodeAt(n);var r=.02519603282416938*t;t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=4294967296*r}return 2.3283064365386963e-10*(t>>>0)}}h.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var n,r,a=this.permMod12,s=this.perm,u=this.grad3,c=0,h=0,l=0,f=(t+e)*i,p=Math.floor(t+f),d=Math.floor(e+f),v=(p+d)*o,m=p-v,g=d-v,y=t-m,b=e-g;y>b?(n=1,r=0):(n=0,r=1);var _=y-n+o,w=b-r+o,x=y-1+2*o,E=b-1+2*o,S=255&p,T=255&d,M=.5-y*y-b*b;if(M>=0){var A=3*a[S+s[T]];M*=M,c=M*M*(u[A]*y+u[A+1]*b)}var C=.5-_*_-w*w;if(C>=0){var I=3*a[S+n+s[T+r]];C*=C,h=C*C*(u[I]*_+u[I+1]*w)}var N=.5-x*x-E*E;if(N>=0){var R=3*a[S+1+s[T+1]];N*=N,l=N*N*(u[R]*x+u[R+1]*E)}return 70*(c+h+l)},noise3D:function(t,e,n){var r,i,o,u,c,h,l,f,p,d,v=this.permMod12,m=this.perm,g=this.grad3,y=(t+e+n)*a,b=Math.floor(t+y),_=Math.floor(e+y),w=Math.floor(n+y),x=(b+_+w)*s,E=b-x,S=_-x,T=w-x,M=t-E,A=e-S,C=n-T;M>=A?A>=C?(c=1,h=0,l=0,f=1,p=1,d=0):M>=C?(c=1,h=0,l=0,f=1,p=0,d=1):(c=0,h=0,l=1,f=1,p=0,d=1):A<C?(c=0,h=0,l=1,f=0,p=1,d=1):M<C?(c=0,h=1,l=0,f=0,p=1,d=1):(c=0,h=1,l=0,f=1,p=1,d=0);var I=M-c+s,N=A-h+s,R=C-l+s,O=M-f+2*s,P=A-p+2*s,L=C-d+2*s,D=M-1+3*s,k=A-1+3*s,F=C-1+3*s,U=255&b,j=255&_,z=255&w,B=.6-M*M-A*A-C*C;if(B<0)r=0;else{var V=3*v[U+m[j+m[z]]];B*=B,r=B*B*(g[V]*M+g[V+1]*A+g[V+2]*C)}var G=.6-I*I-N*N-R*R;if(G<0)i=0;else{var H=3*v[U+c+m[j+h+m[z+l]]];G*=G,i=G*G*(g[H]*I+g[H+1]*N+g[H+2]*R)}var W=.6-O*O-P*P-L*L;if(W<0)o=0;else{var q=3*v[U+f+m[j+p+m[z+d]]];W*=W,o=W*W*(g[q]*O+g[q+1]*P+g[q+2]*L)}var Y=.6-D*D-k*k-F*F;if(Y<0)u=0;else{var X=3*v[U+1+m[j+1+m[z+1]]];Y*=Y,u=Y*Y*(g[X]*D+g[X+1]*k+g[X+2]*F)}return 32*(r+i+o+u)},noise4D:function(t,e,n,r){var i,o,a,s,h,l,f,p,d,v,m,g,y,b,_,w,x,E=this.perm,S=this.grad4,T=(t+e+n+r)*u,M=Math.floor(t+T),A=Math.floor(e+T),C=Math.floor(n+T),I=Math.floor(r+T),N=(M+A+C+I)*c,R=M-N,O=A-N,P=C-N,L=I-N,D=t-R,k=e-O,F=n-P,U=r-L,j=0,z=0,B=0,V=0;D>k?j++:z++,D>F?j++:B++,D>U?j++:V++,k>F?z++:B++,k>U?z++:V++,F>U?B++:V++,l=j>=3?1:0,f=z>=3?1:0,p=B>=3?1:0,d=V>=3?1:0,v=j>=2?1:0,m=z>=2?1:0,g=B>=2?1:0,y=V>=2?1:0,b=j>=1?1:0,_=z>=1?1:0,w=B>=1?1:0,x=V>=1?1:0;var G=D-l+c,H=k-f+c,W=F-p+c,q=U-d+c,Y=D-v+2*c,X=k-m+2*c,K=F-g+2*c,$=U-y+2*c,Q=D-b+3*c,J=k-_+3*c,Z=F-w+3*c,tt=U-x+3*c,et=D-1+4*c,nt=k-1+4*c,rt=F-1+4*c,it=U-1+4*c,ot=255&M,at=255&A,st=255&C,ut=255&I,ct=.6-D*D-k*k-F*F-U*U;if(ct<0)i=0;else{var ht=E[ot+E[at+E[st+E[ut]]]]%32*4;ct*=ct,i=ct*ct*(S[ht]*D+S[ht+1]*k+S[ht+2]*F+S[ht+3]*U)}var lt=.6-G*G-H*H-W*W-q*q;if(lt<0)o=0;else{var ft=E[ot+l+E[at+f+E[st+p+E[ut+d]]]]%32*4;lt*=lt,o=lt*lt*(S[ft]*G+S[ft+1]*H+S[ft+2]*W+S[ft+3]*q)}var pt=.6-Y*Y-X*X-K*K-$*$;if(pt<0)a=0;else{var dt=E[ot+v+E[at+m+E[st+g+E[ut+y]]]]%32*4;pt*=pt,a=pt*pt*(S[dt]*Y+S[dt+1]*X+S[dt+2]*K+S[dt+3]*$)}var vt=.6-Q*Q-J*J-Z*Z-tt*tt;if(vt<0)s=0;else{var mt=E[ot+b+E[at+_+E[st+w+E[ut+x]]]]%32*4;vt*=vt,s=vt*vt*(S[mt]*Q+S[mt+1]*J+S[mt+2]*Z+S[mt+3]*tt)}var gt=.6-et*et-nt*nt-rt*rt-it*it;if(gt<0)h=0;else{var yt=E[ot+1+E[at+1+E[st+1+E[ut+1]]]]%32*4;gt*=gt,h=gt*gt*(S[yt]*et+S[yt+1]*nt+S[yt+2]*rt+S[yt+3]*it)}return 27*(i+o+a+s+h)}},h._buildPermutationTable=l,r=function(){return h}.call(e,n,e,t),void 0===r||(t.exports=r),e.SimplexNoise=h,t.exports=h})()},"170b":function(t,e,n){"use strict";var r=n("ebb5"),i=n("50c4"),o=n("23cb"),a=n("4840"),s=r.aTypedArray,u=r.exportTypedArrayMethod;u("subarray",(function(t,e){var n=s(this),r=n.length,u=o(t,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===e?r:o(e,r))-u))}))},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=n("ae40"),a=i("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"182d":function(t,e,n){var r=n("f8cd");t.exports=function(t,e){var n=r(t);if(n%e)throw RangeError("Wrong offset");return n}},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"1b53":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("5a89");function i(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(i.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),i.FullScreenQuad=function(){var t=new r["m"](-1,1,1,-1,0,1),e=new r["o"](2,2),n=function(t){this._mesh=new r["g"](e,t)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}()},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,n){var r=n("b622"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(u){}return n}},"1c92":function(t,e,n){"use strict";var r=n("3644"),i=n.n(r);i.a},"1cdc":function(t,e,n){var r=n("342f");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},"1d2b":function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7"),n("e6cf");function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}},"1dde":function(t,e,n){var r=n("d039"),i=n("b622"),o=n("2d00"),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"219c":function(t,e,n){"use strict";var r=n("ebb5"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(t){return a.call(i(this),t)}))},2266:function(t,e,n){var r=n("825a"),i=n("e95a"),o=n("50c4"),a=n("0366"),s=n("35a1"),u=n("9bdd"),c=function(t,e){this.stopped=t,this.result=e},h=t.exports=function(t,e,n,h,l){var f,p,d,v,m,g,y,b=a(e,n,h?2:1);if(l)f=t;else{if(p=s(t),"function"!=typeof p)throw TypeError("Target is not iterable");if(i(p)){for(d=0,v=o(t.length);v>d;d++)if(m=h?b(r(y=t[d])[0],y[1]):b(t[d]),m&&m instanceof c)return m;return new c(!1)}f=p.call(t)}g=f.next;while(!(y=g.call(f)).done)if(m=u(f,b,y.value,h),"object"==typeof m&&m&&m instanceof c)return m;return new c(!1)};h.stop=function(t){return new c(!0,t)}},"23cb":function(t,e,n){var r=n("a691"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),a=n("6eeb"),s=n("ce4e"),u=n("e893"),c=n("94ca");t.exports=function(t,e){var n,h,l,f,p,d,v=t.target,m=t.global,g=t.stat;if(h=m?r:g?r[v]||s(v,{}):(r[v]||{}).prototype,h)for(l in e){if(p=e[l],t.noTargetGet?(d=i(h,l),f=d&&d.value):f=h[l],n=c(m?l:v+(g?".":"#")+l,t.forced),!n&&void 0!==f){if(typeof p===typeof f)continue;u(p,f)}(t.sham||f&&f.sham)&&o(p,"sham",!0),a(h,l,p,t)}}},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},2444:function(t,e,n){"use strict";(function(e){var r=n("c532"),i=n("c8af"),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function s(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(t=n("b50d")),t}var u={adapter:s(),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(o)})),t.exports=u}).call(this,n("4362"))},"25a1":function(t,e,n){"use strict";var r=n("ebb5"),i=n("d58f").right,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("reduceRight",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),i=n("825a"),o=n("d039"),a=n("ad6d"),s="toString",u=RegExp.prototype,c=u[s],h=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),l=c.name!=s;(h||l)&&r(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2626:function(t,e,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),a=n("83ab"),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},"262e":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("131a");function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},2877:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var h=c.render;c.render=function(t,e){return u.call(e),h(t,e)}}else{var l=c.beforeCreate;c.beforeCreate=l?[].concat(l,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},2954:function(t,e,n){"use strict";var r=n("ebb5"),i=n("4840"),o=n("d039"),a=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod,c=[].slice,h=o((function(){new Int8Array(1).slice()}));u("slice",(function(t,e){var n=c.call(a(this),t,e),r=i(this,this.constructor),o=0,u=n.length,h=new(s(r))(u);while(u>o)h[o]=n[o++];return h}),h)},"2b0e":function(t,e,n){"use strict";(function(t){
/*!
 * Vue.js v2.6.11
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return!1===t}function s(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function u(t){return null!==t&&"object"===typeof t}var c=Object.prototype.toString;function h(t){return"[object Object]"===c.call(t)}function l(t){return"[object RegExp]"===c.call(t)}function f(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return i(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function d(t){return null==t?"":Array.isArray(t)||h(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function v(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}m("slot,component",!0);var g=m("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function _(t,e){return b.call(t,e)}function w(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var x=/-(\w)/g,E=w((function(t){return t.replace(x,(function(t,e){return e?e.toUpperCase():""}))})),S=w((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),T=/\B([A-Z])/g,M=w((function(t){return t.replace(T,"-$1").toLowerCase()}));function A(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function C(t,e){return t.bind(e)}var I=Function.prototype.bind?C:A;function N(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function R(t,e){for(var n in e)t[n]=e[n];return t}function O(t){for(var e={},n=0;n<t.length;n++)t[n]&&R(e,t[n]);return e}function P(t,e,n){}var L=function(t,e,n){return!1},D=function(t){return t};function k(t,e){if(t===e)return!0;var n=u(t),r=u(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every((function(t,n){return k(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every((function(n){return k(t[n],e[n])}))}catch(c){return!1}}function F(t,e){for(var n=0;n<t.length;n++)if(k(t[n],e))return n;return-1}function U(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var j="data-server-rendered",z=["component","directive","filter"],B=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],V={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:P,parsePlatformTagName:D,mustUseProp:L,async:!0,_lifecycleHooks:B},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function W(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var q=new RegExp("[^"+G.source+".$_\\d]");function Y(t){if(!q.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var X,K="__proto__"in{},$="undefined"!==typeof window,Q="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=Q&&WXEnvironment.platform.toLowerCase(),Z=$&&window.navigator.userAgent.toLowerCase(),tt=Z&&/msie|trident/.test(Z),et=Z&&Z.indexOf("msie 9.0")>0,nt=Z&&Z.indexOf("edge/")>0,rt=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===J),it=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),ot={}.watch,at=!1;if($)try{var st={};Object.defineProperty(st,"passive",{get:function(){at=!0}}),window.addEventListener("test-passive",null,st)}catch(Ea){}var ut=function(){return void 0===X&&(X=!$&&!Q&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),X},ct=$&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ht(t){return"function"===typeof t&&/native code/.test(t.toString())}var lt,ft="undefined"!==typeof Symbol&&ht(Symbol)&&"undefined"!==typeof Reflect&&ht(Reflect.ownKeys);lt="undefined"!==typeof Set&&ht(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var pt=P,dt=0,vt=function(){this.id=dt++,this.subs=[]};vt.prototype.addSub=function(t){this.subs.push(t)},vt.prototype.removeSub=function(t){y(this.subs,t)},vt.prototype.depend=function(){vt.target&&vt.target.addDep(this)},vt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},vt.target=null;var mt=[];function gt(t){mt.push(t),vt.target=t}function yt(){mt.pop(),vt.target=mt[mt.length-1]}var bt=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},_t={child:{configurable:!0}};_t.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,_t);var wt=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function xt(t){return new bt(void 0,void 0,void 0,String(t))}function Et(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var St=Array.prototype,Tt=Object.create(St),Mt=["push","pop","shift","unshift","splice","sort","reverse"];Mt.forEach((function(t){var e=St[t];W(Tt,t,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o}))}));var At=Object.getOwnPropertyNames(Tt),Ct=!0;function It(t){Ct=t}var Nt=function(t){this.value=t,this.dep=new vt,this.vmCount=0,W(t,"__ob__",this),Array.isArray(t)?(K?Rt(t,Tt):Ot(t,Tt,At),this.observeArray(t)):this.walk(t)};function Rt(t,e){t.__proto__=e}function Ot(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];W(t,o,e[o])}}function Pt(t,e){var n;if(u(t)&&!(t instanceof bt))return _(t,"__ob__")&&t.__ob__ instanceof Nt?n=t.__ob__:Ct&&!ut()&&(Array.isArray(t)||h(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Nt(t)),e&&n&&n.vmCount++,n}function Lt(t,e,n,r,i){var o=new vt,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=t[e]);var c=!i&&Pt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return vt.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&Ft(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!==e&&r!==r||s&&!u||(u?u.call(t,e):n=e,c=!i&&Pt(e),o.notify())}})}}function Dt(t,e,n){if(Array.isArray(t)&&f(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Lt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function kt(t,e){if(Array.isArray(t)&&f(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||_(t,e)&&(delete t[e],n&&n.dep.notify())}}function Ft(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Ft(e)}Nt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Lt(t,e[n])},Nt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Pt(t[e])};var Ut=V.optionMergeStrategies;function jt(t,e){if(!e)return t;for(var n,r,i,o=ft?Reflect.ownKeys(e):Object.keys(e),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(r=t[n],i=e[n],_(t,n)?r!==i&&h(r)&&h(i)&&jt(r,i):Dt(t,n,i));return t}function zt(t,e,n){return n?function(){var r="function"===typeof e?e.call(n,n):e,i="function"===typeof t?t.call(n,n):t;return r?jt(r,i):i}:e?t?function(){return jt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function Bt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Vt(n):n}function Vt(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function Gt(t,e,n,r){var i=Object.create(t||null);return e?R(i,e):i}Ut.data=function(t,e,n){return n?zt(t,e,n):e&&"function"!==typeof e?t:zt(t,e)},B.forEach((function(t){Ut[t]=Bt})),z.forEach((function(t){Ut[t+"s"]=Gt})),Ut.watch=function(t,e,n,r){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in R(i,t),e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Ut.props=Ut.methods=Ut.inject=Ut.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return R(i,t),e&&R(i,e),i},Ut.provide=zt;var Ht=function(t,e){return void 0===e?t:e};function Wt(t,e){var n=t.props;if(n){var r,i,o,a={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=E(i),a[o]={type:null})}else if(h(n))for(var s in n)i=n[s],o=E(s),a[o]=h(i)?i:{type:i};else 0;t.props=a}}function qt(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(h(n))for(var o in n){var a=n[o];r[o]=h(a)?R({from:o},a):{from:a}}else 0}}function Yt(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"===typeof r&&(e[n]={bind:r,update:r})}}function Xt(t,e,n){if("function"===typeof e&&(e=e.options),Wt(e,n),qt(e,n),Yt(e),!e._base&&(e.extends&&(t=Xt(t,e.extends,n)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)t=Xt(t,e.mixins[r],n);var o,a={};for(o in t)s(o);for(o in e)_(t,o)||s(o);function s(r){var i=Ut[r]||Ht;a[r]=i(t[r],e[r],n,r)}return a}function Kt(t,e,n,r){if("string"===typeof n){var i=t[e];if(_(i,n))return i[n];var o=E(n);if(_(i,o))return i[o];var a=S(o);if(_(i,a))return i[a];var s=i[n]||i[o]||i[a];return s}}function $t(t,e,n,r){var i=e[t],o=!_(n,t),a=n[t],s=te(Boolean,i.type);if(s>-1)if(o&&!_(i,"default"))a=!1;else if(""===a||a===M(t)){var u=te(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=Qt(r,i,t);var c=Ct;It(!0),Pt(a),It(c)}return a}function Qt(t,e,n){if(_(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof r&&"Function"!==Jt(e.type)?r.call(t):r}}function Jt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Zt(t,e){return Jt(t)===Jt(e)}function te(t,e){if(!Array.isArray(e))return Zt(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(Zt(e[n],t))return n;return-1}function ee(t,e,n){gt();try{if(e){var r=e;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,t,e,n);if(a)return}catch(Ea){re(Ea,r,"errorCaptured hook")}}}re(t,e,n)}finally{yt()}}function ne(t,e,n,r,i){var o;try{o=n?t.apply(e,n):t.call(e),o&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(t){return ee(t,r,i+" (Promise/async)")})),o._handled=!0)}catch(Ea){ee(Ea,r,i)}return o}function re(t,e,n){if(V.errorHandler)try{return V.errorHandler.call(null,t,e,n)}catch(Ea){Ea!==t&&ie(Ea,null,"config.errorHandler")}ie(t,e,n)}function ie(t,e,n){if(!$&&!Q||"undefined"===typeof console)throw t;console.error(t)}var oe,ae=!1,se=[],ue=!1;function ce(){ue=!1;var t=se.slice(0);se.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&ht(Promise)){var he=Promise.resolve();oe=function(){he.then(ce),rt&&setTimeout(P)},ae=!0}else if(tt||"undefined"===typeof MutationObserver||!ht(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())oe="undefined"!==typeof setImmediate&&ht(setImmediate)?function(){setImmediate(ce)}:function(){setTimeout(ce,0)};else{var le=1,fe=new MutationObserver(ce),pe=document.createTextNode(String(le));fe.observe(pe,{characterData:!0}),oe=function(){le=(le+1)%2,pe.data=String(le)},ae=!0}function de(t,e){var n;if(se.push((function(){if(t)try{t.call(e)}catch(Ea){ee(Ea,e,"nextTick")}else n&&n(e)})),ue||(ue=!0,oe()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}var ve=new lt;function me(t){ge(t,ve),ve.clear()}function ge(t,e){var n,r,i=Array.isArray(t);if(!(!i&&!u(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i){n=t.length;while(n--)ge(t[n],e)}else{r=Object.keys(t),n=r.length;while(n--)ge(t[r[n]],e)}}}var ye=w((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}));function be(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return ne(r,null,arguments,e,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)ne(i[o],null,t,e,"v-on handler")}return n.fns=t,n}function _e(t,e,n,i,a,s){var u,c,h,l;for(u in t)c=t[u],h=e[u],l=ye(u),r(c)||(r(h)?(r(c.fns)&&(c=t[u]=be(c,s)),o(l.once)&&(c=t[u]=a(l.name,c,l.capture)),n(l.name,c,l.capture,l.passive,l.params)):c!==h&&(h.fns=c,t[u]=h));for(u in e)r(t[u])&&(l=ye(u),i(l.name,e[u],l.capture))}function we(t,e,n){var a;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function u(){n.apply(this,arguments),y(a.fns,u)}r(s)?a=be([u]):i(s.fns)&&o(s.merged)?(a=s,a.fns.push(u)):a=be([s,u]),a.merged=!0,t[e]=a}function xe(t,e,n){var o=e.options.props;if(!r(o)){var a={},s=t.attrs,u=t.props;if(i(s)||i(u))for(var c in o){var h=M(c);Ee(a,u,c,h,!0)||Ee(a,s,c,h,!1)}return a}}function Ee(t,e,n,r,o){if(i(e)){if(_(e,n))return t[n]=e[n],o||delete e[n],!0;if(_(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function Se(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Te(t){return s(t)?[xt(t)]:Array.isArray(t)?Ae(t):void 0}function Me(t){return i(t)&&i(t.text)&&a(t.isComment)}function Ae(t,e){var n,a,u,c,h=[];for(n=0;n<t.length;n++)a=t[n],r(a)||"boolean"===typeof a||(u=h.length-1,c=h[u],Array.isArray(a)?a.length>0&&(a=Ae(a,(e||"")+"_"+n),Me(a[0])&&Me(c)&&(h[u]=xt(c.text+a[0].text),a.shift()),h.push.apply(h,a)):s(a)?Me(c)?h[u]=xt(c.text+a):""!==a&&h.push(xt(a)):Me(a)&&Me(c)?h[u]=xt(c.text+a.text):(o(t._isVList)&&i(a.tag)&&r(a.key)&&i(e)&&(a.key="__vlist"+e+"_"+n+"__"),h.push(a)));return h}function Ce(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function Ie(t){var e=Ne(t.$options.inject,t);e&&(It(!1),Object.keys(e).forEach((function(n){Lt(t,n,e[n])})),It(!0))}function Ne(t,e){if(t){for(var n=Object.create(null),r=ft?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=t[o].from,s=e;while(s){if(s._provided&&_(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var u=t[o].default;n[o]="function"===typeof u?u.call(e):u}else 0}}return n}}function Re(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(Oe)&&delete n[c];return n}function Oe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Pe(t,e,r){var i,o=Object.keys(e).length>0,a=t?!!t.$stable:!o,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&r&&r!==n&&s===r.$key&&!o&&!r.$hasNormal)return r;for(var u in i={},t)t[u]&&"$"!==u[0]&&(i[u]=Le(e,u,t[u]))}else i={};for(var c in e)c in i||(i[c]=De(e,c));return t&&Object.isExtensible(t)&&(t._normalized=i),W(i,"$stable",a),W(i,"$key",s),W(i,"$hasNormal",o),i}function Le(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});return t=t&&"object"===typeof t&&!Array.isArray(t)?[t]:Te(t),t&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function De(t,e){return function(){return t[e]}}function ke(t,e){var n,r,o,a,s;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);else if("number"===typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(u(t))if(ft&&t[Symbol.iterator]){n=[];var c=t[Symbol.iterator](),h=c.next();while(!h.done)n.push(e(h.value,n.length)),h=c.next()}else for(a=Object.keys(t),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=e(t[s],s,r);return i(n)||(n=[]),n._isVList=!0,n}function Fe(t,e,n,r){var i,o=this.$scopedSlots[t];o?(n=n||{},r&&(n=R(R({},r),n)),i=o(n)||e):i=this.$slots[t]||e;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function Ue(t){return Kt(this.$options,"filters",t,!0)||D}function je(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function ze(t,e,n,r,i){var o=V.keyCodes[e]||n;return i&&r&&!V.keyCodes[e]?je(i,r):o?je(o,t):r?M(r)!==e:void 0}function Be(t,e,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=O(n));var a=function(a){if("class"===a||"style"===a||g(a))o=t;else{var s=t.attrs&&t.attrs.type;o=r||V.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=E(a),c=M(a);if(!(u in o)&&!(c in o)&&(o[a]=n[a],i)){var h=t.on||(t.on={});h["update:"+a]=function(t){n[a]=t}}};for(var s in n)a(s)}else;return t}function Ve(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),He(r,"__static__"+t,!1)),r}function Ge(t,e,n){return He(t,"__once__"+e+(n?"_"+n:""),!0),t}function He(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&We(t[r],e+"_"+r,n);else We(t,e,n)}function We(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function qe(t,e){if(e)if(h(e)){var n=t.on=t.on?R({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function Ye(t,e,n,r){e=e||{$stable:!n};for(var i=0;i<t.length;i++){var o=t[i];Array.isArray(o)?Ye(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Xe(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"===typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Ke(t,e){return"string"===typeof t?e+t:t}function $e(t){t._o=Ge,t._n=v,t._s=d,t._l=ke,t._t=Fe,t._q=k,t._i=F,t._m=Ve,t._f=Ue,t._k=ze,t._b=Be,t._v=xt,t._e=wt,t._u=Ye,t._g=qe,t._d=Xe,t._p=Ke}function Qe(t,e,r,i,a){var s,u=this,c=a.options;_(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var h=o(c._compiled),l=!h;this.data=t,this.props=e,this.children=r,this.parent=i,this.listeners=t.on||n,this.injections=Ne(c.inject,i),this.slots=function(){return u.$slots||Pe(t.scopedSlots,u.$slots=Re(r,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Pe(t.scopedSlots,this.slots())}}),h&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=Pe(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(t,e,n,r){var o=ln(s,t,e,n,r,l);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return ln(s,t,e,n,r,l)}}function Je(t,e,r,o,a){var s=t.options,u={},c=s.props;if(i(c))for(var h in c)u[h]=$t(h,c,e||n);else i(r.attrs)&&tn(u,r.attrs),i(r.props)&&tn(u,r.props);var l=new Qe(r,u,a,o,t),f=s.render.call(null,l._c,l);if(f instanceof bt)return Ze(f,r,l.parent,s,l);if(Array.isArray(f)){for(var p=Te(f)||[],d=new Array(p.length),v=0;v<p.length;v++)d[v]=Ze(p[v],r,l.parent,s,l);return d}}function Ze(t,e,n,r,i){var o=Et(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function tn(t,e){for(var n in e)t[E(n)]=e[n]}$e(Qe.prototype);var en={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;en.prepatch(n,n)}else{var r=t.componentInstance=on(t,Nn);r.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;Dn(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,jn(n,"mounted")),t.data.keepAlive&&(e._isMounted?Jn(n):Fn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Un(e,!0):e.$destroy())}},nn=Object.keys(en);function rn(t,e,n,a,s){if(!r(t)){var c=n.$options._base;if(u(t)&&(t=c.extend(t)),"function"===typeof t){var h;if(r(t.cid)&&(h=t,t=wn(h,c),void 0===t))return _n(h,e,n,a,s);e=e||{},wr(t),i(e.model)&&un(t.options,e);var l=xe(e,t,s);if(o(t.options.functional))return Je(t,l,e,n,a);var f=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var p=e.slot;e={},p&&(e.slot=p)}an(e);var d=t.options.name||s,v=new bt("vue-component-"+t.cid+(d?"-"+d:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:l,listeners:f,tag:s,children:a},h);return v}}}function on(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}function an(t){for(var e=t.hook||(t.hook={}),n=0;n<nn.length;n++){var r=nn[n],i=e[r],o=en[r];i===o||i&&i._merged||(e[r]=i?sn(o,i):o)}}function sn(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function un(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),a=o[r],s=e.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}var cn=1,hn=2;function ln(t,e,n,r,i,a){return(Array.isArray(n)||s(n))&&(i=r,r=n,n=void 0),o(a)&&(i=hn),fn(t,e,n,r,i)}function fn(t,e,n,r,o){if(i(n)&&i(n.__ob__))return wt();if(i(n)&&i(n.is)&&(e=n.is),!e)return wt();var a,s,u;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===hn?r=Te(r):o===cn&&(r=Se(r)),"string"===typeof e)?(s=t.$vnode&&t.$vnode.ns||V.getTagNamespace(e),a=V.isReservedTag(e)?new bt(V.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!i(u=Kt(t.$options,"components",e))?new bt(e,n,r,void 0,void 0,t):rn(u,n,t,r,e)):a=rn(e,n,t,r);return Array.isArray(a)?a:i(a)?(i(s)&&pn(a,s),i(n)&&dn(n),a):wt()}function pn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var a=0,s=t.children.length;a<s;a++){var u=t.children[a];i(u.tag)&&(r(u.ns)||o(n)&&"svg"!==u.tag)&&pn(u,e,n)}}function dn(t){u(t.style)&&me(t.style),u(t.class)&&me(t.class)}function vn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,r=t.$vnode=e._parentVnode,i=r&&r.context;t.$slots=Re(e._renderChildren,i),t.$scopedSlots=n,t._c=function(e,n,r,i){return ln(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return ln(t,e,n,r,i,!0)};var o=r&&r.data;Lt(t,"$attrs",o&&o.attrs||n,null,!0),Lt(t,"$listeners",e._parentListeners||n,null,!0)}var mn,gn=null;function yn(t){$e(t.prototype),t.prototype.$nextTick=function(t){return de(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,i=n._parentVnode;i&&(e.$scopedSlots=Pe(i.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=i;try{gn=e,t=r.call(e._renderProxy,e.$createElement)}catch(Ea){ee(Ea,e,"render"),t=e._vnode}finally{gn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=wt()),t.parent=i,t}}function bn(t,e){return(t.__esModule||ft&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function _n(t,e,n,r,i){var o=wt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}function wn(t,e){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var n=gn;if(n&&i(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(n&&!i(t.owners)){var a=t.owners=[n],s=!0,c=null,h=null;n.$on("hook:destroyed",(function(){return y(a,n)}));var l=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==h&&(clearTimeout(h),h=null))},f=U((function(n){t.resolved=bn(n,e),s?a.length=0:l(!0)})),d=U((function(e){i(t.errorComp)&&(t.error=!0,l(!0))})),v=t(f,d);return u(v)&&(p(v)?r(t.resolved)&&v.then(f,d):p(v.component)&&(v.component.then(f,d),i(v.error)&&(t.errorComp=bn(v.error,e)),i(v.loading)&&(t.loadingComp=bn(v.loading,e),0===v.delay?t.loading=!0:c=setTimeout((function(){c=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,l(!1))}),v.delay||200)),i(v.timeout)&&(h=setTimeout((function(){h=null,r(t.resolved)&&d(null)}),v.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}function xn(t){return t.isComment&&t.asyncFactory}function En(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||xn(n)))return n}}function Sn(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Cn(t,e)}function Tn(t,e){mn.$on(t,e)}function Mn(t,e){mn.$off(t,e)}function An(t,e){var n=mn;return function r(){var i=e.apply(null,arguments);null!==i&&n.$off(t,r)}}function Cn(t,e,n){mn=t,_e(e,n||{},Tn,Mn,An,t),mn=void 0}function In(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r.$on(t[i],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)n.$off(t[r],e);return n}var o,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;var s=a.length;while(s--)if(o=a[s],o===e||o.fn===e){a.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?N(n):n;for(var r=N(arguments,1),i='event handler for "'+t+'"',o=0,a=n.length;o<a;o++)ne(n[o],e,r,e,i)}return e}}var Nn=null;function Rn(t){var e=Nn;return Nn=t,function(){Nn=e}}function On(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Pn(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,o=Rn(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){jn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),jn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Ln(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=wt),jn(t,"beforeMount"),r=function(){t._update(t._render(),n)},new nr(t,r,P,{before:function(){t._isMounted&&!t._isDestroyed&&jn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,jn(t,"mounted")),t}function Dn(t,e,r,i,o){var a=i.data.scopedSlots,s=t.$scopedSlots,u=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key),c=!!(o||t.$options._renderChildren||u);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data.attrs||n,t.$listeners=r||n,e&&t.$options.props){It(!1);for(var h=t._props,l=t.$options._propKeys||[],f=0;f<l.length;f++){var p=l[f],d=t.$options.props;h[p]=$t(p,d,e,t)}It(!0),t.$options.propsData=e}r=r||n;var v=t.$options._parentListeners;t.$options._parentListeners=r,Cn(t,r,v),c&&(t.$slots=Re(o,i.context),t.$forceUpdate())}function kn(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Fn(t,e){if(e){if(t._directInactive=!1,kn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Fn(t.$children[n]);jn(t,"activated")}}function Un(t,e){if((!e||(t._directInactive=!0,!kn(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Un(t.$children[n]);jn(t,"deactivated")}}function jn(t,e){gt();var n=t.$options[e],r=e+" hook";if(n)for(var i=0,o=n.length;i<o;i++)ne(n[i],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),yt()}var zn=[],Bn=[],Vn={},Gn=!1,Hn=!1,Wn=0;function qn(){Wn=zn.length=Bn.length=0,Vn={},Gn=Hn=!1}var Yn=0,Xn=Date.now;if($&&!tt){var Kn=window.performance;Kn&&"function"===typeof Kn.now&&Xn()>document.createEvent("Event").timeStamp&&(Xn=function(){return Kn.now()})}function $n(){var t,e;for(Yn=Xn(),Hn=!0,zn.sort((function(t,e){return t.id-e.id})),Wn=0;Wn<zn.length;Wn++)t=zn[Wn],t.before&&t.before(),e=t.id,Vn[e]=null,t.run();var n=Bn.slice(),r=zn.slice();qn(),Zn(n),Qn(r),ct&&V.devtools&&ct.emit("flush")}function Qn(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&jn(r,"updated")}}function Jn(t){t._inactive=!1,Bn.push(t)}function Zn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Fn(t[e],!0)}function tr(t){var e=t.id;if(null==Vn[e]){if(Vn[e]=!0,Hn){var n=zn.length-1;while(n>Wn&&zn[n].id>t.id)n--;zn.splice(n+1,0,t)}else zn.push(t);Gn||(Gn=!0,de($n))}}var er=0,nr=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++er,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new lt,this.newDepIds=new lt,this.expression="","function"===typeof e?this.getter=e:(this.getter=Y(e),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()};nr.prototype.get=function(){var t;gt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(Ea){if(!this.user)throw Ea;ee(Ea,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&me(t),yt(),this.cleanupDeps()}return t},nr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},nr.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},nr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tr(this)},nr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(Ea){ee(Ea,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},nr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nr.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},nr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var rr={enumerable:!0,configurable:!0,get:P,set:P};function ir(t,e,n){rr.get=function(){return this[e][n]},rr.set=function(t){this[e][n]=t},Object.defineProperty(t,n,rr)}function or(t){t._watchers=[];var e=t.$options;e.props&&ar(t,e.props),e.methods&&dr(t,e.methods),e.data?sr(t):Pt(t._data={},!0),e.computed&&hr(t,e.computed),e.watch&&e.watch!==ot&&vr(t,e.watch)}function ar(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;o||It(!1);var a=function(o){i.push(o);var a=$t(o,e,n,t);Lt(r,o,a),o in t||ir(t,"_props",o)};for(var s in e)a(s);It(!0)}function sr(t){var e=t.$options.data;e=t._data="function"===typeof e?ur(e,t):e||{},h(e)||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);while(i--){var o=n[i];0,r&&_(r,o)||H(o)||ir(t,"_data",o)}Pt(e,!0)}function ur(t,e){gt();try{return t.call(e,e)}catch(Ea){return ee(Ea,e,"data()"),{}}finally{yt()}}var cr={lazy:!0};function hr(t,e){var n=t._computedWatchers=Object.create(null),r=ut();for(var i in e){var o=e[i],a="function"===typeof o?o:o.get;0,r||(n[i]=new nr(t,a||P,P,cr)),i in t||lr(t,i,o)}}function lr(t,e,n){var r=!ut();"function"===typeof n?(rr.get=r?fr(e):pr(n),rr.set=P):(rr.get=n.get?r&&!1!==n.cache?fr(e):pr(n.get):P,rr.set=n.set||P),Object.defineProperty(t,e,rr)}function fr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),vt.target&&e.depend(),e.value}}function pr(t){return function(){return t.call(this,this)}}function dr(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?P:I(e[n],t)}function vr(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)mr(t,n,r[i]);else mr(t,n,r)}}function mr(t,e,n,r){return h(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function gr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Dt,t.prototype.$delete=kt,t.prototype.$watch=function(t,e,n){var r=this;if(h(e))return mr(r,t,e,n);n=n||{},n.user=!0;var i=new nr(r,t,e,n);if(n.immediate)try{e.call(r,i.value)}catch(o){ee(o,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var yr=0;function br(t){t.prototype._init=function(t){var e=this;e._uid=yr++,e._isVue=!0,t&&t._isComponent?_r(e,t):e.$options=Xt(wr(e.constructor),t||{},e),e._renderProxy=e,e._self=e,On(e),Sn(e),vn(e),jn(e,"beforeCreate"),Ie(e),or(e),Ce(e),jn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function _r(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function wr(t){var e=t.options;if(t.super){var n=wr(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var i=xr(t);i&&R(t.extendOptions,i),e=t.options=Xt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function xr(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}function Er(t){this._init(t)}function Sr(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=N(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Tr(t){t.mixin=function(t){return this.options=Xt(this.options,t),this}}function Mr(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name;var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=Xt(n.options,t),a["super"]=n,a.options.props&&Ar(a),a.options.computed&&Cr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,z.forEach((function(t){a[t]=n[t]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=R({},a.options),i[r]=a,a}}function Ar(t){var e=t.options.props;for(var n in e)ir(t.prototype,"_props",n)}function Cr(t){var e=t.options.computed;for(var n in e)lr(t.prototype,n,e[n])}function Ir(t){z.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&h(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}function Nr(t){return t&&(t.Ctor.options.name||t.tag)}function Rr(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!l(t)&&t.test(e)}function Or(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=Nr(a.componentOptions);s&&!e(s)&&Pr(n,o,r,i)}}}function Pr(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,y(n,e)}br(Er),gr(Er),In(Er),Pn(Er),yn(Er);var Lr=[String,RegExp,Array],Dr={name:"keep-alive",abstract:!0,props:{include:Lr,exclude:Lr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Pr(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",(function(e){Or(t,(function(t){return Rr(e,t)}))})),this.$watch("exclude",(function(e){Or(t,(function(t){return!Rr(e,t)}))}))},render:function(){var t=this.$slots.default,e=En(t),n=e&&e.componentOptions;if(n){var r=Nr(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!Rr(o,r))||a&&r&&Rr(a,r))return e;var s=this,u=s.cache,c=s.keys,h=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[h]?(e.componentInstance=u[h].componentInstance,y(c,h),c.push(h)):(u[h]=e,c.push(h),this.max&&c.length>parseInt(this.max)&&Pr(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},kr={KeepAlive:Dr};function Fr(t){var e={get:function(){return V}};Object.defineProperty(t,"config",e),t.util={warn:pt,extend:R,mergeOptions:Xt,defineReactive:Lt},t.set=Dt,t.delete=kt,t.nextTick=de,t.observable=function(t){return Pt(t),t},t.options=Object.create(null),z.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,R(t.options.components,kr),Sr(t),Tr(t),Mr(t),Ir(t)}Fr(Er),Object.defineProperty(Er.prototype,"$isServer",{get:ut}),Object.defineProperty(Er.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Er,"FunctionalRenderContext",{value:Qe}),Er.version="2.6.11";var Ur=m("style,class"),jr=m("input,textarea,option,select,progress"),zr=function(t,e,n){return"value"===n&&jr(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Br=m("contenteditable,draggable,spellcheck"),Vr=m("events,caret,typing,plaintext-only"),Gr=function(t,e){return Xr(e)||"false"===e?"false":"contenteditable"===t&&Vr(e)?e:"true"},Hr=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Wr="http://www.w3.org/1999/xlink",qr=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Yr=function(t){return qr(t)?t.slice(6,t.length):""},Xr=function(t){return null==t||!1===t};function Kr(t){var e=t.data,n=t,r=t;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(e=$r(r.data,e));while(i(n=n.parent))n&&n.data&&(e=$r(e,n.data));return Qr(e.staticClass,e.class)}function $r(t,e){return{staticClass:Jr(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Qr(t,e){return i(t)||i(e)?Jr(t,Zr(e)):""}function Jr(t,e){return t?e?t+" "+e:t:e||""}function Zr(t){return Array.isArray(t)?ti(t):u(t)?ei(t):"string"===typeof t?t:""}function ti(t){for(var e,n="",r=0,o=t.length;r<o;r++)i(e=Zr(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function ei(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var ni={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ri=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ii=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),oi=function(t){return ri(t)||ii(t)};function ai(t){return ii(t)?"svg":"math"===t?"math":void 0}var si=Object.create(null);function ui(t){if(!$)return!0;if(oi(t))return!1;if(t=t.toLowerCase(),null!=si[t])return si[t];var e=document.createElement(t);return t.indexOf("-")>-1?si[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:si[t]=/HTMLUnknownElement/.test(e.toString())}var ci=m("text,number,password,search,email,tel,url");function hi(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function li(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function fi(t,e){return document.createElementNS(ni[t],e)}function pi(t){return document.createTextNode(t)}function di(t){return document.createComment(t)}function vi(t,e,n){t.insertBefore(e,n)}function mi(t,e){t.removeChild(e)}function gi(t,e){t.appendChild(e)}function yi(t){return t.parentNode}function bi(t){return t.nextSibling}function _i(t){return t.tagName}function wi(t,e){t.textContent=e}function xi(t,e){t.setAttribute(e,"")}var Ei=Object.freeze({createElement:li,createElementNS:fi,createTextNode:pi,createComment:di,insertBefore:vi,removeChild:mi,appendChild:gi,parentNode:yi,nextSibling:bi,tagName:_i,setTextContent:wi,setStyleScope:xi}),Si={create:function(t,e){Ti(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Ti(t,!0),Ti(e))},destroy:function(t){Ti(t,!0)}};function Ti(t,e){var n=t.data.ref;if(i(n)){var r=t.context,o=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[n])?y(a[n],o):a[n]===o&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var Mi=new bt("",{},[]),Ai=["create","activate","update","remove","destroy"];function Ci(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&Ii(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function Ii(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,o=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===o||ci(r)&&ci(o)}function Ni(t,e,n){var r,o,a={};for(r=e;r<=n;++r)o=t[r].key,i(o)&&(a[o]=r);return a}function Ri(t){var e,n,a={},u=t.modules,c=t.nodeOps;for(e=0;e<Ai.length;++e)for(a[Ai[e]]=[],n=0;n<u.length;++n)i(u[n][Ai[e]])&&a[Ai[e]].push(u[n][Ai[e]]);function h(t){return new bt(c.tagName(t).toLowerCase(),{},[],void 0,t)}function l(t,e){function n(){0===--n.listeners&&f(t)}return n.listeners=e,n}function f(t){var e=c.parentNode(t);i(e)&&c.removeChild(e,t)}function p(t,e,n,r,a,s,u){if(i(t.elm)&&i(s)&&(t=s[u]=Et(t)),t.isRootInsert=!a,!d(t,e,n,r)){var h=t.data,l=t.children,f=t.tag;i(f)?(t.elm=t.ns?c.createElementNS(t.ns,f):c.createElement(f,t),x(t),b(t,l,e),i(h)&&w(t,e),y(n,t.elm,r)):o(t.isComment)?(t.elm=c.createComment(t.text),y(n,t.elm,r)):(t.elm=c.createTextNode(t.text),y(n,t.elm,r))}}function d(t,e,n,r){var a=t.data;if(i(a)){var s=i(t.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(t,!1),i(t.componentInstance))return v(t,e),y(n,t.elm,r),o(s)&&g(t,e,n,r),!0}}function v(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,_(t)?(w(t,e),x(t)):(Ti(t),e.push(t))}function g(t,e,n,r){var o,s=t;while(s.componentInstance)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<a.activate.length;++o)a.activate[o](Mi,s);e.push(s);break}y(n,t.elm,r)}function y(t,e,n){i(t)&&(i(n)?c.parentNode(n)===t&&c.insertBefore(t,e,n):c.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)p(e[r],n,t.elm,null,!0,e,r)}else s(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function _(t){while(t.componentInstance)t=t.componentInstance._vnode;return i(t.tag)}function w(t,n){for(var r=0;r<a.create.length;++r)a.create[r](Mi,t);e=t.data.hook,i(e)&&(i(e.create)&&e.create(Mi,t),i(e.insert)&&n.push(t))}function x(t){var e;if(i(e=t.fnScopeId))c.setStyleScope(t.elm,e);else{var n=t;while(n)i(e=n.context)&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),n=n.parent}i(e=Nn)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function E(t,e,n,r,i,o){for(;r<=i;++r)p(n[r],o,t,e,!1,n,r)}function S(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)S(t.children[n])}function T(t,e,n){for(;e<=n;++e){var r=t[e];i(r)&&(i(r.tag)?(M(r),S(r)):f(r.elm))}}function M(t,e){if(i(e)||i(t.data)){var n,r=a.remove.length+1;for(i(e)?e.listeners+=r:e=l(t.elm,r),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&M(n,e),n=0;n<a.remove.length;++n)a.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else f(t.elm)}function A(t,e,n,o,a){var s,u,h,l,f=0,d=0,v=e.length-1,m=e[0],g=e[v],y=n.length-1,b=n[0],_=n[y],w=!a;while(f<=v&&d<=y)r(m)?m=e[++f]:r(g)?g=e[--v]:Ci(m,b)?(I(m,b,o,n,d),m=e[++f],b=n[++d]):Ci(g,_)?(I(g,_,o,n,y),g=e[--v],_=n[--y]):Ci(m,_)?(I(m,_,o,n,y),w&&c.insertBefore(t,m.elm,c.nextSibling(g.elm)),m=e[++f],_=n[--y]):Ci(g,b)?(I(g,b,o,n,d),w&&c.insertBefore(t,g.elm,m.elm),g=e[--v],b=n[++d]):(r(s)&&(s=Ni(e,f,v)),u=i(b.key)?s[b.key]:C(b,e,f,v),r(u)?p(b,o,t,m.elm,!1,n,d):(h=e[u],Ci(h,b)?(I(h,b,o,n,d),e[u]=void 0,w&&c.insertBefore(t,h.elm,m.elm)):p(b,o,t,m.elm,!1,n,d)),b=n[++d]);f>v?(l=r(n[y+1])?null:n[y+1].elm,E(t,l,n,d,y,o)):d>y&&T(e,f,v)}function C(t,e,n,r){for(var o=n;o<r;o++){var a=e[o];if(i(a)&&Ci(t,a))return o}}function I(t,e,n,s,u,h){if(t!==e){i(e.elm)&&i(s)&&(e=s[u]=Et(e));var l=e.elm=t.elm;if(o(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?O(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var f,p=e.data;i(p)&&i(f=p.hook)&&i(f=f.prepatch)&&f(t,e);var d=t.children,v=e.children;if(i(p)&&_(e)){for(f=0;f<a.update.length;++f)a.update[f](t,e);i(f=p.hook)&&i(f=f.update)&&f(t,e)}r(e.text)?i(d)&&i(v)?d!==v&&A(l,d,v,n,h):i(v)?(i(t.text)&&c.setTextContent(l,""),E(l,null,v,0,v.length-1,n)):i(d)?T(d,0,d.length-1):i(t.text)&&c.setTextContent(l,""):t.text!==e.text&&c.setTextContent(l,e.text),i(p)&&i(f=p.hook)&&i(f=f.postpatch)&&f(t,e)}}}function N(t,e,n){if(o(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var R=m("attrs,class,staticClass,staticStyle,key");function O(t,e,n,r){var a,s=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(a=u.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return v(e,n),!0;if(i(s)){if(i(c))if(t.hasChildNodes())if(i(a=u)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var h=!0,l=t.firstChild,f=0;f<c.length;f++){if(!l||!O(l,c[f],n,r)){h=!1;break}l=l.nextSibling}if(!h||l)return!1}else b(e,c,n);if(i(u)){var p=!1;for(var d in u)if(!R(d)){p=!0,w(e,n);break}!p&&u["class"]&&me(u["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s){if(!r(e)){var u=!1,l=[];if(r(t))u=!0,p(e,l);else{var f=i(t.nodeType);if(!f&&Ci(t,e))I(t,e,l,null,null,s);else{if(f){if(1===t.nodeType&&t.hasAttribute(j)&&(t.removeAttribute(j),n=!0),o(n)&&O(t,e,l))return N(e,l,!0),t;t=h(t)}var d=t.elm,v=c.parentNode(d);if(p(e,l,d._leaveCb?null:v,c.nextSibling(d)),i(e.parent)){var m=e.parent,g=_(e);while(m){for(var y=0;y<a.destroy.length;++y)a.destroy[y](m);if(m.elm=e.elm,g){for(var b=0;b<a.create.length;++b)a.create[b](Mi,m);var w=m.data.hook.insert;if(w.merged)for(var x=1;x<w.fns.length;x++)w.fns[x]()}else Ti(m);m=m.parent}}i(v)?T([t],0,0):i(t.tag)&&S(t)}}return N(e,l,u),e.elm}i(t)&&S(t)}}var Oi={create:Pi,update:Pi,destroy:function(t){Pi(t,Mi)}};function Pi(t,e){(t.data.directives||e.data.directives)&&Li(t,e)}function Li(t,e){var n,r,i,o=t===Mi,a=e===Mi,s=ki(t.data.directives,t.context),u=ki(e.data.directives,e.context),c=[],h=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Ui(i,"update",e,t),i.def&&i.def.componentUpdated&&h.push(i)):(Ui(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var l=function(){for(var n=0;n<c.length;n++)Ui(c[n],"inserted",e,t)};o?we(e,"insert",l):l()}if(h.length&&we(e,"postpatch",(function(){for(var n=0;n<h.length;n++)Ui(h[n],"componentUpdated",e,t)})),!o)for(n in s)u[n]||Ui(s[n],"unbind",t,t,a)}var Di=Object.create(null);function ki(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)r=t[n],r.modifiers||(r.modifiers=Di),i[Fi(r)]=r,r.def=Kt(e.$options,"directives",r.name,!0);return i}function Fi(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Ui(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(Ea){ee(Ea,n.context,"directive "+t.name+" "+e+" hook")}}var ji=[Si,Oi];function zi(t,e){var n=e.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(t.data.attrs)||!r(e.data.attrs))){var o,a,s,u=e.elm,c=t.data.attrs||{},h=e.data.attrs||{};for(o in i(h.__ob__)&&(h=e.data.attrs=R({},h)),h)a=h[o],s=c[o],s!==a&&Bi(u,o,a);for(o in(tt||nt)&&h.value!==c.value&&Bi(u,"value",h.value),c)r(h[o])&&(qr(o)?u.removeAttributeNS(Wr,Yr(o)):Br(o)||u.removeAttribute(o))}}function Bi(t,e,n){t.tagName.indexOf("-")>-1?Vi(t,e,n):Hr(e)?Xr(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Br(e)?t.setAttribute(e,Gr(e,n)):qr(e)?Xr(n)?t.removeAttributeNS(Wr,Yr(e)):t.setAttributeNS(Wr,e,n):Vi(t,e,n)}function Vi(t,e,n){if(Xr(n))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var Gi={create:zi,update:zi};function Hi(t,e){var n=e.elm,o=e.data,a=t.data;if(!(r(o.staticClass)&&r(o.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=Kr(e),u=n._transitionClasses;i(u)&&(s=Jr(s,Zr(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Wi,qi={create:Hi,update:Hi},Yi="__r",Xi="__c";function Ki(t){if(i(t[Yi])){var e=tt?"change":"input";t[e]=[].concat(t[Yi],t[e]||[]),delete t[Yi]}i(t[Xi])&&(t.change=[].concat(t[Xi],t.change||[]),delete t[Xi])}function $i(t,e,n){var r=Wi;return function i(){var o=e.apply(null,arguments);null!==o&&Zi(t,i,n,r)}}var Qi=ae&&!(it&&Number(it[1])<=53);function Ji(t,e,n,r){if(Qi){var i=Yn,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Wi.addEventListener(t,e,at?{capture:n,passive:r}:n)}function Zi(t,e,n,r){(r||Wi).removeEventListener(t,e._wrapper||e,n)}function to(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};Wi=e.elm,Ki(n),_e(n,i,Ji,Zi,$i,e.context),Wi=void 0}}var eo,no={create:to,update:to};function ro(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,o,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};for(n in i(u.__ob__)&&(u=e.data.domProps=R({},u)),s)n in u||(a[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var c=r(o)?"":String(o);io(a,c)&&(a.value=c)}else if("innerHTML"===n&&ii(a.tagName)&&r(a.innerHTML)){eo=eo||document.createElement("div"),eo.innerHTML="<svg>"+o+"</svg>";var h=eo.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(h.firstChild)a.appendChild(h.firstChild)}else if(o!==s[n])try{a[n]=o}catch(Ea){}}}}function io(t,e){return!t.composing&&("OPTION"===t.tagName||oo(t,e)||ao(t,e))}function oo(t,e){var n=!0;try{n=document.activeElement!==t}catch(Ea){}return n&&t.value!==e}function ao(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.number)return v(n)!==v(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}var so={create:ro,update:ro},uo=w((function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach((function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function co(t){var e=ho(t.style);return t.staticStyle?R(t.staticStyle,e):e}function ho(t){return Array.isArray(t)?O(t):"string"===typeof t?uo(t):t}function lo(t,e){var n,r={};if(e){var i=t;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=co(i.data))&&R(r,n)}(n=co(t.data))&&R(r,n);var o=t;while(o=o.parent)o.data&&(n=co(o.data))&&R(r,n);return r}var fo,po=/^--/,vo=/\s*!important$/,mo=function(t,e,n){if(po.test(e))t.style.setProperty(e,n);else if(vo.test(n))t.style.setProperty(M(e),n.replace(vo,""),"important");else{var r=yo(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},go=["Webkit","Moz","ms"],yo=w((function(t){if(fo=fo||document.createElement("div").style,t=E(t),"filter"!==t&&t in fo)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<go.length;n++){var r=go[n]+e;if(r in fo)return r}}));function bo(t,e){var n=e.data,o=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var a,s,u=e.elm,c=o.staticStyle,h=o.normalizedStyle||o.style||{},l=c||h,f=ho(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?R({},f):f;var p=lo(e,!0);for(s in l)r(p[s])&&mo(u,s,"");for(s in p)a=p[s],a!==l[s]&&mo(u,s,null==a?"":a)}}var _o={create:bo,update:bo},wo=/\s+/;function xo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Eo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function So(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&R(e,To(t.name||"v")),R(e,t),e}return"string"===typeof t?To(t):void 0}}var To=w((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Mo=$&&!et,Ao="transition",Co="animation",Io="transition",No="transitionend",Ro="animation",Oo="animationend";Mo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Io="WebkitTransition",No="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ro="WebkitAnimation",Oo="webkitAnimationEnd"));var Po=$?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Lo(t){Po((function(){Po(t)}))}function Do(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),xo(t,e))}function ko(t,e){t._transitionClasses&&y(t._transitionClasses,e),Eo(t,e)}function Fo(t,e,n){var r=jo(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===Ao?No:Oo,u=0,c=function(){t.removeEventListener(s,h),n()},h=function(e){e.target===t&&++u>=a&&c()};setTimeout((function(){u<a&&c()}),o+1),t.addEventListener(s,h)}var Uo=/\b(transform|all)(,|$)/;function jo(t,e){var n,r=window.getComputedStyle(t),i=(r[Io+"Delay"]||"").split(", "),o=(r[Io+"Duration"]||"").split(", "),a=zo(i,o),s=(r[Ro+"Delay"]||"").split(", "),u=(r[Ro+"Duration"]||"").split(", "),c=zo(s,u),h=0,l=0;e===Ao?a>0&&(n=Ao,h=a,l=o.length):e===Co?c>0&&(n=Co,h=c,l=u.length):(h=Math.max(a,c),n=h>0?a>c?Ao:Co:null,l=n?n===Ao?o.length:u.length:0);var f=n===Ao&&Uo.test(r[Io+"Property"]);return{type:n,timeout:h,propCount:l,hasTransform:f}}function zo(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Bo(e)+Bo(t[n])})))}function Bo(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Vo(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=So(t.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var a=o.css,s=o.type,c=o.enterClass,h=o.enterToClass,l=o.enterActiveClass,f=o.appearClass,p=o.appearToClass,d=o.appearActiveClass,m=o.beforeEnter,g=o.enter,y=o.afterEnter,b=o.enterCancelled,_=o.beforeAppear,w=o.appear,x=o.afterAppear,E=o.appearCancelled,S=o.duration,T=Nn,M=Nn.$vnode;while(M&&M.parent)T=M.context,M=M.parent;var A=!T._isMounted||!t.isRootInsert;if(!A||w||""===w){var C=A&&f?f:c,I=A&&d?d:l,N=A&&p?p:h,R=A&&_||m,O=A&&"function"===typeof w?w:g,P=A&&x||y,L=A&&E||b,D=v(u(S)?S.enter:S);0;var k=!1!==a&&!et,F=Wo(O),j=n._enterCb=U((function(){k&&(ko(n,N),ko(n,I)),j.cancelled?(k&&ko(n,C),L&&L(n)):P&&P(n),n._enterCb=null}));t.data.show||we(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),O&&O(n,j)})),R&&R(n),k&&(Do(n,C),Do(n,I),Lo((function(){ko(n,C),j.cancelled||(Do(n,N),F||(Ho(D)?setTimeout(j,D):Fo(n,s,j)))}))),t.data.show&&(e&&e(),O&&O(n,j)),k||F||j()}}}function Go(t,e){var n=t.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=So(t.data.transition);if(r(o)||1!==n.nodeType)return e();if(!i(n._leaveCb)){var a=o.css,s=o.type,c=o.leaveClass,h=o.leaveToClass,l=o.leaveActiveClass,f=o.beforeLeave,p=o.leave,d=o.afterLeave,m=o.leaveCancelled,g=o.delayLeave,y=o.duration,b=!1!==a&&!et,_=Wo(p),w=v(u(y)?y.leave:y);0;var x=n._leaveCb=U((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(ko(n,h),ko(n,l)),x.cancelled?(b&&ko(n,c),m&&m(n)):(e(),d&&d(n)),n._leaveCb=null}));g?g(E):E()}function E(){x.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),f&&f(n),b&&(Do(n,c),Do(n,l),Lo((function(){ko(n,c),x.cancelled||(Do(n,h),_||(Ho(w)?setTimeout(x,w):Fo(n,s,x)))}))),p&&p(n,x),b||_||x())}}function Ho(t){return"number"===typeof t&&!isNaN(t)}function Wo(t){if(r(t))return!1;var e=t.fns;return i(e)?Wo(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function qo(t,e){!0!==e.data.show&&Vo(e)}var Yo=$?{create:qo,activate:qo,remove:function(t,e){!0!==t.data.show?Go(t,e):e()}}:{},Xo=[Gi,qi,no,so,_o,Yo],Ko=Xo.concat(ji),$o=Ri({nodeOps:Ei,modules:Ko});et&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&ia(t,"input")}));var Qo={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?we(n,"postpatch",(function(){Qo.componentUpdated(t,e,n)})):Jo(t,e,n.context),t._vOptions=[].map.call(t.options,ea)):("textarea"===n.tag||ci(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",na),t.addEventListener("compositionend",ra),t.addEventListener("change",ra),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Jo(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,ea);if(i.some((function(t,e){return!k(t,r[e])}))){var o=t.multiple?e.value.some((function(t){return ta(t,i)})):e.value!==e.oldValue&&ta(e.value,i);o&&ia(t,"change")}}}};function Jo(t,e,n){Zo(t,e,n),(tt||nt)&&setTimeout((function(){Zo(t,e,n)}),0)}function Zo(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=F(r,ea(a))>-1,a.selected!==o&&(a.selected=o);else if(k(ea(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function ta(t,e){return e.every((function(e){return!k(e,t)}))}function ea(t){return"_value"in t?t._value:t.value}function na(t){t.target.composing=!0}function ra(t){t.target.composing&&(t.target.composing=!1,ia(t.target,"input"))}function ia(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function oa(t){return!t.componentInstance||t.data&&t.data.transition?t:oa(t.componentInstance._vnode)}var aa={bind:function(t,e,n){var r=e.value;n=oa(n);var i=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Vo(n,(function(){t.style.display=o}))):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value,i=e.oldValue;if(!r!==!i){n=oa(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Vo(n,(function(){t.style.display=t.__vOriginalDisplay})):Go(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},sa={model:Qo,show:aa},ua={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ca(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?ca(En(e.children)):t}function ha(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[E(o)]=i[o];return e}function la(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function fa(t){while(t=t.parent)if(t.data.transition)return!0}function pa(t,e){return e.key===t.key&&e.tag===t.tag}var da=function(t){return t.tag||xn(t)},va=function(t){return"show"===t.name},ma={name:"transition",props:ua,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(da),n.length)){0;var r=this.mode;0;var i=n[0];if(fa(this.$vnode))return i;var o=ca(i);if(!o)return i;if(this._leaving)return la(t,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=ha(this),c=this._vnode,h=ca(c);if(o.data.directives&&o.data.directives.some(va)&&(o.data.show=!0),h&&h.data&&!pa(o,h)&&!xn(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var l=h.data.transition=R({},u);if("out-in"===r)return this._leaving=!0,we(l,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),la(t,i);if("in-out"===r){if(xn(o))return c;var f,p=function(){f()};we(u,"afterEnter",p),we(u,"enterCancelled",p),we(l,"delayLeave",(function(t){f=t}))}}return i}}},ga=R({tag:String,moveClass:String},ua);delete ga.mode;var ya={props:ga,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=Rn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=ha(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var c=[],h=[],l=0;l<r.length;l++){var f=r[l];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?c.push(f):h.push(f)}this.kept=t(e,null,c),this.removed=h}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(ba),t.forEach(_a),t.forEach(wa),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;Do(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(No,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(No,t),n._moveCb=null,ko(n,e))})}})))},methods:{hasMove:function(t,e){if(!Mo)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){Eo(n,t)})),xo(n,e),n.style.display="none",this.$el.appendChild(n);var r=jo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function ba(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function _a(t){t.data.newPos=t.elm.getBoundingClientRect()}function wa(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var xa={Transition:ma,TransitionGroup:ya};Er.config.mustUseProp=zr,Er.config.isReservedTag=oi,Er.config.isReservedAttr=Ur,Er.config.getTagNamespace=ai,Er.config.isUnknownElement=ui,R(Er.options.directives,sa),R(Er.options.components,xa),Er.prototype.__patch__=$?$o:P,Er.prototype.$mount=function(t,e){return t=t&&$?hi(t):void 0,Ln(this,t,e)},$&&setTimeout((function(){V.devtools&&ct&&ct.emit("init",Er)}),0),e["a"]=Er}).call(this,n("c8ba"))},"2caf":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n("4ae1"),n("3410"),n("131a");function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n("d3b7"),n("25f0");function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("3ca3"),n("ddb0");function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?a(t):e}function u(t){return function(){var e,n=r(t);if(i()){var o=r(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return s(this,e)}}},"2cf4":function(t,e,n){var r,i,o,a=n("da84"),s=n("d039"),u=n("c6b6"),c=n("0366"),h=n("1be4"),l=n("cc12"),f=n("1cdc"),p=a.location,d=a.setImmediate,v=a.clearImmediate,m=a.process,g=a.MessageChannel,y=a.Dispatch,b=0,_={},w="onreadystatechange",x=function(t){if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},E=function(t){return function(){x(t)}},S=function(t){x(t.data)},T=function(t){a.postMessage(t+"",p.protocol+"//"+p.host)};d&&v||(d=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return _[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},v=function(t){delete _[t]},"process"==u(m)?r=function(t){m.nextTick(E(t))}:y&&y.now?r=function(t){y.now(E(t))}:g&&!f?(i=new g,o=i.port2,i.port1.onmessage=S,r=c(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(T)?r=w in l("script")?function(t){h.appendChild(l("script"))[w]=function(){h.removeChild(this),x(t)}}:function(t){setTimeout(E(t),0)}:(r=T,a.addEventListener("message",S,!1))),t.exports={set:d,clear:v}},"2d00":function(t,e,n){var r,i,o=n("da84"),a=n("342f"),s=o.process,u=s&&s.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]+r[1]):a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"2d83":function(t,e,n){"use strict";var r=n("387f");t.exports=function(t,e,n,i,o){var a=new Error(t);return r(a,e,n,i,o)}},"2e66":function(t,e,n){"use strict";n.r(e),n.d(e,"registerStorage",(function(){return Ue}));var r=n("c23d"),i=n.n(r),o=n("9ab4"),a=n("4be4"),s="firebasestorage.googleapis.com",u="storageBucket",c=12e4,h=6e5,l=-9007199254740991,f=function(){function t(t,e){this.code_=d(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return d(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),p={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function d(t){return"storage/"+t}function v(){var t="An unknown error occurred, please check the error payload for server response.";return new f(p.UNKNOWN,t)}function m(t){return new f(p.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function g(t){return new f(p.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function y(){var t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new f(p.UNAUTHENTICATED,t)}function b(t){return new f(p.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function _(){return new f(p.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function w(){return new f(p.CANCELED,"User canceled the upload/download.")}function x(t){return new f(p.INVALID_URL,"Invalid URL '"+t+"'.")}function E(t){return new f(p.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function S(){return new f(p.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+u+"' property when initializing the app?")}function T(){return new f(p.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function M(){return new f(p.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function A(){return new f(p.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function C(t,e,n){return new f(p.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function I(t,e,n,r){var i,o;return t===e?(i=t,o=1===t?"argument":"arguments"):(i="between "+t+" and "+e,o="arguments"),new f(p.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}function N(){return new f(p.APP_DELETED,"The Firebase app was deleted.")}function R(t){return new f(p.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function O(t,e){return new f(p.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function P(t){throw new f(p.INTERNAL_ERROR,"Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function D(t){switch(t){case L.RAW:case L.BASE64:case L.BASE64URL:case L.DATA_URL:return;default:throw"Expected one of the event types: ["+L.RAW+", "+L.BASE64+", "+L.BASE64URL+", "+L.DATA_URL+"]."}}var k=function(){function t(t,e){this.data=t,this.contentType=e||null}return t}();function F(t,e){switch(t){case L.RAW:return new k(U(e));case L.BASE64:case L.BASE64URL:return new k(z(t,e));case L.DATA_URL:return new k(V(e),G(e))}throw v()}function U(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<t.length-1&&56320===(64512&t.charCodeAt(n+1));if(i){var o=r,a=t.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function j(t){var e;try{e=decodeURIComponent(t)}catch(n){throw O(L.DATA_URL,"Malformed data URL.")}return U(e)}function z(t,e){switch(t){case L.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r){var i=n?"-":"_";throw O(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case L.BASE64URL:var o=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(o||a){i=o?"+":"/";throw O(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}var s;try{s=atob(e)}catch(h){throw O(t,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}var B=function(){function t(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw O(L.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=H(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}return t}();function V(t){var e=new B(t);return e.base64?z(L.BASE64,e.rest):j(e.rest)}function G(t){var e=new B(t);return e.contentType}function H(t,e){var n=t.length>=e.length;return!!n&&t.substring(t.length-e.length)===e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W,q={STATE_CHANGED:"state_changed"},Y={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},X={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function K(t){switch(t){case Y.RUNNING:case Y.PAUSING:case Y.CANCELING:return X.RUNNING;case Y.PAUSED:return X.PAUSED;case Y.SUCCESS:return X.SUCCESS;case Y.CANCELED:return X.CANCELED;case Y.ERROR:return X.ERROR;default:return X.ERROR}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t){return null!=t}function Q(t){return void 0!==t}function J(t){return"function"===typeof t}function Z(t){return"object"===typeof t}function tt(t){return Z(t)&&null!==t}function et(t){return Z(t)&&!Array.isArray(t)}function nt(t){return"string"===typeof t||t instanceof String}function rt(t){return it(t)&&Number.isInteger(t)}function it(t){return"number"===typeof t||t instanceof Number}function ot(t){return at()&&t instanceof Blob}function at(){return"undefined"!==typeof Blob}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["NO_ERROR"]=0]="NO_ERROR",t[t["NETWORK_ERROR"]=1]="NETWORK_ERROR",t[t["ABORT"]=2]="ABORT"})(W||(W={}));
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var st=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=W.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=W.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=W.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw P("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),$(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return $(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw P("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw P("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw P("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){$(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){$(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),ut=function(){function t(){}return t.prototype.createXhrIo=function(){return new st},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ct(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ht(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ct();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(at())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}function lt(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft=function(){function t(t,e){var n=0,r="";ot(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(ot(this.data_)){var r=this.data_,i=lt(r,e,n);return null===i?null:new t(i)}var o=new Uint8Array(this.data_.buffer,e,n-e);return new t(o,!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(at()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(ht.apply(null,r))}var i=e.map((function(t){return nt(t)?F(L.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),pt=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw E(e)},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)";function i(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}var o="(/(.*))?$",a="(/([^?#]*).*)?$",u=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function h(t){t.path_=decodeURIComponent(t.path)}for(var l="v[A-Za-z0-9_]+",f=s.replace(/[.]/g,"\\."),p=new RegExp("^https?://"+f+"/"+l+"/b/"+r+"/o"+a,"i"),d={bucket:1,path:3},v=[{regex:u,indices:c,postModify:i},{regex:p,indices:d,postModify:h}],m=0;m<v.length;m++){var g=v[m],y=g.regex.exec(e);if(y){var b=y[g.indices.bucket],_=y[g.indices.path];_||(_=""),n=new t(b,_),g.postModify(n);break}}if(null==n)throw x(e);return n},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function dt(t){var e;try{e=JSON.parse(t)}catch(n){return null}return et(e)?e:null}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){if(0===t.length)return null;var e=t.lastIndexOf("/");if(-1===e)return"";var n=t.slice(0,e);return n}function mt(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function gt(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return"https://"+s+"/v0"+t}function bt(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){var i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t,e){return e}var wt=function(){function t(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||_t}return t}(),xt=null;function Et(t){return!nt(t)||t.length<2?t:gt(t)}function St(){if(xt)return xt;var t=[];function e(t,e){return Et(e)}t.push(new wt("bucket")),t.push(new wt("generation")),t.push(new wt("metageneration")),t.push(new wt("name","fullPath",!0));var n=new wt("name");function r(t,e){return $(e)?Number(e):e}n.xform=e,t.push(n);var i=new wt("size");return i.xform=r,t.push(i),t.push(new wt("timeCreated")),t.push(new wt("updated")),t.push(new wt("md5Hash",null,!0)),t.push(new wt("cacheControl",null,!0)),t.push(new wt("contentDisposition",null,!0)),t.push(new wt("contentEncoding",null,!0)),t.push(new wt("contentLanguage",null,!0)),t.push(new wt("contentType",null,!0)),t.push(new wt("metadata","customMetadata",!0)),xt=t,xt}function Tt(t,e){function n(){var n=t["bucket"],r=t["fullPath"],i=new pt(n,r);return e.makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Mt(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return Tt(r,t),r}function At(t,e,n){var r=dt(e);if(null===r)return null;var i=r;return Mt(t,i,n)}function Ct(t,e){var n=dt(e);if(null===n)return null;if(!nt(n["downloadTokens"]))return null;var r=n["downloadTokens"];if(0===r.length)return null;var i=encodeURIComponent,o=r.split(","),a=o.map((function(e){var n=t["bucket"],r=t["fullPath"],o="/b/"+i(n)+"/o/"+i(r),a=yt(o),s=bt({alt:"media",token:e});return a+s}));return a[0]}function It(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Nt(t){if(!Z(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!Z(n))throw"Expected object for 'customMetadata' mapping."}else if(tt(n))throw"Mapping for '"+e+"' cannot be an object."}}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt="maxResults",Ot=1e3,Pt="pageToken",Lt="prefixes",Dt="items";function kt(t,e){var n={prefixes:[],items:[],nextPageToken:e["nextPageToken"]},r=t.bucket();if(null===r)throw S();if(e[Lt])for(var i=0,o=e[Lt];i<o.length;i++){var a=o[i],s=a.replace(/\/$/,""),u=t.makeStorageReference(new pt(r,s));n.prefixes.push(u)}if(e[Dt])for(var c=0,h=e[Dt];c<h.length;c++){var l=h[c];u=t.makeStorageReference(new pt(r,l["name"]));n.items.push(u)}return n}function Ft(t,e){var n=dt(e);if(null===n)return null;var r=n;return kt(t,r)}function Ut(t){if(!Z(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===Rt){if(!rt(t[Rt])||t[Rt]<=0)throw"Expected maxResults to be a positive number.";if(t[Rt]>1e3)throw"Expected maxResults to be less than or equal to "+Ot+"."}else{if(e!==Pt)throw"Unknown option: "+e;if(t[Pt]&&!nt(t[Pt]))throw"Expected pageToken to be string."}}var jt=function(){function t(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){if(!t)throw v()}function Bt(t,e){function n(n,r){var i=At(t,r,e);return zt(null!==i),i}return n}function Vt(t){function e(e,n){var r=Ft(t,n);return zt(null!==r),r}return e}function Gt(t,e){function n(n,r){var i=At(t,r,e);return zt(null!==i),Ct(i,r)}return n}function Ht(t){function e(e,n){var r;return r=401===e.getStatus()?y():402===e.getStatus()?g(t.bucket):403===e.getStatus()?b(t.path):n,r.setServerResponseProp(n.serverResponseProp()),r}return e}function Wt(t){var e=Ht(t);function n(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=m(t.path)),i.setServerResponseProp(r.serverResponseProp()),i}return n}function qt(t,e,n){var r=e.fullServerUrl(),i=yt(r),o="GET",a=t.maxOperationRetryTime(),s=new jt(i,o,Bt(t,n),a);return s.errorHandler=Wt(e),s}function Yt(t,e,n,r,i){var o={};e.isRoot?o["prefix"]="":o["prefix"]=e.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var a=e.bucketOnlyServerUrl(),s=yt(a),u="GET",c=t.maxOperationRetryTime(),h=new jt(s,u,Vt(t),c);return h.urlParams=o,h.errorHandler=Ht(e),h}function Xt(t,e,n){var r=e.fullServerUrl(),i=yt(r),o="GET",a=t.maxOperationRetryTime(),s=new jt(i,o,Gt(t,n),a);return s.errorHandler=Wt(e),s}function Kt(t,e,n,r){var i=e.fullServerUrl(),o=yt(i),a="PATCH",s=It(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime(),h=new jt(o,a,Bt(t,r),c);return h.headers=u,h.body=s,h.errorHandler=Wt(e),h}function $t(t,e){var n=e.fullServerUrl(),r=yt(n),i="DELETE",o=t.maxOperationRetryTime();function a(t,e){}var s=new jt(r,i,a,o);return s.successCodes=[200,204],s.errorHandler=Wt(e),s}function Qt(t,e){return t&&t["contentType"]||e&&e.type()||"application/octet-stream"}function Jt(t,e,n){var r=Object.assign({},n);return r["fullPath"]=t.path,r["size"]=e.size(),r["contentType"]||(r["contentType"]=Qt(null,e)),r}function Zt(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function s(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}var u=s();a["Content-Type"]="multipart/related; boundary="+u;var c=Jt(e,r,i),h=It(c,n),l="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",f="\r\n--"+u+"--",p=ft.getBlob(l,r,f);if(null===p)throw T();var d={name:c["fullPath"]},v=yt(o),m="POST",g=t.maxUploadRetryTime(),y=new jt(v,m,Bt(t,n),g);return y.urlParams=d,y.headers=a,y.body=p.uploadData(),y.errorHandler=Ht(e),y}var te=function(){function t(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}return t}();function ee(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(i){zt(!1)}var r=e||["active"];return zt(!!n&&-1!==r.indexOf(n)),n}function ne(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Jt(e,r,i),s={name:a["fullPath"]},u=yt(o),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a["contentType"],"Content-Type":"application/json; charset=utf-8"},l=It(a,n),f=t.maxUploadRetryTime();function p(t){var e;ee(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){zt(!1)}return zt(nt(e)),e}var d=new jt(u,c,p,f);return d.urlParams=s,d.headers=h,d.body=l,d.errorHandler=Ht(e),d}function re(t,e,n,r){var i={"X-Goog-Upload-Command":"query"};function o(t){var e=ee(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){zt(!1)}n||zt(!1);var i=Number(n);return zt(!isNaN(i)),new te(i,r.size(),"final"===e)}var a="POST",s=t.maxUploadRetryTime(),u=new jt(n,a,o,s);return u.headers=i,u.errorHandler=Ht(e),u}var ie=262144;function oe(t,e,n,r,i,o,a,s){var u=new te(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw M();var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p=h===c?"upload, finalize":"upload",d={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":u.current},v=r.slice(l,f);if(null===v)throw T();function m(t,n){var i,a=ee(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?Bt(e,o)(t,n):null,new te(s,c,"final"===a,i)}var g="POST",y=e.maxUploadRetryTime(),b=new jt(n,g,m,y);return b.headers=d,b.body=v.uploadData(),b.progressCallback=s||null,b.errorHandler=Ht(t),b}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae=function(){function t(t,e,n){var r=J(t)||$(e)||$(n);if(r)this.next=t,this.error=e||null,this.complete=n||null;else{var i=t;this.next=i.next||null,this.error=i.error||null,this.complete=i.complete||null}}return t}(),se=function(){function t(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}return t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ue(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var a=r<=n.length&&n.length<=i;if(!a)throw I(r,i,t,n.length);for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(s){throw s instanceof Error?C(o,t,s.message):C(o,t,s)}}var ce=function(){function t(t,e){var n=this;this.validator=function(e){n.optional&&!Q(e)||t(e)},this.optional=!!e}return t}();function he(t,e){return function(n){t(n),e(n)}}function le(t,e){function n(t){if(!nt(t))throw"Expected string."}var r;return r=t?he(n,t):n,new ce(r,e)}function fe(){function t(t){var e=t instanceof Uint8Array||t instanceof ArrayBuffer||at()&&t instanceof Blob;if(!e)throw"Expected Blob or File."}return new ce(t)}function pe(t){return new ce(Nt,t)}function de(t){return new ce(Ut,t)}function ve(){function t(t){var e=it(t)&&t>=0;if(!e)throw"Expected a number 0 or greater."}return new ce(t)}function me(t,e){function n(e){var n=null===e||$(e)&&e instanceof Object;if(!n)throw"Expected an Object.";void 0!==t&&null!==t&&t(e)}return new ce(n,e)}function ge(t){function e(t){var e=null===t||J(t);if(!e)throw"Expected a Function."}return new ce(e,t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be=function(){function t(t,e,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=Y.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(p.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(Y.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(p.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(Y.ERROR))},this.promise_=new Promise((function(t,e){a.resolve_=t,a.reject_=e,a.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===Y.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then((function(n){switch(e.state_){case Y.RUNNING:t(n);break;case Y.CANCELING:e.transition_(Y.CANCELED);break;case Y.PAUSING:e.transition_(Y.PAUSED);break}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=ne(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=re(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=ie*this.chunkMultiplier_,n=new te(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=oe(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(s){return t.error_=s,void t.transition_(Y.ERROR)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(Y.SUCCESS)):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){var t=ie*this.chunkMultiplier_;t<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=qt(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(Y.SUCCESS)}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=Zt(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(Y.SUCCESS)}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case Y.CANCELING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case Y.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case Y.RUNNING:var e=this.state_===Y.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case Y.PAUSED:this.state_=t,this.notifyObservers_();break;case Y.CANCELED:this.error_=w(),this.state_=t,this.notifyObservers_();break;case Y.ERROR:this.state_=t,this.notifyObservers_();break;case Y.SUCCESS:this.state_=t,this.notifyObservers_();break}},t.prototype.completeTransitions_=function(){switch(this.state_){case Y.PAUSING:this.transition_(Y.PAUSED);break;case Y.CANCELING:this.transition_(Y.CANCELED);break;case Y.RUNNING:this.start_();break}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=K(this.state_);return new se(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==q.STATE_CHANGED)throw"Expected one of the event types: ["+q.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=ge(!0).validator,s=me(null,!0).validator;function u(t){try{return void a(t)}catch(n){}try{s(t);var e=Q(t["next"])||Q(t["error"])||Q(t["complete"]);if(!e)throw"";return}catch(n){throw o}}var c=[le(i),me(u,!0),ge(!0),ge(!0)];ue("on",c,arguments);var h=this;function l(t){function e(e,n,i){null!==t&&ue("on",t,arguments);var o=new ae(e,n,r);return h.addObserver_(o),function(){h.removeObserver_(o)}}return e}function f(t){if(null===t)throw o;u(t)}var p=[me(f),ge(!0),ge(!0)],d=!(Q(e)||Q(n)||Q(r));return d?l(p):l(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_();var e=this.observers_.slice();e.forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(K(this.state_)){case X.SUCCESS:ye(this.resolve_.bind(null,this.snapshot))();break;case X.CANCELED:case X.ERROR:var e=this.reject_;ye(e.bind(null,this.error_))();break;default:t=!1;break}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){var e=K(this.state_);switch(e){case X.RUNNING:case X.PAUSED:t.next&&ye(t.next.bind(t,this.snapshot))();break;case X.SUCCESS:t.complete&&ye(t.complete.bind(t))();break;case X.CANCELED:case X.ERROR:t.error&&ye(t.error.bind(t,this.error_))();break;default:t.error&&ye(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){ue("resume",[],arguments);var t=this.state_===Y.PAUSED||this.state_===Y.PAUSING;return t&&this.transition_(Y.RUNNING),t},t.prototype.pause=function(){ue("pause",[],arguments);var t=this.state_===Y.RUNNING;return t&&this.transition_(Y.PAUSING),t},t.prototype.cancel=function(){ue("cancel",[],arguments);var t=this.state_===Y.RUNNING||this.state_===Y.PAUSING;return t&&this.transition_(Y.CANCELING),t},t}(),_e=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof pt?e:pt.makeFromUrl(e)}return t.prototype.toString=function(){return ue("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return St()},t.prototype.child=function(t){ue("child",[le()],arguments);var e=mt(this.location.path,t),n=new pt(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=vt(this.location.path);if(null===t)return null;var e=new pt(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new pt(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return gt(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),ue("put",[fe(),pe(!0)],arguments),this.throwIfRoot_("put"),new be(this,this.authWrapper,this.location,this.mappings(),new ft(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=L.RAW),ue("putString",[le(),le(D,!0),pe(!0)],arguments),this.throwIfRoot_("putString");var r=F(e,t),i=Object.assign({},n);return!$(i["contentType"])&&$(r.contentType)&&(i["contentType"]=r.contentType),new be(this,this.authWrapper,this.location,this.mappings(),new ft(r.data,!0),i)},t.prototype.delete=function(){var t=this;return ue("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(e){var n=$t(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){ue("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Object(o["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,a;return Object(o["__generator"])(this,(function(o){switch(o.label){case 0:return n={pageToken:e},[4,this.list(n)];case 1:return r=o.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(a=t.items).push.apply(a,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(t,r.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){ue("list",[de(!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then((function(n){var r=t||{},i=Yt(e.authWrapper,e.location,"/",r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return ue("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(e){var n=qt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return ue("updateMetadata",[pe()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=Kt(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return ue("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(e){var n=Xt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw A();return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw R(t)},t}(),we=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),xe=function(){function t(){this.map=new Map,this.id=l}return t.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then((function(){return e.map.delete(n)}),(function(){return e.map.delete(n)}))},t.prototype.clear=function(){this.map.forEach((function(t){t&&t.cancel(!0)})),this.map.clear()},t}(),Ee=function(){function t(e,n,r,i,o,a){var s;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var u=this.app_.options;$(u)&&(this.bucket_=t.extractBucket_(u),this.appId_=null!==(s=u.appId)&&void 0!==s?s:null)}this.authProvider_=n,this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=a,this.service_=o,this.maxOperationRetryTime_=c,this.maxUploadRetryTime_=h,this.requestMap_=new xe}return t.extractBucket_=function(t){var e=t[u]||null;if(null==e)return null;var n=pt.makeFromBucketSpec(e);return n.bucket},t.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then((function(t){return null!==t?t.accessToken:null}),(function(){return null})):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw N();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new we(N());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Se(t,e,n){var r=1,i=null,a=!1,s=0;function u(){return 2===s}var c=!1;function h(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)h.call.apply(h,Object(o["__spreadArrays"])([null,t],e));else{var i,f=u()||a;if(f)h.call.apply(h,Object(o["__spreadArrays"])([null,t],e));else r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i)}}var p=!1;function d(t){p||(p=!0,c||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){a=!0,d(!0)}),n),d}function Te(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){if(n)e(!1,new Ae(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null,n=n;var r=n.getErrorCode()===W.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Ae(a,n))}else{var s=n.getErrorCode()===W.ABORT;e(!1,new Ae(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}function n(e,n){var r=t.resolve_,i=t.reject_,o=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(o,o.getResponseText());Q(a)?r(a):r()}catch(u){i(u)}else if(null!==o){var s=v();s.setServerResponseProp(o.getResponseText()),t.errorCallback_?i(t.errorCallback_(o,s)):i(s)}else if(n.canceled){s=t.appDelete_?N():w();i(s)}else{s=_();i(s)}}this.canceled_?n(!1,new Ae(!1,null,!0)):this.backoffId_=Se(e,n,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&Te(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=[408,429],r=-1!==n.indexOf(t),i=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||i},t}(),Ae=function(){function t(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}return t}();function Ce(t,e){null!==e&&e.length>0&&(t["Authorization"]="Firebase "+e)}function Ie(t){var e="undefined"!==typeof i.a?i.a.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}function Ne(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Re(t,e,n,r){var i=bt(t.urlParams),o=t.url+i,a=Object.assign({},t.headers);return Ne(a,e),Ce(a,n),Ie(a),new Me(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe=function(){function t(t,e,n,r){function i(t,e){return new _e(t,e)}if(this.bucket_=null,this.authWrapper_=new Ee(t,e,i,Re,this,n),this.app_=t,null!=r)this.bucket_=pt.makeFromBucketSpec(r);else{var o=this.authWrapper_.bucket();null!=o&&(this.bucket_=new pt(o,""))}this.internals_=new Pe(this)}return t.prototype.ref=function(t){function e(t){if("string"!==typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(ue("ref",[le(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new _e(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!==typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{pt.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return ue("refFromURL",[le(e,!1)],arguments),new _e(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){ue("setMaxUploadRetryTime",[ve()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){ue("setMaxOperationRetryTime",[ve()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Pe=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}(),Le="@firebase/storage",De="0.3.30",ke="storage";function Fe(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Oe(n,r,new ut,e)}function Ue(t){var e={TaskState:X,TaskEvent:q,StringFormat:L,Storage:Oe,Reference:_e};t.INTERNAL.registerComponent(new a["Component"](ke,Fe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Le,De)}Ue(i.a)},"2e67":function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},"2f62":function(t,e,n){"use strict";(function(t){
/**
 * vuex v3.1.3
 * (c) 2020 Evan You
 * @license MIT
 */
function n(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:r});else{var n=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[r].concat(t.init):r,n.call(this,t)}}function r(){var t=this.$options;t.store?this.$store="function"===typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}var r="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},i=r.__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(t){i&&(t._devtoolHook=i,i.emit("vuex:init",t),i.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){i.emit("vuex:mutation",t,e)})))}function a(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function s(t){return null!==t&&"object"===typeof t}function u(t){return t&&"function"===typeof t.then}function c(t,e){return function(){return t(e)}}var h=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},l={namespaced:{configurable:!0}};l.namespaced.get=function(){return!!this._rawModule.namespaced},h.prototype.addChild=function(t,e){this._children[t]=e},h.prototype.removeChild=function(t){delete this._children[t]},h.prototype.getChild=function(t){return this._children[t]},h.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},h.prototype.forEachChild=function(t){a(this._children,t)},h.prototype.forEachGetter=function(t){this._rawModule.getters&&a(this._rawModule.getters,t)},h.prototype.forEachAction=function(t){this._rawModule.actions&&a(this._rawModule.actions,t)},h.prototype.forEachMutation=function(t){this._rawModule.mutations&&a(this._rawModule.mutations,t)},Object.defineProperties(h.prototype,l);var f=function(t){this.register([],t,!1)};function p(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return void 0;p(t.concat(r),e.getChild(r),n.modules[r])}}f.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},f.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")}),"")},f.prototype.update=function(t){p([],this.root,t)},f.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=new h(e,n);if(0===t.length)this.root=i;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],i)}e.modules&&a(e.modules,(function(e,i){r.register(t.concat(i),e,n)}))},f.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];e.getChild(n).runtime&&e.removeChild(n)};var d;var v=function(t){var e=this;void 0===t&&(t={}),!d&&"undefined"!==typeof window&&window.Vue&&I(window.Vue);var n=t.plugins;void 0===n&&(n=[]);var r=t.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new f(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new d,this._makeLocalGettersCache=Object.create(null);var i=this,a=this,s=a.dispatch,u=a.commit;this.dispatch=function(t,e){return s.call(i,t,e)},this.commit=function(t,e,n){return u.call(i,t,e,n)},this.strict=r;var c=this._modules.root.state;_(this,c,[],this._modules.root),b(this,c),n.forEach((function(t){return t(e)}));var h=void 0!==t.devtools?t.devtools:d.config.devtools;h&&o(this)},m={state:{configurable:!0}};function g(t,e){return e.indexOf(t)<0&&e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function y(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;_(t,n,[],t._modules.root,!0),b(t,n,e)}function b(t,e,n){var r=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={};a(i,(function(e,n){o[n]=c(e,t),Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})}));var s=d.config.silent;d.config.silent=!0,t._vm=new d({data:{$$state:e},computed:o}),d.config.silent=s,t.strict&&M(t),r&&(n&&t._withCommit((function(){r._data.$$state=null})),d.nextTick((function(){return r.$destroy()})))}function _(t,e,n,r,i){var o=!n.length,a=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=r),!o&&!i){var s=A(e,n.slice(0,-1)),u=n[n.length-1];t._withCommit((function(){d.set(s,u,r.state)}))}var c=r.context=w(t,a,n);r.forEachMutation((function(e,n){var r=a+n;E(t,r,e,c)})),r.forEachAction((function(e,n){var r=e.root?n:a+n,i=e.handler||e;S(t,r,i,c)})),r.forEachGetter((function(e,n){var r=a+n;T(t,r,e,c)})),r.forEachChild((function(r,o){_(t,e,n.concat(o),r,i)}))}function w(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var o=C(n,r,i),a=o.payload,s=o.options,u=o.type;return s&&s.root||(u=e+u),t.dispatch(u,a)},commit:r?t.commit:function(n,r,i){var o=C(n,r,i),a=o.payload,s=o.options,u=o.type;s&&s.root||(u=e+u),t.commit(u,a,s)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return x(t,e)}},state:{get:function(){return A(t.state,n)}}}),i}function x(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,r)===e){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function E(t,e,n,r){var i=t._mutations[e]||(t._mutations[e]=[]);i.push((function(e){n.call(t,r.state,e)}))}function S(t,e,n,r){var i=t._actions[e]||(t._actions[e]=[]);i.push((function(e){var i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return u(i)||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}function T(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)})}function M(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function A(t,e){return e.reduce((function(t,e){return t[e]}),t)}function C(t,e,n){return s(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function I(t){d&&t===d||(d=t,n(d))}m.state.get=function(){return this._vm._data.$$state},m.state.set=function(t){0},v.prototype.commit=function(t,e,n){var r=this,i=C(t,e,n),o=i.type,a=i.payload,s=(i.options,{type:o,payload:a}),u=this._mutations[o];u&&(this._withCommit((function(){u.forEach((function(t){t(a)}))})),this._subscribers.slice().forEach((function(t){return t(s,r.state)})))},v.prototype.dispatch=function(t,e){var n=this,r=C(t,e),i=r.type,o=r.payload,a={type:i,payload:o},s=this._actions[i];if(s){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(a,n.state)}))}catch(c){0}var u=s.length>1?Promise.all(s.map((function(t){return t(o)}))):s[0](o);return u.then((function(t){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(a,n.state)}))}catch(c){0}return t}))}},v.prototype.subscribe=function(t){return g(t,this._subscribers)},v.prototype.subscribeAction=function(t){var e="function"===typeof t?{before:t}:t;return g(e,this._actionSubscribers)},v.prototype.watch=function(t,e,n){var r=this;return this._watcherVM.$watch((function(){return t(r.state,r.getters)}),e,n)},v.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},v.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),_(this,this.state,t,this._modules.get(t),n.preserveState),b(this,this.state)},v.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=A(e.state,t.slice(0,-1));d.delete(n,t[t.length-1])})),y(this)},v.prototype.hotUpdate=function(t){this._modules.update(t),y(this,!0)},v.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(v.prototype,m);var N=F((function(t,e){var n={};return D(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=U(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,e,n):e[i]},n[r].vuex=!0})),n})),R=F((function(t,e){var n={};return D(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.commit;if(t){var o=U(this.$store,"mapMutations",t);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n})),O=F((function(t,e){var n={};return D(e).forEach((function(e){var r=e.key,i=e.val;i=t+i,n[r]=function(){if(!t||U(this.$store,"mapGetters",t))return this.$store.getters[i]},n[r].vuex=!0})),n})),P=F((function(t,e){var n={};return D(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var o=U(this.$store,"mapActions",t);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n})),L=function(t){return{mapState:N.bind(null,t),mapGetters:O.bind(null,t),mapMutations:R.bind(null,t),mapActions:P.bind(null,t)}};function D(t){return k(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function k(t){return Array.isArray(t)||s(t)}function F(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function U(t,e,n){var r=t._modulesNamespaceMap[n];return r}var j={Store:v,install:I,version:"3.1.3",mapState:N,mapMutations:R,mapGetters:O,mapActions:P,createNamespacedHelpers:L};e["a"]=j}).call(this,n("c8ba"))},"30b5":function(t,e,n){"use strict";var r=n("c532");function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var a=[];r.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(i(e)+"="+i(t))})))})),o=a.join("&")}if(o){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},"30df":function(t,e,n){"use strict";var r=n("ee7d"),i=n.n(r);i.a},3280:function(t,e,n){"use strict";var r=n("ebb5"),i=n("e58c"),o=r.aTypedArray,a=r.exportTypedArrayMethod;a("lastIndexOf",(function(t){return i.apply(o(this),arguments)}))},"32d9":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("5a89"),i={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")},o=n("1b53"),a=function(t,e){o["a"].call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof r["s"]?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=r["x"].clone(t.uniforms),this.material=new r["s"]({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new o["a"].FullScreenQuad(this.material)};a.prototype=Object.assign(Object.create(o["a"].prototype),{constructor:a,render:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}});var s=function(t,e){o["a"].call(this),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1};s.prototype=Object.assign(Object.create(o["a"].prototype),{constructor:s,render:function(t,e,n){var r,i,o=t.getContext(),a=t.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var u=function(){o["a"].call(this),this.needsSwap=!1};u.prototype=Object.create(o["a"].prototype),Object.assign(u.prototype,{render:function(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}});var c=function(t,e){if(this.renderer=t,void 0===e){var n={minFilter:r["e"],magFilter:r["e"],format:r["q"],stencilBuffer:!1},o=t.getSize(new r["y"]);this._pixelRatio=t.getPixelRatio(),this._width=o.width,this._height=o.height,e=new r["z"](this._width*this._pixelRatio,this._height*this._pixelRatio,n),e.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===i&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===a&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new a(i),this.clock=new r["b"]};Object.assign(c.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(t,e){this.passes.splice(e,0,t)},isLastEnabledPass:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(t){void 0===t&&(t=this.clock.getDelta());var e,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(e=this.passes[n],!1!==e.enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),e.needsSwap){if(i){var a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==s&&(e instanceof s?i=!0:e instanceof u&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(t){if(void 0===t){var e=this.renderer.getSize(new r["y"]);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this._width=t,this._height=e;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(t){this._pixelRatio=t,this.setSize(this._width,this._height)}});var h=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(h.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),h.FullScreenQuad=function(){var t=new r["m"](-1,1,1,-1,0,1),e=new r["o"](2,2),n=function(t){this._mesh=new r["g"](e,t)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}()},3410:function(t,e,n){var r=n("23e7"),i=n("d039"),o=n("7b0b"),a=n("e163"),s=n("e177"),u=i((function(){a(1)}));r({target:"Object",stat:!0,forced:u,sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},"342f":function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},"34c9":function(t,e,n){"use strict";var r=n("7a90"),i=n.n(r);i.a},3523:function(t,e,n){"use strict";(function(r){function i(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}Object.defineProperty(e,"__esModule",{value:!0});var o=i(n("c23d")),a=n("9ab4"),s=n("cd51"),u=n("abfd"),c=n("4be4"),h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),s.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:s.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return s.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new l},p=f("localStorage"),d=f("sessionStorage"),v=new u.Logger("@firebase/database"),m=function(){var t=1;return function(){return t++}}(),g=function(t){var e=s.stringToByteArray(t),n=new s.Sha1;n.update(e);var r=n.digest();return s.base64.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?n+=y.apply(null,i):n+="object"===typeof i?s.stringify(i):i,n+=" "}return n},b=null,_=!0,w=function(t,e){s.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=u.LogLevel.VERBOSE,b=v.log.bind(v),e&&d.set("logging_enabled",!0)):"function"===typeof t?b=t:(b=null,d.remove("logging_enabled"))},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===d.get("logging_enabled")&&w(!0)),b){var n=y.apply(null,t);b(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];x.apply(void 0,a.__spread([t],e))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,a.__spread(t));v.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,a.__spread(t));throw v.error(n),new Error(n)},M=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,a.__spread(t));v.warn(n)},A=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&M("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},C=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I=function(t){if(s.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},N="[MIN_NAME]",R="[MAX_NAME]",O=function(t,e){if(t===e)return 0;if(t===N||e===R)return-1;if(e===N||t===R)return 1;var n=G(t),r=G(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},L=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+s.stringify(e))},D=function(t){if("object"!==typeof t||null===t)return s.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=s.stringify(e[i]),r+=":",r+=D(t[e[i]]);return r+="}",r},k=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function F(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var U=function(t){s.assert(!C(t),"Invalid JSON number");var e,n,r,i,o,a=11,u=52,c=(1<<a-1)-1;0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,t=Math.abs(t),t>=Math.pow(2,1-c)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),c),n=i+c,r=Math.round(t*Math.pow(2,u-i)-Math.pow(2,u))):(n=0,r=Math.round(t/Math.pow(2,1-c-u))));var h=[];for(o=u;o;o-=1)h.push(r%2?1:0),r=Math.floor(r/2);for(o=a;o;o-=1)h.push(n%2?1:0),n=Math.floor(n/2);h.push(e?1:0),h.reverse();var l=h.join(""),f="";for(o=0;o<64;o+=8){var p=parseInt(l.substr(o,8),2).toString(16);1===p.length&&(p="0"+p),f+=p}return f.toLowerCase()},j=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},z=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI},B=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r},V=new RegExp("^-?(0*)\\d{1,10}$"),G=function(t){if(V.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},H=function(t){try{t()}catch(e){setTimeout((function(){var t=e.stack||"";throw M("Exception was thrown by user callback.",t),e}),Math.floor(0))}},W=function(){var t="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},q=function(t,e){var n=setTimeout(t,e);return"object"===typeof n&&n["unref"]&&n["unref"](),n},Y=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=O(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;while(e<this.pieces_.length){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),X=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=s.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=s.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=s.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),K="5",$="v",Q="s",J="r",Z="f",tt="firebaseio.com",et="ls",nt="websocket",rt="long_polling",it=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(s.assert("string"===typeof t,"typeof type must == string"),s.assert("object"===typeof e,"typeof params must == object"),t===nt)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==rt)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e["ns"]=this.namespace);var r=[];return F(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ot(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}function at(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=a.__values(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):M("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var st,ut,ct=function(t){var e=ht(t),n=e.namespace;"firebase"===e.domain&&T(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||A();var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new it(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Y(e.pathString)}},ht=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"===typeof t){var c=t.indexOf("//");c>=0&&(s=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=ot(t.substring(h,l)));var f=at(t.substring(Math.min(t.length,l)));c=e.indexOf(":"),c>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(c+1),10)):c=t.length;var p=e.split(".");3===p.length?(n=p[1],r=p[0].toLowerCase(),o=r):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in f&&(o=f["ns"])}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},lt=/[\[\].#$\/\u0000-\u001F\u007F]/,ft=/[\[\].#$\u0000-\u001F\u007F]/,pt=10485760,dt=function(t){return"string"===typeof t&&0!==t.length&&!lt.test(t)},vt=function(t){return"string"===typeof t&&0!==t.length&&!ft.test(t)},mt=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vt(t)},gt=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!C(t)||t&&"object"===typeof t&&s.contains(t,".sv")},yt=function(t,e,n,r,i){i&&void 0===n||bt(s.errorPrefix(t,e,i),n,r)},bt=function(t,e,n){var r=n instanceof Y?new X(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"===typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(C(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"===typeof e&&e.length>pt/3&&s.stringLength(e)>pt)throw new Error(t+"contains a string greater than "+pt+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"===typeof e){var i=!1,o=!1;if(F(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!dt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),bt(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},_t=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=r.slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!dt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Y.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},wt=function(t,e,n,r,i){if(!i||void 0!==n){var o=s.errorPrefix(t,e,i);if(!n||"object"!==typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];F(n,(function(t,e){var n=new Y(t);if(bt(o,e,r.child(n)),".priority"===n.getBack()&&!gt(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),_t(o,a)}},xt=function(t,e,n,r){if(!r||void 0!==n){if(C(n))throw new Error(s.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!gt(n))throw new Error(s.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Et=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(s.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},St=function(t,e,n,r){if((!r||void 0!==n)&&!dt(n))throw new Error(s.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Tt=function(t,e,n,r){if((!r||void 0!==n)&&!vt(n))throw new Error(s.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Tt(t,e,n,r)},At=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},Ct=function(t,e,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!dt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!mt(r))throw new Error(s.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},It=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(s.errorPrefix(t,e,r)+"must be a boolean.")},Nt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){s.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),s.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){s.validateArgCount("OnDisconnect.remove",0,1,arguments.length),At("OnDisconnect.remove",this.path_),s.validateCallback("OnDisconnect.remove",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){s.validateArgCount("OnDisconnect.set",1,2,arguments.length),At("OnDisconnect.set",this.path_),yt("OnDisconnect.set",1,t,this.path_,!1),s.validateCallback("OnDisconnect.set",2,e,!0);var n=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){s.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),At("OnDisconnect.setWithPriority",this.path_),yt("OnDisconnect.setWithPriority",1,t,this.path_,!1),xt("OnDisconnect.setWithPriority",2,e,!1),s.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new s.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(s.validateArgCount("OnDisconnect.update",1,2,arguments.length),At("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,M("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("OnDisconnect.update",1,t,this.path_,!1),s.validateCallback("OnDisconnect.update",2,e,!0);var i=new s.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Rt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return s.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ot=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var i,o=r===e;e=r;var a=new Array(8);for(i=7;i>=0;i--)a[i]=t.charAt(r%64),r=Math.floor(r/64);s.assert(0===r,"Cannot push at time == 0");var u=a.join("");if(o){for(i=11;i>=0&&63===n[i];i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=t.charAt(n[i]);return s.assert(20===u.length,"nextPushId: Length should be 20."),u}}(),Pt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Lt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Pt(N,t),r=new Pt(N,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Pt.MIN},t}(),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return st},set:function(t){st=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return O(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw s.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(R,st)},e.prototype.makePost=function(t,e){return s.assert("string"===typeof t,"KeyIndex indexValue must always be a string."),new Pt(t,st)},e.prototype.toString=function(){return".key"},e}(Lt),kt=new Dt;function Ft(t){ut=t}var Ut,jt,zt,Bt=function(t){return"number"===typeof t?"number:"+U(t):"string:"+t},Vt=function(t){if(t.isLeafNode()){var e=t.val();s.assert("string"===typeof e||"number"===typeof e||"object"===typeof e&&s.contains(e,".sv"),"Priority must be a string or number.")}else s.assert(t===ut||t.isEmpty(),"priority of unexpected type.");s.assert(t===ut||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Gt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,s.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Vt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ut},set:function(t){Ut=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(s.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Bt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?U(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(s.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return s.assert(i>=0,"Unknown leaf type: "+n),s.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();function Ht(t){jt=t}function Wt(t){zt=t}var qt,Yt,Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(R,new Gt("[PRIORITY-POST]",zt))},e.prototype.makePost=function(t,e){var n=jt(t);return new Pt(e,new Gt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Lt),Kt=new Xt,$t=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];var o=1;while(!t.isEmpty())if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_){e=e.left;while(!e.isEmpty())this.nodeStack_.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack_.push(e),e=e.left}return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Qt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Zt.EMPTY_NODE,this.right=null!=o?o:Zt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Zt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Zt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Jt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Qt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Zt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Qt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qt.BLACK,null,null))},t.prototype.get=function(t){var e,n=this.root_;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){var e,n=this.root_,r=null;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new $t(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new $t(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new $t(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new $t(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Jt,t}(),te=Math.log(2),ee=function(){function t(t){var e=function(t){return parseInt(Math.log(t)/te,10)},n=function(t){return parseInt(Array(t+1).join("1"),2)};this.count=e(t+1),this.current_=this.count-1;var r=n(this.count);this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ne=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Qt(a,o.node,Qt.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],a=n?n(o):o,new Qt(a,o.node,Qt.BLACK,c,h)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),h=t[o],l=n?n(h):h;u(new Qt(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?s(l,Qt.BLACK):(s(l,Qt.BLACK),s(l,Qt.RED))}return o},a=new ee(t.length),s=o(a);return new Zt(r||e,s)},re={},ie=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return s.assert(re&&Kt,"ChildrenNode.ts has not been loaded"),qt=qt||new t({".priority":re},{".priority":Kt}),qt},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=s.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Zt?e:null},t.prototype.hasIndex=function(t){return s.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){s.assert(e!==kt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var r,i=[],o=!1,u=n.getIterator(Pt.Wrap),c=u.getNext();while(c)o=o||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=o?ne(i,e.getCompare()):re;var h=e.toString(),l=a.__assign({},this.indexSet_);l[h]=e;var f=a.__assign({},this.indexes_);return f[h]=r,new t(f,l)},t.prototype.addToIndexes=function(e,n){var r=this,i=s.map(this.indexes_,(function(t,i){var o=s.safeGet(r.indexSet_,i);if(s.assert(o,"Missing index implementation for "+i),t===re){if(o.isDefinedOn(e.node)){var a=[],u=n.getIterator(Pt.Wrap),c=u.getNext();while(c)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ne(a,o.getCompare())}return re}var h=n.get(e.name),l=t;return h&&(l=l.remove(new Pt(e.name,h))),l.insert(e,e.node)}));return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=s.map(this.indexes_,(function(t){if(t===re)return t;var r=n.get(e.name);return r?t.remove(new Pt(e.name,r)):t}));return new t(r,this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function oe(t,e){return O(t.name,e.name)}function ae(t,e){return O(t,e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Vt(this.priorityNode_),this.children_.isEmpty()&&s.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Yt||(Yt=new t(new Zt(ae),null,ie.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Yt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Yt:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(s.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Pt(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Yt:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;s.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Kt,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Bt(this.getPriority().val())+":"),this.forEachChild(Kt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Pt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));var r=this.children_.getIteratorFrom(t.name,Pt.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)<0)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));var r=this.children_.getReverseIteratorFrom(t.name,Pt.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)>0)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ce?-1:0},t.prototype.withIndex=function(e){if(e===kt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===kt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){var n=this.getIterator(Kt),r=e.getIterator(Kt),i=n.getNext(),o=r.getNext();while(i&&o){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===kt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ue=function(t){function e(){return t.call(this,new Zt(ae),se.EMPTY_NODE,ie.Default)||this}return a.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return se.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(se),ce=new ue;Object.defineProperties(Pt,{MIN:{value:new Pt(N,se.EMPTY_NODE)},MAX:{value:new Pt(R,ce)}}),Dt.__EMPTY_NODE=se.EMPTY_NODE,Gt.__childrenNodeConstructor=se,Ft(ce),Wt(ce);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var he=!0;function le(t,e){if(void 0===e&&(e=null),null===t)return se.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),s.assert(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t){var n=t;return new Gt(n,le(e))}if(t instanceof Array||!he){var r=se.EMPTY_NODE;return F(t,(function(e,n){if(s.contains(t,e)&&"."!==e.substring(0,1)){var i=le(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(e,i))}})),r.updatePriority(le(e))}var i=[],o=!1,a=t;if(F(a,(function(t,e){if("."!==t.substring(0,1)){var n=le(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new Pt(t,n)))}})),0===i.length)return se.EMPTY_NODE;var u=ne(i,oe,(function(t){return t.name}),ae);if(o){var c=ne(i,Kt.getCompare());return new se(u,le(e),new ie({".priority":c},{".priority":Kt}))}return new se(u,le(e),ie.Default)}Ht(le);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fe,pe,de=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?O(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return Pt.MAX},e.prototype.makePost=function(t,e){var n=le(t);return new Pt(e,n)},e.prototype.toString=function(){return".value"},e}(Lt),ve=new de,me=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,s.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return a.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=le(t),r=se.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pt(e,r)},e.prototype.maxPost=function(){var t=se.EMPTY_NODE.updateChild(this.indexPath_,ce);return new Pt(R,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Lt),ge=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return s.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return s.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return s.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return s.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){s.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),Tt("DataSnapshot.child",1,e,!1);var n=new Y(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Kt)},t.prototype.hasChild=function(t){s.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),Tt("DataSnapshot.hasChild",1,t,!1);var e=new Y(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return s.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(s.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),s.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Kt))}))},t.prototype.hasChildren=function(){return s.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return s.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return s.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),ye=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+s.stringify(this.snapshot.exportVal())},t}(),be=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),_e=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ye("value",this,new ge(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new be(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),we=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,s.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new be(this,t,e):null},t.prototype.createEvent=function(t,e){s.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ye(t.type,this,new ge(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length,a=i.length;if(o===a){if(1===o){var s=r[0],u=i[0];return u===s&&(!e.callbacks_[s]||!this.callbacks_[u]||e.callbacks_[s]===this.callbacks_[u])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),xe=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(fe,"Reference.ts has not been loaded"),fe},set:function(t){fe=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===kt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){var o=t.getIndexStartName();if(o!==N)throw new Error(r);if("string"!==typeof e)throw new Error(i)}if(t.hasEnd()){var a=t.getIndexEndName();if(a!==R)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(t.getIndex()===Kt){if(null!=e&&!gt(e)||null!=n&&!gt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(s.assert(t.getIndex()instanceof me||t.getIndex()===ve,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return s.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){s.validateArgCount("Query.on",2,4,arguments.length),Et("Query.on",1,e,!1),s.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new _e(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new we(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){s.validateArgCount("Query.off",0,3,arguments.length),Et("Query.off",1,t,!0),s.validateCallback("Query.off",2,e,!0),s.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new _e(o,null,n||null)}else t&&(e&&(i={},i[t]=e),r=new we(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;s.validateArgCount("Query.once",1,4,arguments.length),Et("Query.once",1,e,!1),s.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new s.Deferred;c.promise.catch((function(){}));var h=function(t){u&&(u=!1,o.off(e,h),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,h,(function(t){o.off(e,h),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(s.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(s.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(s.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Tt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Y(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new me(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){s.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){s.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){s.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(ve);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.startAt",0,2,arguments.length),yt("Query.startAt",1,e,this.path,!0),St("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.endAt",0,2,arguments.length),yt("Query.endAt",1,e,this.path,!0),St("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(s.validateArgCount("Query.equalTo",1,2,arguments.length),yt("Query.equalTo",1,t,this.path,!1),St("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return s.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return s.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=D(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(s.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,s.validateCallback(t,3,r.cancel,!0),r.context=n,s.validateContextObject(t,4,r.context,!0);else if(e)if("object"===typeof e&&null!==e)r.context=e;else{if("function"!==typeof e)throw new Error(s.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Ee=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();if(t=t.popFront(),this.children.has(e)){var n=this.children.get(e);return n.find(t)}return null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Kt,(function(t,e){n.remember(new Y(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();if(t=t.popFront(),this.children.has(r)){var i=this.children.get(r).forget(t);i&&this.children.delete(r)}return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Y(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),Se=function(t){return t=t||{},t["timestamp"]=t["timestamp"]||(new Date).getTime(),t},Te=function(t,e){return t&&"object"===typeof t?(s.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},Me=function(t,e){var n=new Ee;return t.forEachTree(new Y(""),(function(t,r){n.remember(t,Ae(r,e))})),n},Ae=function(t,e){var n,r=t.getPriority().val(),i=Te(r,e);if(t.isLeafNode()){var o=t,a=Te(o.getValue(),e);return a!==o.getValue()||i!==o.getPriority().val()?new Gt(a,le(i)):t}var s=t;return n=s,i!==s.getPriority().val()&&(n=n.updatePriority(new Gt(i))),s.forEachChild(Kt,(function(t,r){var i=Ae(r,e);i!==r&&(n=n.updateImmediateChild(t,i))})),n};(function(t){t[t["OVERWRITE"]=0]="OVERWRITE",t[t["MERGE"]=1]="MERGE",t[t["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",t[t["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(pe||(pe={}));var Ce,Ie,Ne=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,s.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),Re=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=pe.ACK_USER_WRITE,this.source=Ne.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return s.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Y(e));return new t(Y.Empty,n,this.revert)}return s.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Oe=function(){return Ce||(Ce=new Zt(P)),Ce},Pe=function(){function t(t,e){void 0===e&&(e=Oe()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return F(e,(function(t,e){n=n.set(new Y(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Y.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);if(null!=i){var o=new Y(n).child(i.path);return{path:o,value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.set(e.popFront(),n),a=this.children.insert(r,o);return new t(this.value,a)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=this.children.get(r)||t.Empty,o=i.setTree(e.popFront(),n),a=void 0;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,a)},t.prototype.fold=function(t){return this.fold_(Y.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Y.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Y.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Y.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),Le=function(){function t(t,e){this.source=t,this.path=e,this.type=pe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty):new t(this.source,this.path.popFront())},t}(),De=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=pe.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ke=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=pe.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new De(this.source,Y.Empty,n.value):new t(this.source,Y.Empty,n)}return s.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Fe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ue=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Fe(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Fe(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Fe(se.EMPTY_NODE,!1,!1),new Fe(se.EMPTY_NODE,!1,!1)),t}(),je=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),ze=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){s.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(je.childRemovedChange(e,a)):s.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(je.childAddedChange(e,n)):o.trackChildChange(je.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Kt,(function(t,r){e.hasChild(t)||n.trackChildChange(je.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Kt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(je.childChangedChange(e,r,i))}else n.trackChildChange(je.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?se.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Be=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;s.assert(e===je.CHILD_ADDED||e===je.CHILD_CHANGED||e===je.CHILD_REMOVED,"Only child changes supported for tracking"),s.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===je.CHILD_ADDED&&i===je.CHILD_REMOVED)this.changeMap.set(n,je.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===je.CHILD_REMOVED&&i===je.CHILD_ADDED)this.changeMap.delete(n);else if(e===je.CHILD_REMOVED&&i===je.CHILD_CHANGED)this.changeMap.set(n,je.childRemovedChange(n,r.oldSnap));else if(e===je.CHILD_CHANGED&&i===je.CHILD_ADDED)this.changeMap.set(n,je.childAddedChange(n,t.snapshotNode));else{if(e!==je.CHILD_CHANGED||i!==je.CHILD_CHANGED)throw s.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,je.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ve=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}(),Ge=new Ve,He=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Fe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),We=function(){function t(t,e){this.viewCache=t,this.changes=e}return t}(),qe=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){s.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),s.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,u=new Be;if(n.type===pe.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(s.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===pe.MERGE){var h=n;h.source.fromUser?o=this.applyUserMerge_(e,h.path,h.children,r,i,u):(s.assert(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,h.path,h.children,r,i,a,u))}else if(n.type===pe.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,u):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,u)}else{if(n.type!==pe.LISTEN_COMPLETE)throw s.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,o,f),new We(o,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(je.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(s.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),h=c instanceof se?c:se.EMPTY_NODE,l=n.calcCompleteEventChildren(h);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),f,i)}else{var p=e.getFront();if(".priority"===p){s.assert(1===e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=v?this.filter_.updatePriority(d,v):o.getNode()}else{var m=e.popFront(),g=void 0;if(o.isCompleteForChild(p)){u=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),u);g=null!=y?o.getNode().getImmediateChild(p).updateChild(m,y):o.getNode().getImmediateChild(p)}else g=n.calcCompleteChild(p,t.getServerCache());a=null!=g?this.filter_.updateChild(o.getNode(),p,g,m,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l),d=p.updateChild(f,n);s=".priority"===l?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),l,d,f,Ge,null)}var v=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),m=new He(r,v,i);return this.generateEventCacheAfterServerEvent_(v,e,r,m,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new He(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):se.EMPTY_NODE}if(f.equals(p))a=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())&&(u=s.applyUserOverwrite_(u,h,c,i,o,a))})),r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())||(u=s.applyUserOverwrite_(u,h,c,i,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:Pe.Empty.setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new Y(e),l,r,i,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(l,n);c=s.applyServerOverwrite_(c,new Y(e),f,r,i,o,a)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=Pe.Empty;return s.getNode().forEachChild(kt,(function(t,e){u=u.set(new Y(t),e)})),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=Pe.Empty;return n.foreach((function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ge,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new He(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var h=void 0;if(t.getServerCache().isFullyInitialized())h=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();s.assert(l instanceof se,"serverChildren would be complete if leaf node"),h=n.calcCompleteEventChildren(l)}h=h,c=this.filter_.updateFullNode(u,h,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,se.EMPTY_NODE,e.popFront(),a,i):u,c.isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap()),o.isLeafNode()&&(c=this.filter_.updateFullNode(c,o,i)))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Y.Empty),t.updateEventSnap(c,o,this.filter_.filtersNodes())},t}(),Ye=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===je.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(je.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,je.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,je.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,je.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,je.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,je.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw s.assertionError("Should only compare child_ events.");var n=new Pt(t.childName,t.snapshotNode),r=new Pt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Xe=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ze(n.getIndex()),i=n.getNodeFilter();this.processor_=new qe(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(se.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(se.EMPTY_NODE,a.getNode(),null),c=new Fe(s,o.isFullyInitialized(),r.filtersNodes()),h=new Fe(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Ue(h,c),this.eventGenerator_=new Ye(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){s.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===pe.MERGE&&null!==t.source.queryId&&(s.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),s.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),s.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];if(!e.getNode().isLeafNode()){var r=e.getNode();r.forEachChild(Kt,(function(t,e){n.push(je.childAddedChange(t,e))}))}return e.isFullyInitialized()&&n.push(je.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Ke=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(Ie,"Reference.ts has not been loaded"),Ie},set:function(t){s.assert(!Ie,"__referenceConstructor has already been defined"),Ie=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var u=this.views.get(o);return s.assert(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var h=a.__values(this.views.values()),l=h.next();!l.done;l=h.next()){u=l.value;c=c.concat(u.applyOperation(t,e,n))}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof se?(s=n.calcCompleteEventChildren(r),u=!1):(s=se.EMPTY_NODE,u=!1);var c=new Ue(new Fe(s,u,!1),new Fe(r,i,!1));a=new Xe(t,c),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),u=[],c=[],h=this.hasCompleteView();if("default"===s)try{for(var l=a.__values(this.views.entries()),f=l.next();!f.done;f=l.next()){var p=a.__read(f.value,2),d=p[0],v=p[1];c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(d),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery()))}}catch(m){i={error:m}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else{v=this.views.get(s);v&&(c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(s),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery())))}return h&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=a.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=a.__values(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){var e=t.getQueryParams();if(e.loadsAllData())return this.getCompleteView();var n=t.queryIdentifier();return this.views.get(n)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=a.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),$e=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Pe(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=Y.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new Pe(n),u=this.writeTree_.setTree(e,s);return new t(u)},t.prototype.addWrites=function(t,e){var n=this;return F(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){if(e.isEmpty())return t.Empty;var n=this.writeTree_.setTree(e,Pe.Empty);return new t(n)},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Y.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Kt,(function(e,n){t.push(new Pt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Pt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new Pe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return Qe(Y.Empty,this.writeTree_,t)},t.Empty=new t(new Pe(null)),t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(s.assert(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Qe(t.child(e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je=function(){function t(){this.visibleWrites_=$e.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ze(t,this)},t.prototype.addOverwrite=function(t,e,n,r){s.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){s.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));s.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);var i=r.visible,o=!1,a=this.allWrites_.length-1;while(i&&a>=0){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var c=r.children;F(c,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}))}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(Y.Empty)){var a=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},s=t.layerTree_(this.allWrites_,a,e);h=n||se.EMPTY_NODE;return s.apply(h)}return null}var u=this.visibleWrites_.getCompleteNode(e);if(null!=u)return u;var c=this.visibleWrites_.childCompoundWrite(e);if(c.isEmpty())return n;if(null!=n||c.hasCompleteWrite(Y.Empty)){var h=n||se.EMPTY_NODE;return c.apply(h)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=se.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Kt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Kt,(function(t,e){var r=i.childCompoundWrite(new Y(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}var o=this.visibleWrites_.childCompoundWrite(t);return o.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){s.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);if(null!=i)return i;if(n.isCompleteForChild(e)){var o=this.visibleWrites_.childCompoundWrite(r);return o.apply(n.getNode().getImmediateChild(e))}return null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(Y.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];var c=[],h=o.getCompare(),l=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=l.getNext();while(f&&c.length<r)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Y.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=$e.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,u=void 0;if(o.snap)n.contains(a)?(u=Y.relativePath(n,a),r=r.addWrite(u,o.snap)):a.contains(n)&&(u=Y.relativePath(a,n),r=r.addWrite(Y.Empty,o.snap.getChild(u)));else{if(!o.children)throw s.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))u=Y.relativePath(n,a),r=r.addWrites(u,o.children);else if(a.contains(n))if(u=Y.relativePath(a,n),u.isEmpty())r=r.addWrites(Y.Empty,o.children);else{var c=s.safeGet(o.children,u.getFront());if(c){var h=c.getChild(u.popFront());r=r.addWrite(Y.Empty,h)}}}}}return r},t}(),Ze=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),tn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Pe.Empty,this.pendingWriteTree_=new Je,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new De(Ne.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Pe.fromObject(e);return this.applyOperationToSyncPoints_(new ke(Ne.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t),r=this.pendingWriteTree_.removeWrite(t);if(r){var i=Pe.Empty;return null!=n.snap?i=i.set(Y.Empty,!0):F(n.children,(function(t,e){i=i.set(new Y(t),e)})),this.applyOperationToSyncPoints_(new Re(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new De(Ne.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=Pe.fromObject(e);return this.applyOperationToSyncPoints_(new ke(Ne.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Le(Ne.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Y.relativePath(a,e),c=new De(Ne.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Y.relativePath(a,e),c=Pe.fromObject(n),h=new ke(Ne.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=Y.relativePath(o,e),u=new Le(Ne.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Y.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);if(u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(Y.Empty)):(u=new Ke,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i)a=!0;else{a=!1,i=se.EMPTY_NODE;var c=this.syncPointTree_.subtree(r);c.foreachChild((function(t,e){var n=e.getCompleteServerCache(Y.Empty);n&&(i=i.updateImmediateChild(t,n))}))}var h=u.viewExistsForQuery(e);if(!h&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);s.assert(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var f=t.getNextQueryTag_();this.queryToTagMap.set(l,f),this.tagToQueryMap.set(f,l)}var p=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,p,i,a);if(!h&&!o){var v=u.viewForQuery(e);d=d.concat(this.setupListener_(e,v))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var h=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],m=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(m),this.tagForQuery_(m),g.hashFn,g.onComplete)}}if(!l&&c.length>0&&!r)if(h){var y=null;this.listenProvider_.stopListening(t.queryForListening_(e),y)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=!0,r=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Y.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return r.calcCompleteEventCache(t,i,e,n)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView()){var r=e.getCompleteView();return[r]}var i=[];return e&&(i=e.getQueryViews()),F(n,(function(t,e){i=i.concat(e)})),i}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)s.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),F(n,(function(t,e){r=r.concat(e)})),r})),h=0;h<c.length;++h){var l=c[h];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){var e=t.getServerCache()||se.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=B(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return s.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);s.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Y.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Y.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Y.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,h=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Y.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Y.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),en=function(){function t(){this.rootNode_=se.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),nn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(x("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',M(t)},t}(),rn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),s.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return s.deepCopy(this.counters_)},t}(),on=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new rn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),an=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=a.__assign({},t);return this.last_&&F(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),sn=1e4,un=3e4,cn=3e5,hn=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new an(t);var n=sn+(un-sn)*Math.random();q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;F(e,(function(e,i){i>0&&s.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),q(this.reportStats_.bind(this),Math.floor(2*Math.random()*cn))},t}(),ln=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new fn(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r){var i=r.getPath();t(i)?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),fn=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();b&&x("event: "+e.toString()),H(n)}}},t.prototype.getPath=function(){return this.path_},t}(),pn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},s.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=a.__spread(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){s.assert(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),dn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(n="visibilitychange",e="hidden"):"undefined"!==typeof document["mozHidden"]?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document["msHidden"]?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(pn),vn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||s.isMobileCordova()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(pn),mn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&H((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;while(this.pendingResponses[this.currentResponseNum]){var o=r();if("break"===o)break}},t}(),gn="start",yn="close",bn="pLPCommand",_n="pRTLPCB",wn="id",xn="pw",En="ser",Sn="cb",Tn="seg",Mn="ts",An="d",Cn="dframe",In=1870,Nn=30,Rn=In-Nn,On=25e3,Pn=3e4,Ln=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=on.getCollection(e),this.urlFn=function(t){return e.connectionURL(rt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new mn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(Pn)),I((function(){if(!n.isClosed_){n.scriptTagHolder=new Dn((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=a.__read(t,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===gn)n.id=o,n.password=s;else{if(i!==yn)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=a.__read(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={};t[gn]="t",t[En]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t[Sn]=n.scriptTagHolder.uniqueCallbackIdentifier),t[$]=K,n.transportSessionId&&(t[Q]=n.transportSessionId),n.lastSessionId&&(t[et]=n.lastSessionId),"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf(tt)&&(t[J]=Z);var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!s.isNodeSdk()&&(!!t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!j()&&!z())},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=s.base64Encode(e),r=k(n,Rn),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!s.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={};n[Cn]="t",n[wn]=t,n[xn]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=s.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Dn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,s.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window[bn+this.uniqueCallbackIdentifier]=e,window[_n+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var a=document.domain;o='<script>document.domain="'+a+'";<\/script>'}var u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(c){x("frame writing exception"),c.stack&&x(c.stack),x(c)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{var e=t.contentWindow.document;e||x("No IE domain setting required")}catch(r){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){this.myID=t,this.myPW=e,this.alive=!0;while(this.newRequest_());},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[wn]=this.myID,t[xn]=this.myPW,t[En]=this.currentSerial;var e=this.urlFn(t),n="",r=0;while(this.pendingSegs.length>0){var i=this.pendingSegs[0];if(!(i.d.length+Nn+n.length<=In))break;var o=this.pendingSegs.shift();n=n+"&"+Tn+r+"="+o.seg+"&"+Mn+r+"="+o.ts+"&"+An+r+"="+o.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(On)),o=function(){clearTimeout(i),r()};this.addTag(t,o)},t.prototype.addTag=function(t,e){var n=this;s.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){x("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),kn="";function Fn(t){kn=t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un=16384,jn=45e3,zn=null;"undefined"!==typeof MozWebSocket?zn=MozWebSocket:"undefined"!==typeof WebSocket&&(zn=WebSocket);var Bn=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=on.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={};return r[$]=K,!s.isNodeSdk()&&"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf(tt)&&(r[J]=Z),e&&(r[Q]=e),n&&(r[et]=n),t.connectionURL(nt,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if(s.isNodeSdk()){var i=s.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/"+K+"/"+kn+"/"+r.platform+"/"+i}},a=Object({NODE_ENV:"production",VUE_APP_ApiKey:"AIzaSyBARk3BcjSSYFGe3LkDQAu1H-6VMxrolNM",VUE_APP_AppId:"1:1095910844942:web:1a329d270ba9ed1c05aa5f",VUE_APP_AuthDomain:"tessellator-space.firebaseapp.com",VUE_APP_DatabaseURL:"https://tessellator-space.firebaseio.com",VUE_APP_MessagingSenderId:"1095910844942",VUE_APP_ProjectId:"tessellator-space",VUE_APP_StorageBucket:"tessellator-space.appspot.com",BASE_URL:"/"}),u=0===this.connURL.indexOf("wss://")?a["HTTPS_PROXY"]||a["https_proxy"]:a["HTTP_PROXY"]||a["http_proxy"];u&&(o["proxy"]={origin:u}),this.mySock=new zn(this.connURL,[],o)}else this.mySock=new zn(this.connURL)}catch(h){this.log_("Error instantiating WebSocket.");var c=h.message||h.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==zn&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=s.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(s.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t["data"];if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=k(e,Un);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(jn))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Vn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ln,Bn]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Bn&&Bn["isAvailable"](),o=i&&!Bn.previouslyFailed();if(e.webSocketOnly&&(i||M("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Bn];else{var s=this.transports_=[];try{for(var u=a.__values(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var h=c.value;h&&h["isAvailable"]()&&s.push(h)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Gn=6e4,Hn=5e3,Wn=10240,qn=102400,Yn="t",Xn="d",Kn="s",$n="r",Qn="e",Jn="o",Zn="a",tr="n",er="p",nr="h",rr=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new Vn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=q((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>qn?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>Wn?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if(Yn in t){var e=t[Yn];e===Zn?this.upgradeIfSecondaryHealthy_():e===$n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===Jn&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=L("t",t),n=L("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:er,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zn,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:tr,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=L("t",t),n=L("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=L(Yn,t);if(Xn in t){var n=t[Xn];if(e===nr)this.onHandshake_(n);else if(e===tr){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===Kn?this.onConnectionShutdown_(n):e===$n?this.onReset_(n):e===Qn?S("Server Error: "+n):e===Jn?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),K!==n&&M("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),q((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(Gn))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(Hn))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:er,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ir=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),or=1e3,ar=3e5,sr=3e4,ur=1.3,cr=3e4,hr="server_kill",lr=3,fr=function(t){function e(n,r,i,o,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.onDataUpdate_=r,c.onConnectStatus_=i,c.onServerInfoUpdate_=o,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=E("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=or,c.maxReconnectDelay_=ar,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!s.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),dn.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&vn.getInstance().on("online",c.onOnline_,c),c}return a.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(s.stringify(i)),s.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),s.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i},s="q";t.tag&&(a["q"]=r.queryObject(),a["t"]=t.tag),a["h"]=t.hashFn(),this.sendRequest(s,a,(function(a){var s=a["d"],u=a["s"];e.warnOnListenWarnings_(s,r);var c=n.listens.get(i)&&n.listens.get(i).get(o);c===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===typeof t&&s.contains(t,"w")){var n=s.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();M("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e=t&&40===t.length;(e||s.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sr)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=s.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r["noauth"]=!0:"object"===typeof this.authOverride_&&(r["authvar"]=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n["s"],i=n["d"]||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t},o="n";r&&(i["q"]=n,i["t"]=r),this.sendRequest(o,i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t["s"],t["d"])}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o["h"]=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r["s"],r["d"])}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){var n=t["s"];if("ok"!==n){var r=t["d"];e.log_("reportStats","Error sending stats: "+r)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+s.stringify(t));var e=t["r"],n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t["b"]))}else{if("error"in t)throw"A server-side error has occurred: "+t["error"];"a"in t&&this.onDataPush_(t["a"],t["b"])}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e["p"],e["d"],!1,e["t"]):"m"===t?this.onDataUpdate_(e["p"],e["d"],!0,e["t"]):"c"===t?this.onListenRevoked_(e["p"],e["q"]):"ac"===t?this.onAuthRevoked_(e["s"],e["d"]):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+s.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;s.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=or,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=or,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>cr&&(this.reconnectDelay_=or),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ur)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,r())},l=function(t){s.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)};this.realtime_={close:h,sendRequest:l};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(e){u?x("getToken() completed but was canceled"):(x("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,c=new rr(i,o.repoInfo_,t,n,r,(function(t){M(t+" ("+o.repoInfo_.toString()+")"),o.interrupt(hr)}),a))})).then(null,(function(t){o.log_("Failed to get token: "+t),u||(s.CONSTANTS.NODE_ADMIN&&M(t),h())}))}},e.prototype.interrupt=function(t){x("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){x("Resuming connection for reason: "+t),delete this.interruptReasons_[t],s.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=or,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return D(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Y(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){x("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=lr&&(this.reconnectDelay_=sr,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t["msg"].replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=a.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,a.__values(s.values())),c=u.next();!c.done;c=u.next()){var h=c.value;this.sendListen_(h)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);while(this.onDisconnectRequestQueue_.length){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";s.CONSTANTS.NODE_ADMIN?e="admin_node":s.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+kn.replace(/\./g,"-")]=1,s.isMobileCordova()?t["framework.cordova"]=1:s.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=vn.getInstance().currentlyOnline();return s.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ir),pr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=E("p:rest:"),i.listens_={},i}return a.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(s.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var h=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",h,(function(t,e){var n,h=e;(404===t&&(h=null,t=null),null===t&&o.onDataUpdate_(a,h,!1,r),s.safeGet(o.listens_,u)===c)&&(n=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(n,null))}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e["format"]="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e["auth"]=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+s.querystring(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=s.jsonEval(u.responseText)}catch(e){M("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&M("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(ir),dr="repo_interrupt",vr=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ln,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Ee,this.persistentConnection_=null;var o=new nn(n,r);if(this.stats_=on.getCollection(t),e||W())this.server_=new pr(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options["databaseAuthVariableOverride"];if("undefined"!==typeof a&&null!==a){if("object"!==typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{s.stringify(a)}catch(u){throw new Error("Invalid authOverride provided: "+u)}}this.persistentConnection_=new fr(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=on.getOrCreateReporter(t,(function(){return new hn(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new en,this.infoSyncTree_=new tn({startListening:function(t,e,n,r){var o=[],a=i.infoData_.getNode(t.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new tn({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Y(".info/serverTimeOffset")),e=t.val()||0;return(new Date).getTime()+e},t.prototype.generateServerValues=function(){return Se({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Y(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=s.map(e,(function(t){return le(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=le(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=s.map(e,(function(t){return le(t)}));o=this.serverSyncTree_.applyServerMerge(i,c)}else{var h=le(e);o=this.serverSyncTree_.applyServerOverwrite(i,h)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;F(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Y("/.info/"+t),r=le(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=le(e,n),s=Ae(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||M("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(F(e,(function(t,e){i=!1;var n=le(e);a[t]=Ae(n,o)})),i)x("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||M("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)})),F(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=Me(this.onDisconnect_,e),r=[];n.forEachTree(Y.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Ee,this.eventQueue_.raiseEventsForChangedPath(Y.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=le(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=le(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(s.isEmpty(e))return x("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&F(e,(function(e,n){var i=le(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(dr)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(dr)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var e;t?(this.statsListener_||(this.statsListener_=new an(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);F(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),x.apply(void 0,a.__spread([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&H((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Ar(this))},enumerable:!0,configurable:!0}),t}(),mr=function(){function t(e){this.indexedFilter_=new ze(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Pt(e,n))||(n=se.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=se.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(se.EMPTY_NODE);var i=this;return e.forEachChild(Kt,(function(t,e){i.matches(new Pt(t,e))||(r=r.updateImmediateChild(t,se.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),gr=function(){function t(t){this.rangedFilter_=new mr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Pt(e,n))||(n=se.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=se.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=se.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);var o=0;while(i.hasNext()&&o<this.limit_){var a=i.getNext(),s=void 0;if(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!s)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=e.withIndex(this.index_),r=r.updatePriority(se.EMPTY_NODE);var u=void 0,c=void 0,h=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();h=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();o=0;var f=!1;while(i.hasNext()){a=i.getNext();!f&&h(u,a)<=0&&(f=!0);s=f&&o<this.limit_&&h(a,c)<=0;s?o++:r=r.updateImmediateChild(a.name,se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var u=t;s.assert(u.numChildren()===this.limit_,"");var c=new Pt(e,n),h=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(u.hasChild(e)){var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,h,this.reverse_);while(null!=p&&(p.name===e||u.hasChild(p.name)))p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:o(p,c),v=l&&!n.isEmpty()&&d>=0;if(v)return null!=i&&i.trackChildChange(je.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(je.childRemovedChange(e,f));var m=u.updateImmediateChild(e,se.EMPTY_NODE),g=null!=p&&this.rangedFilter_.matches(p);return g?(null!=i&&i.trackChildChange(je.childAddedChange(p.name,p.node)),m.updateImmediateChild(p.name,p.node)):m}return n.isEmpty()?t:l&&o(h,c)>=0?(null!=i&&(i.trackChildChange(je.childRemovedChange(h.name,h.node)),i.trackChildChange(je.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(h.name,se.EMPTY_NODE)):t},t}(),yr=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:N},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:R},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return s.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Kt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Kt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new ze(this.getIndex()):this.hasLimit()?new gr(this):new mr(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Kt?e=n.PRIORITY_INDEX:this.index_===ve?e=n.VALUE_INDEX:this.index_===kt?e=n.KEY_INDEX:(s.assert(this.index_ instanceof me,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=s.stringify(e),this.startSet_&&(r[n.START_AT]=s.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+s.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=s.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+s.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),br=function(t){function e(e,n){var r=this;if(!(e instanceof vr))throw new Error("new Reference() no longer supported - use app.database().");return r=t.call(this,e,n,yr.DEFAULT,!1)||this,r}return a.__extends(e,t),e.prototype.getKey=function(){return s.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return s.validateArgCount("Reference.child",1,1,arguments.length),"number"===typeof t?t=String(t):t instanceof Y||(null===this.path.getFront()?Mt("Reference.child",1,t,!1):Tt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){s.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){s.validateArgCount("Reference.root",0,0,arguments.length);var t=this;while(null!==t.getParent())t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){s.validateArgCount("Reference.set",1,2,arguments.length),At("Reference.set",this.path),yt("Reference.set",1,t,this.path,!1),s.validateCallback("Reference.set",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(s.validateArgCount("Reference.update",1,2,arguments.length),At("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,M("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("Reference.update",1,t,this.path,!1),s.validateCallback("Reference.update",2,e,!0);var i=new s.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(s.validateArgCount("Reference.setWithPriority",2,3,arguments.length),At("Reference.setWithPriority",this.path),yt("Reference.setWithPriority",1,t,this.path,!1),xt("Reference.setWithPriority",2,e,!1),s.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new s.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return s.validateArgCount("Reference.remove",0,1,arguments.length),At("Reference.remove",this.path),s.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(s.validateArgCount("Reference.transaction",1,3,arguments.length),At("Reference.transaction",this.path),s.validateCallback("Reference.transaction",1,t,!1),s.validateCallback("Reference.transaction",2,e,!0),It("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new s.Deferred;"function"===typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Rt(n,i)),"function"===typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){s.validateArgCount("Reference.setPriority",1,2,arguments.length),At("Reference.setPriority",this.path),xt("Reference.setPriority",1,t,!1),s.validateCallback("Reference.setPriority",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){s.validateArgCount("Reference.push",0,2,arguments.length),At("Reference.push",this.path),yt("Reference.push",1,t,this.path,!0),s.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ot(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"===typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return At("Reference.onDisconnect",this.path),new Nt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(xe);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xe.__referenceConstructor=br,Ke.__referenceConstructor=br;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _r,wr=function(){function t(){this.children={},this.childCount=0,this.value=null}return t}(),xr=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new wr),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){var n=e instanceof Y?e:new Y(e),r=this,i=n.getFront();while(null!==i){var o=s.safeGet(r.node_.children,i)||new wr;r=new t(i,r,o),n=n.popFront(),i=n.getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){s.assert("undefined"!==typeof t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;F(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){var n=e?this:this.parent();while(null!==n){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Y(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=s.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();(function(t){t[t["RUN"]=0]="RUN",t[t["SENT"]=1]="SENT",t[t["COMPLETED"]=2]="COMPLETED",t[t["SENT_NEEDS_ABORT"]=3]="SENT_NEEDS_ABORT",t[t["NEEDS_ABORT"]=4]="NEEDS_ABORT"})(_r||(_r={})),vr.MAX_TRANSACTION_RETRIES_=25,vr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new xr},vr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new br(this,t);o.on("value",i);var a=function(){o.off("value",i)},u={path:t,update:e,onComplete:n,status:null,order:m(),applyLocally:r,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=this.getLatestState_(t);u.currentInputSnapshot=c;var h=u.update(c.val());if(void 0===h){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var l=new ge(u.currentInputSnapshot,new br(this,u.path),Kt);u.onComplete(null,!1,l)}}else{bt("transaction failed: Data returned ",h,u.path),u.status=_r.RUN;var f=this.transactionQueueTree_.subTree(t),p=f.getValue()||[];p.push(u),f.setValue(p);var d=void 0;if("object"===typeof h&&null!==h&&s.contains(h,".priority"))d=s.safeGet(h,".priority"),s.assert(gt(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var v=this.serverSyncTree_.calcCompleteEventCache(t)||se.EMPTY_NODE;d=v.getPriority().val()}d=d;var g=this.generateServerValues(),y=le(h,d),b=Ae(y,g);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=b,u.currentWriteId=this.getNextWriteId_();var _=this.serverSyncTree_.applyUserOverwrite(t,b,u.currentWriteId,u.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,_),this.sendReadyTransactions_()}},vr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||se.EMPTY_NODE},vr.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);s.assert(n.length>0,"Sending zero length transaction queue");var r=n.every((function(t){return t.status===_r.RUN}));r&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},vr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];s.assert(c.status===_r.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=_r.SENT,c.retryCount++;var h=Y.relativePath(t,c.path);o=o.updateChild(h,c.currentOutputSnapshotRaw)}var l=o.val(!0),f=t;this.server_.put(f.toString(),l,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=_r.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new br(n,e[a].path),c=new ge(s,u,Kt);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(a=0;a<o.length;a++)H(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===_r.SENT_NEEDS_ABORT?e[a].status=_r.NEEDS_ABORT:e[a].status=_r.RUN;else{M("transaction at "+f.toString()+" failed: "+r);for(a=0;a<e.length;a++)e[a].status=_r.NEEDS_ABORT,e[a].abortReason=r}n.rerunTransactions_(t)}}),a)},vr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},vr.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===_r.RUN})),o=i.map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var u=t[a],c=Y.relativePath(e,u.path),h=!1,l=void 0;if(s.assert(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===_r.NEEDS_ABORT)h=!0,l=u.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else if(u.status===_r.RUN)if(u.retryCount>=vr.MAX_TRANSACTION_RETRIES_)h=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else{var f=this.getLatestState_(u.path,o);u.currentInputSnapshot=f;var p=t[a].update(f.val());if(void 0!==p){bt("transaction failed: Data returned ",p,u.path);var d=le(p),v="object"===typeof p&&null!=p&&s.contains(p,".priority");v||(d=d.updatePriority(f.getPriority()));var m=u.currentWriteId,g=this.generateServerValues(),y=Ae(d,g);u.currentOutputSnapshotRaw=d,u.currentOutputSnapshotResolved=y,u.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(m),1),r=r.concat(this.serverSyncTree_.applyUserOverwrite(u.path,y,u.currentWriteId,u.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(m,!0))}else h=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],h&&(t[a].status=_r.COMPLETED,function(t){setTimeout(t,Math.floor(0))}(t[a].unwatcher),t[a].onComplete))if("nodata"===l){var b=new br(this,t[a].path),_=t[a].currentInputSnapshot,w=new ge(_,b,Kt);n.push(t[a].onComplete.bind(null,null,!1,w))}else n.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<n.length;a++)H(n[a]);this.sendReadyTransactions_()}},vr.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;e=t.getFront();while(null!==e&&null===n.getValue())n=n.subTree(e),t=t.popFront(),e=t.getFront();return n},vr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},vr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},vr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==_r.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},vr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},vr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===_r.SENT_NEEDS_ABORT);else if(e[o].status===_r.SENT)s.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=_r.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(s.assert(e[o].status===_r.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){var a=null;n.push(e[o].onComplete.bind(null,new Error("set"),!1,a))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)H(n[o])}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Er,Sr="databaseURL",Tr="FIREBASE_DATABASE_EMULATOR_HOST",Mr=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Er||(Er=new t),Er},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=a.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,a.__values(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next()){var h=c.value;this.repos_[s][h].interrupt()}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=a.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,a.__values(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next()){var h=c.value;this.repos_[s][h].resume()}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var i=n||t.options[Sr];void 0===i&&T("Can't determine Firebase Database URL.  Be sure to include "+Sr+" option when calling firebase.initializeApp().");var o=ct(i),a=o.repoInfo,s=void 0;"undefined"!==typeof r&&(s=Object({NODE_ENV:"production",VUE_APP_ApiKey:"AIzaSyBARk3BcjSSYFGe3LkDQAu1H-6VMxrolNM",VUE_APP_AppId:"1:1095910844942:web:1a329d270ba9ed1c05aa5f",VUE_APP_AuthDomain:"tessellator-space.firebaseapp.com",VUE_APP_DatabaseURL:"https://tessellator-space.firebaseio.com",VUE_APP_MessagingSenderId:"1095910844942",VUE_APP_ProjectId:"tessellator-space",VUE_APP_StorageBucket:"tessellator-space.appspot.com",BASE_URL:"/"})[Tr]),s&&(i="http://"+s+"?ns="+a.namespace,o=ct(i),a=o.repoInfo),Ct("Invalid Firebase Database URL",1,o),o.path.isEmpty()||T("Database URL must point to the root of a Firebase Database (not including a child path).");var u=this.createRepo(a,t,e);return u.database},t.prototype.deleteRepo=function(t){var e=s.safeGet(this.repos_,t.app.name);e&&s.safeGet(e,t.repoInfo_.toURLString())===t||T("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=s.safeGet(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=s.safeGet(r,t.toURLString());return i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new vr(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Ar=function(){function t(t){this.repo_=t,t instanceof vr||T("Don't call new Database() directly - please use firebase.database()."),this.root_=new br(t,Y.Empty),this.INTERNAL=new Cr(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),s.validateArgCount("database.ref",0,1,arguments.length),t instanceof br?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),s.validateArgCount(e,1,1,arguments.length);var n=ct(t);Ct(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&T(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&T("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){s.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){s.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),Cr=function(){function t(t){this.database=t}return t.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.database.checkDeleted_("delete"),Mr.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),Ir=function(){Bn.forceDisallow(),Ln.forceAllow()},Nr=function(){Ln.forceDisallow()},Rr=function(){return Bn["isAvailable"]()},Or=function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},Pr=function(t,e){t.repo.stats(e)},Lr=function(t,e){t.repo.statsIncrementCounter(e)},Dr=function(t){return t.repo.dataUpdateCount},kr=function(t,e){return t.repo.interceptServerData_(e)},Fr=Object.freeze({__proto__:null,forceLongPolling:Ir,forceWebSockets:Nr,isWebSocketsAvailable:Rr,setSecurityDebugCallback:Or,stats:Pr,statsIncrementCounter:Lr,dataUpdateCount:Dr,interceptServerData:kr}),Ur=fr;fr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},fr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var jr=rr,zr=function(t){var e=fr.prototype.put;return fr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){fr.prototype.put=e}},Br=it,Vr=function(t){return t.queryIdentifier()},Gr=function(t){Mr.getInstance().forceRestClient(t)},Hr=Object.freeze({__proto__:null,DataConnection:Ur,RealTimeConnection:jr,hijackHash:zr,ConnectionTarget:Br,queryIdentifier:Vr,forceRestClient:Gr}),Wr="@firebase/database",qr="0.5.24",Yr=Ar.ServerValue;function Xr(e){Fn(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new c.Component("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Mr.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:br,Query:xe,Database:Ar,DataSnapshot:ge,enableLogging:w,INTERNAL:Fr,ServerValue:Yr,TEST_ACCESS:Hr}).setMultipleInstances(!0));e.registerVersion(Wr,qr),s.isNodeSdk()&&(t.exports=n)}Xr(o),e.DataSnapshot=ge,e.Database=Ar,e.OnDisconnect=Nt,e.Query=xe,e.Reference=br,e.ServerValue=Yr,e.enableLogging=w,e.registerDatabase=Xr}).call(this,n("4362"))},"35a1":function(t,e,n){var r=n("f5df"),i=n("3f8c"),o=n("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[r(t)]}},3644:function(t,e,n){},"37e8":function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),a=n("df75");t.exports=r?Object.defineProperties:function(t,e){o(t);var n,r=a(e),s=r.length,u=0;while(s>u)i.f(t,n=r[u++],e[n]);return t}},"387f":function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},"389c":function(t,e,n){"use strict";var r=n("3908"),i=n.n(r);i.a},3908:function(t,e,n){},3934:function(t,e,n){"use strict";var r=n("c532");t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return function(){return!0}}()},"3a7b":function(t,e,n){"use strict";var r=n("ebb5"),i=n("b727").findIndex,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("findIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},"3b59":function(t,e,n){"use strict";function r(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("c23d"));n("7d28");var o,a=n("9ab4"),s=n("cd51"),u=n("abfd"),c=n("4be4"),h=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],r=e[1],r&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),l=(o={},o["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",o["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",o["registration-api-key"]="Undefined API key. Check Firebase app initialization.",o["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",o["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",o["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",o["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",o["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",o["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",o["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',o["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',o["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",o["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",o),f=new s.ErrorFactory("remoteconfig","Remote Config",l);function p(t,e){return t instanceof s.FirebaseError&&-1!==t.code.indexOf(e)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(t){return void 0===t&&(t=navigator),t.languages&&t.languages[0]||t.language}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,s,u,c,h,l,p,v,m,g,y,b,_,w,x;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=a.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:d()},c={method:"POST",headers:s,body:JSON.stringify(u)},h=fetch(o,c),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return a.sent(),[4,h];case 4:return p=a.sent(),[3,6];case 5:throw v=a.sent(),m="fetch-client-network","AbortError"===v.name&&(m="fetch-timeout"),f.create(m,{originalErrorMessage:v.message});case 6:if(g=p.status,y=p.headers.get("ETag")||void 0,200!==p.status)return[3,11];w=void 0,a.label=7;case 7:return a.trys.push([7,9,,10]),[4,p.json()];case 8:return w=a.sent(),[3,10];case 9:throw x=a.sent(),f.create("fetch-client-parse",{originalErrorMessage:x.message});case 10:b=w["entries"],_=w["state"],a.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===_?g=500:"NO_CHANGE"===_?g=304:"NO_TEMPLATE"!==_&&"EMPTY_CONFIG"!==_||(b={}),304!==g&&200!==g)throw f.create("fetch-status",{httpStatus:g});return[2,{status:g,eTag:y,config:b}]}}))}))},t}(),m=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),g=!1,y="",b=0,_=["1","true","t","yes","y","on"],w=function(){function t(t,e){void 0===e&&(e=y),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"===this._source?g:_.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return b;var t=Number(this._value);return isNaN(t)&&(t=b),t},t.prototype.getSource=function(){return this._source},t}(),x=6e4,E=432e5,S=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:x,minimumFetchIntervalMillis:E},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=u.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=u.LogLevel.SILENT;break;default:this._logger.logLevel=u.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),t.prototype.activate=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e,n;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e,n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:t=new m,setTimeout((function(){return a.__awaiter(r,void 0,void 0,(function(){return a.__generator(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=p(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return T(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new w("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new w("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new w("static"))},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(a.__assign(a.__assign({},t),e))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(t,e){var n=t.target.error||void 0;return f.create(e,{originalErrorMessage:n&&n.message})}var A="app_namespace_store",C="firebase_remote_config",I=1;function N(){return new Promise((function(t,e){var n=indexedDB.open(C,I);n.onerror=function(t){e(M(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(A,{keyPath:"compositeKey"})}}}))}var R=function(){function t(t,e,n,r){void 0===r&&(r=N()),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([A],"readonly"),a=o.objectStore(A),s=n.createCompositeKey(t);try{var u=a.get(s);u.onerror=function(t){i(M(t,"storage-get"))},u.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(c){i(f.create("storage-get",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.set=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([A],"readwrite"),s=a.objectStore(A),u=r.createCompositeKey(t);try{var c=s.put({compositeKey:u,value:e});c.onerror=function(t){o(M(t,"storage-set"))},c.onsuccess=function(){i()}}catch(h){o(f.create("storage-set",{originalErrorMessage:h&&h.message}))}}))]}}))}))},t.prototype.delete=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([A],"readwrite"),a=o.objectStore(A),s=n.createCompositeKey(t);try{var u=a.delete(s);u.onerror=function(t){i(M(t,"storage-delete"))},u.onsuccess=function(){r()}}catch(c){i(f.create("storage-delete",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),O=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return r=a.sent(),r&&(this.lastFetchStatus=r),[4,e];case 2:return i=a.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=a.sent(),o&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}(),P=1e3,L=2,D=144e5,k=.5;
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t){var e=P*Math.pow(L,t),n=Math.round(k*e*(Math.random()-.5)*2);return Math.min(D,e+n)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(f.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function j(t){if(!(t instanceof s.FirebaseError))return!1;var e=Number(t["httpStatus"]);return 429===e||500===e||503===e||504===e}var z=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return a.__awaiter(this,void 0,void 0,(function(){var e,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,U(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(i=a.sent(),!j(i))throw i;return o={throttleEndTimeMillis:Date.now()+F(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),B="@firebase/remote-config",V="0.1.17";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function G(t){function e(e,n){var r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw f.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,c=o.appId;if(!a)throw f.create("registration-project-id");if(!s)throw f.create("registration-api-key");if(!c)throw f.create("registration-app-id");n=n||"firebase";var l=new R(c,r.name,n),p=new O(l),d=new u.Logger(B);d.logLevel=u.LogLevel.ERROR;var m=new v(i,t.SDK_VERSION,n,a,s,c),g=new z(m,l),y=new h(g,l,p,d),b=new S(r,y,p,l,d);return b.ensureInitialized(),b}t.INTERNAL.registerComponent(new c.Component("remoteConfig",e,"PUBLIC").setMultipleInstances(!0)),t.registerVersion(B,V)}G(i),e.registerRemoteConfig=G},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3c5d":function(t,e,n){"use strict";var r=n("ebb5"),i=n("50c4"),o=n("182d"),a=n("7b0b"),s=n("d039"),u=r.aTypedArray,c=r.exportTypedArrayMethod,h=s((function(){new Int8Array(1).set({})}));c("set",(function(t){u(this);var e=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(t),s=i(r.length),c=0;if(s+e>n)throw RangeError("Wrong length");while(c<s)this[e+c]=r[c++]}),h)},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,i=n("69f3"),o=n("7dd0"),a="String Iterator",s=i.set,u=i.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},"3d8a":function(t,e,n){"use strict";var r=n("6e78"),i=n.n(r);i.a},"3f8c":function(t,e){t.exports={}},"3fcc":function(t,e,n){"use strict";var r=n("ebb5"),i=n("b727").map,o=n("4840"),a=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod;u("map",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(o(t,t.constructor)))(e)}))}))},"408a":function(t,e,n){var r=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},4160:function(t,e,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(t,e,n){var r=n("da84");t.exports=r},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"44ad":function(t,e,n){var r=n("d039"),i=n("c6b6"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},"44de":function(t,e,n){var r=n("da84");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},"44e7":function(t,e,n){var r=n("861d"),i=n("c6b6"),o=n("b622"),a=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},4583:function(t,e,n){"use strict";n.d(e,"b",(function(){return D})),n.d(e,"a",(function(){return st}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hollow-dots-spinner",style:t.spinnerStyle},t._l(t.dotsStyles,(function(t,e){return n("div",{key:e,staticClass:"dot",style:t})})),0)},i=[],o=(n("a9e3"),{name:"HollowDotsSpinner",props:{animationDuration:{type:Number,default:1e3},dotSize:{type:Number,default:15},dotsNum:{type:Number,default:3},color:{type:String,default:"#fff"}},computed:{horizontalMargin:function(){return this.dotSize/2},spinnerStyle:function(){return{height:"".concat(this.dotSize,"px"),width:"".concat((this.dotSize+2*this.horizontalMargin)*this.dotsNum,"px")}},dotStyle:function(){return{animationDuration:"".concat(this.animationDuration,"ms"),width:"".concat(this.dotSize,"px"),height:"".concat(this.dotSize,"px"),margin:"0 ".concat(this.horizontalMargin,"px"),borderWidth:"".concat(this.dotSize/5,"px"),borderColor:this.color}},dotsStyles:function(){for(var t=[],e=.3,n=1e3,r=1;r<=this.dotsNum;r++){var i=Object.assign({animationDelay:"".concat(n*r*e,"ms")},this.dotStyle);t.push(i)}return t}}}),a=o,s=(n("16b3"),n("2877")),u=Object(s["a"])(a,r,i,!1,null,"5a033c16",null),c=(u.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pixel-spinner",style:t.spinnerStyle},[n("div",{staticClass:"pixel-spinner-inner",style:t.spinnerInnerStyle})])}),h=[],l=(n("99af"),{appendKeyframes:function(t,e){const n=document.createElement("style");n&&(n.setAttribute("id",t),n.innerHTML=`@keyframes ${t} {${e}}`,document.body.appendChild(n))},removeKeyframes:function(t){const e=document.getElementById(t);if(!e)return;const n=e.parentNode;n.removeChild(e)}}),f={name:"PixelSpinner",props:{animationDuration:{type:Number,default:1500},size:{type:Number,default:70},color:{type:String,default:"#fff"}},data:function(){return{animationName:"pixel-spinner-animation-".concat(Date.now())}},computed:{pixelSize:function(){return this.size/7},spinnerStyle:function(){return{width:"".concat(this.size,"px"),height:"".concat(this.size,"px")}},spinnerInnerStyle:function(){return{animationDuration:"".concat(this.animationDuration,"ms"),animationName:this.animationName,width:"".concat(this.pixelSize,"px"),height:"".concat(this.pixelSize,"px"),backgroundColor:this.color,color:this.color,boxShadow:"\n                      ".concat(1.5*this.pixelSize,"px ").concat(1.5*this.pixelSize,"px 0 0,\n                      ").concat(-1.5*this.pixelSize,"px ").concat(-1.5*this.pixelSize,"px 0 0,\n                      ").concat(1.5*this.pixelSize,"px ").concat(-1.5*this.pixelSize,"px 0 0,\n                      ").concat(-1.5*this.pixelSize,"px ").concat(1.5*this.pixelSize,"px 0 0,\n                      0 ").concat(1.5*this.pixelSize,"px 0 0,\n                      ").concat(1.5*this.pixelSize,"px 0 0 0,\n                      ").concat(-1.5*this.pixelSize,"px 0 0 0,\n                      0 ").concat(-1.5*this.pixelSize,"px 0 0\n                    ")}}},watch:{size:{handler:"updateAnimation",immediate:!0}},mounted:function(){this.updateAnimation()},beforeDestroy:function(){l.removeKeyframes(this.animationName)},methods:{updateAnimation:function(){l.removeKeyframes(this.animationName),l.appendKeyframes(this.animationName,this.generateKeyframes())},generateKeyframes:function(){return"\n      50% {\n        box-shadow:  ".concat(2*this.pixelSize,"px ").concat(2*this.pixelSize,"px 0 0,\n                     ").concat(-2*this.pixelSize,"px ").concat(-2*this.pixelSize,"px 0 0,\n                     ").concat(2*this.pixelSize,"px ").concat(-2*this.pixelSize,"px 0 0,\n                     ").concat(-2*this.pixelSize,"px ").concat(2*this.pixelSize,"px 0 0,\n                     0 ").concat(this.pixelSize,"px 0 0,\n                     ").concat(this.pixelSize,"px 0 0 0,\n                     ").concat(-1*this.pixelSize,"px 0 0 0,\n                     0 ").concat(-1*this.pixelSize,"px 0 0;\n      }\n\n\n      75% {\n        box-shadow:  ").concat(2*this.pixelSize,"px ").concat(2*this.pixelSize,"px 0 0,\n                     ").concat(-2*this.pixelSize,"px ").concat(-2*this.pixelSize,"px 0 0,\n                     ").concat(2*this.pixelSize,"px ").concat(-2*this.pixelSize,"px 0 0,\n                     ").concat(-2*this.pixelSize,"px ").concat(2*this.pixelSize,"px 0 0,\n                     0 ").concat(this.pixelSize,"px 0 0,\n                     ").concat(this.pixelSize,"px 0 0 0,\n                     ").concat(-1*this.pixelSize,"px 0 0 0,\n                     0 ").concat(-1*this.pixelSize,"px 0 0;\n      }\n\n      100% {\n        transform: rotate(360deg);\n      }")}}},p=f,d=(n("6bc6"),Object(s["a"])(p,c,h,!1,null,"c76fc818",null)),v=(d.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flower-spinner",style:t.spinnerStyle},[n("div",{staticClass:"dots-container",style:t.dotsContainerStyle},[n("div",{staticClass:"big-dot",style:t.biggerDotStyle},[n("div",{staticClass:"small-dot",style:t.smallerDotStyle})])])])}),m=[],g={name:"FlowerSpinner",props:{animationDuration:{type:Number,default:2500},size:{type:Number,default:70},color:{type:String,default:"#fff"}},data:function(){return{smallDotName:"flower-spinner-small-dot-".concat(Date.now()),bigDotName:"flower-spinner-big-dot-".concat(Date.now())}},computed:{dotSize:function(){return this.size/7},spinnerStyle:function(){return{width:"".concat(this.size,"px"),height:"".concat(this.size,"px")}},dotsContainerStyle:function(){return{width:"".concat(this.dotSize,"px"),height:"".concat(this.dotSize,"px")}},smallerDotStyle:function(){return{background:this.color,animationDuration:"".concat(this.animationDuration,"ms"),animationName:this.smallDotName}},biggerDotStyle:function(){return{background:this.color,animationDuration:"".concat(this.animationDuration,"ms"),animationName:this.bigDotName}}},watch:{size:{handler:"updateAnimation",immediate:!0},color:{handler:"updateAnimation",immediate:!0}},beforeDestroy:function(){l.removeKeyframes(this.smallDotName),l.removeKeyframes(this.bigDotName)},methods:{updateAnimation:function(){l.removeKeyframes(this.smallDotName),l.appendKeyframes(this.smallDotName,this.generateSmallDotKeyframes()),l.removeKeyframes(this.bigDotName),l.appendKeyframes(this.bigDotName,this.generateBigDotKeyframes())},generateSmallDotKeyframes:function(){return"0%, 100% {\n                  box-shadow: 0 0 0 ".concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,";\n                }\n                25%, 75% {\n                  box-shadow: ").concat(1.4*this.dotSize,"px 0 0 ").concat(this.color,",\n                              -").concat(1.4*this.dotSize,"px 0 0 ").concat(this.color,",\n                              0 ").concat(1.4*this.dotSize,"px 0 ").concat(this.color,",\n                              0 -").concat(1.4*this.dotSize,"px 0 ").concat(this.color,",\n                              ").concat(this.dotSize,"px -").concat(this.dotSize,"px 0 ").concat(this.color,",\n                              ").concat(this.dotSize,"px ").concat(this.dotSize,"px 0 ").concat(this.color,",\n                              -").concat(this.dotSize,"px -").concat(this.dotSize,"px 0 ").concat(this.color,",\n                              -").concat(this.dotSize,"px ").concat(this.dotSize,"px 0 ").concat(this.color,";\n\n                }\n                100% {\n                  box-shadow: 0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,";\n                }")},generateBigDotKeyframes:function(){return"0%, 100% {\n                  box-shadow: 0 0 0 ".concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,";\n                }\n                50% {\n                  transform: rotate(180deg);\n                }\n                25%, 75% {\n                  box-shadow: ").concat(2.6*this.dotSize,"px 0 0 ").concat(this.color,",\n                              -").concat(2.6*this.dotSize,"px 0 0 ").concat(this.color,",\n                              0 ").concat(2.6*this.dotSize,"px 0 ").concat(this.color,",\n                              0 -").concat(2.6*this.dotSize,"px 0 ").concat(this.color,",\n                              ").concat(1.9*this.dotSize,"px -").concat(1.9*this.dotSize,"px 0 ").concat(this.color,",\n                              ").concat(1.9*this.dotSize,"px ").concat(1.9*this.dotSize,"px 0 ").concat(this.color,",\n                              -").concat(1.9*this.dotSize,"px -").concat(1.9*this.dotSize,"px 0 ").concat(this.color,",\n                              -").concat(1.9*this.dotSize,"px ").concat(1.9*this.dotSize,"px 0 ").concat(this.color,";\n\n                }\n                100% {\n                  transform: rotate(360deg);\n                  box-shadow: 0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,",\n                              0 0 0 ").concat(this.color,";\n                }")}}},y=g,b=(n("389c"),Object(s["a"])(y,v,m,!1,null,"f15101b8",null)),_=(b.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"intersecting-circles-spinner",style:t.spinnerStyle},[n("div",{staticClass:"spinnerBlock",style:t.spinnerBlockStyle},t._l(t.circleStyles,(function(t,e){return n("span",{key:e,staticClass:"circle",style:t})})),0)])}),w=[],x=(n("d81d"),{name:"IntersectingCirclesSpinner",props:{animationDuration:{type:Number,default:1200},size:{type:Number,default:70},color:{type:String,default:"#fff"}},computed:{circleSize:function(){return this.size/2},spinnerStyle:function(){return{width:"".concat(this.size,"px"),height:"".concat(this.size,"px")}},spinnerBlockStyle:function(){return{animationDuration:"".concat(this.animationDuration,"ms"),width:"".concat(this.circleSize,"px"),height:"".concat(this.circleSize,"px")}},circleStyle:function(){return{borderColor:this.color}},circleStyles:function(){var t=this,e=[{top:0,left:0},{left:"".concat(-.36*this.circleSize,"px"),top:"".concat(.2*this.circleSize,"px")},{left:"".concat(-.36*this.circleSize,"px"),top:"".concat(-.2*this.circleSize,"px")},{left:0,top:"".concat(-.36*this.circleSize,"px")},{left:"".concat(.36*this.circleSize,"px"),top:"".concat(-.2*this.circleSize,"px")},{left:"".concat(.36*this.circleSize,"px"),top:"".concat(.2*this.circleSize,"px")},{left:0,top:"".concat(.36*this.circleSize,"px")}];return e.map((function(e){return Object.assign(e,t.circleStyle)}))}}}),E=x,S=(n("4e68"),Object(s["a"])(E,_,w,!1,null,"91c71956",null)),T=(S.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"orbit-spinner",style:t.spinnerStyle},[n("div",{staticClass:"orbit one",style:t.orbitStyle}),n("div",{staticClass:"orbit two",style:t.orbitStyle}),n("div",{staticClass:"orbit three",style:t.orbitStyle})])}),M=[],A={name:"OrbitSpinner",props:{animationDuration:{type:Number,default:1e3},size:{type:Number,default:50},color:{type:String,default:"#fff"}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px")}},orbitStyle:function(){return{borderColor:this.color,animationDuration:"".concat(this.animationDuration,"ms")}}}},C=A,I=(n("1c92"),Object(s["a"])(C,T,M,!1,null,"34a3fdef",null)),N=(I.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fingerprint-spinner",style:t.spinnerStyle},t._l(t.ringsStyles,(function(t,e){return n("div",{key:e,staticClass:"spinner-ring",style:t})})),0)}),R=[],O={name:"FingerprintSpinner",props:{animationDuration:{type:Number,default:1500},size:{type:Number,default:60},color:{type:String,default:"#fff"}},data:function(){return{ringsNum:9,containerPadding:2}},computed:{outerRingSize:function(){return this.size-2*this.containerPadding},spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),padding:"".concat(this.containerPadding,"px")}},ringStyle:function(){return{borderTopColor:this.color,animationDuration:"".concat(this.animationDuration,"ms")}},ringsStyles:function(){for(var t=[],e=this.outerRingSize/this.ringsNum,n=e,r=1;r<=this.ringsNum;r++){var i=Object.assign({animationDelay:"".concat(50*r,"ms"),height:"".concat(e+(r-1)*n,"px"),width:"".concat(e+(r-1)*n,"px")},this.ringStyle);t.push(i)}return t}}},P=O,L=(n("10e6"),Object(s["a"])(P,N,R,!1,null,"077ae5a6",null)),D=L.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trinity-rings-spinner",style:t.spinnerStyle},[n("div",{staticClass:"circle circle1",style:t.ring1Style}),n("div",{staticClass:"circle circle2",style:t.ring2Style}),n("div",{staticClass:"circle circle3",style:t.ring3Style})])},F=[],U={name:"TrinityRingsSpinner",props:{animationDuration:{type:Number,default:1500},size:{type:Number,default:60},color:{type:String,default:"#fff"}},data:function(){return{containerPadding:3}},computed:{outerRingSize:function(){return this.size-2*this.containerPadding},spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),padding:"".concat(this.containerPadding,"px")}},ring1Style:function(){return{height:"".concat(this.outerRingSize,"px"),width:"".concat(this.outerRingSize,"px"),borderColor:this.color,animationDuration:"".concat(this.animationDuration,"ms")}},ring2Style:function(){return{height:"".concat(.65*this.outerRingSize,"px"),width:"".concat(.65*this.outerRingSize,"px"),borderColor:this.color,animationDuration:"".concat(this.animationDuration,"ms")}},ring3Style:function(){return{height:"".concat(.1*this.outerRingSize,"px"),width:"".concat(.1*this.outerRingSize,"px"),borderColor:this.color,animationDuration:"".concat(this.animationDuration,"ms")}}}},j=U,z=(n("fed0"),Object(s["a"])(j,k,F,!1,null,"19bbdf0e",null)),B=(z.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fulfilling-square-spinner",style:t.spinnerStyle},[n("div",{staticClass:"spinner-inner",style:t.spinnerInnerStyle})])}),V=[],G={name:"FulfillingSquareSpinner",props:{animationDuration:{type:Number,default:4e3},size:{type:Number,default:50},color:{type:String,default:"#fff"}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),borderColor:this.color}},spinnerInnerStyle:function(){return{backgroundColor:this.color}}}},H=G,W=(n("89df"),Object(s["a"])(H,B,V,!1,null,"3f451d6f",null)),q=(W.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"circles-to-rhombuses-spinner",style:t.spinnertStyle},t._l(t.circlesStyles,(function(t,e){return n("div",{key:e,staticClass:"circle",style:t})})),0)}),Y=[],X={name:"CirclesToRhombusesSpinner",props:{animationDuration:{type:Number,default:1200},circleSize:{type:Number,default:15},color:{type:String,default:"#fff"},circlesNum:{type:Number,default:3}},computed:{circleMarginLeft:function(){return 1.125*this.circleSize},spinnertStyle:function(){return{height:"".concat(this.circleSize,"px"),width:"".concat((this.circleSize+this.circleMarginLeft)*this.circlesNum,"px")}},circleStyle:function(){return{borderColor:this.color,animationDuration:"".concat(this.animationDuration,"ms"),height:"".concat(this.circleSize,"px"),width:"".concat(this.circleSize,"px"),marginLeft:"".concat(this.circleMarginLeft,"px")}},circlesStyles:function(){for(var t=[],e=150,n=1;n<=this.circlesNum;n++){var r=Object.assign({animationDelay:"".concat(n*e,"ms")},this.circleStyle);1===n&&(r.marginLeft=0),t.push(r)}return t}}},K=X,$=(n("0fa6"),Object(s["a"])(K,q,Y,!1,null,"7a6e17e5",null)),Q=($.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"semipolar-spinner",style:t.spinnerStyle},t._l(t.ringsStyles,(function(t,e){return n("div",{key:e,staticClass:"ring",style:t})})),0)}),J=[],Z={name:"SemipolarSpinner",props:{animationDuration:{type:Number,default:2e3},size:{type:Number,default:65},color:{type:String,default:"#fff"}},data:function(){return{ringsNum:5}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px")}},ringStyle:function(){return{animationDuration:"".concat(this.animationDuration,"ms"),borderTopColor:this.color,borderLeftColor:this.color}},ringsStyles:function(){for(var t=[],e=.1,n=.05*this.size,r=2*n,i=.2*this.size,o=0;o<this.ringsNum;o++){var a="".concat(this.size-i*o,"px"),s="".concat(r*o,"px"),u=Object.assign({animationDelay:"".concat(this.animationDuration*e*(this.ringsNum-o-1),"ms"),height:a,width:a,left:s,top:s,borderWidth:"".concat(n,"px")},this.ringStyle);t.push(u)}return t}}},tt=Z,et=(n("30df"),Object(s["a"])(tt,Q,J,!1,null,"9544fc1a",null)),nt=(et.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"breeding-rhombus-spinner",style:t.spinnerStyle},[t._l(t.rhombusesStyles,(function(t,e){return n("div",{key:e,staticClass:"rhombus",class:"child-"+(e+1),style:t})})),n("div",{staticClass:"rhombus big",style:t.bigRhombusStyle})],2)}),rt=[],it={name:"BreedingRhombusSpinner",props:{animationDuration:{type:Number,default:2e3},size:{type:Number,default:150},color:{type:String,default:"#fff"}},data:function(){return{animationBaseName:"breeding-rhombus-spinner-animation-child",rhombusesNum:8}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px")}},rhombusStyle:function(){return{height:"".concat(this.size/7.5,"px"),width:"".concat(this.size/7.5,"px"),animationDuration:"".concat(this.animationDuration,"ms"),top:"".concat(this.size/2.3077,"px"),left:"".concat(this.size/2.3077,"px"),backgroundColor:this.color}},rhombusesStyles:function(){for(var t=[],e=.05*this.animationDuration,n=1;n<=this.rhombusesNum;n++)t.push(Object.assign({animationDelay:"".concat(e*(n+1),"ms")},this.rhombusStyle));return t},bigRhombusStyle:function(){return{height:"".concat(this.size/3,"px"),width:"".concat(this.size/3,"px"),animationDuration:"".concat(this.animationDuration),top:"".concat(this.size/3,"px"),left:"".concat(this.size/3,"px"),backgroundColor:this.color}}}},ot=it,at=(n("e2f6"),Object(s["a"])(ot,nt,rt,!1,null,"8fa7a3fc",null)),st=at.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"swapping-squares-spinner",style:t.spinnerStyle},t._l(t.squaresStyles,(function(t,e){return n("div",{key:e,staticClass:"square",class:"square-"+(e+1),style:t})})),0)},ct=[],ht={name:"SwappingSquaresSpinner",props:{animationDuration:{type:Number,default:1e3},size:{type:Number,default:65},color:{type:String,default:"#fff"}},data:function(){return{animationBaseName:"swapping-squares-animation-child",squaresNum:4}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px")}},squareStyle:function(){return{height:"".concat(.25*this.size/1.3,"px"),width:"".concat(.25*this.size/1.3,"px"),animationDuration:"".concat(this.animationDuration,"ms"),borderWidth:"".concat(.04*this.size/1.3,"px"),borderColor:this.color}},squaresStyles:function(){for(var t=[],e=.5*this.animationDuration,n=1;n<=this.squaresNum;n++)t.push(Object.assign({animationDelay:"".concat(n%2===0?e:0,"ms")},this.squareStyle));return t}}},lt=ht,ft=(n("ca9a"),Object(s["a"])(lt,ut,ct,!1,null,"8265a670",null)),pt=(ft.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scaling-squares-spinner",style:t.spinnerStyle},t._l(t.squaresStyles,(function(t,e){return n("div",{key:e,staticClass:"square",class:"square-"+(e+1),style:t})})),0)}),dt=[],vt={name:"ScalingSquaresSpinner",props:{animationDuration:{type:Number,default:1250},size:{type:Number,default:65},color:{type:String,default:"#fff"}},data:function(){return{squaresNum:4}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),animationDuration:"".concat(this.animationDuration,"ms")}},squareStyle:function(){return{height:"".concat(.25*this.size/1.3,"px"),width:"".concat(.25*this.size/1.3,"px"),animationDuration:"".concat(this.animationDuration,"ms"),borderWidth:"".concat(.04*this.size/1.3,"px"),borderColor:this.color}},squaresStyles:function(){for(var t=[],e=1;e<=this.squaresNum;e++)t.push(Object.assign({},this.squareStyle));return t}}},mt=vt,gt=(n("09fe"),Object(s["a"])(mt,pt,dt,!1,null,"dbacb9de",null)),yt=(gt.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fulfilling-bouncing-circle-spinner",style:t.spinnerStyle},[n("div",{staticClass:"circle",style:t.circleStyle}),n("div",{staticClass:"orbit",style:t.orbitStyle})])}),bt=[],_t={name:"FulfillingBouncingCircleSpinner",props:{animationDuration:{type:Number,default:4e3},size:{type:Number,default:60},color:{type:String,default:"#fff"}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),animationDuration:"".concat(this.animationDuration,"ms")}},orbitStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),borderColor:this.color,borderWidth:"".concat(.03*this.size,"px"),animationDuration:"".concat(this.animationDuration,"ms")}},circleStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),borderColor:this.color,color:this.color,borderWidth:"".concat(.1*this.size,"px"),animationDuration:"".concat(this.animationDuration,"ms")}}}},wt=_t,xt=(n("5d60"),Object(s["a"])(wt,yt,bt,!1,null,"e5e606d8",null)),Et=(xt.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"radar-spinner",style:t.spinnerStyle},t._l(t.circlesStyles,(function(e,r){return n("div",{key:r,staticClass:"circle",style:e},[n("div",{staticClass:"circle-inner-container",style:t.circleInnerContainerStyle},[n("div",{staticClass:"circle-inner",style:t.circleInnerStyle})])])})),0)}),St=[],Tt={name:"RadarSpinner",props:{animationDuration:{type:Number,default:2e3},size:{type:Number,default:110},color:{type:String,default:"#fff"}},data:function(){return{circlesNum:4}},computed:{borderWidth:function(){return 5*this.size/110},spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px")}},circleStyle:function(){return{animationDuration:"".concat(this.animationDuration,"ms")}},circleInnerContainerStyle:function(){return{borderWidth:"".concat(this.borderWidth,"px")}},circleInnerStyle:function(){return{borderLeftColor:this.color,borderRightColor:this.color,borderWidth:"".concat(this.borderWidth,"px")}},circlesStyles:function(){for(var t=[],e=.15*this.animationDuration,n=0;n<this.circlesNum;n++)t.push(Object.assign({padding:"".concat(2*this.borderWidth*n,"px"),animationDelay:"".concat(n===this.circlesNum-1?0:e,"ms")},this.circleStyle));return t}}},Mt=Tt,At=(n("3d8a"),Object(s["a"])(Mt,Et,St,!1,null,"5710a196",null)),Ct=(At.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"self-building-square-spinner",style:t.spinnerStyle},t._l(t.squaresStyles,(function(t,e){return n("div",{key:e,staticClass:"square",class:{clear:e&&e%3===0},style:t})})),0)}),It=[],Nt={name:"SelfBuildingSquareSpinner",props:{animationDuration:{type:Number,default:6e3},size:{type:Number,default:40},color:{type:String,default:"#fff"}},data:function(){return{squaresNum:9}},computed:{squareSize:function(){return this.size/4},initialTopPosition:function(){return 2*-this.squareSize/3},spinnerStyle:function(){return{top:"".concat(-this.initialTopPosition,"px"),height:"".concat(this.size,"px"),width:"".concat(this.size,"px")}},squareStyle:function(){return{height:"".concat(this.squareSize,"px"),width:"".concat(this.squareSize,"px"),top:"".concat(this.initialTopPosition,"px"),marginRight:"".concat(this.squareSize/3,"px"),marginTop:"".concat(this.squareSize/3,"px"),animationDuration:"".concat(this.animationDuration,"ms"),background:this.color}},squaresStyles:function(){for(var t=[],e=[6,7,8,3,4,5,0,1,2],n=.05*this.animationDuration,r=0;r<this.squaresNum;r++)t.push(Object.assign({animationDelay:"".concat(n*e[r],"ms")},this.squareStyle));return t}}},Rt=Nt,Ot=(n("e2ed"),Object(s["a"])(Rt,Ct,It,!1,null,"eb840b8e",null)),Pt=(Ot.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spring-spinner",style:t.spinnerStyle},[n("div",{staticClass:"spring-spinner-part top",style:t.spinnerPartStyle},[n("div",{staticClass:"spring-spinner-rotator",style:t.rotatorStyle})]),n("div",{staticClass:"spring-spinner-part bottom",style:t.spinnerPartStyle},[n("div",{staticClass:"spring-spinner-rotator",style:t.rotatorStyle})])])}),Lt=[],Dt={name:"SpringSpinner",props:{animationDuration:{type:Number,default:3e3},size:{type:Number,default:70},color:{type:String,default:"#fff"}},data:function(){return{animationName:"spring-spinner-animation-".concat(Date.now())}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px")}},spinnerPartStyle:function(){return{height:"".concat(this.size/2,"px"),width:"".concat(this.size,"px")}},rotatorStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),borderRightColor:this.color,borderTopColor:this.color,borderWidth:"".concat(this.size/7,"px"),animationDuration:"".concat(this.animationDuration,"ms"),animationName:this.animationName}}},watch:{size:{handler:"updateAnimation",immediate:!0},color:{handler:"updateAnimation",immediate:!0}},mounted:function(){this.updateAnimation()},beforeDestroy:function(){l.removeKeyframes(this.animationName)},methods:{updateAnimation:function(){l.removeKeyframes(this.animationName),l.appendKeyframes(this.animationName,this.generateKeyframes())},generateKeyframes:function(){return"\n        0% {\n          border-width: ".concat(this.size/7,"px;\n        }\n        25% {\n          border-width: ").concat(this.size/23.33,"px;\n        }\n        50% {\n          transform: rotate(115deg);\n          border-width: ").concat(this.size/7,"px;\n        }\n        75% {\n          border-width: ").concat(this.size/23.33,"px;\n         }\n        100% {\n         border-width: ").concat(this.size/7,"px;\n        }")}}},kt=Dt,Ft=(n("34c9"),Object(s["a"])(kt,Pt,Lt,!1,null,"1ae1dc20",null)),Ut=(Ft.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"looping-rhombuses-spinner",style:t.spinnerStyle},t._l(t.rhombusesStyles,(function(t,e){return n("div",{staticClass:"rhombus",style:t,attrs:{ikey:e}})})),0)}),jt=[],zt={name:"LoopingRhombusesSpinner",props:{animationDuration:{type:Number,default:2500},rhombusSize:{type:Number,default:15},color:{type:String,default:"#fff"}},data:function(){return{rhombusesNum:3}},computed:{spinnerStyle:function(){return{height:"".concat(this.rhombusSize,"px"),width:"".concat(4*this.rhombusSize,"px")}},rhombusStyle:function(){return{height:"".concat(this.rhombusSize,"px"),width:"".concat(this.rhombusSize,"px"),backgroundColor:this.color,animationDuration:"".concat(this.animationDuration,"ms"),left:"".concat(4*this.rhombusSize,"px")}},rhombusesStyles:function(){for(var t=[],e=-this.animationDuration/1.5,n=1;n<=this.rhombusesNum;n++){var r=Object.assign({animationDelay:"".concat(n*e,"ms")},this.rhombusStyle);t.push(r)}return t}}},Bt=zt,Vt=(n("1016"),Object(s["a"])(Bt,Ut,jt,!1,null,"49d9ad28",null)),Gt=(Vt.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"half-circle-spinner",style:t.spinnerStyle},[n("div",{staticClass:"circle circle-1",style:t.circle1Style}),n("div",{staticClass:"circle circle-2",style:t.circle2Style})])}),Ht=[],Wt={name:"HalfCircleSpinner",props:{animationDuration:{type:Number,default:1e3},size:{type:Number,default:60},color:{type:String,default:"#fff"}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px")}},circleStyle:function(){return{borderWidth:"".concat(this.size/10,"px"),animationDuration:"".concat(this.animationDuration,"ms")}},circle1Style:function(){return Object.assign({borderTopColor:this.color},this.circleStyle)},circle2Style:function(){return Object.assign({borderBottomColor:this.color},this.circleStyle)}}},qt=Wt,Yt=(n("66d3"),Object(s["a"])(qt,Gt,Ht,!1,null,"669f3b60",null)),Xt=(Yt.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"atom-spinner",style:t.spinnerStyle},[n("div",{staticClass:"spinner-inner"},[n("div",{staticClass:"spinner-line",style:t.lineStyle}),n("div",{staticClass:"spinner-line",style:t.lineStyle}),n("div",{staticClass:"spinner-line",style:t.lineStyle}),n("div",{staticClass:"spinner-circle",style:t.circleStyle},[t._v(" ● ")])])])}),Kt=[],$t={name:"AtomSpinner",props:{animationDuration:{type:Number,default:1e3},size:{type:Number,default:60},color:{type:String,default:"#fff"}},computed:{spinnerStyle:function(){return{height:"".concat(this.size,"px"),width:"".concat(this.size,"px")}},circleStyle:function(){return{color:this.color,fontSize:"".concat(.24*this.size,"px")}},lineStyle:function(){return{animationDuration:"".concat(this.animationDuration,"ms"),borderLeftWidth:"".concat(this.size/25,"px"),borderTopWidth:"".concat(this.size/25,"px"),borderLeftColor:this.color}}}},Qt=$t,Jt=(n("741b"),Object(s["a"])(Qt,Xt,Kt,!1,null,"fb9a33c4",null));Jt.exports},"467f":function(t,e,n){"use strict";var r=n("2d83");t.exports=function(t,e,n){var i=n.config.validateStatus;!i||i(n.status)?t(n):e(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},4695:function(t,e,n){},4840:function(t,e,n){var r=n("825a"),i=n("1c0b"),o=n("b622"),a=o("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},4930:function(t,e,n){var r=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"498a":function(t,e,n){"use strict";var r=n("23e7"),i=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},"4a7b":function(t,e,n){"use strict";var r=n("c532");t.exports=function(t,e){e=e||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(t){"undefined"!==typeof e[t]&&(n[t]=e[t])})),r.forEach(o,(function(i){r.isObject(e[i])?n[i]=r.deepMerge(t[i],e[i]):"undefined"!==typeof e[i]?n[i]=e[i]:r.isObject(t[i])?n[i]=r.deepMerge(t[i]):"undefined"!==typeof t[i]&&(n[i]=t[i])})),r.forEach(a,(function(r){"undefined"!==typeof e[r]?n[r]=e[r]:"undefined"!==typeof t[r]&&(n[r]=t[r])}));var s=i.concat(o).concat(a),u=Object.keys(e).filter((function(t){return-1===s.indexOf(t)}));return r.forEach(u,(function(r){"undefined"!==typeof e[r]?n[r]=e[r]:"undefined"!==typeof t[r]&&(n[r]=t[r])})),n}},"4ae1":function(t,e,n){var r=n("23e7"),i=n("d066"),o=n("1c0b"),a=n("825a"),s=n("861d"),u=n("7c73"),c=n("0538"),h=n("d039"),l=i("Reflect","construct"),f=h((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),p=!h((function(){l((function(){}))})),d=f||p;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(p&&!f)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var i=n.prototype,h=u(s(i)?i:Object.prototype),d=Function.apply.call(t,h,e);return s(d)?d:h}})},"4be4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("9ab4"),i=n("cd51"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=a);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:a,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(u){if(i)return null;throw u}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,c(t))try{this.getOrInitializeService(a)}catch(p){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),u=s[0],h=s[1],l=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService(l);h.resolve(f)}catch(p){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,u(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:a:t},t}();function u(t){return t===a?void 0:t}function c(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=h,e.Provider=s},"4d64":function(t,e,n){var r=n("fc6a"),i=n("50c4"),o=n("23cb"),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),h=o(a,c);if(t&&n!=n){while(c>h)if(s=u[h++],s!=s)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),a=n("ae40"),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4e68":function(t,e,n){"use strict";var r=n("e7a7"),i=n.n(r);i.a},"4ec9":function(t,e,n){"use strict";var r=n("6d61"),i=n("6566");t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"50c4":function(t,e,n){var r=n("a691"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},5135:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},5270:function(t,e,n){"use strict";var r=n("c532"),i=n("c401"),o=n("2e67"),a=n("2444");function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){s(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]}));var e=t.adapter||a.adapter;return e(t).then((function(e){return s(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(s(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},5404:function(t,e,n){},"549e":function(t,e,n){},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var r=n("d066"),i=n("241c"),o=n("7418"),a=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),i=n("5899"),o="["+i+"]",a=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),u=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},"5a89":function(t,e,n){"use strict";n.d(e,"a",(function(){return Li})),n.d(e,"b",(function(){return rd})),n.d(e,"c",(function(){return Lr})),n.d(e,"d",(function(){return Xh})),n.d(e,"e",(function(){return pt})),n.d(e,"f",(function(){return zr})),n.d(e,"g",(function(){return Mi})),n.d(e,"h",(function(){return Br})),n.d(e,"i",(function(){return lf})),n.d(e,"j",(function(){return uf})),n.d(e,"k",(function(){return ht})),n.d(e,"l",(function(){return Hh})),n.d(e,"m",(function(){return Mp})),n.d(e,"n",(function(){return Gi})),n.d(e,"o",(function(){return no})),n.d(e,"p",(function(){return Tp})),n.d(e,"q",(function(){return Nt})),n.d(e,"r",(function(){return Hn})),n.d(e,"s",(function(){return Bi})),n.d(e,"t",(function(){return Bl})),n.d(e,"u",(function(){return zl})),n.d(e,"v",(function(){return Ep})),n.d(e,"w",(function(){return Vh})),n.d(e,"x",(function(){return Ui})),n.d(e,"y",(function(){return an})),n.d(e,"z",(function(){return fn})),n.d(e,"A",(function(){return Lc})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e});var r="115",i=0,o=1,a=2,s=1,u=2,c=3,h=0,l=1,f=2,p=1,d=0,v=1,m=2,g=3,y=4,b=5,_=100,w=101,x=102,E=103,S=104,T=200,M=201,A=202,C=203,I=204,N=205,R=206,O=207,P=208,L=209,D=210,k=0,F=1,U=2,j=3,z=4,B=5,V=6,G=7,H=0,W=1,q=2,Y=0,X=1,K=2,$=3,Q=4,J=5,Z=300,tt=301,et=302,nt=303,rt=304,it=305,ot=306,at=307,st=1e3,ut=1001,ct=1002,ht=1003,lt=1004,ft=1005,pt=1006,dt=1007,vt=1008,mt=1009,gt=1010,yt=1011,bt=1012,_t=1013,wt=1014,xt=1015,Et=1016,St=1017,Tt=1018,Mt=1019,At=1020,Ct=1021,It=1022,Nt=1023,Rt=1024,Ot=1025,Pt=Nt,Lt=1026,Dt=1027,kt=1028,Ft=1029,Ut=1030,jt=1031,zt=1032,Bt=1033,Vt=33776,Gt=33777,Ht=33778,Wt=33779,qt=35840,Yt=35841,Xt=35842,Kt=35843,$t=36196,Qt=37492,Jt=37496,Zt=37808,te=37809,ee=37810,ne=37811,re=37812,ie=37813,oe=37814,ae=37815,se=37816,ue=37817,ce=37818,he=37819,le=37820,fe=37821,pe=36492,de=37840,ve=37841,me=37842,ge=37843,ye=37844,be=37845,_e=37846,we=37847,xe=37848,Ee=37849,Se=37850,Te=37851,Me=37852,Ae=37853,Ce=2200,Ie=2201,Ne=2202,Re=2300,Oe=2301,Pe=2302,Le=2400,De=2401,ke=2402,Fe=0,Ue=3e3,je=3001,ze=3007,Be=3002,Ve=3003,Ge=3004,He=3005,We=3006,qe=3200,Ye=3201,Xe=0,Ke=1,$e=7680,Qe=519,Je=35044,Ze=35048;function tn(){}Object.assign(tn.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,r=n[t];if(void 0!==r){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,t)}}}});for(var en=[],nn=0;nn<256;nn++)en[nn]=(nn<16?"0":"")+nn.toString(16);var rn,on={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=en[255&t]+en[t>>8&255]+en[t>>16&255]+en[t>>24&255]+"-"+en[255&e]+en[e>>8&255]+"-"+en[e>>16&15|64]+en[e>>24&255]+"-"+en[63&n|128]+en[n>>8&255]+"-"+en[n>>16&255]+en[n>>24&255]+en[255&r]+en[r>>8&255]+en[r>>16&255]+en[r>>24&255];return i.toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*on.DEG2RAD},radToDeg:function(t){return t*on.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),c=o((e+r)/2),h=a((e+r)/2),l=o((e-r)/2),f=a((e-r)/2),p=o((r-e)/2),d=a((r-e)/2);"XYX"===i?t.set(s*h,u*l,u*f,s*c):"YZY"===i?t.set(u*f,s*h,u*l,s*c):"ZXZ"===i?t.set(u*l,u*f,s*h,s*c):"XZX"===i?t.set(s*h,u*d,u*p,s*c):"YXY"===i?t.set(u*p,s*h,u*d,s*c):"ZYZ"===i?t.set(u*d,u*p,s*h,s*c):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function an(t,e){this.x=t||0,this.y=e||0}function sn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(an.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(an.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}}),Object.assign(sn.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],h=n[7],l=n[2],f=n[5],p=n[8],d=r[0],v=r[3],m=r[6],g=r[1],y=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=o*d+a*g+s*_,i[3]=o*v+a*y+s*w,i[6]=o*m+a*b+s*x,i[1]=u*d+c*g+h*_,i[4]=u*v+c*y+h*w,i[7]=u*m+c*b+h*x,i[2]=l*d+f*g+p*_,i[5]=l*v+f*y+p*w,i[8]=l*m+f*b+p*x,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*o*c-e*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],h=n[6],l=n[7],f=n[8],p=f*u-c*l,d=c*h-f*s,v=l*s-u*h,m=i*p+o*d+a*v;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);var g=1/m;return r[0]=p*g,r[1]=(a*l-f*o)*g,r[2]=(c*o-a*u)*g,r[3]=d*g,r[4]=(f*i-a*h)*g,r[5]=(a*s-c*i)*g,r[6]=v*g,r[7]=(o*h-l*i)*g,r[8]=(u*i-o*s)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*c,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var un={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===rn&&(rn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),rn.width=t.width,rn.height=t.height;var n=rn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=rn}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},cn=0;function hn(t,e,n,r,i,o,a,s,u,c){Object.defineProperty(this,"id",{value:cn++}),this.uuid=on.generateUUID(),this.name="",this.image=void 0!==t?t:hn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:hn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ut,this.wrapT=void 0!==r?r:ut,this.magFilter=void 0!==i?i:pt,this.minFilter=void 0!==o?o:vt,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:Nt,this.internalFormat=null,this.type=void 0!==s?s:mt,this.offset=new an(0,0),this.repeat=new an(1,1),this.center=new an(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Ue,this.version=0,this.onUpdate=null}function ln(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function fn(t,e,n){this.width=t,this.height=e,this.scissor=new ln(0,0,t,e),this.scissorTest=!1,this.viewport=new ln(0,0,t,e),n=n||{},this.texture=new hn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:pt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function pn(t,e,n){fn.call(this,t,e,n),this.samples=4}function dn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}hn.DEFAULT_IMAGE=void 0,hn.DEFAULT_MAPPING=Z,hn.prototype=Object.assign(Object.create(tn.prototype),{constructor:hn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=on.generateUUID()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(un.getDataURL(r[o]))}else i=un.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==Z)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case st:t.x=t.x-Math.floor(t.x);break;case ut:t.x=t.x<0?0:1;break;case ct:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case st:t.y=t.y-Math.floor(t.y);break;case ut:t.y=t.y<0?0:1;break;case ct:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(hn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(ln.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(ln.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=.01,a=.1,s=t.elements,u=s[0],c=s[4],h=s[8],l=s[1],f=s[5],p=s[9],d=s[2],v=s[6],m=s[10];if(Math.abs(c-l)<o&&Math.abs(h-d)<o&&Math.abs(p-v)<o){if(Math.abs(c+l)<a&&Math.abs(h+d)<a&&Math.abs(p+v)<a&&Math.abs(u+f+m-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var g=(u+1)/2,y=(f+1)/2,b=(m+1)/2,_=(c+l)/4,w=(h+d)/4,x=(p+v)/4;return g>y&&g>b?g<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=_/n,i=w/n):y>b?y<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=_/r,i=x/r):b<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(b),n=w/i,r=x/i),this.set(n,r,i,e),this}var E=Math.sqrt((v-p)*(v-p)+(h-d)*(h-d)+(l-c)*(l-c));return Math.abs(E)<.001&&(E=1),this.x=(v-p)/E,this.y=(h-d)/E,this.z=(l-c)/E,this.w=Math.acos((u+f+m-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),fn.prototype=Object.assign(Object.create(tn.prototype),{constructor:fn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),pn.prototype=Object.assign(Object.create(fn.prototype),{constructor:pn,isWebGLMultisampleRenderTarget:!0,copy:function(t){return fn.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(dn,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],h=n[r+3],l=i[o+0],f=i[o+1],p=i[o+2],d=i[o+3];if(h!==d||s!==l||u!==f||c!==p){var v=1-a,m=s*l+u*f+c*p+h*d,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,m*g);v=Math.sin(v*_)/b,a=Math.sin(a*_)/b}var w=a*g;if(s=s*v+l*w,u=u*v+f*w,c=c*v+p*w,h=h*v+d*w,v===1-a){var x=1/Math.sqrt(s*s+u*u+c*c+h*h);s*=x,u*=x,c*=x,h*=x}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=h}}),Object.defineProperties(dn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(dn.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),h=a(i/2),l=s(n/2),f=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=l*c*h+u*f*p,this._y=u*f*h-l*c*p,this._z=u*c*p+l*f*h,this._w=u*c*h-l*f*p):"YXZ"===o?(this._x=l*c*h+u*f*p,this._y=u*f*h-l*c*p,this._z=u*c*p-l*f*h,this._w=u*c*h+l*f*p):"ZXY"===o?(this._x=l*c*h-u*f*p,this._y=u*f*h+l*c*p,this._z=u*c*p+l*f*h,this._w=u*c*h-l*f*p):"ZYX"===o?(this._x=l*c*h-u*f*p,this._y=u*f*h+l*c*p,this._z=u*c*p-l*f*h,this._w=u*c*h+l*f*p):"YZX"===o?(this._x=l*c*h+u*f*p,this._y=u*f*h+l*c*p,this._z=u*c*p-l*f*h,this._w=u*c*h-l*f*p):"XZY"===o&&(this._x=l*c*h-u*f*p,this._y=u*f*h-l*c*p,this._z=u*c*p+l*f*h,this._w=u*c*h+l*f*p),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],h=n[6],l=n[10],f=r+s+l;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(h-u)*e,this._y=(o-c)*e,this._z=(a-i)*e):r>s&&r>l?(e=2*Math.sqrt(1+r-s-l),this._w=(h-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+c)/e):s>l?(e=2*Math.sqrt(1+s-r-l),this._w=(o-c)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+h)/e):(e=2*Math.sqrt(1+l-r-s),this._w=(a-i)/e,this._x=(o+c)/e,this._y=(u+h)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=1e-6,r=t.dot(e)+1;return r<n?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=r),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(on.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),h=Math.atan2(c,a),l=Math.sin((1-e)*h)/c,f=Math.sin(e*h)/c;return this._w=o*l+this._w*f,this._x=n*l+this._x*f,this._y=r*l+this._y*f,this._z=i*l+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var vn=new gn,mn=new dn;function gn(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(gn.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(mn.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(mn.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,c=s*n+a*e-i*r,h=s*r+i*n-o*e,l=-i*e-o*n-a*r;return this.x=u*s+l*-i+c*-a-h*-o,this.y=c*s+l*-o+h*-i-u*-a,this.z=h*s+l*-a+u*-o-c*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return vn.copy(this).projectOnVector(t),this.sub(vn)},reflect:function(t){return this.sub(vn.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(on.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var yn=new gn,bn=new Tn,_n=new gn(0,0,0),wn=new gn(1,1,1),xn=new gn,En=new gn,Sn=new gn;function Tn(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Tn.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,c,h,l,f,p,d,v){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=a,m[13]=s,m[2]=u,m[6]=c,m[10]=h,m[14]=l,m[3]=f,m[7]=p,m[11]=d,m[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Tn).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,r=1/yn.setFromMatrixColumn(t,0).length(),i=1/yn.setFromMatrixColumn(t,1).length(),o=1/yn.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),h=Math.sin(i);if("XYZ"===t.order){var l=o*c,f=o*h,p=a*c,d=a*h;e[0]=s*c,e[4]=-s*h,e[8]=u,e[1]=f+p*u,e[5]=l-d*u,e[9]=-a*s,e[2]=d-l*u,e[6]=p+f*u,e[10]=o*s}else if("YXZ"===t.order){var v=s*c,m=s*h,g=u*c,y=u*h;e[0]=v+y*a,e[4]=g*a-m,e[8]=o*u,e[1]=o*h,e[5]=o*c,e[9]=-a,e[2]=m*a-g,e[6]=y+v*a,e[10]=o*s}else if("ZXY"===t.order){v=s*c,m=s*h,g=u*c,y=u*h;e[0]=v-y*a,e[4]=-o*h,e[8]=g+m*a,e[1]=m+g*a,e[5]=o*c,e[9]=y-v*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){l=o*c,f=o*h,p=a*c,d=a*h;e[0]=s*c,e[4]=p*u-f,e[8]=l*u+d,e[1]=s*h,e[5]=d*u+l,e[9]=f*u-p,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var b=o*s,_=o*u,w=a*s,x=a*u;e[0]=s*c,e[4]=x-b*h,e[8]=w*h+_,e[1]=h,e[5]=o*c,e[9]=-a*c,e[2]=-u*c,e[6]=_*h+w,e[10]=b-x*h}else if("XZY"===t.order){b=o*s,_=o*u,w=a*s,x=a*u;e[0]=s*c,e[4]=-h,e[8]=u*c,e[1]=b*h+x,e[5]=o*c,e[9]=_*h-w,e[2]=w*h-_,e[6]=a*c,e[10]=x*h+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(_n,t,wn)},lookAt:function(t,e,n){var r=this.elements;return Sn.subVectors(t,e),0===Sn.lengthSq()&&(Sn.z=1),Sn.normalize(),xn.crossVectors(n,Sn),0===xn.lengthSq()&&(1===Math.abs(n.z)?Sn.x+=1e-4:Sn.z+=1e-4,Sn.normalize(),xn.crossVectors(n,Sn)),xn.normalize(),En.crossVectors(Sn,xn),r[0]=xn.x,r[4]=En.x,r[8]=Sn.x,r[1]=xn.y,r[5]=En.y,r[9]=Sn.y,r[2]=xn.z,r[6]=En.z,r[10]=Sn.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],h=n[5],l=n[9],f=n[13],p=n[2],d=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],E=r[8],S=r[12],T=r[1],M=r[5],A=r[9],C=r[13],I=r[2],N=r[6],R=r[10],O=r[14],P=r[3],L=r[7],D=r[11],k=r[15];return i[0]=o*w+a*T+s*I+u*P,i[4]=o*x+a*M+s*N+u*L,i[8]=o*E+a*A+s*R+u*D,i[12]=o*S+a*C+s*O+u*k,i[1]=c*w+h*T+l*I+f*P,i[5]=c*x+h*M+l*N+f*L,i[9]=c*E+h*A+l*R+f*D,i[13]=c*S+h*C+l*O+f*k,i[2]=p*w+d*T+v*I+m*P,i[6]=p*x+d*M+v*N+m*L,i[10]=p*E+d*A+v*R+m*D,i[14]=p*S+d*C+v*O+m*k,i[3]=g*w+y*T+b*I+_*P,i[7]=g*x+y*M+b*N+_*L,i[11]=g*E+y*A+b*R+_*D,i[15]=g*S+y*C+b*O+_*k,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],c=t[2],h=t[6],l=t[10],f=t[14],p=t[3],d=t[7],v=t[11],m=t[15];return p*(+i*s*h-r*u*h-i*a*l+n*u*l+r*a*f-n*s*f)+d*(+e*s*f-e*u*l+i*o*l-r*o*f+r*u*c-i*s*c)+v*(+e*u*h-e*a*f-i*o*h+n*o*f+i*a*c-n*u*c)+m*(-r*a*c-e*s*h+e*a*l+r*o*h-n*o*l+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],h=r[6],l=r[7],f=r[8],p=r[9],d=r[10],v=r[11],m=r[12],g=r[13],y=r[14],b=r[15],_=p*y*l-g*d*l+g*h*v-c*y*v-p*h*b+c*d*b,w=m*d*l-f*y*l-m*h*v+u*y*v+f*h*b-u*d*b,x=f*g*l-m*p*l+m*c*v-u*g*v-f*c*b+u*p*b,E=m*p*h-f*g*h-m*c*d+u*g*d+f*c*y-u*p*y,S=i*_+o*w+a*x+s*E;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var T=1/S;return n[0]=_*T,n[1]=(g*d*s-p*y*s-g*a*v+o*y*v+p*a*b-o*d*b)*T,n[2]=(c*y*s-g*h*s+g*a*l-o*y*l-c*a*b+o*h*b)*T,n[3]=(p*h*s-c*d*s-p*a*l+o*d*l+c*a*v-o*h*v)*T,n[4]=w*T,n[5]=(f*y*s-m*d*s+m*a*v-i*y*v-f*a*b+i*d*b)*T,n[6]=(m*h*s-u*y*s-m*a*l+i*y*l+u*a*b-i*h*b)*T,n[7]=(u*d*s-f*h*s+f*a*l-i*d*l-u*a*v+i*h*v)*T,n[8]=x*T,n[9]=(m*p*s-f*g*s-m*o*v+i*g*v+f*o*b-i*p*b)*T,n[10]=(u*g*s-m*c*s+m*o*l-i*g*l-u*o*b+i*c*b)*T,n[11]=(f*c*s-u*p*s-f*o*l+i*p*l+u*o*v-i*c*v)*T,n[12]=E*T,n[13]=(f*g*a-m*p*a+m*o*d-i*g*d-f*o*y+i*p*y)*T,n[14]=(m*c*a-u*g*a-m*o*h+i*g*h+u*o*y-i*c*y)*T,n[15]=(u*p*a-f*c*a+f*o*h-i*p*h-u*o*d+i*c*d)*T,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,c=o+o,h=a+a,l=i*u,f=i*c,p=i*h,d=o*c,v=o*h,m=a*h,g=s*u,y=s*c,b=s*h,_=n.x,w=n.y,x=n.z;return r[0]=(1-(d+m))*_,r[1]=(f+b)*_,r[2]=(p-y)*_,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(l+m))*w,r[6]=(v+g)*w,r[7]=0,r[8]=(p+y)*x,r[9]=(v-g)*x,r[10]=(1-(l+d))*x,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,n){var r=this.elements,i=yn.set(r[0],r[1],r[2]).length(),o=yn.set(r[4],r[5],r[6]).length(),a=yn.set(r[8],r[9],r[10]).length(),s=this.determinant();s<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],bn.copy(this);var u=1/i,c=1/o,h=1/a;return bn.elements[0]*=u,bn.elements[1]*=u,bn.elements[2]*=u,bn.elements[4]*=c,bn.elements[5]*=c,bn.elements[6]*=c,bn.elements[8]*=h,bn.elements[9]*=h,bn.elements[10]*=h,e.setFromRotationMatrix(bn),n.x=i,n.y=o,n.z=a,this},makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),h=(n+r)/(n-r),l=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),c=1/(o-i),h=(e+t)*s,l=(n+r)*u,f=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-l,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var Mn=new Tn,An=new dn;function Cn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||Cn.DefaultOrder}function In(){this.mask=1}Cn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Cn.DefaultOrder="XYZ",Object.defineProperties(Cn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(Cn.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=on.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],u=i[1],c=i[5],h=i[9],l=i[2],f=i[6],p=i[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-l,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-l,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-l,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return Mn.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Mn,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return An.setFromEuler(this),this.setFromQuaternion(An,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new gn(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(In.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!==(this.mask&t.mask)}});var Nn=0,Rn=new gn,On=new dn,Pn=new Tn,Ln=new gn,Dn=new gn,kn=new gn,Fn=new dn,Un=new gn(1,0,0),jn=new gn(0,1,0),zn=new gn(0,0,1),Bn={type:"added"},Vn={type:"removed"};function Gn(){Object.defineProperty(this,"id",{value:Nn++}),this.uuid=on.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gn.DefaultUp.clone();var t=new gn,e=new Cn,n=new dn,r=new gn(1,1,1);function i(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Tn},normalMatrix:{value:new sn}}),this.matrix=new Tn,this.matrixWorld=new Tn,this.matrixAutoUpdate=Gn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new In,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Hn(){Gn.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Gn.DefaultUp=new gn(0,1,0),Gn.DefaultMatrixAutoUpdate=!0,Gn.prototype=Object.assign(Object.create(tn.prototype),{constructor:Gn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return On.setFromAxisAngle(t,e),this.quaternion.multiply(On),this},rotateOnWorldAxis:function(t,e){return On.setFromAxisAngle(t,e),this.quaternion.premultiply(On),this},rotateX:function(t){return this.rotateOnAxis(Un,t)},rotateY:function(t){return this.rotateOnAxis(jn,t)},rotateZ:function(t){return this.rotateOnAxis(zn,t)},translateOnAxis:function(t,e){return Rn.copy(t).applyQuaternion(this.quaternion),this.position.add(Rn.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Un,t)},translateY:function(t){return this.translateOnAxis(jn,t)},translateZ:function(t){return this.translateOnAxis(zn,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Pn.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Ln.copy(t):Ln.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Dn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pn.lookAt(Dn,Ln,this.up):Pn.lookAt(Ln,Dn,this.up),this.quaternion.setFromRotationMatrix(Pn),r&&(Pn.extractRotation(r.matrixWorld),On.setFromRotationMatrix(Pn),this.quaternion.premultiply(On.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Bn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Vn)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),Pn.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Pn.multiply(t.parent.matrixWorld)),t.applyMatrix4(Pn),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new gn),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new dn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Dn,t,kn),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new gn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Dn,Fn,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new gn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var c=a[s];i(t.shapes,c)}else i(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var h=[];for(s=0,u=this.material.length;s<u;s++)h.push(i(t.materials,this.material[s]));r.material=h}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(e){var l=v(t.geometries),f=v(t.materials),p=v(t.textures),d=v(t.images);a=v(t.shapes);l.length>0&&(n.geometries=l),f.length>0&&(n.materials=f),p.length>0&&(n.textures=p),d.length>0&&(n.images=d),a.length>0&&(n.shapes=a)}return n.object=r,n;function v(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),Hn.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Hn,isScene:!0,copy:function(t,e){return Gn.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Wn=[new gn,new gn,new gn,new gn,new gn,new gn,new gn,new gn],qn=new gn,Yn=new ir,Xn=new gn,Kn=new gn,$n=new gn,Qn=new gn,Jn=new gn,Zn=new gn,tr=new gn,er=new gn,nr=new gn,rr=new gn;function ir(t,e){this.min=void 0!==t?t:new gn(1/0,1/0,1/0),this.max=void 0!==e?e:new gn(-1/0,-1/0,-1/0)}function or(t,e,n,r,i){var o,a;for(o=0,a=t.length-3;o<=a;o+=3){rr.fromArray(t,o);var s=i.x*Math.abs(rr.x)+i.y*Math.abs(rr.y)+i.z*Math.abs(rr.z),u=e.dot(rr),c=n.dot(rr),h=r.dot(rr);if(Math.max(-Math.max(u,c,h),Math.min(u,c,h))>s)return!1}return!0}Object.assign(ir.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var c=t[s],h=t[s+1],l=t[s+2];c<e&&(e=c),h<n&&(n=h),l<r&&(r=l),c>i&&(i=c),h>o&&(o=h),l>a&&(a=l)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var c=t.getX(s),h=t.getY(s),l=t.getZ(s);c<e&&(e=c),h<n&&(n=h),l<r&&(r=l),c>i&&(i=c),h>o&&(o=h),l>a&&(a=l)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=qn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new gn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new gn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Yn.copy(e.boundingBox),Yn.applyMatrix4(t.matrixWorld),this.union(Yn));for(var n=t.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new gn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,qn),qn.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(tr),er.subVectors(this.max,tr),Xn.subVectors(t.a,tr),Kn.subVectors(t.b,tr),$n.subVectors(t.c,tr),Qn.subVectors(Kn,Xn),Jn.subVectors($n,Kn),Zn.subVectors(Xn,$n);var e=[0,-Qn.z,Qn.y,0,-Jn.z,Jn.y,0,-Zn.z,Zn.y,Qn.z,0,-Qn.x,Jn.z,0,-Jn.x,Zn.z,0,-Zn.x,-Qn.y,Qn.x,0,-Jn.y,Jn.x,0,-Zn.y,Zn.x,0];return!!or(e,Xn,Kn,$n,er)&&(e=[1,0,0,0,1,0,0,0,1],!!or(e,Xn,Kn,$n,er)&&(nr.crossVectors(Qn,Jn),e=[nr.x,nr.y,nr.z],or(e,Xn,Kn,$n,er)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new gn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=qn.copy(t).clamp(this.min,this.max);return e.sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(qn).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(Wn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Wn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Wn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Wn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Wn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Wn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Wn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Wn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Wn)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var ar=new ir;function sr(t,e){this.center=void 0!==t?t:new gn,this.radius=void 0!==e?e:0}Object.assign(sr.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):ar.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new gn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new ir),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var ur=new gn,cr=new gn,hr=new gn,lr=new gn,fr=new gn,pr=new gn,dr=new gn;function vr(t,e){this.origin=void 0!==t?t:new gn,this.direction=void 0!==e?e:new gn(0,0,-1)}Object.assign(vr.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new gn),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,ur)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new gn),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=ur.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ur.copy(this.direction).multiplyScalar(e).add(this.origin),ur.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,r){cr.copy(t).add(e).multiplyScalar(.5),hr.copy(e).sub(t).normalize(),lr.copy(this.origin).sub(cr);var i,o,a,s,u=.5*t.distanceTo(e),c=-this.direction.dot(hr),h=lr.dot(this.direction),l=-lr.dot(hr),f=lr.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(i=c*l-h,o=c*h-l,s=u*p,i>=0)if(o>=-s)if(o<=s){var d=1/p;i*=d,o*=d,a=i*(i+c*o+2*h)+o*(c*i+o+2*l)+f}else o=u,i=Math.max(0,-(c*o+h)),a=-i*i+o*(o+2*l)+f;else o=-u,i=Math.max(0,-(c*o+h)),a=-i*i+o*(o+2*l)+f;else o<=-s?(i=Math.max(0,-(-c*u+h)),o=i>0?-u:Math.min(Math.max(-u,-l),u),a=-i*i+o*(o+2*l)+f):o<=s?(i=0,o=Math.min(Math.max(-u,-l),u),a=o*(o+2*l)+f):(i=Math.max(0,-(c*u+h)),o=i>0?u:Math.min(Math.max(-u,-l),u),a=-i*i+o*(o+2*l)+f);else o=c>0?-u:u,i=Math.max(0,-(c*o+h)),a=-i*i+o*(o+2*l)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(hr).multiplyScalar(o).add(cr),a},intersectSphere:function(t,e){ur.subVectors(t.center,this.origin);var n=ur.dot(this.direction),r=ur.dot(ur)-n*n,i=t.radius*t.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,l=this.origin;return u>=0?(n=(t.min.x-l.x)*u,r=(t.max.x-l.x)*u):(n=(t.max.x-l.x)*u,r=(t.min.x-l.x)*u),c>=0?(i=(t.min.y-l.y)*c,o=(t.max.y-l.y)*c):(i=(t.max.y-l.y)*c,o=(t.min.y-l.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),h>=0?(a=(t.min.z-l.z)*h,s=(t.max.z-l.z)*h):(a=(t.max.z-l.z)*h,s=(t.min.z-l.z)*h),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,ur)},intersectTriangle:function(t,e,n,r,i){fr.subVectors(e,t),pr.subVectors(n,t),dr.crossVectors(fr,pr);var o,a=this.direction.dot(dr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}lr.subVectors(this.origin,t);var s=o*this.direction.dot(pr.crossVectors(lr,pr));if(s<0)return null;var u=o*this.direction.dot(fr.cross(lr));if(u<0)return null;if(s+u>a)return null;var c=-o*lr.dot(dr);return c<0?null:this.at(c/a,i)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var mr=new gn,gr=new gn,yr=new sn;function br(t,e){this.normal=void 0!==t?t:new gn(1,0,0),this.constant=void 0!==e?e:0}Object.assign(br.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var r=mr.subVectors(n,e).cross(gr.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new gn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new gn);var n=t.delta(mr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:e.copy(n).multiplyScalar(i).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new gn),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||yr.getNormalMatrix(t),r=this.coplanarPoint(mr).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var _r=new gn,wr=new gn,xr=new gn,Er=new gn,Sr=new gn,Tr=new gn,Mr=new gn,Ar=new gn,Cr=new gn,Ir=new gn;function Nr(t,e,n){this.a=void 0!==t?t:new gn,this.b=void 0!==e?e:new gn,this.c=void 0!==n?n:new gn}Object.assign(Nr,{getNormal:function(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new gn),r.subVectors(n,e),_r.subVectors(t,e),r.cross(_r);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(t,e,n,r,i){_r.subVectors(r,e),wr.subVectors(n,e),xr.subVectors(t,e);var o=_r.dot(_r),a=_r.dot(wr),s=_r.dot(xr),u=wr.dot(wr),c=wr.dot(xr),h=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new gn),0===h)return i.set(-2,-1,-1);var l=1/h,f=(u*s-a*c)*l,p=(o*c-a*s)*l;return i.set(1-f-p,p,f)},containsPoint:function(t,e,n,r){return Nr.getBarycoord(t,e,n,r,Er),Er.x>=0&&Er.y>=0&&Er.x+Er.y<=1},getUV:function(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,Er),s.set(0,0),s.addScaledVector(i,Er.x),s.addScaledVector(o,Er.y),s.addScaledVector(a,Er.z),s},isFrontFacing:function(t,e,n,r){return _r.subVectors(n,e),wr.subVectors(t,e),_r.cross(wr).dot(r)<0}}),Object.assign(Nr.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return _r.subVectors(this.c,this.b),wr.subVectors(this.a,this.b),.5*_r.cross(wr).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new gn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Nr.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new br),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Nr.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,r,i){return Nr.getUV(t,this.a,this.b,this.c,e,n,r,i)},containsPoint:function(t){return Nr.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Nr.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new gn);var n,r,i=this.a,o=this.b,a=this.c;Sr.subVectors(o,i),Tr.subVectors(a,i),Ar.subVectors(t,i);var s=Sr.dot(Ar),u=Tr.dot(Ar);if(s<=0&&u<=0)return e.copy(i);Cr.subVectors(t,o);var c=Sr.dot(Cr),h=Tr.dot(Cr);if(c>=0&&h<=c)return e.copy(o);var l=s*h-c*u;if(l<=0&&s>=0&&c<=0)return n=s/(s-c),e.copy(i).addScaledVector(Sr,n);Ir.subVectors(t,a);var f=Sr.dot(Ir),p=Tr.dot(Ir);if(p>=0&&f<=p)return e.copy(a);var d=f*u-s*p;if(d<=0&&u>=0&&p<=0)return r=u/(u-p),e.copy(i).addScaledVector(Tr,r);var v=c*p-f*h;if(v<=0&&h-c>=0&&f-p>=0)return Mr.subVectors(a,o),r=(h-c)/(h-c+(f-p)),e.copy(o).addScaledVector(Mr,r);var m=1/(v+d+l);return n=d*m,r=l*m,e.copy(i).addScaledVector(Sr,n).addScaledVector(Tr,r)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Rr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Or={h:0,s:0,l:0},Pr={h:0,s:0,l:0};function Lr(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function Dr(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function kr(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Fr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function Ur(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new gn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Lr,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(Lr.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=on.euclideanModulo(t,1),e=on.clamp(e,0,1),n=on.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=Dr(i,r,t+1/3),this.g=Dr(i,r,t),this.b=Dr(i,r,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,s,u)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=Rr[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=kr(t.r),this.g=kr(t.g),this.b=kr(t.b),this},copyLinearToSRGB:function(t){return this.r=Fr(t.r),this.g=Fr(t.g),this.b=Fr(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:e=(i-o)/c+(i<o?6:0);break;case i:e=(o-r)/c+2;break;case o:e=(r-i)/c+4;break}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(Or),Or.h+=t,Or.s+=e,Or.l+=n,this.setHSL(Or.h,Or.s,Or.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Or),t.getHSL(Pr);var n=on.lerp(Or.h,Pr.h,e),r=on.lerp(Or.s,Pr.s,e),i=on.lerp(Or.l,Pr.l,e);return this.setHSL(n,r,i),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Lr.NAMES=Rr,Object.assign(Ur.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var jr=0;function zr(){Object.defineProperty(this,"id",{value:jr++}),this.uuid=on.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=v,this.side=h,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=I,this.blendDst=N,this.blendEquation=_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=j,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Qe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$e,this.stencilZFail=$e,this.stencilZPass=$e,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Br(t){zr.call(this),this.type="MeshBasicMaterial",this.color=new Lr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=H,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}zr.prototype=Object.assign(Object.create(tn.prototype),{constructor:zr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===p;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==v&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==h&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(zr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Br.prototype=Object.create(zr.prototype),Br.prototype.constructor=Br,Br.prototype.isMeshBasicMaterial=!0,Br.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var Vr=new gn;function Gr(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Je,this.updateRange={offset:0,count:-1},this.version=0}function Hr(t,e,n){Gr.call(this,new Int8Array(t),e,n)}function Wr(t,e,n){Gr.call(this,new Uint8Array(t),e,n)}function qr(t,e,n){Gr.call(this,new Uint8ClampedArray(t),e,n)}function Yr(t,e,n){Gr.call(this,new Int16Array(t),e,n)}function Xr(t,e,n){Gr.call(this,new Uint16Array(t),e,n)}function Kr(t,e,n){Gr.call(this,new Int32Array(t),e,n)}function $r(t,e,n){Gr.call(this,new Uint32Array(t),e,n)}function Qr(t,e,n){Gr.call(this,new Float32Array(t),e,n)}function Jr(t,e,n){Gr.call(this,new Float64Array(t),e,n)}function Zr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function ti(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Object.defineProperty(Gr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Gr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Lr),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new an),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new gn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new ln),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){for(var e=0,n=this.count;e<n;e++)Vr.x=this.getX(e),Vr.y=this.getY(e),Vr.z=this.getZ(e),Vr.applyMatrix3(t),this.setXYZ(e,Vr.x,Vr.y,Vr.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)Vr.x=this.getX(e),Vr.y=this.getY(e),Vr.z=this.getZ(e),Vr.applyMatrix4(t),this.setXYZ(e,Vr.x,Vr.y,Vr.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)Vr.x=this.getX(e),Vr.y=this.getY(e),Vr.z=this.getZ(e),Vr.applyNormalMatrix(t),this.setXYZ(e,Vr.x,Vr.y,Vr.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)Vr.x=this.getX(e),Vr.y=this.getY(e),Vr.z=this.getZ(e),Vr.transformDirection(t),this.setXYZ(e,Vr.x,Vr.y,Vr.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Hr.prototype=Object.create(Gr.prototype),Hr.prototype.constructor=Hr,Wr.prototype=Object.create(Gr.prototype),Wr.prototype.constructor=Wr,qr.prototype=Object.create(Gr.prototype),qr.prototype.constructor=qr,Yr.prototype=Object.create(Gr.prototype),Yr.prototype.constructor=Yr,Xr.prototype=Object.create(Gr.prototype),Xr.prototype.constructor=Xr,Kr.prototype=Object.create(Gr.prototype),Kr.prototype.constructor=Kr,$r.prototype=Object.create(Gr.prototype),$r.prototype.constructor=$r,Qr.prototype=Object.create(Gr.prototype),Qr.prototype.constructor=Qr,Jr.prototype=Object.create(Gr.prototype),Jr.prototype.constructor=Jr,Object.assign(Zr.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=t.morphTargets,u=s.length;if(u>0){e=[];for(var c=0;c<u;c++)e[c]={name:s[c].name,data:[]};this.morphTargets.position=e}var h,l=t.morphNormals,f=l.length;if(f>0){h=[];for(c=0;c<f;c++)h[c]={name:l[c].name,data:[]};this.morphTargets.normal=h}var p=t.skinIndices,d=t.skinWeights,v=p.length===r.length,m=d.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<n.length;c++){var g=n[c];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var _=g.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===o){var x=i[0][c];void 0!==x?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new an,new an,new an))}if(!0===a){x=i[1][c];void 0!==x?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new an,new an,new an))}for(var E=0;E<u;E++){var S=s[E].vertices;e[E].data.push(S[g.a],S[g.b],S[g.c])}for(E=0;E<f;E++){var T=l[E].vertexNormals[c];h[E].data.push(T.a,T.b,T.c)}v&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),m&&this.skinWeights.push(d[g.a],d[g.b],d[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var ei=1,ni=new Tn,ri=new Gn,ii=new gn,oi=new ir,ai=new ir,si=new gn;function ui(){Object.defineProperty(this,"id",{value:ei+=2}),this.uuid=on.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ui.prototype=Object.assign(Object.create(tn.prototype),{constructor:ui,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(ti(t)>65535?$r:Xr)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new sn).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return ni.makeRotationX(t),this.applyMatrix4(ni),this},rotateY:function(t){return ni.makeRotationY(t),this.applyMatrix4(ni),this},rotateZ:function(t){return ni.makeRotationZ(t),this.applyMatrix4(ni),this},translate:function(t,e,n){return ni.makeTranslation(t,e,n),this.applyMatrix4(ni),this},scale:function(t,e,n){return ni.makeScale(t,e,n),this.applyMatrix4(ni),this},lookAt:function(t){return ri.lookAt(t),ri.updateMatrix(),this.applyMatrix4(ri.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ii).negate(),this.translate(ii.x,ii.y,ii.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Qr(3*e.vertices.length,3),r=new Qr(3*e.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new Qr(e.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Qr(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(e=this.attributes.position,void 0!==e&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(e=this.attributes.normal,void 0!==e&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(e=this.attributes.color,void 0!==e&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(e=this.attributes.uv,void 0!==e&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(e=this.attributes.lineDistance,void 0!==e&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Zr).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Gr(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Gr(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.setAttribute("color",new Gr(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Gr(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Gr(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],u=t.morphTargets[a],c=0,h=u.length;c<h;c++){var l=u[c],f=new Qr(3*l.data.length,3);f.name=l.name,s.push(f.copyVector3sArray(l.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var p=new Qr(4*t.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var d=new Qr(4*t.skinWeights.length,4);this.setAttribute("skinWeight",d.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ir);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];oi.setFromBufferAttribute(i),this.morphTargetsRelative?(si.addVectors(this.boundingBox.min,oi.min),this.boundingBox.expandByPoint(si),si.addVectors(this.boundingBox.max,oi.max),this.boundingBox.expandByPoint(si)):(this.boundingBox.expandByPoint(oi.min),this.boundingBox.expandByPoint(oi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new sr);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(oi.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var o=e[r];ai.setFromBufferAttribute(o),this.morphTargetsRelative?(si.addVectors(oi.min,ai.min),oi.expandByPoint(si),si.addVectors(oi.max,ai.max),oi.expandByPoint(si)):(oi.expandByPoint(ai.min),oi.expandByPoint(ai.max))}oi.getCenter(n);var a=0;for(r=0,i=t.count;r<i;r++)si.fromBufferAttribute(t,r),a=Math.max(a,n.distanceToSquared(si));if(e)for(r=0,i=e.length;r<i;r++){o=e[r];for(var s=this.morphTargetsRelative,u=0,c=o.count;u<c;u++)si.fromBufferAttribute(o,u),s&&(ii.fromBufferAttribute(t,u),si.add(ii)),a=Math.max(a,n.distanceToSquared(si))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new Gr(new Float32Array(n.length),3));else for(var r=e.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,c=e.normal.array,h=new gn,l=new gn,f=new gn,p=new gn,d=new gn;if(t){var v=t.array;for(i=0,o=t.count;i<o;i+=3)a=3*v[i+0],s=3*v[i+1],u=3*v[i+2],h.fromArray(n,a),l.fromArray(n,s),f.fromArray(n,u),p.subVectors(f,l),d.subVectors(h,l),p.cross(d),c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)h.fromArray(n,i),l.fromArray(n,i+3),f.fromArray(n,i+6),p.subVectors(f,l),d.subVectors(h,l),p.cross(d),c[i]=p.x,c[i+1]=p.y,c[i+2]=p.z,c[i+3]=p.x,c[i+4]=p.y,c[i+5]=p.z,c[i+6]=p.x,c[i+7]=p.y,c[i+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r],o=i.array,a=t.attributes[r],s=a.array,u=a.itemSize*e,c=Math.min(s.length,o.length-u),h=0,l=u;h<c;h++,l++)o[l]=s[h];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)si.x=t.getX(e),si.y=t.getY(e),si.z=t.getZ(e),si.normalize(),t.setXYZ(e,si.x,si.y,si.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=new n.constructor(e.length*r),o=0,a=0,s=0,u=e.length;s<u;s++){o=e[s]*r;for(var c=0;c<r;c++)i[a++]=n[o++]}return new Gr(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new ui,n=this.index.array,r=this.attributes;for(var i in r){var o=r[i],a=t(o,n);e.setAttribute(i,a)}var s=this.morphAttributes;for(i in s){for(var u=[],c=s[i],h=0,l=c.length;h<l;h++){o=c[h],a=t(o,n);u.push(a)}e.morphAttributes[i]=u}e.morphTargetsRelative=this.morphTargetsRelative;for(var f=this.groups,p=(h=0,f.length);h<p;h++){var d=f[h];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=i[n],a=o.toJSON();""!==o.name&&(a.name=o.name),t.data.attributes[n]=a}var s={},u=!1;for(var n in this.morphAttributes){for(var c=this.morphAttributes[n],h=[],l=0,f=c.length;l<f;l++){o=c[l],a=o.toJSON();""!==o.name&&(a.name=o.name),h.push(a)}h.length>0&&(s[n]=h,u=!0)}u&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var d=this.boundingSphere;return null!==d&&(t.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),t},clone:function(){return(new ui).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o){var a=o[e];this.setAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],c=s[e];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[e]=u}this.morphTargetsRelative=t.morphTargetsRelative;var h=t.groups;for(n=0,r=h.length;n<r;n++){var l=h[n];this.addGroup(l.start,l.count,l.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ci=new Tn,hi=new vr,li=new sr,fi=new gn,pi=new gn,di=new gn,vi=new gn,mi=new gn,gi=new gn,yi=new gn,bi=new gn,_i=new gn,wi=new an,xi=new an,Ei=new an,Si=new gn,Ti=new gn;function Mi(t,e){Gn.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new ui,this.material=void 0!==e?e:new Br,this.updateMorphTargets()}function Ai(t,e,n,r,i,o,a,s){var u;if(u=e.side===l?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==f,s),null===u)return null;Ti.copy(s),Ti.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(Ti);return c<n.near||c>n.far?null:{distance:c,point:Ti.clone(),object:t}}function Ci(t,e,n,r,i,o,a,s,u,c,h,l){fi.fromBufferAttribute(i,c),pi.fromBufferAttribute(i,h),di.fromBufferAttribute(i,l);var f=t.morphTargetInfluences;if(e.morphTargets&&o&&f){yi.set(0,0,0),bi.set(0,0,0),_i.set(0,0,0);for(var p=0,d=o.length;p<d;p++){var v=f[p],m=o[p];0!==v&&(vi.fromBufferAttribute(m,c),mi.fromBufferAttribute(m,h),gi.fromBufferAttribute(m,l),a?(yi.addScaledVector(vi,v),bi.addScaledVector(mi,v),_i.addScaledVector(gi,v)):(yi.addScaledVector(vi.sub(fi),v),bi.addScaledVector(mi.sub(pi),v),_i.addScaledVector(gi.sub(di),v)))}fi.add(yi),pi.add(bi),di.add(_i)}var g=Ai(t,e,n,r,fi,pi,di,Si);if(g){s&&(wi.fromBufferAttribute(s,c),xi.fromBufferAttribute(s,h),Ei.fromBufferAttribute(s,l),g.uv=Nr.getUV(Si,fi,pi,di,wi,xi,Ei,new an)),u&&(wi.fromBufferAttribute(u,c),xi.fromBufferAttribute(u,h),Ei.fromBufferAttribute(u,l),g.uv2=Nr.getUV(Si,fi,pi,di,wi,xi,Ei,new an));var y=new Ur(c,h,l);Nr.getNormal(fi,pi,di,y.normal),g.face=y}return g}Mi.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Mi,isMesh:!0,copy:function(t){return Gn.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),li.copy(r.boundingSphere),li.applyMatrix4(o),!1!==t.ray.intersectsSphere(li)&&(ci.getInverse(o),hi.copy(t.ray).applyMatrix4(ci),null===r.boundingBox||!1!==hi.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a,s,u,c,h,l,f,p,d,v,m,g=r.index,y=r.attributes.position,b=r.morphAttributes.position,_=r.morphTargetsRelative,w=r.attributes.uv,x=r.attributes.uv2,E=r.groups,S=r.drawRange;if(null!==g)if(Array.isArray(i))for(c=0,l=E.length;c<l;c++)for(p=E[c],d=i[p.materialIndex],v=Math.max(p.start,S.start),m=Math.min(p.start+p.count,S.start+S.count),h=v,f=m;h<f;h+=3)a=g.getX(h),s=g.getX(h+1),u=g.getX(h+2),n=Ci(this,d,t,hi,y,b,_,w,x,a,s,u),n&&(n.faceIndex=Math.floor(h/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(v=Math.max(0,S.start),m=Math.min(g.count,S.start+S.count),c=v,l=m;c<l;c+=3)a=g.getX(c),s=g.getX(c+1),u=g.getX(c+2),n=Ci(this,i,t,hi,y,b,_,w,x,a,s,u),n&&(n.faceIndex=Math.floor(c/3),e.push(n));else if(void 0!==y)if(Array.isArray(i))for(c=0,l=E.length;c<l;c++)for(p=E[c],d=i[p.materialIndex],v=Math.max(p.start,S.start),m=Math.min(p.start+p.count,S.start+S.count),h=v,f=m;h<f;h+=3)a=h,s=h+1,u=h+2,n=Ci(this,d,t,hi,y,b,_,w,x,a,s,u),n&&(n.faceIndex=Math.floor(h/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(v=Math.max(0,S.start),m=Math.min(y.count,S.start+S.count),c=v,l=m;c<l;c+=3)a=c,s=c+1,u=c+2,n=Ci(this,i,t,hi,y,b,_,w,x,a,s,u),n&&(n.faceIndex=Math.floor(c/3),e.push(n))}else if(r.isGeometry){var T,M,A,C,I=Array.isArray(i),N=r.vertices,R=r.faces,O=r.faceVertexUvs[0];O.length>0&&(C=O);for(var P=0,L=R.length;P<L;P++){var D=R[P],k=I?i[D.materialIndex]:i;if(void 0!==k&&(T=N[D.a],M=N[D.b],A=N[D.c],n=Ai(this,k,t,hi,T,M,A,Si),n)){if(C&&C[P]){var F=C[P];wi.copy(F[0]),xi.copy(F[1]),Ei.copy(F[2]),n.uv=Nr.getUV(Si,T,M,A,wi,xi,Ei,new an)}n.face=D,n.faceIndex=P,e.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ii=0,Ni=new Tn,Ri=new Gn,Oi=new gn;function Pi(){Object.defineProperty(this,"id",{value:Ii+=2}),this.uuid=on.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Pi.prototype=Object.assign(Object.create(tn.prototype),{constructor:Pi,isGeometry:!0,applyMatrix4:function(t){for(var e=(new sn).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(t)}for(n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var a=0,s=o.vertexNormals.length;a<s;a++)o.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Ni.makeRotationX(t),this.applyMatrix4(Ni),this},rotateY:function(t){return Ni.makeRotationY(t),this.applyMatrix4(Ni),this},rotateZ:function(t){return Ni.makeRotationZ(t),this.applyMatrix4(Ni),this},translate:function(t,e,n){return Ni.makeTranslation(t,e,n),this.applyMatrix4(Ni),this},scale:function(t,e,n){return Ni.makeScale(t,e,n),this.applyMatrix4(Ni),this},lookAt:function(t){return Ri.lookAt(t),Ri.updateMatrix(),this.applyMatrix4(Ri.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var c=0;c<i.length;c+=3)e.vertices.push((new gn).fromArray(i,c)),void 0!==a&&e.colors.push((new Lr).fromArray(a,c));function h(t,n,r,i){var c=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],h=void 0===o?[]:[(new gn).fromArray(o,3*t),(new gn).fromArray(o,3*n),(new gn).fromArray(o,3*r)],l=new Ur(t,n,r,h,c,i);e.faces.push(l),void 0!==s&&e.faceVertexUvs[0].push([(new an).fromArray(s,2*t),(new an).fromArray(s,2*n),(new an).fromArray(s,2*r)]),void 0!==u&&e.faceVertexUvs[1].push([(new an).fromArray(u,2*t),(new an).fromArray(u,2*n),(new an).fromArray(u,2*r)])}var l=t.groups;if(l.length>0)for(c=0;c<l.length;c++)for(var f=l[c],p=f.start,d=f.count,v=p,m=p+d;v<m;v+=3)void 0!==n?h(n[v],n[v+1],n[v+2],f.materialIndex):h(v,v+1,v+2,f.materialIndex);else if(void 0!==n)for(c=0;c<n.length;c+=3)h(n[c],n[c+1],n[c+2]);else for(c=0;c<i.length/3;c+=3)h(c,c+1,c+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Oi).negate(),this.translate(Oi.x,Oi.y,Oi.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new Tn;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var t=new gn,e=new gn,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new gn;if(t){var s,u,c,h=new gn,l=new gn;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],u=this.vertices[o.b],c=this.vertices[o.c],h.subVectors(c,u),l.subVectors(s,u),h.cross(l),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o=this.faces[r],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var f=o.vertexNormals;3===f.length?(f[0].copy(a[o.a]),f[1].copy(a[o.b]),f[2].copy(a[o.c])):(f[0]=a[o.a].clone(),f[1]=a[o.b].clone(),f[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new Pi;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new gn,c={a:new gn,b:new gn,c:new gn},a.push(u),s.push(c)}var u,c,h=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=h.faceNormals[n],c=h.vertexNormals[n],u.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ir),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new sr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,c=this.colors,h=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new sn).getNormalMatrix(e));for(var l=0,f=a.length;l<f;l++){var p=a[l],d=p.clone();void 0!==e&&d.applyMatrix4(e),o.push(d)}for(l=0,f=h.length;l<f;l++)c.push(h[l].clone());for(l=0,f=u.length;l<f;l++){var v,m,g,y=u[l],b=y.vertexNormals,_=y.vertexColors;v=new Ur(y.a+i,y.b+i,y.c+i),v.normal.copy(y.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var w=0,x=b.length;w<x;w++)m=b[w].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),v.vertexNormals.push(m);v.color.copy(y.color);for(w=0,x=_.length;w<x;w++)g=_[w],v.vertexColors.push(g.clone());v.materialIndex=y.materialIndex+n,s.push(v)}for(l=0,f=t.faceVertexUvs.length;l<f;l++){var E=t.faceVertexUvs[l];void 0===this.faceVertexUvs[l]&&(this.faceVertexUvs[l]=[]);for(w=0,x=E.length;w<x;w++){for(var S=E[w],T=[],M=0,A=S.length;M<A;M++)T.push(S[M].clone());this.faceVertexUvs[l].push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},c=[],h=[],l=4,f=Math.pow(10,l);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],e=Math.round(t.x*f)+"_"+Math.round(t.y*f)+"_"+Math.round(t.z*f),void 0===u[e]?(u[e]=n,c.push(this.vertices[n]),h[n]=c.length-1):h[n]=h[u[e]];var p=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=h[i.a],i.b=h[i.b],i.c=h[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var v=p[n];for(this.faces.splice(v,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(v,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new gn(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;function r(t,e){return t.materialIndex-e.materialIndex}t.sort(r);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===e&&(i=[]),s&&s.length===e&&(o=[]);for(n=0;n<e;n++){var u=t[n]._id;i&&i.push(a[u]),o&&o.push(s[u])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},c=[],h={},l=[],f={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],d=!0,v=!1,m=void 0!==this.faceVertexUvs[0][i],g=p.normal.length()>0,y=p.vertexNormals.length>0,b=1!==p.color.r||1!==p.color.g||1!==p.color.b,_=p.vertexColors.length>0,w=0;if(w=T(w,0,0),w=T(w,1,d),w=T(w,2,v),w=T(w,3,m),w=T(w,4,g),w=T(w,5,y),w=T(w,6,b),w=T(w,7,_),a.push(w),a.push(p.a,p.b,p.c),a.push(p.materialIndex),m){var x=this.faceVertexUvs[0][i];a.push(C(x[0]),C(x[1]),C(x[2]))}if(g&&a.push(M(p.normal)),y){var E=p.vertexNormals;a.push(M(E[0]),M(E[1]),M(E[2]))}if(b&&a.push(A(p.color)),_){var S=p.vertexColors;a.push(A(S[0]),A(S[1]),A(S[2]))}}function T(t,e,n){return n?t|1<<e:t&~(1<<e)}function M(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]||(u[e]=s.length/3,s.push(t.x,t.y,t.z)),u[e]}function A(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==h[e]||(h[e]=c.length,c.push(t.getHex())),h[e]}function C(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]||(f[e]=l.length/2,l.push(t.x,t.y)),f[e]}return t.data={},t.data.vertices=r,t.data.normals=s,c.length>0&&(t.data.colors=c),l.length>0&&(t.data.uvs=[l]),t.data.faces=a,t},clone:function(){return(new Pi).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var h=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=h.length;r<i;r++){var l=h[r],f=[];for(o=0,a=l.length;o<a;o++){var p=l[o];f.push(p.clone())}this.faceVertexUvs[e].push(f)}}var d=t.morphTargets;for(e=0,n=d.length;e<n;e++){var v={};if(v.name=d[e].name,void 0!==d[e].vertices)for(v.vertices=[],r=0,i=d[e].vertices.length;r<i;r++)v.vertices.push(d[e].vertices[r].clone());if(void 0!==d[e].normals)for(v.normals=[],r=0,i=d[e].normals.length;r<i;r++)v.normals.push(d[e].normals[r].clone());this.morphTargets.push(v)}var m=t.morphNormals;for(e=0,n=m.length;e<n;e++){var g={};if(void 0!==m[e].vertexNormals)for(g.vertexNormals=[],r=0,i=m[e].vertexNormals.length;r<i;r++){var y=m[e].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==m[e].faceNormals)for(g.faceNormals=[],r=0,i=m[e].faceNormals.length;r<i;r++)g.faceNormals.push(m[e].faceNormals[r].clone());this.morphNormals.push(g)}var _=t.skinWeights;for(e=0,n=_.length;e<n;e++)this.skinWeights.push(_[e].clone());var w=t.skinIndices;for(e=0,n=w.length;e<n;e++)this.skinIndices.push(w[e].clone());var x=t.lineDistances;for(e=0,n=x.length;e<n;e++)this.lineDistances.push(x[e]);var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var S=t.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Li extends Pi{constructor(t,e,n,r,i,o){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Di(t,e,n,r,i,o)),this.mergeVertices()}}class Di extends ui{constructor(t,e,n,r,i,o){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],u=[],c=[],h=[],l=0,f=0;function p(t,e,n,r,i,o,p,d,v,m,g){var y,b,_=o/v,w=p/m,x=o/2,E=p/2,S=d/2,T=v+1,M=m+1,A=0,C=0,I=new gn;for(b=0;b<M;b++){var N=b*w-E;for(y=0;y<T;y++){var R=y*_-x;I[t]=R*r,I[e]=N*i,I[n]=S,u.push(I.x,I.y,I.z),I[t]=0,I[e]=0,I[n]=d>0?1:-1,c.push(I.x,I.y,I.z),h.push(y/v),h.push(1-b/m),A+=1}}for(b=0;b<m;b++)for(y=0;y<v;y++){var O=l+y+T*b,P=l+y+T*(b+1),L=l+(y+1)+T*(b+1),D=l+(y+1)+T*b;s.push(O,P,D),s.push(P,L,D),C+=6}a.addGroup(f,C,g),f+=C,l+=A}p("z","y","x",-1,-1,n,e,t,o,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Qr(u,3)),this.setAttribute("normal",new Qr(c,3)),this.setAttribute("uv",new Qr(h,2))}}function ki(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function Fi(t){for(var e={},n=0;n<t.length;n++){var r=ki(t[n]);for(var i in r)e[i]=r[i]}return e}var Ui={clone:ki,merge:Fi},ji="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",zi="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function Bi(t){zr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=ji,this.fragmentShader=zi,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Vi(){Gn.call(this),this.type="Camera",this.matrixWorldInverse=new Tn,this.projectionMatrix=new Tn,this.projectionMatrixInverse=new Tn}function Gi(t,e,n,r){Vi.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Bi.prototype=Object.create(zr.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isShaderMaterial=!0,Bi.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ki(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Bi.prototype.toJSON=function(t){var e=zr.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var r=this.uniforms[n],i=r.value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(e.extensions=o),e},Vi.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Vi,isCamera:!0,copy:function(t,e){return Gn.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new gn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Gn.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){Gn.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Gi.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Gi,isPerspectiveCamera:!0,copy:function(t,e){return Vi.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*on.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*on.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*on.RAD2DEG*Math.atan(Math.tan(.5*on.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*on.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var Hi=90,Wi=1;function qi(t,e,n,r){Gn.call(this),this.type="CubeCamera";var i=new Gi(Hi,Wi,t,e);i.up.set(0,-1,0),i.lookAt(new gn(1,0,0)),this.add(i);var o=new Gi(Hi,Wi,t,e);o.up.set(0,-1,0),o.lookAt(new gn(-1,0,0)),this.add(o);var a=new Gi(Hi,Wi,t,e);a.up.set(0,0,1),a.lookAt(new gn(0,1,0)),this.add(a);var s=new Gi(Hi,Wi,t,e);s.up.set(0,0,-1),s.lookAt(new gn(0,-1,0)),this.add(s);var u=new Gi(Hi,Wi,t,e);u.up.set(0,-1,0),u.lookAt(new gn(0,0,1)),this.add(u);var c=new Gi(Hi,Wi,t,e);c.up.set(0,-1,0),c.lookAt(new gn(0,0,-1)),this.add(c),r=r||{format:It,magFilter:pt,minFilter:pt},this.renderTarget=new Yi(n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),r=this.renderTarget,h=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0),t.render(e,i),t.setRenderTarget(r,1),t.render(e,o),t.setRenderTarget(r,2),t.render(e,a),t.setRenderTarget(r,3),t.render(e,s),t.setRenderTarget(r,4),t.render(e,u),r.texture.generateMipmaps=h,t.setRenderTarget(r,5),t.render(e,c),t.setRenderTarget(n)},this.clear=function(t,e,n,r){for(var i=t.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)t.setRenderTarget(o,a),t.clear(e,n,r);t.setRenderTarget(i)}}function Yi(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),fn.call(this,t,t,e)}function Xi(t,e,n,r,i,o,a,s,u,c,h,l){hn.call(this,null,o,a,s,u,c,r,i,h,l),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==u?u:ht,this.minFilter=void 0!==c?c:ht,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}qi.prototype=Object.create(Gn.prototype),qi.prototype.constructor=qi,Yi.prototype=Object.create(fn.prototype),Yi.prototype.constructor=Yi,Yi.prototype.isWebGLCubeRenderTarget=!0,Yi.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new Hn,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new Bi({type:"CubemapFromEquirect",uniforms:ki(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:l,blending:d});i.uniforms.tEquirect.value=e;var o=new Mi(new Di(5,5,5),i);n.add(o);var a=new qi(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(t,n),o.geometry.dispose(),o.material.dispose(),this},Xi.prototype=Object.create(hn.prototype),Xi.prototype.constructor=Xi,Xi.prototype.isDataTexture=!0;var Ki=new sr,$i=new gn;function Qi(t,e,n,r,i,o){this.planes=[void 0!==t?t:new br,void 0!==e?e:new br,void 0!==n?n:new br,void 0!==r?r:new br,void 0!==i?i:new br,void 0!==o?o:new br]}Object.assign(Qi.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromProjectionMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],h=n[7],l=n[8],f=n[9],p=n[10],d=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return e[0].setComponents(a-r,h-s,d-l,y-v).normalize(),e[1].setComponents(a+r,h+s,d+l,y+v).normalize(),e[2].setComponents(a+i,h+u,d+f,y+m).normalize(),e[3].setComponents(a-i,h-u,d-f,y-m).normalize(),e[4].setComponents(a-o,h-c,d-p,y-g).normalize(),e[5].setComponents(a+o,h+c,d+p,y+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ki.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ki)},intersectsSprite:function(t){return Ki.center.set(0,0,0),Ki.radius=.7071067811865476,Ki.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ki)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){var o=e[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if($i.x=r.normal.x>0?t.max.x:t.min.x,$i.y=r.normal.y>0?t.max.y:t.min.y,$i.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint($i)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Ji={common:{diffuse:{value:new Lr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new sn},uv2Transform:{value:new sn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new an(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Lr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new sn}},sprite:{diffuse:{value:new Lr(15658734)},opacity:{value:1},center:{value:new an(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new sn}}};function Zi(){var t=null,e=!1,n=null;function r(i,o){!1!==e&&(n(i,o),t.requestAnimationFrame(r))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(r),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function to(t,e){var n=e.isWebGL2,r=new WeakMap;function i(e,n){var r=e.array,i=e.usage,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}function o(e,r,i){var o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}function a(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)}function s(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))}function u(t,e){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);void 0===n?r.set(t,i(t,e)):n.version<t.version&&(o(n.buffer,t,e),n.version=t.version)}return{get:a,remove:s,update:u}}function eo(t,e,n,r){Pi.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new no(t,e,n,r)),this.mergeVertices()}function no(t,e,n,r){ui.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},t=t||1,e=e||1;var i,o,a=t/2,s=e/2,u=Math.floor(n)||1,c=Math.floor(r)||1,h=u+1,l=c+1,f=t/u,p=e/c,d=[],v=[],m=[],g=[];for(o=0;o<l;o++){var y=o*p-s;for(i=0;i<h;i++){var b=i*f-a;v.push(b,-y,0),m.push(0,0,1),g.push(i/u),g.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var _=i+h*o,w=i+h*(o+1),x=i+1+h*(o+1),E=i+1+h*o;d.push(_,w,E),d.push(w,x,E)}this.setIndex(d),this.setAttribute("position",new Qr(v,3)),this.setAttribute("normal",new Qr(m,3)),this.setAttribute("uv",new Qr(g,2))}eo.prototype=Object.create(Pi.prototype),eo.prototype.constructor=eo,no.prototype=Object.create(ui.prototype),no.prototype.constructor=no;var ro="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",io="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",oo="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",ao="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",so="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",uo="vec3 transformed = vec3( position );",co="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",ho="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",lo="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",fo="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",po="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",vo="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",mo="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",go="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",yo="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",bo="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",_o="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",wo="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",xo="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",Eo="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",So="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",To="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",Mo="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Ao="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Co="gl_FragColor = linearToOutputTexel( gl_FragColor );",Io="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",No="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Ro="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Oo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",Po="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Lo="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Do="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",ko="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",Fo="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Uo="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",jo="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",zo="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",Bo="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Vo="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",Go="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",Ho="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",Wo="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",qo="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",Yo="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Xo="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",Ko="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",$o="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Qo="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",Jo="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",Zo="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",ta="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",ea="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",na="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",ra="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",ia="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",oa="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",aa="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",sa="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",ua="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",ca="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",ha="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",la="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",fa="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",pa="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",da="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",va="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",ma="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",ga="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",ya="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",ba="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",_a="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",wa="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",xa="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Ea="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Sa="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Ta="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Ma="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Aa="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",Ca="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",Ia="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",Na="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Ra="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",Oa="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Pa="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",La="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Da="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",ka="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Fa="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",Ua="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",ja="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",za="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",Ba="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Va="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",Ga="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",Ha="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",Wa="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",qa="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Ya="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Xa="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Ka="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",$a="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Qa="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Ja="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Za="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ts="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",es="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",ns="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",rs="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",is="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",os="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",as="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ss="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",us="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",cs="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",hs="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ls="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",fs="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ps="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ds="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",vs="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",ms="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",gs="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",ys="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",bs="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",_s="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ws="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",xs="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Es={alphamap_fragment:ro,alphamap_pars_fragment:io,alphatest_fragment:oo,aomap_fragment:ao,aomap_pars_fragment:so,begin_vertex:uo,beginnormal_vertex:co,bsdfs:ho,bumpmap_pars_fragment:lo,clipping_planes_fragment:fo,clipping_planes_pars_fragment:po,clipping_planes_pars_vertex:vo,clipping_planes_vertex:mo,color_fragment:go,color_pars_fragment:yo,color_pars_vertex:bo,color_vertex:_o,common:wo,cube_uv_reflection_fragment:xo,defaultnormal_vertex:Eo,displacementmap_pars_vertex:So,displacementmap_vertex:To,emissivemap_fragment:Mo,emissivemap_pars_fragment:Ao,encodings_fragment:Co,encodings_pars_fragment:Io,envmap_fragment:No,envmap_common_pars_fragment:Ro,envmap_pars_fragment:Oo,envmap_pars_vertex:Po,envmap_physical_pars_fragment:Ho,envmap_vertex:Lo,fog_vertex:Do,fog_pars_vertex:ko,fog_fragment:Fo,fog_pars_fragment:Uo,gradientmap_pars_fragment:jo,lightmap_fragment:zo,lightmap_pars_fragment:Bo,lights_lambert_vertex:Vo,lights_pars_begin:Go,lights_toon_fragment:Wo,lights_toon_pars_fragment:qo,lights_phong_fragment:Yo,lights_phong_pars_fragment:Xo,lights_physical_fragment:Ko,lights_physical_pars_fragment:$o,lights_fragment_begin:Qo,lights_fragment_maps:Jo,lights_fragment_end:Zo,logdepthbuf_fragment:ta,logdepthbuf_pars_fragment:ea,logdepthbuf_pars_vertex:na,logdepthbuf_vertex:ra,map_fragment:ia,map_pars_fragment:oa,map_particle_fragment:aa,map_particle_pars_fragment:sa,metalnessmap_fragment:ua,metalnessmap_pars_fragment:ca,morphnormal_vertex:ha,morphtarget_pars_vertex:la,morphtarget_vertex:fa,normal_fragment_begin:pa,normal_fragment_maps:da,normalmap_pars_fragment:va,clearcoat_normal_fragment_begin:ma,clearcoat_normal_fragment_maps:ga,clearcoat_pars_fragment:ya,packing:ba,premultiplied_alpha_fragment:_a,project_vertex:wa,dithering_fragment:xa,dithering_pars_fragment:Ea,roughnessmap_fragment:Sa,roughnessmap_pars_fragment:Ta,shadowmap_pars_fragment:Ma,shadowmap_pars_vertex:Aa,shadowmap_vertex:Ca,shadowmask_pars_fragment:Ia,skinbase_vertex:Na,skinning_pars_vertex:Ra,skinning_vertex:Oa,skinnormal_vertex:Pa,specularmap_fragment:La,specularmap_pars_fragment:Da,tonemapping_fragment:ka,tonemapping_pars_fragment:Fa,uv_pars_fragment:Ua,uv_pars_vertex:ja,uv_vertex:za,uv2_pars_fragment:Ba,uv2_pars_vertex:Va,uv2_vertex:Ga,worldpos_vertex:Ha,background_frag:Wa,background_vert:qa,cube_frag:Ya,cube_vert:Xa,depth_frag:Ka,depth_vert:$a,distanceRGBA_frag:Qa,distanceRGBA_vert:Ja,equirect_frag:Za,equirect_vert:ts,linedashed_frag:es,linedashed_vert:ns,meshbasic_frag:rs,meshbasic_vert:is,meshlambert_frag:os,meshlambert_vert:as,meshmatcap_frag:ss,meshmatcap_vert:us,meshtoon_frag:cs,meshtoon_vert:hs,meshphong_frag:ls,meshphong_vert:fs,meshphysical_frag:ps,meshphysical_vert:ds,normal_frag:vs,normal_vert:ms,points_frag:gs,points_vert:ys,shadow_frag:bs,shadow_vert:_s,sprite_frag:ws,sprite_vert:xs},Ss={basic:{uniforms:Fi([Ji.common,Ji.specularmap,Ji.envmap,Ji.aomap,Ji.lightmap,Ji.fog]),vertexShader:Es.meshbasic_vert,fragmentShader:Es.meshbasic_frag},lambert:{uniforms:Fi([Ji.common,Ji.specularmap,Ji.envmap,Ji.aomap,Ji.lightmap,Ji.emissivemap,Ji.fog,Ji.lights,{emissive:{value:new Lr(0)}}]),vertexShader:Es.meshlambert_vert,fragmentShader:Es.meshlambert_frag},phong:{uniforms:Fi([Ji.common,Ji.specularmap,Ji.envmap,Ji.aomap,Ji.lightmap,Ji.emissivemap,Ji.bumpmap,Ji.normalmap,Ji.displacementmap,Ji.fog,Ji.lights,{emissive:{value:new Lr(0)},specular:{value:new Lr(1118481)},shininess:{value:30}}]),vertexShader:Es.meshphong_vert,fragmentShader:Es.meshphong_frag},standard:{uniforms:Fi([Ji.common,Ji.envmap,Ji.aomap,Ji.lightmap,Ji.emissivemap,Ji.bumpmap,Ji.normalmap,Ji.displacementmap,Ji.roughnessmap,Ji.metalnessmap,Ji.fog,Ji.lights,{emissive:{value:new Lr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Es.meshphysical_vert,fragmentShader:Es.meshphysical_frag},toon:{uniforms:Fi([Ji.common,Ji.specularmap,Ji.aomap,Ji.lightmap,Ji.emissivemap,Ji.bumpmap,Ji.normalmap,Ji.displacementmap,Ji.gradientmap,Ji.fog,Ji.lights,{emissive:{value:new Lr(0)},specular:{value:new Lr(1118481)},shininess:{value:30}}]),vertexShader:Es.meshtoon_vert,fragmentShader:Es.meshtoon_frag},matcap:{uniforms:Fi([Ji.common,Ji.bumpmap,Ji.normalmap,Ji.displacementmap,Ji.fog,{matcap:{value:null}}]),vertexShader:Es.meshmatcap_vert,fragmentShader:Es.meshmatcap_frag},points:{uniforms:Fi([Ji.points,Ji.fog]),vertexShader:Es.points_vert,fragmentShader:Es.points_frag},dashed:{uniforms:Fi([Ji.common,Ji.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Es.linedashed_vert,fragmentShader:Es.linedashed_frag},depth:{uniforms:Fi([Ji.common,Ji.displacementmap]),vertexShader:Es.depth_vert,fragmentShader:Es.depth_frag},normal:{uniforms:Fi([Ji.common,Ji.bumpmap,Ji.normalmap,Ji.displacementmap,{opacity:{value:1}}]),vertexShader:Es.normal_vert,fragmentShader:Es.normal_frag},sprite:{uniforms:Fi([Ji.sprite,Ji.fog]),vertexShader:Es.sprite_vert,fragmentShader:Es.sprite_frag},background:{uniforms:{uvTransform:{value:new sn},t2D:{value:null}},vertexShader:Es.background_vert,fragmentShader:Es.background_frag},cube:{uniforms:Fi([Ji.envmap,{opacity:{value:1}}]),vertexShader:Es.cube_vert,fragmentShader:Es.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Es.equirect_vert,fragmentShader:Es.equirect_frag},distanceRGBA:{uniforms:Fi([Ji.common,Ji.displacementmap,{referencePosition:{value:new gn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Es.distanceRGBA_vert,fragmentShader:Es.distanceRGBA_frag},shadow:{uniforms:Fi([Ji.lights,Ji.fog,{color:{value:new Lr(0)},opacity:{value:1}}]),vertexShader:Es.shadow_vert,fragmentShader:Es.shadow_frag}};function Ts(t,e,n,r){var i,o,a=new Lr(0),s=0,u=null,c=0,f=null;function p(e,r,p,v){var m=r.background,g=t.xr,y=g.getSession&&g.getSession();if(y&&"additive"===y.environmentBlendMode&&(m=null),null===m?d(a,s):m&&m.isColor&&(d(m,1),v=!0),(t.autoClear||v)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||m.mapping===ot)){void 0===o&&(o=new Mi(new Di(1,1,1),new Bi({type:"BackgroundCubeMaterial",uniforms:ki(Ss.cube.uniforms),vertexShader:Ss.cube.vertexShader,fragmentShader:Ss.cube.fragmentShader,side:l,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o));var b=m.isWebGLCubeRenderTarget?m.texture:m;o.material.uniforms.envMap.value=b,o.material.uniforms.flipEnvMap.value=b.isCubeTexture?-1:1,u===m&&c===b.version&&f===t.toneMapping||(o.material.needsUpdate=!0,u=m,c=b.version,f=t.toneMapping),e.unshift(o,o.geometry,o.material,0,0,null)}else m&&m.isTexture&&(void 0===i&&(i=new Mi(new no(2,2),new Bi({type:"BackgroundMaterial",uniforms:ki(Ss.background.uniforms),vertexShader:Ss.background.vertexShader,fragmentShader:Ss.background.fragmentShader,side:h,depthTest:!1,depthWrite:!1,fog:!1})),i.geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),i.material.uniforms.uvTransform.value.copy(m.matrix),u===m&&c===m.version&&f===t.toneMapping||(i.material.needsUpdate=!0,u=m,c=m.version,f=t.toneMapping),e.unshift(i,i.geometry,i.material,0,0,null))}function d(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),s=void 0!==e?e:1,d(a,s)},getClearAlpha:function(){return s},setClearAlpha:function(t){s=t,d(a,s)},render:p}}function Ms(t,e,n,r){var i,o=r.isWebGL2;function a(t){i=t}function s(e,r){t.drawArrays(i,e,r),n.update(r,i)}function u(r,a,s,u){if(0!==u){var c,h;if(o)c=t,h="drawArraysInstanced";else if(c=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,a,s,u),n.update(s,i,u)}}this.setMode=a,this.render=s,this.renderInstances=u}function As(t,e,n){var r;function i(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",u=o(s);u!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",u,"instead."),s=u);var c=!0===n.logarithmicDepthBuffer,h=t.getParameter(34930),l=t.getParameter(35660),f=t.getParameter(3379),p=t.getParameter(34076),d=t.getParameter(34921),v=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),y=l>0,b=a||!!e.get("OES_texture_float"),_=y&&b,w=a?t.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:l,maxTextureSize:f,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:_,maxSamples:w}}function Cs(){var t=this,e=null,n=0,r=!1,i=!1,o=new br,a=new sn,s={value:null,needsUpdate:!1};function u(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function c(e,n,r,i){var u=null!==e?e.length:0,c=null;if(0!==u){if(c=s.value,!0!==i||null===c){var h=r+4*u,l=n.matrixWorldInverse;a.getNormalMatrix(l),(null===c||c.length<h)&&(c=new Float32Array(h));for(var f=0,p=r;f!==u;++f,p+=4)o.copy(e[f]).applyMatrix4(l,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return t.numPlanes=u,t.numIntersection=0,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==n||r;return r=i,e=c(t,o,0),n=t.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,a,h,l,f){if(!r||null===t||0===t.length||i&&!a)i?c(null):u();else{var p=i?0:n,d=4*p,v=l.clippingState||null;s.value=v,v=c(t,h,d,f);for(var m=0;m!==d;++m)v[m]=e[m];l.clippingState=v,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function Is(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}function Ns(t,e,n){var r=new WeakMap,i=new WeakMap;function o(t){var a=t.target,s=r.get(a);for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);a.removeEventListener("dispose",o),r.delete(a);var c=i.get(s);c&&(e.remove(c),i.delete(s)),n.memory.geometries--}function a(t,e){var i=r.get(e);return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new ui).setFromObject(t)),i=e._bufferGeometry),r.set(e,i),n.memory.geometries++,i)}function s(t){var n=t.index,r=t.attributes;for(var i in null!==n&&e.update(n,34963),r)e.update(r[i],34962);var o=t.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)e.update(a[s],34962)}function u(t){var n=[],r=t.index,o=t.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,c=s.length;u<c;u+=3){var h=s[u+0],l=s[u+1],f=s[u+2];n.push(h,l,l,f,f,h)}}else{s=o.array;a=o.version;for(u=0,c=s.length/3-1;u<c;u+=3){h=u+0,l=u+1,f=u+2;n.push(h,l,l,f,f,h)}}var p=new(ti(n)>65535?$r:Xr)(n,1);p.version=a,e.update(p,34963);var d=i.get(t);d&&e.remove(d),i.set(t,p)}function c(t){var e=i.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&u(t)}else u(t);return i.get(t)}return{get:a,update:s,getWireframeAttribute:c}}function Rs(t,e,n,r){var i,o,a,s=r.isWebGL2;function u(t){i=t}function c(t){o=t.type,a=t.bytesPerElement}function h(e,r){t.drawElements(i,r,o,e*a),n.update(r,i)}function l(r,u,c,h){if(0!==h){var l,f;if(s)l=t,f="drawElementsInstanced";else if(l=e.get("ANGLE_instanced_arrays"),f="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[f](i,c,o,u*a,h),n.update(c,i,h)}}this.setMode=u,this.setIndex=c,this.render=h,this.renderInstances=l}function Os(t){var e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(t,e,r){switch(r=r||1,n.calls++,e){case 4:n.triangles+=r*(t/3);break;case 1:n.lines+=r*(t/2);break;case 3:n.lines+=r*(t-1);break;case 2:n.lines+=r*t;break;case 0:n.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Ps(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ls(t){var e={},n=new Float32Array(8);function r(r,i,o,a){var s=r.morphTargetInfluences,u=void 0===s?0:s.length,c=e[i.id];if(void 0===c){c=[];for(var h=0;h<u;h++)c[h]=[h,0];e[i.id]=c}var l=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(h=0;h<u;h++){var p=c[h];0!==p[1]&&(l&&i.deleteAttribute("morphTarget"+h),f&&i.deleteAttribute("morphNormal"+h))}for(h=0;h<u;h++){p=c[h];p[0]=h,p[1]=s[h]}c.sort(Ps);var d=0;for(h=0;h<8;h++){p=c[h];if(p){var v=p[0],m=p[1];if(m){l&&i.setAttribute("morphTarget"+h,l[v]),f&&i.setAttribute("morphNormal"+h,f[v]),n[h]=m,d+=m;continue}}n[h]=0}var g=i.morphTargetsRelative?1:1-d;a.getUniforms().setValue(t,"morphTargetBaseInfluence",g),a.getUniforms().setValue(t,"morphTargetInfluences",n)}return{update:r}}function Ds(t,e,n,r){var i=new WeakMap;function o(t){var o=r.render.frame,a=t.geometry,s=e.get(t,a);return i.get(s)!==o&&(a.isGeometry&&s.updateFromObject(t),e.update(s),i.set(s,o)),t.isInstancedMesh&&n.update(t.instanceMatrix,34962),s}function a(){i=new WeakMap}return{update:o,dispose:a}}function ks(t,e,n,r,i,o,a,s,u,c){t=void 0!==t?t:[],e=void 0!==e?e:tt,a=void 0!==a?a:It,hn.call(this,t,e,n,r,i,o,a,s,u,c),this.flipY=!1}function Fs(t,e,n,r){hn.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:r||1},this.magFilter=ht,this.minFilter=ht,this.wrapR=ut,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Us(t,e,n,r){hn.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:r||1},this.magFilter=ht,this.minFilter=ht,this.wrapR=ut,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Ss.physical={uniforms:Fi([Ss.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new an(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Lr(0)},transparency:{value:0}}]),vertexShader:Es.meshphysical_vert,fragmentShader:Es.meshphysical_frag},ks.prototype=Object.create(hn.prototype),ks.prototype.constructor=ks,ks.prototype.isCubeTexture=!0,Object.defineProperty(ks.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),Fs.prototype=Object.create(hn.prototype),Fs.prototype.constructor=Fs,Fs.prototype.isDataTexture2DArray=!0,Us.prototype=Object.create(hn.prototype),Us.prototype.constructor=Us,Us.prototype.isDataTexture3D=!0;var js=new hn,zs=new Fs,Bs=new Us,Vs=new ks,Gs=[],Hs=[],Ws=new Float32Array(16),qs=new Float32Array(9),Ys=new Float32Array(4);function Xs(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=Gs[i];if(void 0===o&&(o=new Float32Array(i),Gs[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function Ks(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function $s(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Qs(t,e){var n=Hs[e];void 0===n&&(n=new Int32Array(e),Hs[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Js(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Zs(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ks(n,e))return;t.uniform2fv(this.addr,e),$s(n,e)}}function tu(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ks(n,e))return;t.uniform3fv(this.addr,e),$s(n,e)}}function eu(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ks(n,e))return;t.uniform4fv(this.addr,e),$s(n,e)}}function nu(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Ks(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),$s(n,e)}else{if(Ks(n,r))return;Ys.set(r),t.uniformMatrix2fv(this.addr,!1,Ys),$s(n,r)}}function ru(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Ks(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),$s(n,e)}else{if(Ks(n,r))return;qs.set(r),t.uniformMatrix3fv(this.addr,!1,qs),$s(n,r)}}function iu(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Ks(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),$s(n,e)}else{if(Ks(n,r))return;Ws.set(r),t.uniformMatrix4fv(this.addr,!1,Ws),$s(n,r)}}function ou(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||js,i)}function au(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||zs,i)}function su(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Bs,i)}function uu(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Vs,i)}function cu(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function hu(t,e){var n=this.cache;Ks(n,e)||(t.uniform2iv(this.addr,e),$s(n,e))}function lu(t,e){var n=this.cache;Ks(n,e)||(t.uniform3iv(this.addr,e),$s(n,e))}function fu(t,e){var n=this.cache;Ks(n,e)||(t.uniform4iv(this.addr,e),$s(n,e))}function pu(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function du(t){switch(t){case 5126:return Js;case 35664:return Zs;case 35665:return tu;case 35666:return eu;case 35674:return nu;case 35675:return ru;case 35676:return iu;case 5124:case 35670:return cu;case 35667:case 35671:return hu;case 35668:case 35672:return lu;case 35669:case 35673:return fu;case 5125:return pu;case 35678:case 36198:case 36298:case 36306:case 35682:return ou;case 35679:case 36299:case 36307:return su;case 35680:case 36300:case 36308:case 36293:return uu;case 36289:case 36303:case 36311:case 36292:return au}}function vu(t,e){t.uniform1fv(this.addr,e)}function mu(t,e){t.uniform1iv(this.addr,e)}function gu(t,e){t.uniform2iv(this.addr,e)}function yu(t,e){t.uniform3iv(this.addr,e)}function bu(t,e){t.uniform4iv(this.addr,e)}function _u(t,e){var n=Xs(e,this.size,2);t.uniform2fv(this.addr,n)}function wu(t,e){var n=Xs(e,this.size,3);t.uniform3fv(this.addr,n)}function xu(t,e){var n=Xs(e,this.size,4);t.uniform4fv(this.addr,n)}function Eu(t,e){var n=Xs(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Su(t,e){var n=Xs(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Tu(t,e){var n=Xs(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Mu(t,e,n){var r=e.length,i=Qs(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(e[o]||js,i[o])}function Au(t,e,n){var r=e.length,i=Qs(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(e[o]||Vs,i[o])}function Cu(t){switch(t){case 5126:return vu;case 35664:return _u;case 35665:return wu;case 35666:return xu;case 35674:return Eu;case 35675:return Su;case 35676:return Tu;case 5124:case 35670:return mu;case 35667:case 35671:return gu;case 35668:case 35672:return yu;case 35669:case 35673:return bu;case 35678:case 36198:case 36298:case 36306:case 35682:return Mu;case 35680:case 36300:case 36308:case 36293:return Au}}function Iu(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=du(e.type)}function Nu(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=Cu(e.type)}function Ru(t){this.id=t,this.seq=[],this.map={}}Nu.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),$s(e,t)},Ru.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var Ou=/([\w\d_]+)(\])?(\[|\.)?/g;function Pu(t,e){t.seq.push(e),t.map[e.id]=e}function Lu(t,e,n){var r=t.name,i=r.length;Ou.lastIndex=0;while(1){var o=Ou.exec(r),a=Ou.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){Pu(n,void 0===c?new Iu(s,t,e):new Nu(s,t,e));break}var h=n.map,l=h[s];void 0===l&&(l=new Ru(s),Pu(n,l)),n=l}}function Du(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r),o=t.getUniformLocation(e,i.name);Lu(i,o,this)}}function ku(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}Du.prototype.setValue=function(t,e,n,r){var i=this.map[e];void 0!==i&&i.setValue(t,n,r)},Du.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},Du.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},Du.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var Fu=0;function Uu(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function ju(t){switch(t){case Ue:return["Linear","( value )"];case je:return["sRGB","( value )"];case Be:return["RGBE","( value )"];case Ge:return["RGBM","( value, 7.0 )"];case He:return["RGBM","( value, 16.0 )"];case We:return["RGBD","( value, 256.0 )"];case ze:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Ve:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function zu(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";var o=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+Uu(o)}function Bu(t,e){var n=ju(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Vu(t,e){var n=ju(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Gu(t,e){var n;switch(e){case X:n="Linear";break;case K:n="Reinhard";break;case $:n="Uncharted2";break;case Q:n="OptimizedCineon";break;case J:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Hu(t){var e=[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(Yu).join("\n")}function Wu(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function qu(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var o=t.getActiveAttrib(e,i),a=o.name;n[a]=t.getAttribLocation(e,a)}return n}function Yu(t){return""!==t}function Xu(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ku(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var $u=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qu(t){return t.replace($u,Ju)}function Ju(t,e){var n=Es[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Qu(n)}var Zu=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,tc=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function ec(t){return t.replace(tc,rc).replace(Zu,nc)}function nc(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),rc(t,e,n,r)}function rc(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function ic(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function oc(t){var e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===s?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===u?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===c&&(e="SHADOWMAP_TYPE_VSM"),e}function ac(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case tt:case et:e="ENVMAP_TYPE_CUBE";break;case ot:case at:e="ENVMAP_TYPE_CUBE_UV";break;case nt:case rt:e="ENVMAP_TYPE_EQUIREC";break;case it:e="ENVMAP_TYPE_SPHERE";break}return e}function sc(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case et:case rt:e="ENVMAP_MODE_REFRACTION";break}return e}function uc(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case H:e="ENVMAP_BLENDING_MULTIPLY";break;case W:e="ENVMAP_BLENDING_MIX";break;case q:e="ENVMAP_BLENDING_ADD";break}return e}function cc(t,e,n){var r,i,o=t.getContext(),a=n.defines,s=n.vertexShader,u=n.fragmentShader,c=oc(n),h=ac(n),l=sc(n),f=uc(n),p=t.gammaFactor>0?t.gammaFactor:1,d=n.isWebGL2?"":Hu(n),v=Wu(a),m=o.createProgram();if(n.isRawShaderMaterial?(r=[v].filter(Yu).join("\n"),r.length>0&&(r+="\n"),i=[d,v].filter(Yu).join("\n"),i.length>0&&(i+="\n")):(r=[ic(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Yu).join("\n"),i=[d,ic(n),"#define SHADER_NAME "+n.shaderName,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+l:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Y?"#define TONE_MAPPING":"",n.toneMapping!==Y?Es["tonemapping_pars_fragment"]:"",n.toneMapping!==Y?Gu("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.matcapEncoding||n.envMapEncoding||n.emissiveMapEncoding||n.lightMapEncoding?Es["encodings_pars_fragment"]:"",n.mapEncoding?Bu("mapTexelToLinear",n.mapEncoding):"",n.matcapEncoding?Bu("matcapTexelToLinear",n.matcapEncoding):"",n.envMapEncoding?Bu("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Bu("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMapEncoding?Bu("lightMapTexelToLinear",n.lightMapEncoding):"",n.outputEncoding?Vu("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Yu).join("\n")),s=Qu(s),s=Xu(s,n),s=Ku(s,n),u=Qu(u),u=Xu(u,n),u=Ku(u,n),s=ec(s),u=ec(u),n.isWebGL2&&!n.isRawShaderMaterial){var g=!1,y=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==s.match(y)&&null!==u.match(y)&&(g=!0,s=s.replace(y,""),u=u.replace(y,"")),r=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,i=["#version 300 es\n","#define varying in",g?"":"out highp vec4 pc_fragColor;",g?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i}var b,_,w=r+s,x=i+u,E=ku(o,35633,w),S=ku(o,35632,x);if(o.attachShader(m,E),o.attachShader(m,S),void 0!==n.index0AttributeName?o.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(m,0,"position"),o.linkProgram(m),t.debug.checkShaderErrors){var T=o.getProgramInfoLog(m).trim(),M=o.getShaderInfoLog(E).trim(),A=o.getShaderInfoLog(S).trim(),C=!0,I=!0;if(!1===o.getProgramParameter(m,35714)){C=!1;var N=zu(o,E,"vertex"),R=zu(o,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(m,35715),"gl.getProgramInfoLog",T,N,R)}else""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==M&&""!==A||(I=!1);I&&(this.diagnostics={runnable:C,programLog:T,vertexShader:{log:M,prefix:r},fragmentShader:{log:A,prefix:i}})}return o.detachShader(m,E),o.detachShader(m,S),o.deleteShader(E),o.deleteShader(S),this.getUniforms=function(){return void 0===b&&(b=new Du(o,m)),b},this.getAttributes=function(){return void 0===_&&(_=qu(o,m)),_},this.destroy=function(){o.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Fu++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=E,this.fragmentShader=S,this}function hc(t,e,n){var r=[],i=n.isWebGL2,o=n.logarithmicDepthBuffer,a=n.floatVertexTextures,s=n.precision,u=n.maxVertexUniforms,c=n.vertexTextures,h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function d(t,e){var n;if(e){var r=Ss[e];n={name:t.type,uniforms:Ui.clone(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}}else n={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};return n}function v(t){var e=t.skeleton,n=e.bones;if(a)return 1024;var r=u,i=Math.floor((r-20)/4),o=Math.min(i,n.length);return o<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+o+"."),0):o}function m(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Ue,e}this.getParameters=function(r,u,p,g,y,b,_){var w=g.fog,x=r.isMeshStandardMaterial?g.environment:null,E=r.envMap||x,S=h[r.type],T=_.isSkinnedMesh?v(_):0;null!==r.precision&&(s=n.getMaxPrecision(r.precision),s!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",s,"instead."));var M=d(r,S);r.onBeforeCompile(M,t);var A=t.getRenderTarget(),C={isWebGL2:i,shaderID:S,shaderName:M.name,uniforms:M.uniforms,vertexShader:M.vertexShader,fragmentShader:M.fragmentShader,defines:r.defines,isRawShaderMaterial:r.isRawShaderMaterial,isShaderMaterial:r.isShaderMaterial,precision:s,instancing:!0===_.isInstancedMesh,supportsVertexTextures:c,outputEncoding:null!==A?m(A.texture):t.outputEncoding,map:!!r.map,mapEncoding:m(r.map),matcap:!!r.matcap,matcapEncoding:m(r.matcap),envMap:!!E,envMapMode:E&&E.mapping,envMapEncoding:m(E),envMapCubeUV:!!E&&(E.mapping===ot||E.mapping===at),lightMap:!!r.lightMap,lightMapEncoding:m(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:m(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===Ke,tangentSpaceNormalMap:r.normalMapType===Xe,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!r.map||!!r.bumpMap||!!r.normalMap||!!r.specularMap||!!r.alphaMap||!!r.emissiveMap||!!r.roughnessMap||!!r.metalnessMap||!!r.clearcoatMap||!!r.clearcoatRoughnessMap||!!r.clearcoatNormalMap||!!r.displacementMap,uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap)&&!!r.displacementMap,fog:!!w,useFog:r.fog,fogExp2:w&&w.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:o,skinning:r.skinning&&T>0,maxBones:T,useVertexTexture:a,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numClippingPlanes:y,numClipIntersection:b,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:Y,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===f,flipSided:r.side===l,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:i||null!==e.get("EXT_frag_depth"),rendererExtensionDrawBuffers:i||null!==e.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:i||null!==e.get("EXT_shader_texture_lod"),onBeforeCompile:r.onBeforeCompile};return C},this.getProgramCacheKey=function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);if(void 0===e.isRawShaderMaterial){for(var i=0;i<p.length;i++)n.push(e[p[i]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.onBeforeCompile.toString()),n.join()},this.acquireProgram=function(e,n){for(var i,o=0,a=r.length;o<a;o++){var s=r[o];if(s.cacheKey===n){i=s,++i.usedTimes;break}}return void 0===i&&(i=new cc(t,n,e),r.push(i)),i},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function lc(){var t=new WeakMap;function e(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function r(e,n,r){t.get(e)[n]=r}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function fc(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function pc(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function dc(){var t=[],e=0,n=[],r=[],i={id:-1};function o(){e=0,n.length=0,r.length=0}function a(n,r,o,a,s,u){var c=t[e];return void 0===c?(c={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:u},t[e]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=o,c.program=o.program||i,c.groupOrder=a,c.renderOrder=n.renderOrder,c.z=s,c.group=u),e++,c}function s(t,e,i,o,s,u){var c=a(t,e,i,o,s,u);(!0===i.transparent?r:n).push(c)}function u(t,e,i,o,s,u){var c=a(t,e,i,o,s,u);(!0===i.transparent?r:n).unshift(c)}function c(t,e){n.length>1&&n.sort(t||fc),r.length>1&&r.sort(e||pc)}function h(){for(var n=e,r=t.length;n<r;n++){var i=t[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}}return{opaque:n,transparent:r,init:o,push:s,unshift:u,finish:h,sort:c}}function vc(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener("dispose",e),t.delete(r)}function n(n,r){var i,o=t.get(n);return void 0===o?(i=new dc,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener("dispose",e)):(i=o.get(r),void 0===i&&(i=new dc,o.set(r,i))),i}function r(){t=new WeakMap}return{get:n,dispose:r}}function mc(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new gn,color:new Lr};break;case"SpotLight":n={position:new gn,direction:new gn,color:new Lr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new gn,color:new Lr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new gn,skyColor:new Lr,groundColor:new Lr};break;case"RectAreaLight":n={color:new Lr,position:new gn,halfWidth:new gn,halfHeight:new gn};break}return t[e.id]=n,n}}}function gc(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowRadius:1,shadowMapSize:new an};break;case"SpotLight":n={shadowBias:0,shadowRadius:1,shadowMapSize:new an};break;case"PointLight":n={shadowBias:0,shadowRadius:1,shadowMapSize:new an,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}var yc=0;function bc(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function _c(){for(var t=new mc,e=gc(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=0;r<9;r++)n.probe.push(new gn);var i=new gn,o=new Tn,a=new Tn;function s(r,s,u){for(var c=0,h=0,l=0,f=0;f<9;f++)n.probe[f].set(0,0,0);var p=0,d=0,v=0,m=0,g=0,y=0,b=0,_=0,w=u.matrixWorldInverse;r.sort(bc);f=0;for(var x=r.length;f<x;f++){var E=r[f],S=E.color,T=E.intensity,M=E.distance,A=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)c+=S.r*T,h+=S.g*T,l+=S.b*T;else if(E.isLightProbe)for(var C=0;C<9;C++)n.probe[C].addScaledVector(E.sh.coefficients[C],T);else if(E.isDirectionalLight){var I=t.get(E);if(I.color.copy(E.color).multiplyScalar(E.intensity),I.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),I.direction.sub(i),I.direction.transformDirection(w),E.castShadow){var N=E.shadow,R=e.get(E);R.shadowBias=N.bias,R.shadowRadius=N.radius,R.shadowMapSize=N.mapSize,n.directionalShadow[p]=R,n.directionalShadowMap[p]=A,n.directionalShadowMatrix[p]=E.shadow.matrix,y++}n.directional[p]=I,p++}else if(E.isSpotLight){I=t.get(E);if(I.position.setFromMatrixPosition(E.matrixWorld),I.position.applyMatrix4(w),I.color.copy(S).multiplyScalar(T),I.distance=M,I.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),I.direction.sub(i),I.direction.transformDirection(w),I.coneCos=Math.cos(E.angle),I.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),I.decay=E.decay,E.castShadow){N=E.shadow,R=e.get(E);R.shadowBias=N.bias,R.shadowRadius=N.radius,R.shadowMapSize=N.mapSize,n.spotShadow[v]=R,n.spotShadowMap[v]=A,n.spotShadowMatrix[v]=E.shadow.matrix,_++}n.spot[v]=I,v++}else if(E.isRectAreaLight){I=t.get(E);I.color.copy(S).multiplyScalar(T),I.position.setFromMatrixPosition(E.matrixWorld),I.position.applyMatrix4(w),a.identity(),o.copy(E.matrixWorld),o.premultiply(w),a.extractRotation(o),I.halfWidth.set(.5*E.width,0,0),I.halfHeight.set(0,.5*E.height,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),n.rectArea[m]=I,m++}else if(E.isPointLight){I=t.get(E);if(I.position.setFromMatrixPosition(E.matrixWorld),I.position.applyMatrix4(w),I.color.copy(E.color).multiplyScalar(E.intensity),I.distance=E.distance,I.decay=E.decay,E.castShadow){N=E.shadow,R=e.get(E);R.shadowBias=N.bias,R.shadowRadius=N.radius,R.shadowMapSize=N.mapSize,R.shadowCameraNear=N.camera.near,R.shadowCameraFar=N.camera.far,n.pointShadow[d]=R,n.pointShadowMap[d]=A,n.pointShadowMatrix[d]=E.shadow.matrix,b++}n.point[d]=I,d++}else if(E.isHemisphereLight){I=t.get(E);I.direction.setFromMatrixPosition(E.matrixWorld),I.direction.transformDirection(w),I.direction.normalize(),I.skyColor.copy(E.color).multiplyScalar(T),I.groundColor.copy(E.groundColor).multiplyScalar(T),n.hemi[g]=I,g++}}n.ambient[0]=c,n.ambient[1]=h,n.ambient[2]=l;var O=n.hash;O.directionalLength===p&&O.pointLength===d&&O.spotLength===v&&O.rectAreaLength===m&&O.hemiLength===g&&O.numDirectionalShadows===y&&O.numPointShadows===b&&O.numSpotShadows===_||(n.directional.length=p,n.spot.length=v,n.rectArea.length=m,n.point.length=d,n.hemi.length=g,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=_,n.spotShadowMap.length=_,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=b,n.spotShadowMatrix.length=_,O.directionalLength=p,O.pointLength=d,O.spotLength=v,O.rectAreaLength=m,O.hemiLength=g,O.numDirectionalShadows=y,O.numPointShadows=b,O.numSpotShadows=_,n.version=yc++)}return{setup:s,state:n}}function wc(){var t=new _c,e=[],n=[];function r(){e.length=0,n.length=0}function i(t){e.push(t)}function o(t){n.push(t)}function a(r){t.setup(e,n,r)}var s={lightsArray:e,shadowsArray:n,lights:t};return{init:r,state:s,setupLights:a,pushLight:i,pushShadow:o}}function xc(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener("dispose",e),t.delete(r)}function n(n,r){var i;return!1===t.has(n)?(i=new wc,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener("dispose",e)):!1===t.get(n).has(r)?(i=new wc,t.get(n).set(r,i)):i=t.get(n).get(r),i}function r(){t=new WeakMap}return{get:n,dispose:r}}function Ec(t){zr.call(this),this.type="MeshDepthMaterial",this.depthPacking=qe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Sc(t){zr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new gn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Ec.prototype=Object.create(zr.prototype),Ec.prototype.constructor=Ec,Ec.prototype.isMeshDepthMaterial=!0,Ec.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Sc.prototype=Object.create(zr.prototype),Sc.prototype.constructor=Sc,Sc.prototype.isMeshDistanceMaterial=!0,Sc.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var Tc="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",Mc="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Ac(t,e,n){var r=new Qi,i=new an,o=new an,a=new ln,u=[],p=[],v={},m={0:l,1:h,2:f},g=new Bi({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new an},radius:{value:4}},vertexShader:Mc,fragmentShader:Tc}),y=g.clone();y.defines.HORIZONAL_PASS=1;var b=new ui;b.setAttribute("position",new Gr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var _=new Mi(b,g),w=this;function x(n,r){var i=e.update(_);g.uniforms.shadow_pass.value=n.map.texture,g.uniforms.resolution.value=n.mapSize,g.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,g,_,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,y,_,null)}function E(t,e,n){var r=t<<0|e<<1|n<<2,i=u[r];return void 0===i&&(i=new Ec({depthPacking:Ye,morphTargets:t,skinning:e}),u[r]=i),i}function S(t,e,n){var r=t<<0|e<<1|n<<2,i=p[r];return void 0===i&&(i=new Sc({morphTargets:t,skinning:e}),p[r]=i),i}function T(e,n,r,i,o,a){var s=e.geometry,u=null,h=E,l=e.customDepthMaterial;if(!0===r.isPointLight&&(h=S,l=e.customDistanceMaterial),void 0===l){var f=!1;!0===n.morphTargets&&(!0===s.isBufferGeometry?f=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:!0===s.isGeometry&&(f=s.morphTargets&&s.morphTargets.length>0));var p=!1;!0===e.isSkinnedMesh&&(!0===n.skinning?p=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e));var d=!0===e.isInstancedMesh;u=h(f,p,d)}else u=l;if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var g=u.uuid,y=n.uuid,b=v[g];void 0===b&&(b={},v[g]=b);var _=b[y];void 0===_&&(_=u.clone(),b[y]=_),u=_}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=a===c?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:m[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=o),u}function M(n,i,o,a,s){if(!1!==n.visible){var u=n.layers.test(i.layers);if(u&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===c)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var h=e.update(n),l=n.material;if(Array.isArray(l))for(var f=h.groups,p=0,d=f.length;p<d;p++){var v=f[p],m=l[v.materialIndex];if(m&&m.visible){var g=T(n,m,a,o.near,o.far,s);t.renderBufferDirect(o,null,h,g,n,v)}}else if(l.visible){g=T(n,l,a,o.near,o.far,s);t.renderBufferDirect(o,null,h,g,n,null)}}for(var y=n.children,b=0,_=y.length;b<_;b++)M(y[b],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=s,this.render=function(e,s,u){if(!1!==w.enabled&&(!1!==w.autoUpdate||!1!==w.needsUpdate)&&0!==e.length){var h=t.getRenderTarget(),l=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),p=t.state;p.setBlending(d),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var v=0,m=e.length;v<m;v++){var g=e[v],y=g.shadow;if(void 0!==y){i.copy(y.mapSize);var b=y.getFrameExtents();if(i.multiply(b),o.copy(y.mapSize),(i.x>n||i.y>n)&&(console.warn("THREE.WebGLShadowMap:",g,"has shadow exceeding max texture size, reducing"),i.x>n&&(o.x=Math.floor(n/b.x),i.x=o.x*b.x,y.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/b.y),i.y=o.y*b.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&this.type===c){var _={minFilter:pt,magFilter:pt,format:Nt};y.map=new fn(i.x,i.y,_),y.map.texture.name=g.name+".shadowMap",y.mapPass=new fn(i.x,i.y,_),y.camera.updateProjectionMatrix()}if(null===y.map){_={minFilter:ht,magFilter:ht,format:Nt};y.map=new fn(i.x,i.y,_),y.map.texture.name=g.name+".shadowMap",y.camera.updateProjectionMatrix()}t.setRenderTarget(y.map),t.clear();for(var E=y.getViewportCount(),S=0;S<E;S++){var T=y.getViewport(S);a.set(o.x*T.x,o.y*T.y,o.x*T.z,o.y*T.w),p.viewport(a),y.updateMatrices(g,S),r=y.getFrustum(),M(s,u,y.camera,g,this.type)}y.isPointLightShadow||this.type!==c||x(y,u)}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}w.needsUpdate=!1,t.setRenderTarget(h,l,f)}}}function Cc(t,e,n){var r=n.isWebGL2;function s(){var e=!1,n=new ln,r=null,i=new ln(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}}function u(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?Tt(2929):Mt(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case k:t.depthFunc(512);break;case F:t.depthFunc(519);break;case U:t.depthFunc(513);break;case j:t.depthFunc(515);break;case z:t.depthFunc(514);break;case B:t.depthFunc(518);break;case V:t.depthFunc(516);break;case G:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function c(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(t){e||(t?Tt(2960):Mt(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}}var h=new s,p=new u,H=new c,W=t.getParameter(34921),q=new Uint8Array(W),Y=new Uint8Array(W),X=new Uint8Array(W),K={},$=null,Q=null,J=null,Z=null,tt=null,et=null,nt=null,rt=null,it=null,ot=!1,at=null,st=null,ut=null,ct=null,ht=null,lt=t.getParameter(35661),ft=!1,pt=0,dt=t.getParameter(7938);-1!==dt.indexOf("WebGL")?(pt=parseFloat(/^WebGL\ ([0-9])/.exec(dt)[1]),ft=pt>=1):-1!==dt.indexOf("OpenGL ES")&&(pt=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(dt)[1]),ft=pt>=2);var vt=null,mt={},gt=new ln,yt=new ln;function bt(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var _t={};function wt(){for(var t=0,e=q.length;t<e;t++)q[t]=0}function xt(t){Et(t,0)}function Et(n,i){if(q[n]=1,0===Y[n]&&(t.enableVertexAttribArray(n),Y[n]=1),X[n]!==i){var o=r?t:e.get("ANGLE_instanced_arrays");o[r?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),X[n]=i}}function St(){for(var e=0,n=Y.length;e!==n;++e)Y[e]!==q[e]&&(t.disableVertexAttribArray(e),Y[e]=0)}function Tt(e){!0!==K[e]&&(t.enable(e),K[e]=!0)}function Mt(e){!1!==K[e]&&(t.disable(e),K[e]=!1)}function At(e){return $!==e&&(t.useProgram(e),$=e,!0)}_t[3553]=bt(3553,3553,1),_t[34067]=bt(34067,34069,6),h.setClear(0,0,0,1),p.setClear(1),H.setClear(0),Tt(2929),p.setFunc(j),Pt(!1),Lt(o),Tt(2884),Rt(d);var Ct={[_]:32774,[w]:32778,[x]:32779};if(r)Ct[E]=32775,Ct[S]=32776;else{var It=e.get("EXT_blend_minmax");null!==It&&(Ct[E]=It.MIN_EXT,Ct[S]=It.MAX_EXT)}var Nt={[T]:0,[M]:1,[A]:768,[I]:770,[D]:776,[P]:774,[R]:772,[C]:769,[N]:771,[L]:775,[O]:773};function Rt(e,n,r,i,o,a,s,u){if(e!==d){if(Q||(Tt(3042),Q=!0),e===b)o=o||n,a=a||r,s=s||i,n===Z&&o===nt||(t.blendEquationSeparate(Ct[n],Ct[o]),Z=n,nt=o),r===tt&&i===et&&a===rt&&s===it||(t.blendFuncSeparate(Nt[r],Nt[i],Nt[a],Nt[s]),tt=r,et=i,rt=a,it=s),J=e,ot=null;else if(e!==J||u!==ot){if(Z===_&&nt===_||(t.blendEquation(32774),Z=_,nt=_),u)switch(e){case v:t.blendFuncSeparate(1,771,1,771);break;case m:t.blendFunc(1,1);break;case g:t.blendFuncSeparate(0,0,769,771);break;case y:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case v:t.blendFuncSeparate(770,771,1,771);break;case m:t.blendFunc(770,1);break;case g:t.blendFunc(0,769);break;case y:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}tt=null,et=null,rt=null,it=null,J=e,ot=u}}else Q&&(Mt(3042),Q=!1)}function Ot(t,e){t.side===f?Mt(2884):Tt(2884);var n=t.side===l;e&&(n=!n),Pt(n),t.blending===v&&!1===t.transparent?Rt(d):Rt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),p.setFunc(t.depthFunc),p.setTest(t.depthTest),p.setMask(t.depthWrite),h.setMask(t.colorWrite);var r=t.stencilWrite;H.setTest(r),r&&(H.setMask(t.stencilWriteMask),H.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),H.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),kt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function Pt(e){at!==e&&(e?t.frontFace(2304):t.frontFace(2305),at=e)}function Lt(e){e!==i?(Tt(2884),e!==st&&(e===o?t.cullFace(1029):e===a?t.cullFace(1028):t.cullFace(1032))):Mt(2884),st=e}function Dt(e){e!==ut&&(ft&&t.lineWidth(e),ut=e)}function kt(e,n,r){e?(Tt(32823),ct===n&&ht===r||(t.polygonOffset(n,r),ct=n,ht=r)):Mt(32823)}function Ft(t){t?Tt(3089):Mt(3089)}function Ut(e){void 0===e&&(e=33984+lt-1),vt!==e&&(t.activeTexture(e),vt=e)}function jt(e,n){null===vt&&Ut();var r=mt[vt];void 0===r&&(r={type:void 0,texture:void 0},mt[vt]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||_t[e]),r.type=e,r.texture=n)}function zt(){var e=mt[vt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function Bt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Vt(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Gt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ht(e){!1===gt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),gt.copy(e))}function Wt(e){!1===yt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),yt.copy(e))}function qt(){for(var e=0;e<Y.length;e++)1===Y[e]&&(t.disableVertexAttribArray(e),Y[e]=0);K={},vt=null,mt={},$=null,J=null,at=null,st=null,h.reset(),p.reset(),H.reset()}return{buffers:{color:h,depth:p,stencil:H},initAttributes:wt,enableAttribute:xt,enableAttributeAndDivisor:Et,disableUnusedAttributes:St,enable:Tt,disable:Mt,useProgram:At,setBlending:Rt,setMaterial:Ot,setFlipSided:Pt,setCullFace:Lt,setLineWidth:Dt,setPolygonOffset:kt,setScissorTest:Ft,activeTexture:Ut,bindTexture:jt,unbindTexture:zt,compressedTexImage2D:Bt,texImage2D:Vt,texImage3D:Gt,scissor:Ht,viewport:Wt,reset:qt}}function Ic(t,e,n,r,i,o,a){var s,u=i.isWebGL2,c=i.maxTextures,h=i.maxCubemapSize,l=i.maxTextureSize,f=i.maxSamples,p=new WeakMap,d=!1;try{d="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Z){}function v(t,e){return d?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function m(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?on.floorPowerOfTwo:Math.floor,a=o(i*t.width),u=o(i*t.height);void 0===s&&(s=v(a,u));var c=n?v(a,u):s;c.width=a,c.height=u;var h=c.getContext("2d");return h.drawImage(t,0,0,a,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+u+")."),c}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function g(t){return on.isPowerOfTwo(t.width)&&on.isPowerOfTwo(t.height)}function y(t){return!u&&(t.wrapS!==ut||t.wrapT!==ut||t.minFilter!==ht&&t.minFilter!==pt)}function b(t,e){return t.generateMipmaps&&e&&t.minFilter!==ht&&t.minFilter!==pt}function _(e,n,i,o){t.generateMipmap(e);var a=r.get(n);a.__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function w(n,r,i){if(!1===u)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function x(t){return t===ht||t===lt||t===ft?9728:9729}function E(t){var e=t.target;e.removeEventListener("dispose",E),T(e),e.isVideoTexture&&p.delete(e),a.memory.textures--}function S(t){var e=t.target;e.removeEventListener("dispose",S),M(e),a.memory.textures--}function T(e){var n=r.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),r.remove(e))}function M(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(e.texture),r.remove(e)}}var A=0;function C(){A=0}function I(){var t=A;return t>=c&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+c),A+=1,t}function N(t,e){var i=r.get(t);if(t.isVideoTexture&&X(t),t.version>0&&i.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void j(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function R(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?j(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))}function O(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?j(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))}function P(e,i){if(6===e.image.length){var a=r.get(e);if(e.version>0&&a.__version!==e.version){U(a,e),n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture),t.pixelStorei(37440,e.flipY);for(var s=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture),c=e.image[0]&&e.image[0].isDataTexture,l=[],f=0;f<6;f++)l[f]=s||c?c?e.image[f].image:e.image[f]:m(e.image[f],!1,!0,h);var p,d=l[0],v=g(d)||u,y=o.convert(e.format),x=o.convert(e.type),E=w(e.internalFormat,y,x);if(F(34067,e,v),s){for(f=0;f<6;f++){p=l[f].mipmaps;for(var S=0;S<p.length;S++){var T=p[S];e.format!==Nt&&e.format!==It?null!==y?n.compressedTexImage2D(34069+f,S,E,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+f,S,E,T.width,T.height,0,y,x,T.data)}}a.__maxMipLevel=p.length-1}else{p=e.mipmaps;for(f=0;f<6;f++)if(c){n.texImage2D(34069+f,0,E,l[f].width,l[f].height,0,y,x,l[f].data);for(S=0;S<p.length;S++){T=p[S];var M=T.image[f].image;n.texImage2D(34069+f,S+1,E,M.width,M.height,0,y,x,M.data)}}else{n.texImage2D(34069+f,0,E,y,x,l[f]);for(S=0;S<p.length;S++){T=p[S];n.texImage2D(34069+f,S+1,E,y,x,T.image[f])}}a.__maxMipLevel=p.length}b(e,v)&&_(34067,e,d.width,d.height),a.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture)}}function L(t,e){n.activeTexture(33984+e),n.bindTexture(34067,r.get(t).__webglTexture)}var D={[st]:10497,[ut]:33071,[ct]:33648},k={[ht]:9728,[lt]:9984,[ft]:9986,[pt]:9729,[dt]:9985,[vt]:9987};function F(n,o,a){a?(t.texParameteri(n,10242,D[o.wrapS]),t.texParameteri(n,10243,D[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,D[o.wrapR]),t.texParameteri(n,10240,k[o.magFilter]),t.texParameteri(n,10241,k[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===ut&&o.wrapT===ut||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,x(o.magFilter)),t.texParameteri(n,10241,x(o.minFilter)),o.minFilter!==ht&&o.minFilter!==pt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=e.get("EXT_texture_filter_anisotropic");if(s){if(o.type===xt&&null===e.get("OES_texture_float_linear"))return;if(o.type===Et&&null===(u||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function U(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",E),e.__webglTexture=t.createTexture(),a.memory.textures++)}function j(e,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),U(e,r),n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);var s=y(r)&&!1===g(r.image),c=m(r.image,s,!1,l),h=g(c)||u,f=o.convert(r.format),p=o.convert(r.type),d=w(r.internalFormat,f,p);F(a,r,h);var v,x=r.mipmaps;if(r.isDepthTexture)d=6402,u?d=r.type===xt?36012:r.type===wt?33190:r.type===At?35056:33189:r.type===xt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Lt&&6402===d&&r.type!==bt&&r.type!==wt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=bt,p=o.convert(r.type)),r.format===Dt&&6402===d&&(d=34041,r.type!==At&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=At,p=o.convert(r.type))),n.texImage2D(3553,0,d,c.width,c.height,0,f,p,null);else if(r.isDataTexture)if(x.length>0&&h){for(var E=0,S=x.length;E<S;E++)v=x[E],n.texImage2D(3553,E,d,v.width,v.height,0,f,p,v.data);r.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,d,c.width,c.height,0,f,p,c.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(E=0,S=x.length;E<S;E++)v=x[E],r.format!==Nt&&r.format!==It?null!==f?n.compressedTexImage2D(3553,E,d,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,E,d,v.width,v.height,0,f,p,v.data);e.__maxMipLevel=x.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,d,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,d,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(x.length>0&&h){for(E=0,S=x.length;E<S;E++)v=x[E],n.texImage2D(3553,E,d,f,p,v);r.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,d,f,p,c),e.__maxMipLevel=0;b(r,h)&&_(a,r,c.width,c.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function z(e,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type),h=w(i.texture.internalFormat,u,c);n.texImage2D(s,0,h,i.width,i.height,0,u,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function B(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var a=n.depthTexture;a&&a.isDepthTexture&&(a.type===xt?i=36012:a.type===wt&&(i=33190));var s=Y(n);t.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){s=Y(n);t.renderbufferStorageMultisample(36161,s,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var u=o.convert(n.texture.format),c=o.convert(n.texture.type);i=w(n.texture.internalFormat,u,c);if(r){s=Y(n);t.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height)}t.bindRenderbuffer(36161,null)}function V(e,n){var i=n&&n.isWebGLCubeRenderTarget;if(i)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),N(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Lt)t.framebufferTexture2D(36160,36096,3553,o,0);else{if(n.depthTexture.format!==Dt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,o,0)}}function G(e){var n=r.get(e),i=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");V(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),B(n.__webglDepthbuffer[o],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),B(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function H(e){var i=r.get(e),s=r.get(e.texture);e.addEventListener("dispose",S),s.__webglTexture=t.createTexture(),a.memory.textures++;var c=!0===e.isWebGLCubeRenderTarget,h=!0===e.isWebGLMultisampleRenderTarget,l=g(e)||u;if(!u||e.texture.format!==It||e.texture.type!==xt&&e.texture.type!==Et||(e.texture.format=Nt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){i.__webglFramebuffer=[];for(var f=0;f<6;f++)i.__webglFramebuffer[f]=t.createFramebuffer()}else if(i.__webglFramebuffer=t.createFramebuffer(),h)if(u){i.__webglMultisampledFramebuffer=t.createFramebuffer(),i.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,i.__webglColorRenderbuffer);var p=o.convert(e.texture.format),d=o.convert(e.texture.type),v=w(e.texture.internalFormat,p,d),m=Y(e);t.renderbufferStorageMultisample(36161,m,v,e.width,e.height),t.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(i.__webglDepthRenderbuffer=t.createRenderbuffer(),B(i.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,s.__webglTexture),F(34067,e.texture,l);for(f=0;f<6;f++)z(i.__webglFramebuffer[f],e,36064,34069+f);b(e.texture,l)&&_(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),F(3553,e.texture,l),z(i.__webglFramebuffer,e,36064,3553),b(e.texture,l)&&_(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&G(e)}function W(t){var e=t.texture,i=g(t)||u;if(b(e,i)){var o=t.isWebGLCubeRenderTarget?34067:3553,a=r.get(e).__webglTexture;n.bindTexture(o,a),_(o,e,t.width,t.height),n.bindTexture(o,null)}}function q(e){if(e.isWebGLMultisampleRenderTarget)if(u){var n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var i=e.width,o=e.height,a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Y(t){return u&&t.isWebGLMultisampleRenderTarget?Math.min(f,t.samples):0}function X(t){var e=a.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}var K=!1,$=!1;function Q(t,e){t&&t.isWebGLRenderTarget&&(!1===K&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),K=!0),t=t.texture),N(t,e)}function J(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===$&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),$=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?P(t,e):L(t,e)}this.allocateTextureUnit=I,this.resetTextureUnits=C,this.setTexture2D=N,this.setTexture2DArray=R,this.setTexture3D=O,this.setTextureCube=P,this.setTextureCubeDynamic=L,this.setupRenderTarget=H,this.updateRenderTargetMipmap=W,this.updateMultisampleRenderTarget=q,this.safeSetTexture2D=Q,this.safeSetTextureCube=J}function Nc(t,e,n){var r=n.isWebGL2;function i(t){var n;if(t===mt)return 5121;if(t===St)return 32819;if(t===Tt)return 32820;if(t===Mt)return 33635;if(t===gt)return 5120;if(t===yt)return 5122;if(t===bt)return 5123;if(t===_t)return 5124;if(t===wt)return 5125;if(t===xt)return 5126;if(t===Et)return r?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===Ct)return 6406;if(t===It)return 6407;if(t===Nt)return 6408;if(t===Rt)return 6409;if(t===Ot)return 6410;if(t===Lt)return 6402;if(t===Dt)return 34041;if(t===kt)return 6403;if(t===Ft)return 36244;if(t===Ut)return 33319;if(t===jt)return 33320;if(t===zt)return 36248;if(t===Bt)return 36249;if(t===Vt||t===Gt||t===Ht||t===Wt){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===Vt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Gt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Ht)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Wt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===qt||t===Yt||t===Xt||t===Kt){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===qt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Yt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Xt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Kt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===$t)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===Qt||t===Jt)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(t===Qt)return n.COMPRESSED_RGB8_ETC2;if(t===Jt)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===Zt||t===te||t===ee||t===ne||t===re||t===ie||t===oe||t===ae||t===se||t===ue||t===ce||t===he||t===le||t===fe||t===de||t===ve||t===me||t===ge||t===ye||t===be||t===_e||t===we||t===xe||t===Ee||t===Se||t===Te||t===Me||t===Ae?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===pe?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):t===At?r?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}return{convert:i}}function Rc(t){Gi.call(this),this.cameras=t||[]}function Oc(){Gn.call(this),this.type="Group"}function Pc(t,e){var n=this,r=null,i=1,o=null,a="local-floor",s=null,u=[],c=new Map,h=new Gi;h.layers.enable(1),h.viewport=new ln;var l=new Gi;l.layers.enable(2),l.viewport=new ln;var f=new Rc([h,l]);f.layers.enable(1),f.layers.enable(2);var p=null,d=null;function v(t){var e=c.get(t.inputSource);e&&(e.targetRay&&e.targetRay.dispatchEvent({type:t.type}),e.grip&&e.grip.dispatchEvent({type:t.type}))}function m(){c.forEach((function(t,e){t.targetRay&&(t.targetRay.dispatchEvent({type:"disconnected",data:e}),t.targetRay.visible=!1),t.grip&&(t.grip.dispatchEvent({type:"disconnected",data:e}),t.grip.visible=!1)})),c.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),T.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function g(t){o=t,T.setContext(r),T.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function y(t){for(var e=r.inputSources,n=0;n<u.length;n++)c.set(e[n],u[n]);for(n=0;n<t.removed.length;n++){var i=t.removed[n],o=c.get(i);o&&(o.targetRay&&o.targetRay.dispatchEvent({type:"disconnected",data:i}),o.grip&&o.grip.dispatchEvent({type:"disconnected",data:i}),c.delete(i))}for(n=0;n<t.added.length;n++){i=t.added[n],o=c.get(i);o&&(o.targetRay&&o.targetRay.dispatchEvent({type:"connected",data:i}),o.grip&&o.grip.dispatchEvent({type:"connected",data:i}))}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){var e=u[t];return void 0===e&&(e={},u[t]=e),void 0===e.targetRay&&(e.targetRay=new Oc,e.targetRay.matrixAutoUpdate=!1,e.targetRay.visible=!1),e.targetRay},this.getControllerGrip=function(t){var e=u[t];return void 0===e&&(e={},u[t]=e),void 0===e.grip&&(e.grip=new Oc,e.grip.matrixAutoUpdate=!1,e.grip.visible=!1),e.grip},this.setFramebufferScaleFactor=function(t){i=t,1==n.isPresenting&&console.warn("WebXRManager: Cannot change framebuffer scale while presenting VR content")},this.setReferenceSpaceType=function(t){a=t},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=function(t){if(r=t,null!==r){r.addEventListener("select",v),r.addEventListener("selectstart",v),r.addEventListener("selectend",v),r.addEventListener("squeeze",v),r.addEventListener("squeezestart",v),r.addEventListener("squeezeend",v),r.addEventListener("end",m);var n=e.getContextAttributes(),o={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:i},s=new XRWebGLLayer(r,e,o);r.updateRenderState({baseLayer:s}),r.requestReferenceSpace(a).then(g),r.addEventListener("inputsourceschange",y)}};var b=new gn,_=new gn;function w(t,e,n){b.setFromMatrixPosition(e.matrixWorld),_.setFromMatrixPosition(n.matrixWorld);var r=b.distanceTo(_),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],h=(i[8]-1)/i[0],l=(o[8]+1)/o[0],f=a*h,p=a*l,d=r/(-h+l),v=d*-h;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(v),t.translateZ(d),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var m=a+d,g=s+d,y=f-v,w=p+(r-v),x=u*s/g*m,E=c*s/g*m;t.projectionMatrix.makePerspective(y,w,x,E,m,g)}function x(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.getCamera=function(t){f.near=l.near=h.near=t.near,f.far=l.far=h.far=t.far,p===f.near&&d===f.far||(r.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,d=f.far);var e=t.parent,n=f.cameras;x(f,e);for(var i=0;i<n.length;i++)x(n[i],e);t.matrixWorld.copy(f.matrixWorld);for(var o=t.children,a=(i=0,o.length);i<a;i++)o[i].updateMatrixWorld(!0);return w(f,h,l),f};var E=null;function S(e,n){if(s=n.getViewerPose(o),null!==s){var i=s.views,a=r.renderState.baseLayer;t.setFramebuffer(a.framebuffer);for(var c=0;c<i.length;c++){var h=i[c],l=a.getViewport(h),p=f.cameras[c];p.matrix.fromArray(h.transform.matrix),p.projectionMatrix.fromArray(h.projectionMatrix),p.viewport.set(l.x,l.y,l.width,l.height),0===c&&f.matrix.copy(p.matrix)}}var d=r.inputSources;for(c=0;c<u.length;c++){var v=u[c],m=d[c],g=null,y=null;m&&(v.targetRay&&(g=n.getPose(m.targetRaySpace,o),null!==g&&(v.targetRay.matrix.fromArray(g.transform.matrix),v.targetRay.matrix.decompose(v.targetRay.position,v.targetRay.rotation,v.targetRay.scale))),v.grip&&m.gripSpace&&(y=n.getPose(m.gripSpace,o),null!==y&&(v.grip.matrix.fromArray(y.transform.matrix),v.grip.matrix.decompose(v.grip.position,v.grip.rotation,v.grip.scale)))),v.targetRay&&(v.targetRay.visible=null!==g),v.grip&&(v.grip.visible=null!==y)}E&&E(e,n)}var T=new Zi;T.setAnimationLoop(S),this.setAnimationLoop=function(t){E=t},this.dispose=function(){}}function Lc(t){t=t||{};var e=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",h=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,f=null,p=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ue,this.physicallyCorrectLights=!1,this.toneMapping=X,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,v,m,g,y,b,_,w,x,E,S,T,M,A,C,I,N,R,O=this,P=!1,L=null,D=0,k=0,F=null,U=null,j=-1,z={geometry:null,program:null,wireframe:!1},B=null,V=null,G=new ln,H=new ln,W=null,q=e.width,Y=e.height,K=1,$=null,Q=null,J=new ln(0,0,q,Y),Z=new ln(0,0,q,Y),tt=!1,et=new Qi,nt=new Cs,rt=!1,it=!1,ot=new Tn,at=new gn;function st(){return null===F?K:1}try{var ut={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h,xrCompatible:!0};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",pt,!1),d=n||e.getContext("webgl",ut)||e.getContext("experimental-webgl",ut),null===d)throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Kt){throw console.error("THREE.WebGLRenderer: "+Kt.message),Kt}function ct(){v=new Is(d),m=new As(d,v,t),!1===m.isWebGL2&&(v.get("WEBGL_depth_texture"),v.get("OES_texture_float"),v.get("OES_texture_half_float"),v.get("OES_texture_half_float_linear"),v.get("OES_standard_derivatives"),v.get("OES_element_index_uint"),v.get("ANGLE_instanced_arrays")),v.get("OES_texture_float_linear"),R=new Nc(d,v,m),g=new Cc(d,v,m),g.scissor(H.copy(Z).multiplyScalar(K).floor()),g.viewport(G.copy(J).multiplyScalar(K).floor()),y=new Os(d),b=new lc,_=new Ic(d,v,g,b,m,R,y),w=new to(d,m),x=new Ns(d,w,y),E=new Ds(d,x,w,y),C=new Ls(d),S=new hc(O,v,m),T=new vc,M=new xc,A=new Ts(O,g,E,s),I=new Ms(d,v,y,m),N=new Rs(d,v,y,m),y.programs=S.programs,O.capabilities=m,O.extensions=v,O.properties=b,O.renderLists=T,O.state=g,O.info=y}ct();var ht=new Pc(O,d);this.xr=ht;var lt=new Ac(O,E,m.maxTextureSize);function ft(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1,ct()}function dt(t){var e=t.target;e.removeEventListener("dispose",dt),vt(e)}function vt(t){gt(t),b.remove(t)}function gt(t){var e=b.get(t).program;t.program=void 0,void 0!==e&&S.releaseProgram(e)}function yt(t,e){t.render((function(t){O.renderBufferImmediate(t,e)}))}this.shadowMap=lt,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var t=v.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=v.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(t){void 0!==t&&(K=t,this.setSize(q,Y,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new an),t.set(q,Y)},this.setSize=function(t,n,r){ht.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=t,Y=n,e.width=Math.floor(t*K),e.height=Math.floor(n*K),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new an),t.set(q*K,Y*K).floor()},this.setDrawingBufferSize=function(t,n,r){q=t,Y=n,K=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new ln),t.copy(G)},this.getViewport=function(t){return t.copy(J)},this.setViewport=function(t,e,n,r){t.isVector4?J.set(t.x,t.y,t.z,t.w):J.set(t,e,n,r),g.viewport(G.copy(J).multiplyScalar(K).floor())},this.getScissor=function(t){return t.copy(Z)},this.setScissor=function(t,e,n,r){t.isVector4?Z.set(t.x,t.y,t.z,t.w):Z.set(t,e,n,r),g.scissor(H.copy(Z).multiplyScalar(K).floor())},this.getScissorTest=function(){return tt},this.setScissorTest=function(t){g.setScissorTest(tt=t)},this.setOpaqueSort=function(t){$=t},this.setTransparentSort=function(t){Q=t},this.getClearColor=function(){return A.getClearColor()},this.setClearColor=function(){A.setClearColor.apply(A,arguments)},this.getClearAlpha=function(){return A.getClearAlpha()},this.setClearAlpha=function(){A.setClearAlpha.apply(A,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),d.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",pt,!1),T.dispose(),M.dispose(),b.dispose(),E.dispose(),ht.dispose(),Tt.stop(),this.forceContextLoss()},this.renderBufferImmediate=function(t,e){g.initAttributes();var n=b.get(t);t.hasPositions&&!n.position&&(n.position=d.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=d.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=d.createBuffer()),t.hasColors&&!n.color&&(n.color=d.createBuffer());var r=e.getAttributes();t.hasPositions&&(d.bindBuffer(34962,n.position),d.bufferData(34962,t.positionArray,35048),g.enableAttribute(r.position),d.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(d.bindBuffer(34962,n.normal),d.bufferData(34962,t.normalArray,35048),g.enableAttribute(r.normal),d.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(d.bindBuffer(34962,n.uv),d.bufferData(34962,t.uvArray,35048),g.enableAttribute(r.uv),d.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(d.bindBuffer(34962,n.color),d.bufferData(34962,t.colorArray,35048),g.enableAttribute(r.color),d.vertexAttribPointer(r.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),d.drawArrays(4,0,t.count),t.count=0};var bt=new Hn;function _t(t,e,n,r){if(!1!==m.isWebGL2||!t.isInstancedMesh&&!e.isInstancedBufferGeometry||null!==v.get("ANGLE_instanced_arrays")){g.initAttributes();var i=e.attributes,o=r.getAttributes(),a=n.defaultAttributeValues;for(var s in o){var u=o[s];if(u>=0){var c=i[s];if(void 0!==c){var h=c.normalized,l=c.itemSize,f=w.get(c);if(void 0===f)continue;var p=f.buffer,y=f.type,b=f.bytesPerElement;if(c.isInterleavedBufferAttribute){var _=c.data,x=_.stride,E=c.offset;_&&_.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(u,_.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=_.meshPerAttribute*_.count)):g.enableAttribute(u),d.bindBuffer(34962,p),d.vertexAttribPointer(u,l,y,h,x*b,E*b)}else c.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(u,c.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=c.meshPerAttribute*c.count)):g.enableAttribute(u),d.bindBuffer(34962,p),d.vertexAttribPointer(u,l,y,h,0,0)}else if("instanceMatrix"===s){f=w.get(t.instanceMatrix);if(void 0===f)continue;p=f.buffer,y=f.type;g.enableAttributeAndDivisor(u+0,1),g.enableAttributeAndDivisor(u+1,1),g.enableAttributeAndDivisor(u+2,1),g.enableAttributeAndDivisor(u+3,1),d.bindBuffer(34962,p),d.vertexAttribPointer(u+0,4,y,!1,64,0),d.vertexAttribPointer(u+1,4,y,!1,64,16),d.vertexAttribPointer(u+2,4,y,!1,64,32),d.vertexAttribPointer(u+3,4,y,!1,64,48)}else if(void 0!==a){var S=a[s];if(void 0!==S)switch(S.length){case 2:d.vertexAttrib2fv(u,S);break;case 3:d.vertexAttrib3fv(u,S);break;case 4:d.vertexAttrib4fv(u,S);break;default:d.vertexAttrib1fv(u,S)}}}}g.disableUnusedAttributes()}}this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=bt);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Rt(t,e,r,i);g.setMaterial(r,a);var u=!1;z.geometry===n.id&&z.program===s.id&&z.wireframe===(!0===r.wireframe)||(z.geometry=n.id,z.program=s.id,z.wireframe=!0===r.wireframe,u=!0),(r.morphTargets||r.morphNormals)&&(C.update(i,n,r,s),u=!0);var c=n.index,h=n.attributes.position;if(null===c){if(void 0===h||0===h.count)return}else if(0===c.count)return;var l,f=1;!0===r.wireframe&&(c=x.getWireframeAttribute(n),f=2);var p=I;null!==c&&(l=w.get(c),p=N,p.setIndex(l)),u&&(_t(i,n,r,s),null!==c&&d.bindBuffer(34963,l.buffer));var v=null!==c?c.count:h.count,m=n.drawRange.start*f,y=n.drawRange.count*f,b=null!==o?o.start*f:0,_=null!==o?o.count*f:1/0,E=Math.max(m,b),S=Math.min(v,m+y,b+_)-1,T=Math.max(0,S-E+1);if(0!==T){if(i.isMesh)!0===r.wireframe?(g.setLineWidth(r.wireframeLinewidth*st()),p.setMode(1)):p.setMode(4);else if(i.isLine){var M=r.linewidth;void 0===M&&(M=1),g.setLineWidth(M*st()),i.isLineSegments?p.setMode(1):i.isLineLoop?p.setMode(2):p.setMode(3)}else i.isPoints?p.setMode(0):i.isSprite&&p.setMode(4);i.isInstancedMesh?p.renderInstances(n,E,T,i.count):n.isInstancedBufferGeometry?p.renderInstances(n,E,T,n.maxInstancedCount):p.render(E,T)}},this.compile=function(t,e){p=M.get(t,e),p.init(),t.traverse((function(t){t.isLight&&(p.pushLight(t),t.castShadow&&p.pushShadow(t))})),p.setupLights(e);var n={};t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var r=0;r<e.material.length;r++)e.material[r].uuid in n===!1&&(It(e.material[r],t,e),n[e.material[r].uuid]=!0);else e.material.uuid in n===!1&&(It(e.material,t,e),n[e.material.uuid]=!0)}))};var wt=null;function St(t){ht.isPresenting||wt&&wt(t)}var Tt=new Zi;function Mt(t,e,n,r){if(!1!==t.visible){var i=t.layers.test(e.layers);if(i)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)p.pushLight(t),t.castShadow&&p.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||et.intersectsSprite(t)){r&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot);var o=E.update(t),a=t.material;a.visible&&f.push(t,o,a,n,at.z,null)}}else if(t.isImmediateRenderObject)r&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot),f.push(t,null,t.material,n,at.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==y.render.frame&&(t.skeleton.update(),t.skeleton.frame=y.render.frame),!t.frustumCulled||et.intersectsObject(t))){r&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot);o=E.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,u=0,c=s.length;u<c;u++){var h=s[u],l=a[h.materialIndex];l&&l.visible&&f.push(t,o,l,n,at.z,h)}else a.visible&&f.push(t,o,a,n,at.z,null)}var d=t.children;for(u=0,c=d.length;u<c;u++)Mt(d[u],e,n,r)}}function At(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,h=a.group;if(n.isArrayCamera){V=n;for(var l=n.cameras,f=0,d=l.length;f<d;f++){var v=l[f];s.layers.test(v.layers)&&(g.viewport(G.copy(v.viewport)),p.setupLights(v),Ct(s,e,v,u,c,h))}}else V=null,Ct(s,e,n,u,c,h)}}function Ct(t,e,n,r,i,o){if(t.onBeforeRender(O,e,n,r,i,o),p=M.get(e,V||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=Rt(n,e,i,t);g.setMaterial(i),z.geometry=null,z.program=null,z.wireframe=!1,yt(t,a)}else O.renderBufferDirect(n,e,r,i,t,o);t.onAfterRender(O,e,n,r,i,o),p=M.get(e,V||n)}function It(t,e,n){var r=b.get(t),i=p.state.lights,o=p.state.shadowsArray,a=i.state.version,s=S.getParameters(t,i.state,o,e,nt.numPlanes,nt.numIntersection,n),u=S.getProgramCacheKey(s),c=r.program,h=!0;if(void 0===c)t.addEventListener("dispose",dt);else if(c.cacheKey!==u)gt(t);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,h=!1;else{if(void 0!==s.shaderID)return;h=!1}h&&(c=S.acquireProgram(s,u),r.program=c,r.uniforms=s.uniforms,r.environment=t.isMeshStandardMaterial?e.environment:null,r.outputEncoding=O.outputEncoding,t.program=c);var l=c.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<O.maxMorphTargets;f++)l["morphTarget"+f]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(f=0;f<O.maxMorphNormals;f++)l["morphNormal"+f]>=0&&t.numSupportedMorphNormals++}var d=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=nt.numPlanes,r.numIntersection=nt.numIntersection,d.clippingPlanes=nt.uniform),r.fog=e.fog,r.needsLights=Xt(t),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),m=Du.seqWithValue(v.seq,d);r.uniformsList=m}function Rt(t,e,n,r){_.resetTextureUnits();var i=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=b.get(n),s=p.state.lights;if(rt&&(it||t!==B)){var u=t===B&&n.id===j;nt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,a,u)}n.version===a.__version?void 0===a.program||n.fog&&a.fog!==i||a.environment!==o||a.needsLights&&a.lightsStateVersion!==s.state.version?It(n,e,r):void 0===a.numClippingPlanes||a.numClippingPlanes===nt.numPlanes&&a.numIntersection===nt.numIntersection?a.outputEncoding!==O.outputEncoding&&It(n,e,r):It(n,e,r):(It(n,e,r),a.__version=n.version);var c=!1,h=!1,l=!1,f=a.program,v=f.getUniforms(),y=a.uniforms;if(g.useProgram(f.program)&&(c=!0,h=!0,l=!0),n.id!==j&&(j=n.id,h=!0),c||B!==t){if(v.setValue(d,"projectionMatrix",t.projectionMatrix),m.logarithmicDepthBuffer&&v.setValue(d,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),B!==t&&(B=t,h=!0,l=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var w=v.map.cameraPosition;void 0!==w&&w.setValue(d,at.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&v.setValue(d,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&v.setValue(d,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){v.setOptional(d,r,"bindMatrix"),v.setOptional(d,r,"bindMatrixInverse");var x=r.skeleton;if(x){var E=x.bones;if(m.floatVertexTextures){if(void 0===x.boneTexture){var S=Math.sqrt(4*E.length);S=on.ceilPowerOfTwo(S),S=Math.max(S,4);var T=new Float32Array(S*S*4);T.set(x.boneMatrices);var M=new Xi(T,S,S,Nt,xt);x.boneMatrices=T,x.boneTexture=M,x.boneTextureSize=S}v.setValue(d,"boneTexture",x.boneTexture,_),v.setValue(d,"boneTextureSize",x.boneTextureSize)}else v.setOptional(d,x,"boneMatrices")}}return(h||a.receiveShadow!==r.receiveShadow)&&(a.receiveShadow=r.receiveShadow,v.setValue(d,"receiveShadow",r.receiveShadow)),h&&(v.setValue(d,"toneMappingExposure",O.toneMappingExposure),v.setValue(d,"toneMappingWhitePoint",O.toneMappingWhitePoint),a.needsLights&&Yt(y,l),i&&n.fog&&Ft(y,i),n.isMeshBasicMaterial?Ot(y,n):n.isMeshLambertMaterial?(Ot(y,n),Ut(y,n)):n.isMeshToonMaterial?(Ot(y,n),zt(y,n)):n.isMeshPhongMaterial?(Ot(y,n),jt(y,n)):n.isMeshStandardMaterial?(Ot(y,n,o),n.isMeshPhysicalMaterial?Vt(y,n,o):Bt(y,n,o)):n.isMeshMatcapMaterial?(Ot(y,n),Gt(y,n)):n.isMeshDepthMaterial?(Ot(y,n),Ht(y,n)):n.isMeshDistanceMaterial?(Ot(y,n),Wt(y,n)):n.isMeshNormalMaterial?(Ot(y,n),qt(y,n)):n.isLineBasicMaterial?(Pt(y,n),n.isLineDashedMaterial&&Lt(y,n)):n.isPointsMaterial?Dt(y,n):n.isSpriteMaterial?kt(y,n):n.isShadowMaterial&&(y.color.value.copy(n.color),y.opacity.value=n.opacity),void 0!==y.ltc_1&&(y.ltc_1.value=Ji.LTC_1),void 0!==y.ltc_2&&(y.ltc_2.value=Ji.LTC_2),Du.upload(d,a.uniformsList,y,_),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Du.upload(d,a.uniformsList,y,_),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&v.setValue(d,"center",r.center),v.setValue(d,"modelViewMatrix",r.modelViewMatrix),v.setValue(d,"normalMatrix",r.normalMatrix),v.setValue(d,"modelMatrix",r.matrixWorld),f}function Ot(t,e,n){t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap);var r,i,o=e.envMap||n;o&&(t.envMap.value=o,t.flipEnvMap.value=o.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=b.get(o).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?r=e.map:e.specularMap?r=e.specularMap:e.displacementMap?r=e.displacementMap:e.normalMap?r=e.normalMap:e.bumpMap?r=e.bumpMap:e.roughnessMap?r=e.roughnessMap:e.metalnessMap?r=e.metalnessMap:e.alphaMap?r=e.alphaMap:e.emissiveMap&&(r=e.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),e.aoMap?i=e.aoMap:e.lightMap&&(i=e.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function Pt(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function Lt(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function Dt(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*K,t.scale.value=.5*Y,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function kt(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function Ft(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function Ut(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function jt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===l&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===l&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function zt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===l&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===l&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Bt(t,e,n){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===l&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===l&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),(e.envMap||n)&&(t.envMapIntensity.value=e.envMapIntensity)}function Vt(t,e,n){Bt(t,e,n),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===l&&t.clearcoatNormalScale.value.negate()),t.transparency.value=e.transparency}function Gt(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===l&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===l&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Ht(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Wt(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function qt(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===l&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===l&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Yt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function Xt(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}Tt.setAnimationLoop(St),"undefined"!==typeof window&&Tt.setContext(window),this.setAnimationLoop=function(t){wt=t,ht.setAnimationLoop(t),Tt.start()},this.render=function(t,e){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),e&&e.isCamera){if(!P){z.geometry=null,z.program=null,z.wireframe=!1,j=-1,B=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ht.enabled&&ht.isPresenting&&(e=ht.getCamera(e)),p=M.get(t,e),p.init(),t.onBeforeRender(O,t,e,n||F),ot.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),et.setFromProjectionMatrix(ot),it=this.localClippingEnabled,rt=nt.init(this.clippingPlanes,it,e),f=T.get(t,e),f.init(),Mt(t,e,0,O.sortObjects),f.finish(),!0===O.sortObjects&&f.sort($,Q),rt&&nt.beginShadows();var i=p.state.shadowsArray;lt.render(i,t,e),p.setupLights(e),rt&&nt.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),A.render(f,t,e,r);var o=f.opaque,a=f.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&At(o,t,e,s),a.length&&At(a,t,e,s)}else o.length&&At(o,t,e),a.length&&At(a,t,e);t.onAfterRender(O,t,e),null!==F&&(_.updateRenderTargetMipmap(F),_.updateMultisampleRenderTarget(F)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),f=null,p=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){L!==t&&null===F&&d.bindFramebuffer(36160,t),L=t},this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return F},this.setRenderTarget=function(t,e,n){F=t,D=e,k=n,t&&void 0===b.get(t).__webglFramebuffer&&_.setupRenderTarget(t);var r=L,i=!1;if(t){var o=b.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=o[e||0],i=!0):r=t.isWebGLMultisampleRenderTarget?b.get(t).__webglMultisampledFramebuffer:o,G.copy(t.viewport),H.copy(t.scissor),W=t.scissorTest}else G.copy(J).multiplyScalar(K).floor(),H.copy(Z).multiplyScalar(K).floor(),W=tt;if(U!==r&&(d.bindFramebuffer(36160,r),U=r),g.viewport(G),g.scissor(H),g.setScissorTest(W),i){var a=b.get(t.texture);d.framebufferTexture2D(36160,36064,34069+(e||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(t&&t.isWebGLRenderTarget){var s=b.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){var u=!1;s!==U&&(d.bindFramebuffer(36160,s),u=!0);try{var c=t.texture,h=c.format,l=c.type;if(h!==Nt&&R.convert(h)!==d.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(l!==mt&&R.convert(l)!==d.getParameter(35738)&&(l!==xt||!(m.isWebGL2||v.get("OES_texture_float")||v.get("WEBGL_color_buffer_float")))&&(l!==Et||!(m.isWebGL2?v.get("EXT_color_buffer_float"):v.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===d.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&d.readPixels(e,n,r,i,R.convert(h),R.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&d.bindFramebuffer(36160,U)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=R.convert(e.format);_.setTexture2D(e,0),d.copyTexImage2D(3553,n,a,t.x,t.y,i,o,0),g.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=R.convert(n.format),s=R.convert(n.type);_.setTexture2D(n,0),e.isDataTexture?d.texSubImage2D(3553,r||0,t.x,t.y,i,o,a,s,e.image.data):d.texSubImage2D(3553,r||0,t.x,t.y,a,s,e.image),g.unbindTexture()},this.initTexture=function(t){_.setTexture2D(t,0),g.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Dc(t,e){this.name="",this.color=new Lr(t),this.density=void 0!==e?e:25e-5}function kc(t,e,n){this.name="",this.color=new Lr(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Fc(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Je,this.updateRange={offset:0,count:-1},this.version=0}Rc.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Rc,isArrayCamera:!0}),Oc.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Oc,isGroup:!0}),Object.assign(Pc.prototype,tn.prototype),Object.assign(Dc.prototype,{isFogExp2:!0,clone:function(){return new Dc(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(kc.prototype,{isFog:!0,clone:function(){return new kc(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Fc.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Fc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});var Uc,jc=new gn;function zc(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Bc(t){zr.call(this),this.type="SpriteMaterial",this.color=new Lr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.defineProperties(zc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(zc.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)jc.x=this.getX(e),jc.y=this.getY(e),jc.z=this.getZ(e),jc.applyMatrix4(t),this.setXYZ(e,jc.x,jc.y,jc.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),Bc.prototype=Object.create(zr.prototype),Bc.prototype.constructor=Bc,Bc.prototype.isSpriteMaterial=!0,Bc.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var Vc=new gn,Gc=new gn,Hc=new gn,Wc=new an,qc=new an,Yc=new Tn,Xc=new gn,Kc=new gn,$c=new gn,Qc=new an,Jc=new an,Zc=new an;function th(t){if(Gn.call(this),this.type="Sprite",void 0===Uc){Uc=new ui;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Fc(e,5);Uc.setIndex([0,1,2,0,2,3]),Uc.setAttribute("position",new zc(n,3,0,!1)),Uc.setAttribute("uv",new zc(n,2,3,!1))}this.geometry=Uc,this.material=void 0!==t?t:new Bc,this.center=new an(.5,.5)}function eh(t,e,n,r,i,o){Wc.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(qc.x=o*Wc.x-i*Wc.y,qc.y=i*Wc.x+o*Wc.y):qc.copy(Wc),t.copy(e),t.x+=qc.x,t.y+=qc.y,t.applyMatrix4(Yc)}th.prototype=Object.assign(Object.create(Gn.prototype),{constructor:th,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gc.setFromMatrixScale(this.matrixWorld),Yc.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Hc.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Gc.multiplyScalar(-Hc.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;eh(Xc.set(-.5,-.5,0),Hc,o,Gc,n,r),eh(Kc.set(.5,-.5,0),Hc,o,Gc,n,r),eh($c.set(.5,.5,0),Hc,o,Gc,n,r),Qc.set(0,0),Jc.set(1,0),Zc.set(1,1);var a=t.ray.intersectTriangle(Xc,Kc,$c,!1,Vc);if(null!==a||(eh(Kc.set(-.5,.5,0),Hc,o,Gc,n,r),Jc.set(0,1),a=t.ray.intersectTriangle(Xc,$c,Kc,!1,Vc),null!==a)){var s=t.ray.origin.distanceTo(Vc);s<t.near||s>t.far||e.push({distance:s,point:Vc.clone(),uv:Nr.getUV(Vc,Xc,Kc,$c,Qc,Jc,Zc,new an),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Gn.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var nh=new gn,rh=new gn;function ih(){Gn.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function oh(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mi.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Tn,this.bindMatrixInverse=new Tn}ih.prototype=Object.assign(Object.create(Gn.prototype),{constructor:ih,isLOD:!0,copy:function(t){Gn.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length;r++)if(e<n[r].distance)break;return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){for(var n=1,r=e.length;n<r;n++)if(t<e[n].distance)break;return e[n-1].object}return null},raycast:function(t,e){var n=this.levels;if(n.length>0){nh.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(nh);this.getObjectForDistance(r).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){nh.setFromMatrixPosition(t.matrixWorld),rh.setFromMatrixPosition(this.matrixWorld);var n=nh.distanceTo(rh)/t.zoom;e[0].object.visible=!0;for(var r=1,i=e.length;r<i;r++){if(!(n>=e[r].distance))break;e[r-1].object.visible=!1,e[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}},toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),oh.prototype=Object.assign(Object.create(Mi.prototype),{constructor:oh,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new ln,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Mi.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ah=new Tn,sh=new Tn;function uh(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Tn)}}function ch(){Gn.call(this),this.type="Bone"}Object.assign(uh.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Tn;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=t.length;i<o;i++){var a=t[i]?t[i].matrixWorld:sh;ah.multiplyMatrices(a,e[i]),ah.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new uh(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),ch.prototype=Object.assign(Object.create(Gn.prototype),{constructor:ch,isBone:!0});var hh=new Tn,lh=new Tn,fh=[],ph=new Mi;function dh(t,e,n){Mi.call(this,t,e),this.instanceMatrix=new Gr(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function vh(t){zr.call(this),this.type="LineBasicMaterial",this.color=new Lr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}dh.prototype=Object.assign(Object.create(Mi.prototype),{constructor:dh,isInstancedMesh:!0,getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,r=this.count;if(ph.geometry=this.geometry,ph.material=this.material,void 0!==ph.material)for(var i=0;i<r;i++)this.getMatrixAt(i,hh),lh.multiplyMatrices(n,hh),ph.matrixWorld=lh,ph.raycast(t,fh),fh.length>0&&(fh[0].instanceId=i,fh[0].object=this,e.push(fh[0]),fh.length=0)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),vh.prototype=Object.create(zr.prototype),vh.prototype.constructor=vh,vh.prototype.isLineBasicMaterial=!0,vh.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var mh=new gn,gh=new gn,yh=new Tn,bh=new vr,_h=new sr;function wh(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Gn.call(this),this.type="Line",this.geometry=void 0!==t?t:new ui,this.material=void 0!==e?e:new vh}wh.prototype=Object.assign(Object.create(Gn.prototype),{constructor:wh,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)mh.fromBufferAttribute(e,r-1),gh.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=mh.distanceTo(gh);t.setAttribute("lineDistance",new Qr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;n=t.lineDistances;n[0]=0;for(r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this},raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),_h.copy(n.boundingSphere),_h.applyMatrix4(r),_h.radius+=i,!1!==t.ray.intersectsSphere(_h)){yh.getInverse(r),bh.copy(t.ray).applyMatrix4(yh);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new gn,u=new gn,c=new gn,h=new gn,l=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var f=n.index,p=n.attributes,d=p.position.array;if(null!==f)for(var v=f.array,m=0,g=v.length-1;m<g;m+=l){var y=v[m],b=v[m+1];s.fromArray(d,3*y),u.fromArray(d,3*b);var _=bh.distanceSqToSegment(s,u,h,c);if(!(_>a)){h.applyMatrix4(this.matrixWorld);var w=t.ray.origin.distanceTo(h);w<t.near||w>t.far||e.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(m=0,g=d.length/3-1;m<g;m+=l){s.fromArray(d,3*m),u.fromArray(d,3*m+3);_=bh.distanceSqToSegment(s,u,h,c);if(!(_>a)){h.applyMatrix4(this.matrixWorld);w=t.ray.origin.distanceTo(h);w<t.near||w>t.far||e.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry){var x=n.vertices,E=x.length;for(m=0;m<E-1;m+=l){_=bh.distanceSqToSegment(x[m],x[m+1],h,c);if(!(_>a)){h.applyMatrix4(this.matrixWorld);w=t.ray.origin.distanceTo(h);w<t.near||w>t.far||e.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var xh=new gn,Eh=new gn;function Sh(t,e){wh.call(this,t,e),this.type="LineSegments"}function Th(t,e){wh.call(this,t,e),this.type="LineLoop"}function Mh(t){zr.call(this),this.type="PointsMaterial",this.color=new Lr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Sh.prototype=Object.assign(Object.create(wh.prototype),{constructor:Sh,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],r=0,i=e.count;r<i;r+=2)xh.fromBufferAttribute(e,r),Eh.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+xh.distanceTo(Eh);t.setAttribute("lineDistance",new Qr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for(n=t.lineDistances,r=0,i=o.length;r<i;r+=2)xh.copy(o[r]),Eh.copy(o[r+1]),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+xh.distanceTo(Eh)}return this}}),Th.prototype=Object.assign(Object.create(wh.prototype),{constructor:Th,isLineLoop:!0}),Mh.prototype=Object.create(zr.prototype),Mh.prototype.constructor=Mh,Mh.prototype.isPointsMaterial=!0,Mh.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Ah=new Tn,Ch=new vr,Ih=new sr,Nh=new gn;function Rh(t,e){Gn.call(this),this.type="Points",this.geometry=void 0!==t?t:new ui,this.material=void 0!==e?e:new Mh,this.updateMorphTargets()}function Oh(t,e,n,r,i,o,a){var s=Ch.distanceSqToPoint(t);if(s<n){var u=new gn;Ch.closestPointToPoint(t,u),u.applyMatrix4(r);var c=i.ray.origin.distanceTo(u);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,object:a})}}function Ph(t,e,n,r,i,o,a,s,u){hn.call(this,t,e,n,r,i,o,a,s,u),this.format=void 0!==a?a:It,this.minFilter=void 0!==o?o:pt,this.magFilter=void 0!==i?i:pt,this.generateMipmaps=!1}function Lh(t,e,n,r,i,o,a,s,u,c,h,l){hn.call(this,null,o,a,s,u,c,r,i,h,l),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Dh(t,e,n,r,i,o,a,s,u){hn.call(this,t,e,n,r,i,o,a,s,u),this.needsUpdate=!0}function kh(t,e,n,r,i,o,a,s,u,c){if(c=void 0!==c?c:Lt,c!==Lt&&c!==Dt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Lt&&(n=bt),void 0===n&&c===Dt&&(n=At),hn.call(this,null,r,i,o,a,s,c,n,u),this.image={width:t,height:e},this.magFilter=void 0!==a?a:ht,this.minFilter=void 0!==s?s:ht,this.flipY=!1,this.generateMipmaps=!1}function Fh(t){ui.call(this),this.type="WireframeGeometry";var e,n,r,i,o,a,s,u,c,h,l=[],f=[0,0],p={},d=["a","b","c"];if(t&&t.isGeometry){var v=t.faces;for(e=0,r=v.length;e<r;e++){var m=v[e];for(n=0;n<3;n++)s=m[d[n]],u=m[d[(n+1)%3]],f[0]=Math.min(s,u),f[1]=Math.max(s,u),c=f[0]+","+f[1],void 0===p[c]&&(p[c]={index1:f[0],index2:f[1]})}for(c in p)a=p[c],h=t.vertices[a.index1],l.push(h.x,h.y,h.z),h=t.vertices[a.index2],l.push(h.x,h.y,h.z)}else if(t&&t.isBufferGeometry){var g,y,b,_,w,x,E,S;if(h=new gn,null!==t.index){for(g=t.attributes.position,y=t.index,b=t.groups,0===b.length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(_=b[i],w=_.start,x=_.count,e=w,r=w+x;e<r;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),u=y.getX(e+(n+1)%3),f[0]=Math.min(s,u),f[1]=Math.max(s,u),c=f[0]+","+f[1],void 0===p[c]&&(p[c]={index1:f[0],index2:f[1]});for(c in p)a=p[c],h.fromBufferAttribute(g,a.index1),l.push(h.x,h.y,h.z),h.fromBufferAttribute(g,a.index2),l.push(h.x,h.y,h.z)}else for(g=t.attributes.position,e=0,r=g.count/3;e<r;e++)for(n=0;n<3;n++)E=3*e+n,h.fromBufferAttribute(g,E),l.push(h.x,h.y,h.z),S=3*e+(n+1)%3,h.fromBufferAttribute(g,S),l.push(h.x,h.y,h.z)}this.setAttribute("position",new Qr(l,3))}function Uh(t,e,n){Pi.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new jh(t,e,n)),this.mergeVertices()}function jh(t,e,n){ui.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,o=[],a=[],s=[],u=[],c=1e-5,h=new gn,l=new gn,f=new gn,p=new gn,d=new gn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var v=e+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=e;i++){var g=i/e;t(g,m,l),a.push(l.x,l.y,l.z),g-c>=0?(t(g-c,m,f),p.subVectors(l,f)):(t(g+c,m,f),p.subVectors(f,l)),m-c>=0?(t(g,m-c,f),d.subVectors(l,f)):(t(g,m+c,f),d.subVectors(f,l)),h.crossVectors(p,d).normalize(),s.push(h.x,h.y,h.z),u.push(g,m)}}for(r=0;r<n;r++)for(i=0;i<e;i++){var y=r*v+i,b=r*v+i+1,_=(r+1)*v+i+1,w=(r+1)*v+i;o.push(y,b,w),o.push(b,_,w)}this.setIndex(o),this.setAttribute("position",new Qr(a,3)),this.setAttribute("normal",new Qr(s,3)),this.setAttribute("uv",new Qr(u,2))}function zh(t,e,n,r){Pi.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new Bh(t,e,n,r)),this.mergeVertices()}function Bh(t,e,n,r){ui.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1,r=r||0;var i=[],o=[];function a(t){for(var n=new gn,r=new gn,i=new gn,o=0;o<e.length;o+=3)f(e[o+0],n),f(e[o+1],r),f(e[o+2],i),s(n,r,i,t)}function s(t,e,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var u=t.clone().lerp(n,i/a),c=e.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)s[i][o]=0===o&&i===a?u:u.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2===0?(l(s[i][f+1]),l(s[i+1][f]),l(s[i][f])):(l(s[i][f+1]),l(s[i+1][f+1]),l(s[i+1][f]))}}function u(t){for(var e=new gn,n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}function c(){for(var t=new gn,e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];var n=v(t)/2/Math.PI+.5,r=m(t)/Math.PI+.5;o.push(n,1-r)}p(),h()}function h(){for(var t=0;t<o.length;t+=6){var e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}function l(t){i.push(t.x,t.y,t.z)}function f(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function p(){for(var t=new gn,e=new gn,n=new gn,r=new gn,a=new an,s=new an,u=new an,c=0,h=0;c<i.length;c+=9,h+=6){t.set(i[c+0],i[c+1],i[c+2]),e.set(i[c+3],i[c+4],i[c+5]),n.set(i[c+6],i[c+7],i[c+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),u.set(o[h+4],o[h+5]),r.copy(t).add(e).add(n).divideScalar(3);var l=v(r);d(a,h+0,t,l),d(s,h+2,e,l),d(u,h+4,n,l)}}function d(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function v(t){return Math.atan2(t.z,-t.x)}function m(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}a(r),u(n),c(),this.setAttribute("position",new Qr(i,3)),this.setAttribute("normal",new Qr(i.slice(),3)),this.setAttribute("uv",new Qr(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Vh(t,e){Pi.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Gh(t,e)),this.mergeVertices()}function Gh(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Bh.call(this,n,r,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Hh(t,e){Pi.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Wh(t,e)),this.mergeVertices()}function Wh(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Bh.call(this,n,r,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function qh(t,e){Pi.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Yh(t,e)),this.mergeVertices()}function Yh(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Bh.call(this,r,i,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Xh(t,e){Pi.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Kh(t,e)),this.mergeVertices()}function Kh(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Bh.call(this,i,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function $h(t,e,n,r,i,o){Pi.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Qh(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Qh(t,e,n,r,i){ui.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},e=e||64,n=n||1,r=r||8,i=i||!1;var o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new gn,c=new gn,h=new an,l=new gn,f=[],p=[],d=[],v=[];function m(){for(a=0;a<e;a++)g(a);g(!1===i?e:0),b(),y()}function g(i){l=t.getPointAt(i/e,l);var a=o.normals[i],h=o.binormals[i];for(s=0;s<=r;s++){var d=s/r*Math.PI*2,v=Math.sin(d),m=-Math.cos(d);c.x=m*a.x+v*h.x,c.y=m*a.y+v*h.y,c.z=m*a.z+v*h.z,c.normalize(),p.push(c.x,c.y,c.z),u.x=l.x+n*c.x,u.y=l.y+n*c.y,u.z=l.z+n*c.z,f.push(u.x,u.y,u.z)}}function y(){for(s=1;s<=e;s++)for(a=1;a<=r;a++){var t=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;v.push(t,n,o),v.push(n,i,o)}}function b(){for(a=0;a<=e;a++)for(s=0;s<=r;s++)h.x=a/e,h.y=s/r,d.push(h.x,h.y)}m(),this.setIndex(v),this.setAttribute("position",new Qr(f,3)),this.setAttribute("normal",new Qr(p,3)),this.setAttribute("uv",new Qr(d,2))}function Jh(t,e,n,r,i,o,a){Pi.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Zh(t,e,n,r,i,o)),this.mergeVertices()}function Zh(t,e,n,r,i,o){ui.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],c=[],h=[],l=[],f=new gn,p=new gn,d=new gn,v=new gn,m=new gn,g=new gn,y=new gn;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(A(b,i,o,t,d),A(b+.01,i,o,t,v),g.subVectors(v,d),y.addVectors(v,d),m.crossVectors(g,y),y.crossVectors(m,g),m.normalize(),y.normalize(),s=0;s<=r;++s){var _=s/r*Math.PI*2,w=-e*Math.cos(_),x=e*Math.sin(_);f.x=d.x+(w*y.x+x*m.x),f.y=d.y+(w*y.y+x*m.y),f.z=d.z+(w*y.z+x*m.z),c.push(f.x,f.y,f.z),p.subVectors(f,d).normalize(),h.push(p.x,p.y,p.z),l.push(a/n),l.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*(s-1)+(a-1),S=(r+1)*s+(a-1),T=(r+1)*s+a,M=(r+1)*(s-1)+a;u.push(E,S,M),u.push(S,T,M)}function A(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.setAttribute("position",new Qr(c,3)),this.setAttribute("normal",new Qr(h,3)),this.setAttribute("uv",new Qr(l,2))}function tl(t,e,n,r,i){Pi.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new el(t,e,n,r,i)),this.mergeVertices()}function el(t,e,n,r,i){ui.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],c=[],h=[],l=new gn,f=new gn,p=new gn;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var d=a/r*i,v=o/n*Math.PI*2;f.x=(t+e*Math.cos(v))*Math.cos(d),f.y=(t+e*Math.cos(v))*Math.sin(d),f.z=e*Math.sin(v),u.push(f.x,f.y,f.z),l.x=t*Math.cos(d),l.y=t*Math.sin(d),p.subVectors(f,l).normalize(),c.push(p.x,p.y,p.z),h.push(a/r),h.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var m=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,b=(r+1)*o+a;s.push(m,g,b),s.push(g,y,b)}this.setIndex(s),this.setAttribute("position",new Qr(u,3)),this.setAttribute("normal",new Qr(c,3)),this.setAttribute("uv",new Qr(h,2))}Rh.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Rh,isPoints:!0,raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ih.copy(n.boundingSphere),Ih.applyMatrix4(r),Ih.radius+=i,!1!==t.ray.intersectsSphere(Ih)){Ah.getInverse(r),Ch.copy(t.ray).applyMatrix4(Ah);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var s=n.index,u=n.attributes,c=u.position.array;if(null!==s)for(var h=s.array,l=0,f=h.length;l<f;l++){var p=h[l];Nh.fromArray(c,3*p),Oh(Nh,p,a,r,t,e,this)}else{l=0;for(var d=c.length/3;l<d;l++)Nh.fromArray(c,3*l),Oh(Nh,l,a,r,t,e,this)}}else{var v=n.vertices;for(l=0,d=v.length;l<d;l++)Oh(v[l],l,a,r,t,e,this)}}},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ph.prototype=Object.assign(Object.create(hn.prototype),{constructor:Ph,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Lh.prototype=Object.create(hn.prototype),Lh.prototype.constructor=Lh,Lh.prototype.isCompressedTexture=!0,Dh.prototype=Object.create(hn.prototype),Dh.prototype.constructor=Dh,Dh.prototype.isCanvasTexture=!0,kh.prototype=Object.create(hn.prototype),kh.prototype.constructor=kh,kh.prototype.isDepthTexture=!0,Fh.prototype=Object.create(ui.prototype),Fh.prototype.constructor=Fh,Uh.prototype=Object.create(Pi.prototype),Uh.prototype.constructor=Uh,jh.prototype=Object.create(ui.prototype),jh.prototype.constructor=jh,zh.prototype=Object.create(Pi.prototype),zh.prototype.constructor=zh,Bh.prototype=Object.create(ui.prototype),Bh.prototype.constructor=Bh,Vh.prototype=Object.create(Pi.prototype),Vh.prototype.constructor=Vh,Gh.prototype=Object.create(Bh.prototype),Gh.prototype.constructor=Gh,Hh.prototype=Object.create(Pi.prototype),Hh.prototype.constructor=Hh,Wh.prototype=Object.create(Bh.prototype),Wh.prototype.constructor=Wh,qh.prototype=Object.create(Pi.prototype),qh.prototype.constructor=qh,Yh.prototype=Object.create(Bh.prototype),Yh.prototype.constructor=Yh,Xh.prototype=Object.create(Pi.prototype),Xh.prototype.constructor=Xh,Kh.prototype=Object.create(Bh.prototype),Kh.prototype.constructor=Kh,$h.prototype=Object.create(Pi.prototype),$h.prototype.constructor=$h,Qh.prototype=Object.create(ui.prototype),Qh.prototype.constructor=Qh,Qh.prototype.toJSON=function(){var t=ui.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},Jh.prototype=Object.create(Pi.prototype),Jh.prototype.constructor=Jh,Zh.prototype=Object.create(ui.prototype),Zh.prototype.constructor=Zh,tl.prototype=Object.create(Pi.prototype),tl.prototype.constructor=tl,el.prototype=Object.create(ui.prototype),el.prototype.constructor=el;var nl={triangulate:function(t,e,n){n=n||2;var r,i,o,a,s,u,c,h=e&&e.length,l=h?e[0]*n:t.length,f=rl(t,0,l,n,!0),p=[];if(!f||f.next===f.prev)return p;if(h&&(f=hl(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<l;d+=n)s=t[d],u=t[d+1],s<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=Math.max(o-r,a-i),c=0!==c?1/c:0}return ol(f,p,n,r,i,c),p}};function rl(t,e,n,r,i){var o,a;if(i===Nl(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Al(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Al(o,t[o],t[o+1],a);return a&&wl(a,a.next)&&(Cl(a),a=a.next),a}function il(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!wl(r,r.next)&&0!==_l(r.prev,r,r.next))r=r.next;else{if(Cl(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function ol(t,e,n,r,i,o,a){if(t){!a&&o&&dl(t,r,i,o);var s,u,c=t;while(t.prev!==t.next)if(s=t.prev,u=t.next,o?sl(t,r,i,o):al(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Cl(t),t=u.next,c=u.next;else if(t=u,t===c){a?1===a?(t=ul(t,e,n),ol(t,e,n,r,i,o,2)):2===a&&cl(t,e,n,r,i,o):ol(il(t),e,n,r,i,o,1);break}}}function al(t){var e=t.prev,n=t,r=t.next;if(_l(e,n,r)>=0)return!1;var i=t.next.next;while(i!==t.prev){if(yl(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&_l(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function sl(t,e,n,r){var i=t.prev,o=t,a=t.next;if(_l(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,h=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=ml(s,u,e,n,r),f=ml(c,h,e,n,r),p=t.prevZ,d=t.nextZ;while(p&&p.z>=l&&d&&d.z<=f){if(p!==t.prev&&p!==t.next&&yl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_l(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&yl(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_l(d.prev,d,d.next)>=0)return!1;d=d.nextZ}while(p&&p.z>=l){if(p!==t.prev&&p!==t.next&&yl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_l(p.prev,p,p.next)>=0)return!1;p=p.prevZ}while(d&&d.z<=f){if(d!==t.prev&&d!==t.next&&yl(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&_l(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function ul(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!wl(i,o)&&xl(i,r,r.next,o)&&Sl(i,o)&&Sl(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Cl(r),Cl(r.next),r=t=o),r=r.next}while(r!==t);return r}function cl(t,e,n,r,i,o){var a=t;do{var s=a.next.next;while(s!==a.prev){if(a.i!==s.i&&bl(a,s)){var u=Ml(a,s);return a=il(a,a.next),u=il(u,u.next),ol(a,e,n,r,i,o),void ol(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function hl(t,e,n,r){var i,o,a,s,u,c=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,u=rl(t,a,s,r,!1),u===u.next&&(u.steiner=!0),c.push(gl(u));for(c.sort(ll),i=0;i<c.length;i++)fl(c[i],n),n=il(n,n.next);return n}function ll(t,e){return t.x-e.x}function fl(t,e){if(e=pl(t,e),e){var n=Ml(e,t);il(n,n.next)}}function pl(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,h=n.x,l=n.y,f=1/0;r=n.next;while(r!==c)i>=r.x&&r.x>=h&&i!==r.x&&yl(o<l?i:a,o,h,l,o<l?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(u<f||u===f&&r.x>n.x)&&Sl(r,t)&&(n=r,f=u)),r=r.next;return n}function dl(t,e,n,r){var i=t;do{null===i.z&&(i.z=ml(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,vl(i)}function vl(t){var e,n,r,i,o,a,s,u,c=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,r=n,s=0,e=0;e<c;e++)if(s++,r=r.nextZ,!r)break;u=c;while(s>0||u>0&&r)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function ml(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function gl(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function yl(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function bl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!El(t,e)&&Sl(t,e)&&Sl(e,t)&&Tl(t,e)}function _l(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function wl(t,e){return t.x===e.x&&t.y===e.y}function xl(t,e,n,r){return!!(wl(t,n)&&wl(e,r)||wl(t,r)&&wl(n,e))||_l(t,e,n)>0!==_l(t,e,r)>0&&_l(n,r,t)>0!==_l(n,r,e)>0}function El(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&xl(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Sl(t,e){return _l(t.prev,t,t.next)<0?_l(t,e,t.next)>=0&&_l(t,t.prev,e)>=0:_l(t,e,t.prev)<0||_l(t,t.next,e)<0}function Tl(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function Ml(t,e){var n=new Il(t.i,t.x,t.y),r=new Il(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Al(t,e,n,r){var i=new Il(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Cl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Il(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nl(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}var Rl={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Rl.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];Ol(t),Pl(n,t);var o=t.length;e.forEach(Ol);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,Pl(n,e[a]);var s=nl.triangulate(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Ol(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Pl(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Ll(t,e){Pi.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Dl(t,e)),this.mergeVertices()}function Dl(t,e){ui.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,r=[],i=[],o=0,a=t.length;o<a;o++){var s=t[o];u(s)}function u(t){var o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,u=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,h=void 0!==e.bevelThickness?e.bevelThickness:6,l=void 0!==e.bevelSize?e.bevelSize:h-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3,d=e.extrudePath,v=void 0!==e.UVGenerator?e.UVGenerator:kl;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);var m,g,y,b,_,w,x,E,S=!1;d&&(m=d.getSpacedPoints(s),S=!0,c=!1,g=d.computeFrenetFrames(s,!1),y=new gn,b=new gn,_=new gn),c||(p=0,h=0,l=0,f=0);var T=t.extractPoints(a),M=T.shape,A=T.holes,C=!Rl.isClockWise(M);if(C)for(M=M.reverse(),x=0,E=A.length;x<E;x++)w=A[x],Rl.isClockWise(w)&&(A[x]=w.reverse());var I=Rl.triangulateShape(M,A),N=M;for(x=0,E=A.length;x<E;x++)w=A[x],M=M.concat(w);function R(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var O,P,L,D,k,F,U=M.length,j=I.length;function z(t,e,n){var r,i,o,a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,c=n.y-t.y,h=a*a+s*s,l=a*c-s*u;if(Math.abs(l)>Number.EPSILON){var f=Math.sqrt(h),p=Math.sqrt(u*u+c*c),d=e.x-s/f,v=e.y+a/f,m=n.x-c/p,g=n.y+u/p,y=((m-d)*c-(g-v)*u)/(a*c-s*u);r=d+a*y-t.x,i=v+s*y-t.y;var b=r*r+i*i;if(b<=2)return new an(r,i);o=Math.sqrt(b/2)}else{var _=!1;a>Number.EPSILON?u>Number.EPSILON&&(_=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(_=!0):Math.sign(s)===Math.sign(c)&&(_=!0),_?(r=-s,i=a,o=Math.sqrt(h)):(r=a,i=s,o=Math.sqrt(h/2))}return new an(r/o,i/o)}for(var B=[],V=0,G=N.length,H=G-1,W=V+1;V<G;V++,H++,W++)H===G&&(H=0),W===G&&(W=0),B[V]=z(N[V],N[H],N[W]);var q,Y,X=[],K=B.concat();for(x=0,E=A.length;x<E;x++){for(w=A[x],q=[],V=0,G=w.length,H=G-1,W=V+1;V<G;V++,H++,W++)H===G&&(H=0),W===G&&(W=0),q[V]=z(w[V],w[H],w[W]);X.push(q),K=K.concat(q)}for(O=0;O<p;O++){for(L=O/p,D=h*Math.cos(L*Math.PI/2),P=l*Math.sin(L*Math.PI/2)+f,V=0,G=N.length;V<G;V++)k=R(N[V],B[V],P),Z(k.x,k.y,-D);for(x=0,E=A.length;x<E;x++)for(w=A[x],q=X[x],V=0,G=w.length;V<G;V++)k=R(w[V],q[V],P),Z(k.x,k.y,-D)}for(P=l+f,V=0;V<U;V++)k=c?R(M[V],K[V],P):M[V],S?(b.copy(g.normals[0]).multiplyScalar(k.x),y.copy(g.binormals[0]).multiplyScalar(k.y),_.copy(m[0]).add(b).add(y),Z(_.x,_.y,_.z)):Z(k.x,k.y,0);for(Y=1;Y<=s;Y++)for(V=0;V<U;V++)k=c?R(M[V],K[V],P):M[V],S?(b.copy(g.normals[Y]).multiplyScalar(k.x),y.copy(g.binormals[Y]).multiplyScalar(k.y),_.copy(m[Y]).add(b).add(y),Z(_.x,_.y,_.z)):Z(k.x,k.y,u/s*Y);for(O=p-1;O>=0;O--){for(L=O/p,D=h*Math.cos(L*Math.PI/2),P=l*Math.sin(L*Math.PI/2)+f,V=0,G=N.length;V<G;V++)k=R(N[V],B[V],P),Z(k.x,k.y,u+D);for(x=0,E=A.length;x<E;x++)for(w=A[x],q=X[x],V=0,G=w.length;V<G;V++)k=R(w[V],q[V],P),S?Z(k.x,k.y+m[s-1].y,m[s-1].x+D):Z(k.x,k.y,u+D)}function $(){var t=r.length/3;if(c){var e=0,i=U*e;for(V=0;V<j;V++)F=I[V],tt(F[2]+i,F[1]+i,F[0]+i);for(e=s+2*p,i=U*e,V=0;V<j;V++)F=I[V],tt(F[0]+i,F[1]+i,F[2]+i)}else{for(V=0;V<j;V++)F=I[V],tt(F[2],F[1],F[0]);for(V=0;V<j;V++)F=I[V],tt(F[0]+U*s,F[1]+U*s,F[2]+U*s)}n.addGroup(t,r.length/3-t,0)}function Q(){var t=r.length/3,e=0;for(J(N,e),e+=N.length,x=0,E=A.length;x<E;x++)w=A[x],J(w,e),e+=w.length;n.addGroup(t,r.length/3-t,1)}function J(t,e){var n,r;V=t.length;while(--V>=0){n=V,r=V-1,r<0&&(r=t.length-1);var i=0,o=s+2*p;for(i=0;i<o;i++){var a=U*i,u=U*(i+1),c=e+n+a,h=e+r+a,l=e+r+u,f=e+n+u;et(c,h,l,f)}}}function Z(t,e,n){o.push(t),o.push(e),o.push(n)}function tt(t,e,i){nt(t),nt(e),nt(i);var o=r.length/3,a=v.generateTopUV(n,r,o-3,o-2,o-1);rt(a[0]),rt(a[1]),rt(a[2])}function et(t,e,i,o){nt(t),nt(e),nt(o),nt(e),nt(i),nt(o);var a=r.length/3,s=v.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);rt(s[0]),rt(s[1]),rt(s[3]),rt(s[1]),rt(s[2]),rt(s[3])}function nt(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function rt(t){i.push(t.x),i.push(t.y)}$(),Q()}this.setAttribute("position",new Qr(r,3)),this.setAttribute("uv",new Qr(i,2)),this.computeVertexNormals()}Ll.prototype=Object.create(Pi.prototype),Ll.prototype.constructor=Ll,Ll.prototype.toJSON=function(){var t=Pi.prototype.toJSON.call(this),e=this.parameters.shapes,n=this.parameters.options;return Fl(e,n,t)},Dl.prototype=Object.create(ui.prototype),Dl.prototype.constructor=Dl,Dl.prototype.toJSON=function(){var t=ui.prototype.toJSON.call(this),e=this.parameters.shapes,n=this.parameters.options;return Fl(e,n,t)};var kl={generateTopUV:function(t,e,n,r,i){var o=e[3*n],a=e[3*n+1],s=e[3*r],u=e[3*r+1],c=e[3*i],h=e[3*i+1];return[new an(o,a),new an(s,u),new an(c,h)]},generateSideWallUV:function(t,e,n,r,i,o){var a=e[3*n],s=e[3*n+1],u=e[3*n+2],c=e[3*r],h=e[3*r+1],l=e[3*r+2],f=e[3*i],p=e[3*i+1],d=e[3*i+2],v=e[3*o],m=e[3*o+1],g=e[3*o+2];return Math.abs(s-h)<.01?[new an(a,1-u),new an(c,1-l),new an(f,1-d),new an(v,1-g)]:[new an(s,1-u),new an(h,1-l),new an(p,1-d),new an(m,1-g)]}};function Fl(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function Ul(t,e){Pi.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new jl(t,e)),this.mergeVertices()}function jl(t,e){e=e||{};var n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Pi;var r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Dl.call(this,r,e),this.type="TextBufferGeometry"}function zl(t,e,n,r,i,o,a){Pi.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Bl(t,e,n,r,i,o,a)),this.mergeVertices()}function Bl(t,e,n,r,i,o,a){ui.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,c=Math.min(o+a,Math.PI),h=0,l=[],f=new gn,p=new gn,d=[],v=[],m=[],g=[];for(u=0;u<=n;u++){var y=[],b=u/n,_=0;for(0==u&&0==o?_=.5/e:u==n&&c==Math.PI&&(_=-.5/e),s=0;s<=e;s++){var w=s/e;f.x=-t*Math.cos(r+w*i)*Math.sin(o+b*a),f.y=t*Math.cos(o+b*a),f.z=t*Math.sin(r+w*i)*Math.sin(o+b*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),m.push(p.x,p.y,p.z),g.push(w+_,1-b),y.push(h++)}l.push(y)}for(u=0;u<n;u++)for(s=0;s<e;s++){var x=l[u][s+1],E=l[u][s],S=l[u+1][s],T=l[u+1][s+1];(0!==u||o>0)&&d.push(x,E,T),(u!==n-1||c<Math.PI)&&d.push(E,S,T)}this.setIndex(d),this.setAttribute("position",new Qr(v,3)),this.setAttribute("normal",new Qr(m,3)),this.setAttribute("uv",new Qr(g,2))}function Vl(t,e,n,r,i,o){Pi.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Gl(t,e,n,r,i,o)),this.mergeVertices()}function Gl(t,e,n,r,i,o){ui.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},t=t||.5,e=e||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var a,s,u,c=[],h=[],l=[],f=[],p=t,d=(e-t)/r,v=new gn,m=new an;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,v.x=p*Math.cos(a),v.y=p*Math.sin(a),h.push(v.x,v.y,v.z),l.push(0,0,1),m.x=(v.x/e+1)/2,m.y=(v.y/e+1)/2,f.push(m.x,m.y);p+=d}for(s=0;s<r;s++){var g=s*(n+1);for(u=0;u<n;u++){a=u+g;var y=a,b=a+n+1,_=a+n+2,w=a+1;c.push(y,b,w),c.push(b,_,w)}}this.setIndex(c),this.setAttribute("position",new Qr(h,3)),this.setAttribute("normal",new Qr(l,3)),this.setAttribute("uv",new Qr(f,2))}function Hl(t,e,n,r){Pi.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new Wl(t,e,n,r)),this.mergeVertices()}function Wl(t,e,n,r){ui.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=on.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],c=[],h=1/e,l=new gn,f=new an;for(o=0;o<=e;o++){var p=n+o*h*r,d=Math.sin(p),v=Math.cos(p);for(a=0;a<=t.length-1;a++)l.x=t[a].x*d,l.y=t[a].y,l.z=t[a].x*v,u.push(l.x,l.y,l.z),f.x=o/e,f.y=a/(t.length-1),c.push(f.x,f.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){i=a+o*t.length;var m=i,g=i+t.length,y=i+t.length+1,b=i+1;s.push(m,g,b),s.push(g,y,b)}if(this.setIndex(s),this.setAttribute("position",new Qr(u,3)),this.setAttribute("uv",new Qr(c,2)),this.computeVertexNormals(),r===2*Math.PI){var _=this.attributes.normal.array,w=new gn,x=new gn,E=new gn;for(i=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)w.x=_[a+0],w.y=_[a+1],w.z=_[a+2],x.x=_[i+a+0],x.y=_[i+a+1],x.z=_[i+a+2],E.addVectors(w,x).normalize(),_[a+0]=_[i+a+0]=E.x,_[a+1]=_[i+a+1]=E.y,_[a+2]=_[i+a+2]=E.z}}function ql(t,e){Pi.call(this),this.type="ShapeGeometry","object"===typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Yl(t,e)),this.mergeVertices()}function Yl(t,e){ui.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(t))c(t);else for(var u=0;u<t.length;u++)c(t[u]),this.addGroup(a,s,u),a+=s,s=0;function c(t){var a,u,c,h=r.length/3,l=t.extractPoints(e),f=l.shape,p=l.holes;for(!1===Rl.isClockWise(f)&&(f=f.reverse()),a=0,u=p.length;a<u;a++)c=p[a],!0===Rl.isClockWise(c)&&(p[a]=c.reverse());var d=Rl.triangulateShape(f,p);for(a=0,u=p.length;a<u;a++)c=p[a],f=f.concat(c);for(a=0,u=f.length;a<u;a++){var v=f[a];r.push(v.x,v.y,0),i.push(0,0,1),o.push(v.x,v.y)}for(a=0,u=d.length;a<u;a++){var m=d[a],g=m[0]+h,y=m[1]+h,b=m[2]+h;n.push(g,y,b),s+=3}}this.setIndex(n),this.setAttribute("position",new Qr(r,3)),this.setAttribute("normal",new Qr(i,3)),this.setAttribute("uv",new Qr(o,2))}function Xl(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function Kl(t,e){ui.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,o,a=[],s=Math.cos(on.DEG2RAD*e),u=[0,0],c={},h=["a","b","c"];t.isBufferGeometry?(o=new Pi,o.fromBufferGeometry(t)):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var l=o.vertices,f=o.faces,p=0,d=f.length;p<d;p++)for(var v=f[p],m=0;m<3;m++)n=v[h[m]],r=v[h[(m+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),i=u[0]+","+u[1],void 0===c[i]?c[i]={index1:u[0],index2:u[1],face1:p,face2:void 0}:c[i].face2=p;for(i in c){var g=c[i];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=l[g.index1];a.push(y.x,y.y,y.z),y=l[g.index2],a.push(y.x,y.y,y.z)}}this.setAttribute("position",new Qr(a,3))}function $l(t,e,n,r,i,o,a,s){Pi.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Ql(t,e,n,r,i,o,a,s)),this.mergeVertices()}function Ql(t,e,n,r,i,o,a,s){ui.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],h=[],l=[],f=[],p=0,d=[],v=n/2,m=0;function g(){var o,g,y=new gn,b=new gn,_=0,w=(e-t)/n;for(g=0;g<=i;g++){var x=[],E=g/i,S=E*(e-t)+t;for(o=0;o<=r;o++){var T=o/r,M=T*s+a,A=Math.sin(M),C=Math.cos(M);b.x=S*A,b.y=-E*n+v,b.z=S*C,h.push(b.x,b.y,b.z),y.set(A,w,C).normalize(),l.push(y.x,y.y,y.z),f.push(T,1-E),x.push(p++)}d.push(x)}for(o=0;o<r;o++)for(g=0;g<i;g++){var I=d[g][o],N=d[g+1][o],R=d[g+1][o+1],O=d[g][o+1];c.push(I,N,O),c.push(N,R,O),_+=6}u.addGroup(m,_,0),m+=_}function y(n){var i,o,d,g=new an,y=new gn,b=0,_=!0===n?t:e,w=!0===n?1:-1;for(o=p,i=1;i<=r;i++)h.push(0,v*w,0),l.push(0,w,0),f.push(.5,.5),p++;for(d=p,i=0;i<=r;i++){var x=i/r,E=x*s+a,S=Math.cos(E),T=Math.sin(E);y.x=_*T,y.y=v*w,y.z=_*S,h.push(y.x,y.y,y.z),l.push(0,w,0),g.x=.5*S+.5,g.y=.5*T*w+.5,f.push(g.x,g.y),p++}for(i=0;i<r;i++){var M=o+i,A=d+i;!0===n?c.push(A,A+1,M):c.push(A+1,A,M),b+=3}u.addGroup(m,b,!0===n?1:2),m+=b}g(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Qr(h,3)),this.setAttribute("normal",new Qr(l,3)),this.setAttribute("uv",new Qr(f,2))}function Jl(t,e,n,r,i,o,a){$l.call(this,0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Zl(t,e,n,r,i,o,a){Ql.call(this,0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function tf(t,e,n,r){Pi.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new ef(t,e,n,r)),this.mergeVertices()}function ef(t,e,n,r){ui.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],c=[],h=new gn,l=new an;for(s.push(0,0,0),u.push(0,0,1),c.push(.5,.5),o=0,i=3;o<=e;o++,i+=3){var f=n+o/e*r;h.x=t*Math.cos(f),h.y=t*Math.sin(f),s.push(h.x,h.y,h.z),u.push(0,0,1),l.x=(s[i]/t+1)/2,l.y=(s[i+1]/t+1)/2,c.push(l.x,l.y)}for(i=1;i<=e;i++)a.push(i,i+1,0);this.setIndex(a),this.setAttribute("position",new Qr(s,3)),this.setAttribute("normal",new Qr(u,3)),this.setAttribute("uv",new Qr(c,2))}Ul.prototype=Object.create(Pi.prototype),Ul.prototype.constructor=Ul,jl.prototype=Object.create(Dl.prototype),jl.prototype.constructor=jl,zl.prototype=Object.create(Pi.prototype),zl.prototype.constructor=zl,Bl.prototype=Object.create(ui.prototype),Bl.prototype.constructor=Bl,Vl.prototype=Object.create(Pi.prototype),Vl.prototype.constructor=Vl,Gl.prototype=Object.create(ui.prototype),Gl.prototype.constructor=Gl,Hl.prototype=Object.create(Pi.prototype),Hl.prototype.constructor=Hl,Wl.prototype=Object.create(ui.prototype),Wl.prototype.constructor=Wl,ql.prototype=Object.create(Pi.prototype),ql.prototype.constructor=ql,ql.prototype.toJSON=function(){var t=Pi.prototype.toJSON.call(this),e=this.parameters.shapes;return Xl(e,t)},Yl.prototype=Object.create(ui.prototype),Yl.prototype.constructor=Yl,Yl.prototype.toJSON=function(){var t=ui.prototype.toJSON.call(this),e=this.parameters.shapes;return Xl(e,t)},Kl.prototype=Object.create(ui.prototype),Kl.prototype.constructor=Kl,$l.prototype=Object.create(Pi.prototype),$l.prototype.constructor=$l,Ql.prototype=Object.create(ui.prototype),Ql.prototype.constructor=Ql,Jl.prototype=Object.create($l.prototype),Jl.prototype.constructor=Jl,Zl.prototype=Object.create(Ql.prototype),Zl.prototype.constructor=Zl,tf.prototype=Object.create(Pi.prototype),tf.prototype.constructor=tf,ef.prototype=Object.create(ui.prototype),ef.prototype.constructor=ef;var nf=Object.freeze({__proto__:null,WireframeGeometry:Fh,ParametricGeometry:Uh,ParametricBufferGeometry:jh,TetrahedronGeometry:Vh,TetrahedronBufferGeometry:Gh,OctahedronGeometry:Hh,OctahedronBufferGeometry:Wh,IcosahedronGeometry:qh,IcosahedronBufferGeometry:Yh,DodecahedronGeometry:Xh,DodecahedronBufferGeometry:Kh,PolyhedronGeometry:zh,PolyhedronBufferGeometry:Bh,TubeGeometry:$h,TubeBufferGeometry:Qh,TorusKnotGeometry:Jh,TorusKnotBufferGeometry:Zh,TorusGeometry:tl,TorusBufferGeometry:el,TextGeometry:Ul,TextBufferGeometry:jl,SphereGeometry:zl,SphereBufferGeometry:Bl,RingGeometry:Vl,RingBufferGeometry:Gl,PlaneGeometry:eo,PlaneBufferGeometry:no,LatheGeometry:Hl,LatheBufferGeometry:Wl,ShapeGeometry:ql,ShapeBufferGeometry:Yl,ExtrudeGeometry:Ll,ExtrudeBufferGeometry:Dl,EdgesGeometry:Kl,ConeGeometry:Jl,ConeBufferGeometry:Zl,CylinderGeometry:$l,CylinderBufferGeometry:Ql,CircleGeometry:tf,CircleBufferGeometry:ef,BoxGeometry:Li,BoxBufferGeometry:Di});function rf(t){zr.call(this),this.type="ShadowMaterial",this.color=new Lr(0),this.transparent=!0,this.setValues(t)}function of(t){Bi.call(this,t),this.type="RawShaderMaterial"}function af(t){zr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Lr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xe,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function sf(t){af.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new an(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(t)}function uf(t){zr.call(this),this.type="MeshPhongMaterial",this.color=new Lr(16777215),this.specular=new Lr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xe,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=H,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function cf(t){zr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Lr(16777215),this.specular=new Lr(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xe,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function hf(t){zr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xe,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function lf(t){zr.call(this),this.type="MeshLambertMaterial",this.color=new Lr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Lr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=H,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ff(t){zr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Lr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xe,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function pf(t){vh.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}rf.prototype=Object.create(zr.prototype),rf.prototype.constructor=rf,rf.prototype.isShadowMaterial=!0,rf.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.color.copy(t.color),this},of.prototype=Object.create(Bi.prototype),of.prototype.constructor=of,of.prototype.isRawShaderMaterial=!0,af.prototype=Object.create(zr.prototype),af.prototype.constructor=af,af.prototype.isMeshStandardMaterial=!0,af.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},sf.prototype=Object.create(af.prototype),sf.prototype.constructor=sf,sf.prototype.isMeshPhysicalMaterial=!0,sf.prototype.copy=function(t){return af.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new Lr).copy(t.sheen):this.sheen=null,this.transparency=t.transparency,this},uf.prototype=Object.create(zr.prototype),uf.prototype.constructor=uf,uf.prototype.isMeshPhongMaterial=!0,uf.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},cf.prototype=Object.create(zr.prototype),cf.prototype.constructor=cf,cf.prototype.isMeshToonMaterial=!0,cf.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},hf.prototype=Object.create(zr.prototype),hf.prototype.constructor=hf,hf.prototype.isMeshNormalMaterial=!0,hf.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},lf.prototype=Object.create(zr.prototype),lf.prototype.constructor=lf,lf.prototype.isMeshLambertMaterial=!0,lf.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ff.prototype=Object.create(zr.prototype),ff.prototype.constructor=ff,ff.prototype.isMeshMatcapMaterial=!0,ff.prototype.copy=function(t){return zr.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},pf.prototype=Object.create(vh.prototype),pf.prototype.constructor=pf,pf.prototype.isLineDashedMaterial=!0,pf.prototype.copy=function(t){return vh.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var df=Object.freeze({__proto__:null,ShadowMaterial:rf,SpriteMaterial:Bc,RawShaderMaterial:of,ShaderMaterial:Bi,PointsMaterial:Mh,MeshPhysicalMaterial:sf,MeshStandardMaterial:af,MeshPhongMaterial:uf,MeshToonMaterial:cf,MeshNormalMaterial:hf,MeshLambertMaterial:lf,MeshDepthMaterial:Ec,MeshDistanceMaterial:Sc,MeshBasicMaterial:Br,MeshMatcapMaterial:ff,LineDashedMaterial:pf,LineBasicMaterial:vh,Material:zr}),vf={arraySlice:function(t,e,n){return vf.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){var i=1,o=t[0];while(void 0!==o&&void 0===o[r])o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}},subclip:function(t,e,n,r,i){i=i||30;var o=t.clone();o.name=e;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],c=u.getValueSize(),h=[],l=[],f=0;f<u.times.length;++f){var p=u.times[f]*i;if(!(p<n||p>=r)){h.push(u.times[f]);for(var d=0;d<c;++d)l.push(u.values[f*c+d])}}0!==h.length&&(u.times=vf.convertArray(h,u.times.constructor),u.values=vf.convertArray(l,u.values.constructor),a.push(u))}o.tracks=a;var v=1/0;for(s=0;s<o.tracks.length;++s)v>o.tracks[s].times[0]&&(v=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*v);return o.resetDuration(),o}};function mf(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function gf(t,e,n,r){mf.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function yf(t,e,n,r){mf.call(this,t,e,n,r)}function bf(t,e,n,r){mf.call(this,t,e,n,r)}function _f(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=vf.convertArray(e,this.TimeBufferType),this.values=vf.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function wf(t,e,n){_f.call(this,t,e,n)}function xf(t,e,n,r){_f.call(this,t,e,n,r)}function Ef(t,e,n,r){_f.call(this,t,e,n,r)}function Sf(t,e,n,r){mf.call(this,t,e,n,r)}function Tf(t,e,n,r){_f.call(this,t,e,n,r)}function Mf(t,e,n,r){_f.call(this,t,e,n,r)}function Af(t,e,n,r){_f.call(this,t,e,n,r)}function Cf(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=on.generateUUID(),this.duration<0&&this.resetDuration()}function If(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ef;case"vector":case"vector2":case"vector3":case"vector4":return Af;case"color":return xf;case"quaternion":return Tf;case"bool":case"boolean":return wf;case"string":return Mf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Nf(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=If(t.type);if(void 0===t.times){var n=[],r=[];vf.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(mf.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}while(n<o){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(mf.prototype,{beforeStart_:mf.prototype.copySampleValue_,afterEnd_:mf.prototype.copySampleValue_}),gf.prototype=Object.assign(Object.create(mf.prototype),{constructor:gf,DefaultSettings_:{endingStart:Le,endingEnd:Le},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case De:i=t,a=2*e-n;break;case ke:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case De:o=t,s=2*n-e;break;case ke:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=this._offsetPrev,h=this._offsetNext,l=this._weightPrev,f=this._weightNext,p=(n-e)/(r-e),d=p*p,v=d*p,m=-l*v+2*l*d-l*p,g=(1+l)*v+(-1.5-2*l)*d+(-.5+l)*p+1,y=(-1-f)*v+(1.5+f)*d+.5*p,b=f*v-f*d,_=0;_!==a;++_)i[_]=m*o[c+_]+g*o[u+_]+y*o[s+_]+b*o[h+_];return i}}),yf.prototype=Object.assign(Object.create(mf.prototype),{constructor:yf,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=(n-e)/(r-e),h=1-c,l=0;l!==a;++l)i[l]=o[u+l]*h+o[s+l]*c;return i}}),bf.prototype=Object.assign(Object.create(mf.prototype),{constructor:bf,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(_f,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:vf.convertArray(t.times,Array),values:vf.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}),Object.assign(_f.prototype,{constructor:_f,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Oe,InterpolantFactoryMethodDiscrete:function(t){return new bf(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new yf(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new gf(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Re:e=this.InterpolantFactoryMethodDiscrete;break;case Oe:e=this.InterpolantFactoryMethodLinear;break;case Pe:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Re;case this.InterpolantFactoryMethodLinear:return Oe;case this.InterpolantFactoryMethodSmooth:return Pe}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){var n=this.times,r=n.length,i=0,o=r-1;while(i!==r&&n[i]<t)++i;while(-1!==o&&n[o]>e)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=vf.arraySlice(n,i,o),this.values=vf.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&vf.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}}return t},optimize:function(){for(var t=vf.arraySlice(this.times),e=vf.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Pe,i=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a],c=t[a+1];if(u!==c&&(1!==a||u!==u[0]))if(r)s=!0;else for(var h=a*n,l=h-n,f=h+n,p=0;p!==n;++p){var d=e[h+p];if(d!==e[l+p]||d!==e[f+p]){s=!0;break}}if(s){if(a!==i){t[i]=t[a];var v=a*n,m=i*n;for(p=0;p!==n;++p)e[m+p]=e[v+p]}++i}}if(o>0){t[i]=t[o];for(v=o*n,m=i*n,p=0;p!==n;++p)e[m+p]=e[v+p];++i}return i!==t.length?(this.times=vf.arraySlice(t,0,i),this.values=vf.arraySlice(e,0,i*n)):(this.times=t,this.values=e),this},clone:function(){var t=vf.arraySlice(this.times,0),e=vf.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}),wf.prototype=Object.assign(Object.create(_f.prototype),{constructor:wf,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Re,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),xf.prototype=Object.assign(Object.create(_f.prototype),{constructor:xf,ValueTypeName:"color"}),Ef.prototype=Object.assign(Object.create(_f.prototype),{constructor:Ef,ValueTypeName:"number"}),Sf.prototype=Object.assign(Object.create(mf.prototype),{constructor:Sf,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=(n-e)/(r-e),c=s+a;s!==c;s+=4)dn.slerpFlat(i,0,o,s-a,o,s,u);return i}}),Tf.prototype=Object.assign(Object.create(_f.prototype),{constructor:Tf,ValueTypeName:"quaternion",DefaultInterpolation:Oe,InterpolantFactoryMethodLinear:function(t){return new Sf(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Mf.prototype=Object.assign(Object.create(_f.prototype),{constructor:Mf,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Re,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Af.prototype=Object.assign(Object.create(_f.prototype),{constructor:Af,ValueTypeName:"vector"}),Object.assign(Cf,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(Nf(n[i]).scale(r));return new Cf(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},i=0,o=n.length;i!==o;++i)e.push(_f.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var c=vf.getKeyframeOrder(s);s=vf.sortedArray(s,1,c),u=vf.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new Ef(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new Cf(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var c=u[1],h=r[c];h||(r[c]=h=[]),h.push(s)}}var l=[];for(var c in r)l.push(Cf.CreateFromMorphTargetSequence(c,r[c],e,n));return l},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];vf.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var c=s[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h={},l=0;l<c.length;l++)if(c[l].morphTargets)for(var f=0;f<c[l].morphTargets.length;f++)h[c[l].morphTargets[f]]=-1;for(var p in h){var d=[],v=[];for(f=0;f!==c[l].morphTargets.length;++f){var m=c[l];d.push(m.time),v.push(m.morphTarget===p?1:0)}r.push(new Ef(".morphTargetInfluence["+p+"]",d,v))}o=h.length*(a||1)}else{var g=".bones["+e[u].name+"]";n(Af,g+".position",c,"pos",r),n(Tf,g+".quaternion",c,"rot",r),n(Af,g+".scale",c,"scl",r)}}if(0===r.length)return null;var y=new Cf(i,o,r);return y}}),Object.assign(Cf.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,r=t.length;n!==r;++n){var i=this.tracks[n];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Cf(this.name,this.duration,t)}});var Rf={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Of(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var r=u[e],i=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}}var Pf=new Of;function Lf(t){this.manager=void 0!==t?t:Pf,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Lf.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}});var Df={};function kf(t){Lf.call(this,t)}function Ff(t){Lf.call(this,t)}function Uf(t){Lf.call(this,t)}function jf(t){Lf.call(this,t)}function zf(t){Lf.call(this,t)}function Bf(t){Lf.call(this,t)}function Vf(t){Lf.call(this,t)}function Gf(){this.type="Curve",this.arcLengthDivisions=200}function Hf(t,e,n,r,i,o,a,s){Gf.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Wf(t,e,n,r,i,o){Hf.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function qf(){var t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){var u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(r-e)/(a+s)+(r-n)/s;u*=a,c*=a,i(e,n,u,c)},calc:function(i){var o=i*i,a=o*i;return t+e*i+n*o+r*a}}}kf.prototype=Object.assign(Object.create(Lf.prototype),{constructor:kf,load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Rf.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0===Df[t]){var a=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(a);if(s){var u=s[1],c=!!s[2],h=s[3];h=decodeURIComponent(h),c&&(h=atob(h));try{var l,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var p=new Uint8Array(h.length),d=0;d<h.length;d++)p[d]=h.charCodeAt(d);l="blob"===f?new Blob([p.buffer],{type:u}):p.buffer;break;case"document":var v=new DOMParser;l=v.parseFromString(h,u);break;case"json":l=JSON.parse(h);break;default:l=h;break}setTimeout((function(){e&&e(l),i.manager.itemEnd(t)}),0)}catch(y){setTimeout((function(){r&&r(y),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{Df[t]=[],Df[t].push({onLoad:e,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var g in m.open("GET",t,!0),m.addEventListener("load",(function(e){var n=this.response,r=Df[t];if(delete Df[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Rf.add(t,n);for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(o=0,a=r.length;o<a;o++){s=r[o];s.onError&&s.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),m.addEventListener("progress",(function(e){for(var n=Df[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}}),!1),m.addEventListener("error",(function(e){var n=Df[t];delete Df[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),m.addEventListener("abort",(function(e){var n=Df[t];delete Df[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return i.manager.itemStart(t),m}Df[t].push({onLoad:e,onProgress:n,onError:r})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Ff.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Ff,load:function(t,e,n,r){var i=this,o=new kf(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var r=Cf.parse(t[n]);e.push(r)}return e}}),Uf.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Uf,load:function(t,e,n,r){var i=this,o=[],a=new Lh;a.image=o;var s=new kf(this.manager);function u(u){s.load(t[u],(function(t){var n=i.parse(t,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(a.minFilter=pt),a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,h=0,l=t.length;h<l;++h)u(h);else s.load(t,(function(t){var n=i.parse(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=pt),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,r);return a}}),jf.prototype=Object.assign(Object.create(Lf.prototype),{constructor:jf,load:function(t,e,n,r){var i=this,o=new Xi,a=new kf(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(t,(function(t){var n=i.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ut,o.wrapT=void 0!==n.wrapT?n.wrapT:ut,o.magFilter=void 0!==n.magFilter?n.magFilter:pt,o.minFilter=void 0!==n.minFilter?n.minFilter:pt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=vt),1===n.mipmapCount&&(o.minFilter=pt),o.needsUpdate=!0,e&&e(o,n))}),n,r),o}}),zf.prototype=Object.assign(Object.create(Lf.prototype),{constructor:zf,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Rf.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Rf.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}),Bf.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Bf,load:function(t,e,n,r){var i=new ks,o=new zf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,a++,6===a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(var u=0;u<t.length;++u)s(u);return i}}),Vf.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Vf,load:function(t,e,n,r){var i=new hn,o=new zf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;var r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?It:Nt,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}),Object.assign(Gf.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];var a,s=0,u=o-1;while(s<=u)if(i=Math.floor(s+(u-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(i=u,r[i]===n)return i/(o-1);var c=r[i],h=r[i+1],l=h-c,f=(n-c)/l,p=(i+f)/(o-1);return p},getTangent:function(t){var e=1e-4,n=t-e,r=t+e;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,r,i,o=new gn,a=[],s=[],u=[],c=new gn,h=new Tn;for(n=0;n<=t;n++)r=n/t,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new gn,u[0]=new gn;var l=Number.MAX_VALUE,f=Math.abs(a[0].x),p=Math.abs(a[0].y),d=Math.abs(a[0].z);for(f<=l&&(l=f,o.set(1,0,0)),p<=l&&(l=p,o.set(0,1,0)),d<=l&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),u[0].crossVectors(a[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(on.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(h.makeRotationAxis(c,i))),u[n].crossVectors(a[n],s[n]);if(!0===e)for(i=Math.acos(on.clamp(s[0].dot(s[t]),-1,1)),i/=t,a[0].dot(c.crossVectors(s[0],s[t]))>0&&(i=-i),n=1;n<=t;n++)s[n].applyMatrix4(h.makeRotationAxis(a[n],i*n)),u[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Hf.prototype=Object.create(Gf.prototype),Hf.prototype.constructor=Hf,Hf.prototype.isEllipseCurve=!0,Hf.prototype.getPoint=function(t,e){var n=e||new an,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),l=s-this.aX,f=u-this.aY;s=l*c-f*h+this.aX,u=l*h+f*c+this.aY}return n.set(s,u)},Hf.prototype.copy=function(t){return Gf.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Hf.prototype.toJSON=function(){var t=Gf.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Hf.prototype.fromJSON=function(t){return Gf.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Wf.prototype=Object.create(Hf.prototype),Wf.prototype.constructor=Wf,Wf.prototype.isArcCurve=!0;var Yf=new gn,Xf=new qf,Kf=new qf,$f=new qf;function Qf(t,e,n,r){Gf.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Jf(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t,u=t*s;return(2*n-2*r+o+a)*u+(-3*n+3*r-2*o-a)*s+o*t+n}function Zf(t,e){var n=1-t;return n*n*e}function tp(t,e){return 2*(1-t)*t*e}function ep(t,e){return t*t*e}function np(t,e,n,r){return Zf(t,e)+tp(t,n)+ep(t,r)}function rp(t,e){var n=1-t;return n*n*n*e}function ip(t,e){var n=1-t;return 3*n*n*t*e}function op(t,e){return 3*(1-t)*t*t*e}function ap(t,e){return t*t*t*e}function sp(t,e,n,r,i){return rp(t,e)+ip(t,n)+op(t,r)+ap(t,i)}function up(t,e,n,r){Gf.call(this),this.type="CubicBezierCurve",this.v0=t||new an,this.v1=e||new an,this.v2=n||new an,this.v3=r||new an}function cp(t,e,n,r){Gf.call(this),this.type="CubicBezierCurve3",this.v0=t||new gn,this.v1=e||new gn,this.v2=n||new gn,this.v3=r||new gn}function hp(t,e){Gf.call(this),this.type="LineCurve",this.v1=t||new an,this.v2=e||new an}function lp(t,e){Gf.call(this),this.type="LineCurve3",this.v1=t||new gn,this.v2=e||new gn}function fp(t,e,n){Gf.call(this),this.type="QuadraticBezierCurve",this.v0=t||new an,this.v1=e||new an,this.v2=n||new an}function pp(t,e,n){Gf.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new gn,this.v1=e||new gn,this.v2=n||new gn}function dp(t){Gf.call(this),this.type="SplineCurve",this.points=t||[]}Qf.prototype=Object.create(Gf.prototype),Qf.prototype.constructor=Qf,Qf.prototype.isCatmullRomCurve3=!0,Qf.prototype.getPoint=function(t,e){var n,r,i,o,a=e||new gn,s=this.points,u=s.length,c=(u-(this.closed?0:1))*t,h=Math.floor(c),l=c-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/u)+1)*u:0===l&&h===u-1&&(h=u-2,l=1),this.closed||h>0?n=s[(h-1)%u]:(Yf.subVectors(s[0],s[1]).add(s[0]),n=Yf),r=s[h%u],i=s[(h+1)%u],this.closed||h+2<u?o=s[(h+2)%u]:(Yf.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=Yf),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),f),d=Math.pow(r.distanceToSquared(i),f),v=Math.pow(i.distanceToSquared(o),f);d<1e-4&&(d=1),p<1e-4&&(p=d),v<1e-4&&(v=d),Xf.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,d,v),Kf.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,d,v),$f.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,d,v)}else"catmullrom"===this.curveType&&(Xf.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Kf.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),$f.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Xf.calc(l),Kf.calc(l),$f.calc(l)),a},Qf.prototype.copy=function(t){Gf.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Qf.prototype.toJSON=function(){var t=Gf.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Qf.prototype.fromJSON=function(t){Gf.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new gn).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},up.prototype=Object.create(Gf.prototype),up.prototype.constructor=up,up.prototype.isCubicBezierCurve=!0,up.prototype.getPoint=function(t,e){var n=e||new an,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(sp(t,r.x,i.x,o.x,a.x),sp(t,r.y,i.y,o.y,a.y)),n},up.prototype.copy=function(t){return Gf.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},up.prototype.toJSON=function(){var t=Gf.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},up.prototype.fromJSON=function(t){return Gf.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},cp.prototype=Object.create(Gf.prototype),cp.prototype.constructor=cp,cp.prototype.isCubicBezierCurve3=!0,cp.prototype.getPoint=function(t,e){var n=e||new gn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(sp(t,r.x,i.x,o.x,a.x),sp(t,r.y,i.y,o.y,a.y),sp(t,r.z,i.z,o.z,a.z)),n},cp.prototype.copy=function(t){return Gf.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},cp.prototype.toJSON=function(){var t=Gf.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},cp.prototype.fromJSON=function(t){return Gf.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},hp.prototype=Object.create(Gf.prototype),hp.prototype.constructor=hp,hp.prototype.isLineCurve=!0,hp.prototype.getPoint=function(t,e){var n=e||new an;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},hp.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},hp.prototype.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()},hp.prototype.copy=function(t){return Gf.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},hp.prototype.toJSON=function(){var t=Gf.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},hp.prototype.fromJSON=function(t){return Gf.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},lp.prototype=Object.create(Gf.prototype),lp.prototype.constructor=lp,lp.prototype.isLineCurve3=!0,lp.prototype.getPoint=function(t,e){var n=e||new gn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},lp.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},lp.prototype.copy=function(t){return Gf.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},lp.prototype.toJSON=function(){var t=Gf.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},lp.prototype.fromJSON=function(t){return Gf.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},fp.prototype=Object.create(Gf.prototype),fp.prototype.constructor=fp,fp.prototype.isQuadraticBezierCurve=!0,fp.prototype.getPoint=function(t,e){var n=e||new an,r=this.v0,i=this.v1,o=this.v2;return n.set(np(t,r.x,i.x,o.x),np(t,r.y,i.y,o.y)),n},fp.prototype.copy=function(t){return Gf.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},fp.prototype.toJSON=function(){var t=Gf.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},fp.prototype.fromJSON=function(t){return Gf.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},pp.prototype=Object.create(Gf.prototype),pp.prototype.constructor=pp,pp.prototype.isQuadraticBezierCurve3=!0,pp.prototype.getPoint=function(t,e){var n=e||new gn,r=this.v0,i=this.v1,o=this.v2;return n.set(np(t,r.x,i.x,o.x),np(t,r.y,i.y,o.y),np(t,r.z,i.z,o.z)),n},pp.prototype.copy=function(t){return Gf.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},pp.prototype.toJSON=function(){var t=Gf.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},pp.prototype.fromJSON=function(t){return Gf.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},dp.prototype=Object.create(Gf.prototype),dp.prototype.constructor=dp,dp.prototype.isSplineCurve=!0,dp.prototype.getPoint=function(t,e){var n=e||new an,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return n.set(Jf(a,s.x,u.x,c.x,h.x),Jf(a,s.y,u.y,c.y,h.y)),n},dp.prototype.copy=function(t){Gf.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this},dp.prototype.toJSON=function(){var t=Gf.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t},dp.prototype.fromJSON=function(t){Gf.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new an).fromArray(r))}return this};var vp=Object.freeze({__proto__:null,ArcCurve:Wf,CatmullRomCurve3:Qf,CubicBezierCurve:up,CubicBezierCurve3:cp,EllipseCurve:Hf,LineCurve:hp,LineCurve3:lp,QuadraticBezierCurve:fp,QuadraticBezierCurve3:pp,SplineCurve:dp});function mp(){Gf.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function gp(t){mp.call(this),this.type="Path",this.currentPoint=new an,t&&this.setFromPoints(t)}function yp(t){gp.call(this,t),this.uuid=on.generateUUID(),this.type="Shape",this.holes=[]}function bp(t,e){Gn.call(this),this.type="Light",this.color=new Lr(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function _p(t,e,n){bp.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Gn.DefaultUp),this.updateMatrix(),this.groundColor=new Lr(e)}function wp(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new an(512,512),this.map=null,this.mapPass=null,this.matrix=new Tn,this._frustum=new Qi,this._frameExtents=new an(1,1),this._viewportCount=1,this._viewports=[new ln(0,0,1,1)]}function xp(){wp.call(this,new Gi(50,1,.5,500))}function Ep(t,e,n,r,i,o){bp.call(this,t,e),this.type="SpotLight",this.position.copy(Gn.DefaultUp),this.updateMatrix(),this.target=new Gn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new xp}function Sp(){wp.call(this,new Gi(90,1,.5,500)),this._frameExtents=new an(4,2),this._viewportCount=6,this._viewports=[new ln(2,1,1,1),new ln(0,1,1,1),new ln(3,1,1,1),new ln(1,1,1,1),new ln(3,0,1,1),new ln(1,0,1,1)],this._cubeDirections=[new gn(1,0,0),new gn(-1,0,0),new gn(0,0,1),new gn(0,0,-1),new gn(0,1,0),new gn(0,-1,0)],this._cubeUps=[new gn(0,1,0),new gn(0,1,0),new gn(0,1,0),new gn(0,1,0),new gn(0,0,1),new gn(0,0,-1)]}function Tp(t,e,n,r){bp.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Sp}function Mp(t,e,n,r,i,o){Vi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ap(){wp.call(this,new Mp(-5,5,5,-5,.5,500))}function Cp(t,e){bp.call(this,t,e),this.type="DirectionalLight",this.position.copy(Gn.DefaultUp),this.updateMatrix(),this.target=new Gn,this.shadow=new Ap}function Ip(t,e){bp.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Np(t,e,n,r){bp.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Rp(t){Lf.call(this,t),this.textures={}}mp.prototype=Object.assign(Object.create(Gf.prototype),{constructor:mp,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new hp(e,t))},getPoint:function(t){var e=t*this.getLength(),n=this.getCurveLengths(),r=0;while(r<n.length){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Gf.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Gf.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){Gf.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new vp[r.type]).fromJSON(r))}return this}}),gp.prototype=Object.assign(Object.create(mp.prototype),{constructor:gp,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new hp(this.currentPoint.clone(),new an(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){var i=new fp(this.currentPoint.clone(),new an(t,e),new an(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,i,o){var a=new up(this.currentPoint.clone(),new an(t,e),new an(n,r),new an(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new dp(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this},absarc:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this},ellipse:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+u,e+c,n,r,i,o,a,s),this},absellipse:function(t,e,n,r,i,o,a,s){var u=new Hf(t,e,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var h=u.getPoint(1);return this.currentPoint.copy(h),this},copy:function(t){return mp.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=mp.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return mp.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),yp.prototype=Object.assign(Object.create(gp.prototype),{constructor:yp,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){gp.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=gp.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){gp.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new gp).fromJSON(r))}return this}}),bp.prototype=Object.assign(Object.create(Gn.prototype),{constructor:bp,isLight:!0,copy:function(t){return Gn.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),_p.prototype=Object.assign(Object.create(bp.prototype),{constructor:_p,isHemisphereLight:!0,copy:function(t){return bp.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(wp.prototype,{_projScreenMatrix:new Tn,_lightPositionWorld:new gn,_lookTarget:new gn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),i.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(i),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),xp.prototype=Object.assign(Object.create(wp.prototype),{constructor:xp,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=2*on.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),wp.prototype.updateMatrices.call(this,t)}}),Ep.prototype=Object.assign(Object.create(bp.prototype),{constructor:Ep,isSpotLight:!0,copy:function(t){return bp.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Sp.prototype=Object.assign(Object.create(wp.prototype),{constructor:Sp,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(t.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),Tp.prototype=Object.assign(Object.create(bp.prototype),{constructor:Tp,isPointLight:!0,copy:function(t){return bp.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Mp.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Mp,isOrthographicCamera:!0,copy:function(t,e){return Vi.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=u*this.view.offsetX,o=i+u*this.view.width,a-=c*this.view.offsetY,s=a-c*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Gn.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Ap.prototype=Object.assign(Object.create(wp.prototype),{constructor:Ap,isDirectionalLightShadow:!0,updateMatrices:function(t){wp.prototype.updateMatrices.call(this,t)}}),Cp.prototype=Object.assign(Object.create(bp.prototype),{constructor:Cp,isDirectionalLight:!0,copy:function(t){return bp.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ip.prototype=Object.assign(Object.create(bp.prototype),{constructor:Ip,isAmbientLight:!0}),Np.prototype=Object.assign(Object.create(bp.prototype),{constructor:Np,isRectAreaLight:!0,copy:function(t){return bp.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=bp.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Rp.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Rp,load:function(t,e,n,r){var i=this,o=new kf(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var r=new df[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=(new Lr).setHex(t.sheen)),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.vertexTangents&&(r.vertexTangents=t.vertexTangents),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"===typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var i in t.uniforms){var o=t.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new Lr).setHex(o.value);break;case"v2":r.uniforms[i].value=(new an).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new gn).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new ln).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new sn).fromArray(o.value);case"m4":r.uniforms[i].value=(new Tn).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var a in t.extensions)r.extensions[a]=t.extensions[a];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new an).fromArray(s)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new an).fromArray(t.clearcoatNormalScale)),r},setTextures:function(t){return this.textures=t,this}});var Op={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(i){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Pp(){ui.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Lp(t,e,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Gr.call(this,t,e,n),this.meshPerAttribute=r||1}function Dp(t){Lf.call(this,t)}Pp.prototype=Object.assign(Object.create(ui.prototype),{constructor:Pp,isInstancedBufferGeometry:!0,copy:function(t){return ui.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=ui.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),Lp.prototype=Object.assign(Object.create(Gr.prototype),{constructor:Lp,isInstancedBufferAttribute:!0,copy:function(t){return Gr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Gr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Dp.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Dp,load:function(t,e,n,r){var i=this,o=new kf(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=t.isInstancedBufferGeometry?new Pp:new ui,n=t.data.index;if(void 0!==n){var r=new kp[n.type](n.array);e.setIndex(new Gr(r,1))}var i=t.data.attributes;for(var o in i){var a=i[o],s=(r=new kp[a.type](a.array),a.isInstancedBufferAttribute?Lp:Gr),u=new s(r,a.itemSize,a.normalized);void 0!==a.name&&(u.name=a.name),e.setAttribute(o,u)}var c=t.data.morphAttributes;if(c)for(var o in c){for(var h=c[o],l=[],f=0,p=h.length;f<p;f++){a=h[f],r=new kp[a.type](a.array),u=new Gr(r,a.itemSize,a.normalized);void 0!==a.name&&(u.name=a.name),l.push(u)}e.morphAttributes[o]=l}var d=t.data.morphTargetsRelative;d&&(e.morphTargetsRelative=!0);var v=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==v){f=0;for(var m=v.length;f!==m;++f){var g=v[f];e.addGroup(g.start,g.count,g.materialIndex)}}var y=t.data.boundingSphere;if(void 0!==y){var b=new gn;void 0!==y.center&&b.fromArray(y.center),e.boundingSphere=new sr(b,y.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var kp={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Fp(t){Lf.call(this,t)}Fp.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Fp,load:function(t,e,n,r){var i=this,o=""===this.path?Op.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new kf(i.manager);a.setPath(this.path),a.load(t,(function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+t+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),o=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,r,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new yp).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new Dp,i=0,o=t.length;i<o;i++){var a,s=t[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new nf[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new nf[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new nf[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new nf[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new nf[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new nf[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new nf[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new nf[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new nf[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new nf[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new nf[s.type]((new vp[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new nf[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new nf[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],c=0,h=s.shapes.length;c<h;c++){var l=e[s.shapes[c]];u.push(l)}a=new nf[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],c=0,h=s.shapes.length;c<h;c++){l=e[s.shapes[c]];u.push(l)}var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new vp[f.type]).fromJSON(f)),a=new nf[s.type](u,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(t,e){var n={},r={};if(void 0!==t){var i=new Rp;i.setTextures(e);for(var o=0,a=t.length;o<a;o++){var s=t[o];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var h=s.materials[c];void 0===n[h.uuid]&&(n[h.uuid]=i.parse(h)),u.push(n[h.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=Cf.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),e.push(i)}return e},parseImages:function(t,e){var n=this,r={};function i(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var o=new Of(e),a=new zf(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,u=t.length;s<u;s++){var c=t[s],h=c.url;if(Array.isArray(h)){r[c.uuid]=[];for(var l=0,f=h.length;l<f;l++){var p=h[l],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;r[c.uuid].push(i(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;r[c.uuid]=i(d)}}}return r},parseTextures:function(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var a,s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),a=Array.isArray(e[s.image])?new ks(e[s.image]):new hn(e[s.image]),a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,jp)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],zp),a.wrapT=n(s.wrap[1],zp)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,Bp)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,Bp)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(t,e,n){var r;function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":r=new Hn,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new Lr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new kc(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new Dc(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new Gi(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new Mp(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new Ip(t.color,t.intensity);break;case"DirectionalLight":r=new Cp(t.color,t.intensity);break;case"PointLight":r=new Tp(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new Np(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new Ep(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new _p(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(t.geometry),s=o(t.material);r=new Mi(a,s);break;case"InstancedMesh":a=i(t.geometry),s=o(t.material);var u=t.count,c=t.instanceMatrix;r=new dh(a,s,u),r.instanceMatrix=new Gr(new Float32Array(c.array),16);break;case"LOD":r=new ih;break;case"Line":r=new wh(i(t.geometry),o(t.material),t.mode);break;case"LineLoop":r=new Th(i(t.geometry),o(t.material));break;case"LineSegments":r=new Sh(i(t.geometry),o(t.material));break;case"PointCloud":case"Points":r=new Rh(i(t.geometry),o(t.material));break;case"Sprite":r=new th(o(t.material));break;case"Group":r=new Oc;break;default:r=new Gn}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children)for(var h=t.children,l=0;l<h.length;l++)r.add(this.parseObject(h[l],e,n));if("LOD"===t.type){void 0!==t.autoUpdate&&(r.autoUpdate=t.autoUpdate);for(var f=t.levels,p=0;p<f.length;p++){var d=f[p],v=r.getObjectByProperty("uuid",d.object);void 0!==v&&r.addLevel(v,d.distance)}}return r}});var Up,jp={UVMapping:Z,CubeReflectionMapping:tt,CubeRefractionMapping:et,EquirectangularReflectionMapping:nt,EquirectangularRefractionMapping:rt,SphericalReflectionMapping:it,CubeUVReflectionMapping:ot,CubeUVRefractionMapping:at},zp={RepeatWrapping:st,ClampToEdgeWrapping:ut,MirroredRepeatWrapping:ct},Bp={NearestFilter:ht,NearestMipmapNearestFilter:lt,NearestMipmapLinearFilter:ft,LinearFilter:pt,LinearMipmapNearestFilter:dt,LinearMipmapLinearFilter:vt};function Vp(t){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Lf.call(this,t),this.options=void 0}function Gp(){this.type="ShapePath",this.color=new Lr,this.subPaths=[],this.currentPath=null}function Hp(t){this.type="Font",this.data=t}function Wp(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,c=0;c<r.length;c++){var h=r[c];if("\n"===h)s=0,u-=o;else{var l=qp(h,i,s,u,n);s+=l.offsetX,a.push(l.path)}}return a}function qp(t,e,n,r,i){var o=i.glyphs[t]||i.glyphs["?"];if(o){var a,s,u,c,h,l,f,p,d=new Gp;if(o.o)for(var v=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),m=0,g=v.length;m<g;){var y=v[m++];switch(y){case"m":a=v[m++]*e+n,s=v[m++]*e+r,d.moveTo(a,s);break;case"l":a=v[m++]*e+n,s=v[m++]*e+r,d.lineTo(a,s);break;case"q":u=v[m++]*e+n,c=v[m++]*e+r,h=v[m++]*e+n,l=v[m++]*e+r,d.quadraticCurveTo(h,l,u,c);break;case"b":u=v[m++]*e+n,c=v[m++]*e+r,h=v[m++]*e+n,l=v[m++]*e+r,f=v[m++]*e+n,p=v[m++]*e+r,d.bezierCurveTo(h,l,f,p,u,c);break}}return{offsetX:o.ha*e,path:d}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".")}function Yp(t){Lf.call(this,t)}Vp.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Vp,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Rf.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===i.options?createImageBitmap(t):createImageBitmap(t,i.options)})).then((function(n){Rf.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}),Object.assign(Gp.prototype,{moveTo:function(t,e){return this.currentPath=new gp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new yp;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],u=-u,s=e[i],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var h=c*(t.x-a.x)-u*(t.y-a.y);if(0===h)return!0;if(h<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i=Rl.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var a,s,u,c=[];if(1===o.length)return s=o[0],u=new yp,u.curves=s.curves,c.push(u),c;var h=!i(o[0].getPoints());h=t?!h:h;var l,f,p=[],d=[],v=[],m=0;d[m]=void 0,v[m]=[];for(var g=0,y=o.length;g<y;g++)s=o[g],l=s.getPoints(),a=i(l),a=t?!a:a,a?(!h&&d[m]&&m++,d[m]={s:new yp,p:l},d[m].s.curves=s.curves,h&&m++,v[m]=[]):v[m].push({h:s,p:l[0]});if(!d[0])return n(o);if(d.length>1){for(var b=!1,_=[],w=0,x=d.length;w<x;w++)p[w]=[];for(w=0,x=d.length;w<x;w++)for(var E=v[w],S=0;S<E.length;S++){for(var T=E[S],M=!0,A=0;A<d.length;A++)r(T.p,d[A].p)&&(w!==A&&_.push({froms:w,tos:A,hole:S}),M?(M=!1,p[A].push(T)):b=!0);M&&p[w].push(T)}_.length>0&&(b||(v=p))}g=0;for(var C=d.length;g<C;g++){u=d[g].s,c.push(u),f=v[g];for(var I=0,N=f.length;I<N;I++)u.holes.push(f[I].h)}return c}}),Object.assign(Hp.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],r=Wp(t,e,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Yp.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Yp,load:function(t,e,n,r){var i=this,o=new kf(this.manager);o.setPath(this.path),o.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=i.parse(n);e&&e(r)}),n,r)},parse:function(t){return new Hp(t)}});var Xp={getContext:function(){return void 0===Up&&(Up=new(window.AudioContext||window.webkitAudioContext)),Up},setContext:function(t){Up=t}};function Kp(t){Lf.call(this,t)}function $p(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new gn)}function Qp(t,e){bp.call(this,void 0,e),this.sh=void 0!==t?t:new $p}function Jp(t,e,n){Qp.call(this,void 0,n);var r=(new Lr).set(t),i=(new Lr).set(e),o=new gn(r.r,r.g,r.b),a=new gn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}function Zp(t,e){Qp.call(this,void 0,e);var n=(new Lr).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Kp.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Kp,load:function(t,e,n,r){var i=new kf(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(t,(function(t){var n=t.slice(0),r=Xp.getContext();r.decodeAudioData(n,(function(t){e(t)}))}),n,r)}}),Object.assign($p.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e},getIrradianceAt:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},addScaledSH:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}}),Object.assign($p,{getBasisAt:function(t,e){var n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}),Qp.prototype=Object.assign(Object.create(bp.prototype),{constructor:Qp,isLightProbe:!0,copy:function(t){return bp.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){var e=bp.prototype.toJSON.call(this,t);return e}}),Jp.prototype=Object.assign(Object.create(Qp.prototype),{constructor:Jp,isHemisphereLightProbe:!0,copy:function(t){return Qp.prototype.copy.call(this,t),this},toJSON:function(t){var e=Qp.prototype.toJSON.call(this,t);return e}}),Zp.prototype=Object.assign(Object.create(Qp.prototype),{constructor:Zp,isAmbientLightProbe:!0,copy:function(t){return Qp.prototype.copy.call(this,t),this},toJSON:function(t){var e=Qp.prototype.toJSON.call(this,t);return e}});var td=new Tn,ed=new Tn;function nd(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function rd(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(nd.prototype,{update:function(t){var e=this._cache,n=e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep;if(n){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var r,i,o=t.projectionMatrix.clone(),a=e.eyeSep/2,s=a*e.near/e.focus,u=e.near*Math.tan(on.DEG2RAD*e.fov*.5)/e.zoom;ed.elements[12]=-a,td.elements[12]=a,r=-u*e.aspect+s,i=u*e.aspect+s,o.elements[0]=2*e.near/(i-r),o.elements[8]=(i+r)/(i-r),this.cameraL.projectionMatrix.copy(o),r=-u*e.aspect-s,i=u*e.aspect-s,o.elements[0]=2*e.near/(i-r),o.elements[8]=(i+r)/(i-r),this.cameraR.projectionMatrix.copy(o)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(ed),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(td)}}),Object.assign(rd.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var id=new gn,od=new dn,ad=new gn,sd=new gn;function ud(){Gn.call(this),this.type="AudioListener",this.context=Xp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new rd}function cd(t){Gn.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}ud.prototype=Object.assign(Object.create(Gn.prototype),{constructor:ud,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){Gn.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(id,od,ad),sd.set(0,0,-1).applyQuaternion(od),e.positionX){var r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(id.x,r),e.positionY.linearRampToValueAtTime(id.y,r),e.positionZ.linearRampToValueAtTime(id.z,r),e.forwardX.linearRampToValueAtTime(sd.x,r),e.forwardY.linearRampToValueAtTime(sd.y,r),e.forwardZ.linearRampToValueAtTime(sd.z,r),e.upX.linearRampToValueAtTime(n.x,r),e.upY.linearRampToValueAtTime(n.y,r),e.upZ.linearRampToValueAtTime(n.z,r)}else e.setPosition(id.x,id.y,id.z),e.setOrientation(sd.x,sd.y,sd.z,n.x,n.y,n.z)}}),cd.prototype=Object.assign(Object.create(Gn.prototype),{constructor:cd,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var hd=new gn,ld=new dn,fd=new gn,pd=new gn;function dd(t){cd.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function vd(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function md(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}dd.prototype=Object.assign(Object.create(cd.prototype),{constructor:dd,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(Gn.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(hd,ld,fd),pd.set(0,0,1).applyQuaternion(ld);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(hd.x,n),e.positionY.linearRampToValueAtTime(hd.y,n),e.positionZ.linearRampToValueAtTime(hd.z,n),e.orientationX.linearRampToValueAtTime(pd.x,n),e.orientationY.linearRampToValueAtTime(pd.y,n),e.orientationZ.linearRampToValueAtTime(pd.z,n)}else e.setPosition(hd.x,hd.y,hd.z),e.setOrientation(pd.x,pd.y,pd.z)}}}),Object.assign(vd.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(md.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{o+=e;var s=e/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*e;this._mixBufferRegion(n,r,a,1-i,e)}for(var s=e,u=e+e;s!==u;++s)if(n[s]!==n[s+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){dn.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}});var gd="\\[\\]\\.:\\/",yd=new RegExp("["+gd+"]","g"),bd="[^"+gd+"]",_d="[^"+gd.replace("\\.","")+"]",wd=/((?:WC+[\/:])*)/.source.replace("WC",bd),xd=/(WCOD+)?/.source.replace("WCOD",_d),Ed=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bd),Sd=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bd),Td=new RegExp("^"+wd+xd+Ed+Sd+"$"),Md=["material","materials","bones"];function Ad(t,e,n){var r=n||Cd.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function Cd(t,e,n){this.path=e,this.parsedPath=n||Cd.parseTrackName(e),this.node=Cd.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Id(){this.uuid=on.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Nd(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,o=new Array(i),a={endingStart:Le,endingEnd:Le},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ie,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Rd(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Od(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Pd(t,e,n){Fc.call(this,t,e),this.meshPerAttribute=n||1}function Ld(t,e,n,r){this.ray=new vr(t,e),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new In,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Dd(t,e){return t.distance-e.distance}function kd(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r)for(var i=t.children,o=0,a=i.length;o<a;o++)kd(i[o],e,n,!0)}function Fd(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Ud(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}Object.assign(Ad.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Cd,{Composite:Ad,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Cd.Composite(t,e,n):new Cd(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(yd,"")},parseTrackName:function(t){var e=Td.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Md.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.uuid===e)return i;var o=r(i.children);if(o)return o}return null},i=r(t.children);if(i)return i}return null}}),Object.assign(Cd.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=Cd.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===i){i=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var h=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Cd.prototype,{_getValue_unbound:Cd.prototype.getValue,_setValue_unbound:Cd.prototype.setValue}),Object.assign(Id.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,h=arguments.length;c!==h;++c){var l=arguments[c],f=l.uuid,p=r[f];if(void 0===p){p=e++,r[f]=p,t.push(l);for(var d=0,v=s;d!==v;++d)a[d].push(new Cd(l,i[d],o[d]))}else if(p<n){u=t[p];var m=--n,g=t[m];r[g.uuid]=p,t[p]=g,r[f]=m,t[m]=l;for(d=0,v=s;d!==v;++d){var y=a[d],b=y[m],_=y[p];y[p]=b,void 0===_&&(_=new Cd(l,i[d],o[d])),y[m]=_}}else t[p]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=n[u];if(void 0!==c&&c>=e){var h=e++,l=t[h];n[l.uuid]=c,t[c]=l,n[u]=h,t[h]=s;for(var f=0,p=i;f!==p;++f){var d=r[f],v=d[h],m=d[c];d[c]=v,d[h]=m}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],c=u.uuid,h=r[c];if(void 0!==h)if(delete r[c],h<n){var l=--n,f=t[l],p=--e,d=t[p];r[f.uuid]=h,t[h]=f,r[d.uuid]=l,t[l]=d,t.pop();for(var v=0,m=o;v!==m;++v){var g=i[v],y=g[l],b=g[p];g[h]=y,g[l]=b,g.pop()}}else{p=--e,d=t[p];r[d.uuid]=h,t[h]=d,t.pop();for(v=0,m=o;v!==m;++v){g=i[v];g[h]=g[p],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,h=new Array(u);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(h);for(var l=c,f=s.length;l!==f;++l){var p=s[l];h[l]=new Cd(p,t,e)}return h},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],u=t[a];e[u]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(Nd.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,h=0,l=u.length;h!==l;++h)u[h].evaluate(a),c[h].accumulate(r,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===Ne;if(0===t)return-1===i?e:o&&1===(1&i)?n-e:e;if(r===Ce){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=e;if(o&&1===(1&i))return n-e}return e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=De,r.endingEnd=De):(r.endingStart=t?this.zeroSlopeAtStart?De:Le:ke,r.endingEnd=e?this.zeroSlopeAtEnd?De:Le:ke)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}),Rd.prototype=Object.assign(Object.create(tn.prototype),{constructor:Rd,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var h=0;h!==i;++h){var l=r[h],f=l.name,p=c[f];if(void 0!==p)o[h]=p;else{if(p=o[h],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,f));continue}var d=e&&e._propertyBindings[h].binding.parsedPath;p=new md(Cd.create(n,f,d),l.ValueTypeName,l.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,s,f),o[h]=p}a[h].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),t._byClipCacheIndex=null;var h=a.actionByRoot,l=(t._localRoot||this._root).uuid;delete h[l],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new yf(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"===typeof t?Cf.findByName(n,t):t,o=null!==i?i.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new Nd(this,i,e);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"===typeof t?Cf.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a){var s=e[a];s._update(r,t,i,o)}var u=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)u[a].apply(o);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var c=u._cacheIndex,h=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,e[c]=h,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[e];if(void 0!==s)for(var u in s){var c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Od.prototype.clone=function(){return new Od(void 0===this.value.clone?this.value:this.value.clone())},Pd.prototype=Object.assign(Object.create(Fc.prototype),{constructor:Pd,isInstancedInterleavedBuffer:!0,copy:function(t){return Fc.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Ld.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var r=n||[];return kd(t,this,r,e),r.sort(Dd),r},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)kd(t[i],this,r,e);return r.sort(Dd),r}}),Object.assign(Fd.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(on.clamp(e/this.radius,-1,1))),this}}),Object.assign(Ud.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var jd=new an;function zd(t,e){this.min=void 0!==t?t:new an(1/0,1/0),this.max=void 0!==e?e:new an(-1/0,-1/0)}Object.assign(zd.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=jd.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new an),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new an),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new an),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new an),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=jd.copy(t).clamp(this.min,this.max);return e.sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Bd=new gn,Vd=new gn;function Gd(t,e){this.start=void 0!==t?t:new gn,this.end=void 0!==e?e:new gn}function Hd(t){Gn.call(this),this.material=t,this.render=function(){}}Object.assign(Gd.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new gn),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new gn),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new gn),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){Bd.subVectors(t,this.start),Vd.subVectors(this.end,this.start);var n=Vd.dot(Vd),r=Vd.dot(Bd),i=r/n;return e&&(i=on.clamp(i,0,1)),i},closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new gn),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Hd.prototype=Object.create(Gn.prototype),Hd.prototype.constructor=Hd,Hd.prototype.isImmediateRenderObject=!0;var Wd=new gn;function qd(t,e){Gn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new ui,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1,a=32;i<a;i++,o++){var s=i/a*Math.PI*2,u=o/a*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(u),Math.sin(u),1)}n.setAttribute("position",new Qr(r,3));var c=new vh({fog:!1,toneMapped:!1});this.cone=new Sh(n,c),this.add(this.cone),this.update()}qd.prototype=Object.create(Gn.prototype),qd.prototype.constructor=qd,qd.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},qd.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Wd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Wd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Yd=new gn,Xd=new Tn,Kd=new Tn;function $d(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,$d(t.children[n]));return e}function Qd(t){for(var e=$d(t),n=new ui,r=[],i=[],o=new Lr(0,0,1),a=new Lr(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Qr(r,3)),n.setAttribute("color",new Qr(i,3));var c=new vh({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});Sh.call(this,n,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Jd(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var r=new Bl(e,4,2),i=new Br({wireframe:!0,fog:!1,toneMapped:!1});Mi.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}Qd.prototype=Object.create(Sh.prototype),Qd.prototype.constructor=Qd,Qd.prototype.isSkeletonHelper=!0,Qd.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,r=n.getAttribute("position");Kd.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<e.length;i++){var a=e[i];a.parent&&a.parent.isBone&&(Xd.multiplyMatrices(Kd,a.matrixWorld),Yd.setFromMatrixPosition(Xd),r.setXYZ(o,Yd.x,Yd.y,Yd.z),Xd.multiplyMatrices(Kd,a.parent.matrixWorld),Yd.setFromMatrixPosition(Xd),r.setXYZ(o+1,Yd.x,Yd.y,Yd.z),o+=2)}n.getAttribute("position").needsUpdate=!0,Gn.prototype.updateMatrixWorld.call(this,t)},Jd.prototype=Object.create(Mi.prototype),Jd.prototype.constructor=Jd,Jd.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Jd.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Zd=new gn,tv=new Lr,ev=new Lr;function nv(t,e,n){Gn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Wh(e);r.rotateY(.5*Math.PI),this.material=new Br({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Gr(o,3)),this.add(new Mi(r,this.material)),this.update()}function rv(t,e,n,r){t=t||10,e=e||10,n=new Lr(void 0!==n?n:4473924),r=new Lr(void 0!==r?r:8947848);for(var i=e/2,o=t/e,a=t/2,s=[],u=[],c=0,h=0,l=-a;c<=e;c++,l+=o){s.push(-a,0,l,a,0,l),s.push(l,0,-a,l,0,a);var f=c===i?n:r;f.toArray(u,h),h+=3,f.toArray(u,h),h+=3,f.toArray(u,h),h+=3,f.toArray(u,h),h+=3}var p=new ui;p.setAttribute("position",new Qr(s,3)),p.setAttribute("color",new Qr(u,3));var d=new vh({vertexColors:!0,toneMapped:!1});Sh.call(this,p,d)}function iv(t,e,n,r,i,o){t=t||10,e=e||16,n=n||8,r=r||64,i=new Lr(void 0!==i?i:4473924),o=new Lr(void 0!==o?o:8947848);var a,s,u,c,h,l,f,p=[],d=[];for(c=0;c<=e;c++)u=c/e*(2*Math.PI),a=Math.sin(u)*t,s=Math.cos(u)*t,p.push(0,0,0),p.push(a,0,s),f=1&c?i:o,d.push(f.r,f.g,f.b),d.push(f.r,f.g,f.b);for(c=0;c<=n;c++)for(f=1&c?i:o,l=t-t/n*c,h=0;h<r;h++)u=h/r*(2*Math.PI),a=Math.sin(u)*l,s=Math.cos(u)*l,p.push(a,0,s),d.push(f.r,f.g,f.b),u=(h+1)/r*(2*Math.PI),a=Math.sin(u)*l,s=Math.cos(u)*l,p.push(a,0,s),d.push(f.r,f.g,f.b);var v=new ui;v.setAttribute("position",new Qr(p,3)),v.setAttribute("color",new Qr(d,3));var m=new vh({vertexColors:!0,toneMapped:!1});Sh.call(this,v,m)}nv.prototype=Object.create(Gn.prototype),nv.prototype.constructor=nv,nv.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},nv.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");tv.copy(this.light.color),ev.copy(this.light.groundColor);for(var n=0,r=e.count;n<r;n++){var i=n<r/2?tv:ev;e.setXYZ(n,i.r,i.g,i.b)}e.needsUpdate=!0}t.lookAt(Zd.setFromMatrixPosition(this.light.matrixWorld).negate())},rv.prototype=Object.assign(Object.create(Sh.prototype),{constructor:rv,copy:function(t){return Sh.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),iv.prototype=Object.create(Sh.prototype),iv.prototype.constructor=iv;var ov=new gn,av=new gn,sv=new gn;function uv(t,e,n){Gn.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var r=new ui;r.setAttribute("position",new Qr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new vh({fog:!1,toneMapped:!1});this.lightPlane=new wh(r,i),this.add(this.lightPlane),r=new ui,r.setAttribute("position",new Qr([0,0,0,0,0,1],3)),this.targetLine=new wh(r,i),this.add(this.targetLine),this.update()}uv.prototype=Object.create(Gn.prototype),uv.prototype.constructor=uv,uv.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},uv.prototype.update=function(){ov.setFromMatrixPosition(this.light.matrixWorld),av.setFromMatrixPosition(this.light.target.matrixWorld),sv.subVectors(av,ov),this.lightPlane.lookAt(av),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(av),this.targetLine.scale.z=sv.length()};var cv=new gn,hv=new Vi;function lv(t){var e=new ui,n=new vh({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new Lr(16755200),s=new Lr(16711680),u=new Lr(43775),c=new Lr(16777215),h=new Lr(3355443);function l(t,e,n){f(t,n),f(e,n)}function f(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}l("n1","n2",a),l("n2","n4",a),l("n4","n3",a),l("n3","n1",a),l("f1","f2",a),l("f2","f4",a),l("f4","f3",a),l("f3","f1",a),l("n1","f1",a),l("n2","f2",a),l("n3","f3",a),l("n4","f4",a),l("p","n1",s),l("p","n2",s),l("p","n3",s),l("p","n4",s),l("u1","u2",u),l("u2","u3",u),l("u3","u1",u),l("c","t",c),l("p","c",h),l("cn1","cn2",h),l("cn3","cn4",h),l("cf1","cf2",h),l("cf3","cf4",h),e.setAttribute("position",new Qr(r,3)),e.setAttribute("color",new Qr(i,3)),Sh.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function fv(t,e,n,r,i,o,a){cv.set(i,o,a).unproject(r);var s=e[t];if(void 0!==s)for(var u=n.getAttribute("position"),c=0,h=s.length;c<h;c++)u.setXYZ(s[c],cv.x,cv.y,cv.z)}lv.prototype=Object.create(Sh.prototype),lv.prototype.constructor=lv,lv.prototype.update=function(){var t=this.geometry,e=this.pointMap,n=1,r=1;hv.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fv("c",e,t,hv,0,0,-1),fv("t",e,t,hv,0,0,1),fv("n1",e,t,hv,-n,-r,-1),fv("n2",e,t,hv,n,-r,-1),fv("n3",e,t,hv,-n,r,-1),fv("n4",e,t,hv,n,r,-1),fv("f1",e,t,hv,-n,-r,1),fv("f2",e,t,hv,n,-r,1),fv("f3",e,t,hv,-n,r,1),fv("f4",e,t,hv,n,r,1),fv("u1",e,t,hv,.7*n,1.1*r,-1),fv("u2",e,t,hv,.7*-n,1.1*r,-1),fv("u3",e,t,hv,0,2*r,-1),fv("cf1",e,t,hv,-n,0,1),fv("cf2",e,t,hv,n,0,1),fv("cf3",e,t,hv,0,-r,1),fv("cf4",e,t,hv,0,r,1),fv("cn1",e,t,hv,-n,0,-1),fv("cn2",e,t,hv,n,0,-1),fv("cn3",e,t,hv,0,-r,-1),fv("cn4",e,t,hv,0,r,-1),t.getAttribute("position").needsUpdate=!0};var pv=new ir;function dv(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new ui;i.setIndex(new Gr(n,1)),i.setAttribute("position",new Gr(r,3)),Sh.call(this,i,new vh({color:e,toneMapped:!1})),this.matrixAutoUpdate=!1,this.update()}function vv(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new ui;i.setIndex(new Gr(n,1)),i.setAttribute("position",new Qr(r,3)),Sh.call(this,i,new vh({color:e,toneMapped:!1})),this.geometry.computeBoundingSphere()}function mv(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var r=void 0!==n?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new ui;o.setAttribute("position",new Qr(i,3)),o.computeBoundingSphere(),wh.call(this,o,new vh({color:r,toneMapped:!1}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new ui;s.setAttribute("position",new Qr(a,3)),s.computeBoundingSphere(),this.add(new Mi(s,new Br({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}dv.prototype=Object.create(Sh.prototype),dv.prototype.constructor=dv,dv.prototype.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&pv.setFromObject(this.object),!pv.isEmpty()){var e=pv.min,n=pv.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},dv.prototype.setFromObject=function(t){return this.object=t,this.update(),this},dv.prototype.copy=function(t){return Sh.prototype.copy.call(this,t),this.object=t.object,this},dv.prototype.clone=function(){return(new this.constructor).copy(this)},vv.prototype=Object.create(Sh.prototype),vv.prototype.constructor=vv,vv.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Gn.prototype.updateMatrixWorld.call(this,t))},mv.prototype=Object.create(wh.prototype),mv.prototype.constructor=mv,mv.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?l:h,this.lookAt(this.plane.normal),Gn.prototype.updateMatrixWorld.call(this,t)};var gv,yv,bv=new gn;function _v(t,e,n,r,i,o){Gn.call(this),void 0===t&&(t=new gn(0,0,1)),void 0===e&&(e=new gn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===gv&&(gv=new ui,gv.setAttribute("position",new Qr([0,0,0,0,1,0],3)),yv=new Ql(0,.5,1,5,1),yv.translate(0,-.5,0)),this.position.copy(e),this.line=new wh(gv,new vh({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mi(yv,new Br({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function wv(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ui;r.setAttribute("position",new Qr(e,3)),r.setAttribute("color",new Qr(n,3));var i=new vh({vertexColors:!0,toneMapped:!1});Sh.call(this,r,i)}_v.prototype=Object.create(Gn.prototype),_v.prototype.constructor=_v,_v.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{bv.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(bv,e)}},_v.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},_v.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},_v.prototype.copy=function(t){return Gn.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},_v.prototype.clone=function(){return(new this.constructor).copy(this)},wv.prototype=Object.create(Sh.prototype),wv.prototype.constructor=wv;var xv=4,Ev=8,Sv=Math.pow(2,Ev),Tv=[.125,.215,.35,.446,.526,.582],Mv=Ev-xv+1+Tv.length,Av=20,Cv={[Ue]:0,[je]:1,[Be]:2,[Ge]:3,[He]:4,[We]:5,[ze]:6},Iv=new Mp,Nv=tm(Av),Rv=null,Ov=null,{_lodPlanes:Pv,_sizeLods:Lv,_sigmas:Dv}=Gv(),kv=null,Fv=null,Uv=null,jv=(1+Math.sqrt(5))/2,zv=1/jv,Bv=[new gn(1,1,1),new gn(-1,1,1),new gn(1,1,-1),new gn(-1,1,-1),new gn(0,jv,zv),new gn(0,jv,-zv),new gn(zv,0,jv),new gn(-zv,0,jv),new gn(jv,zv,0),new gn(-jv,zv,0)];function Vv(t){Fv=t,Xv(Nv)}function Gv(){for(var t=[],e=[],n=[],r=Ev,i=0;i<Mv;i++){var o=Math.pow(2,r);e.push(o);var a=1/o;i>Ev-xv?a=Tv[i-Ev+xv-1]:0==i&&(a=0),n.push(a);for(var s=1/(o-1),u=-s/2,c=1+s/2,h=[u,u,c,u,c,c,u,u,c,c,u,c],l=6,f=6,p=3,d=2,v=1,m=new Float32Array(p*f*l),g=new Float32Array(d*f*l),y=new Float32Array(v*f*l),b=0;b<l;b++){var _=b%3*2/3-1,w=b>2?0:-1,x=[_,w,0,_+2/3,w,0,_+2/3,w+1,0,_,w,0,_+2/3,w+1,0,_,w+1,0];m.set(x,p*f*b),g.set(h,d*f*b);var E=[b,b,b,b,b,b];y.set(E,v*f*b)}var S=new ui;S.setAttribute("position",new Gr(m,p)),S.setAttribute("uv",new Gr(g,d)),S.setAttribute("faceIndex",new Gr(y,v)),t.push(S),r>xv&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function Hv(t){var e={magFilter:ht,minFilter:ht,generateMipmaps:!1,type:t?t.type:mt,format:t?t.format:Pt,encoding:t?t.encoding:Be,depthBuffer:!1,stencilBuffer:!1},n=Kv(e);return n.depthBuffer=!t,kv=Kv(e),n}function Wv(t){kv.dispose(),Fv.setRenderTarget(Uv),t.scissorTest=!1,t.setSize(t.width,t.height)}function qv(t,e,n,r){var i=90,o=1,a=new Gi(i,o,e,n),s=[1,1,1,1,-1,1],u=[1,1,-1,-1,-1,1],c=Fv.outputEncoding,h=Fv.toneMapping,l=Fv.toneMappingExposure,f=Fv.getClearColor(),p=Fv.getClearAlpha();Fv.toneMapping=X,Fv.toneMappingExposure=1,Fv.outputEncoding=Ue,t.scale.z*=-1;var d=t.background;if(d&&d.isColor){d.convertSRGBToLinear();var v=Math.max(d.r,d.g,d.b),m=Math.min(Math.max(Math.ceil(Math.log2(v)),-128),127);d=d.multiplyScalar(Math.pow(2,-m));var g=(m+128)/255;Fv.setClearColor(d,g),t.background=null}for(var y=0;y<6;y++){var b=y%3;0==b?(a.up.set(0,s[y],0),a.lookAt(u[y],0,0)):1==b?(a.up.set(0,0,s[y]),a.lookAt(0,u[y],0)):(a.up.set(0,s[y],0),a.lookAt(0,0,u[y])),$v(r,b*Sv,y>2?Sv:0,Sv,Sv),Fv.setRenderTarget(r),Fv.render(t,a)}Fv.toneMapping=h,Fv.toneMappingExposure=l,Fv.outputEncoding=c,Fv.setClearColor(f,p),t.scale.z*=-1}function Yv(t,e){var n=new Hn;t.isCubeTexture?null==Ov&&(Ov=nm()):null==Rv&&(Rv=em());var r=t.isCubeTexture?Ov:Rv;n.add(new Mi(Pv[0],r));var i=r.uniforms;i["envMap"].value=t,t.isCubeTexture||i["texelSize"].value.set(1/t.image.width,1/t.image.height),i["inputEncoding"].value=Cv[t.encoding],i["outputEncoding"].value=Cv[t.encoding],$v(e,0,0,3*Sv,2*Sv),Fv.setRenderTarget(e),Fv.render(n,Iv)}function Xv(t){var e=new Hn;e.add(new Mi(Pv[0],t)),Fv.compile(e,Iv)}function Kv(t){var e=new fn(3*Sv,3*Sv,t);return e.texture.mapping=ot,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function $v(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Qv(t){var e=Fv.autoClear;Fv.autoClear=!1;for(var n=1;n<Mv;n++){var r=Math.sqrt(Dv[n]*Dv[n]-Dv[n-1]*Dv[n-1]),i=Bv[(n-1)%Bv.length];Jv(t,n-1,n,r,i)}Fv.autoClear=e}function Jv(t,e,n,r,i){Zv(t,kv,e,n,r,"latitudinal",i),Zv(kv,t,n,n,r,"longitudinal",i)}function Zv(t,e,n,r,i,o,a){"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var s=3,u=new Hn;u.add(new Mi(Pv[r],Nv));var c=Nv.uniforms,h=Lv[n]-1,l=isFinite(i)?Math.PI/(2*h):2*Math.PI/(2*Av-1),f=i/l,p=isFinite(i)?1+Math.floor(s*f):Av;p>Av&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${Av}`);for(var d=[],v=0,m=0;m<Av;++m){var g=m/f,y=Math.exp(-g*g/2);d.push(y),0==m?v+=y:m<p&&(v+=2*y)}for(m=0;m<d.length;m++)d[m]=d[m]/v;c["envMap"].value=t.texture,c["samples"].value=p,c["weights"].value=d,c["latitudinal"].value="latitudinal"===o,a&&(c["poleAxis"].value=a),c["dTheta"].value=l,c["mipInt"].value=Ev-n,c["inputEncoding"].value=Cv[t.texture.encoding],c["outputEncoding"].value=Cv[t.texture.encoding];var b=Lv[r],_=(g=3*Math.max(0,Sv-2*b),(0===r?0:2*Sv)+2*b*(r>Ev-xv?r-Ev+xv:0));$v(e,g,_,3*b,2*b),Fv.setRenderTarget(e),Fv.render(u,Iv)}function tm(t){var e=new Float32Array(t),n=new gn(0,1,0),r=new of({defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Cv[Ue]},outputEncoding:{value:Cv[Ue]}},vertexShader:rm(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n${im()}\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:d,depthTest:!1,depthWrite:!1});return r.type="SphericalGaussianBlur",r}function em(){var t=new an(1,1),e=new of({uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:Cv[Ue]},outputEncoding:{value:Cv[Ue]}},vertexShader:rm(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n${im()}\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:d,depthTest:!1,depthWrite:!1});return e.type="EquirectangularToCubeUV",e}function nm(){var t=new of({uniforms:{envMap:{value:null},inputEncoding:{value:Cv[Ue]},outputEncoding:{value:Cv[Ue]}},vertexShader:rm(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n${im()}\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:d,depthTest:!1,depthWrite:!1});return t.type="CubemapToCubeUV",t}function rm(){return"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t"}function im(){return"\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t"}Vv.prototype={constructor:Vv,fromScene:function(t,e=0,n=.1,r=100){Uv=Fv.getRenderTarget();var i=Hv();return qv(t,n,r,i),e>0&&Jv(i,0,0,e),Qv(i),Wv(i),i},fromEquirectangular:function(t){return t.magFilter=ht,t.minFilter=ht,t.generateMipmaps=!1,this.fromCubemap(t)},fromCubemap:function(t){Uv=Fv.getRenderTarget();var e=Hv(t);return Yv(t,e),Qv(e),Wv(e),e},compileCubemapShader:function(){null==Ov&&(Ov=nm(),Xv(Ov))},compileEquirectangularShader:function(){null==Rv&&(Rv=em(),Xv(Rv))},dispose:function(){Nv.dispose(),null!=Ov&&Ov.dispose(),null!=Rv&&Rv.dispose();for(var t=0;t<Pv.length;t++)Pv[t].dispose()}};function om(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Qf.call(this,t),this.type="catmullrom",this.closed=!0}function am(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Qf.call(this,t),this.type="catmullrom"}function sm(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Qf.call(this,t),this.type="catmullrom"}Gf.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Gf.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(mp.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Pi,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new gn(i.x,i.y,i.z||0))}return e}}),Object.assign(gp.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),om.prototype=Object.create(Qf.prototype),am.prototype=Object.create(Qf.prototype),sm.prototype=Object.create(Qf.prototype),Object.assign(sm.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),rv.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Qd.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Lf.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Op.extractUrlBase(t)}}),Lf.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(Fp.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(zd.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(ir.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Qi.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Gd.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(on,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),on.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),on.ceilPowerOfTwo(t)}}),Object.assign(sn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Tn.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new gn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),br.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},dn.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(vr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Nr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Nr,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Nr.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Nr.getNormal(t,e,n,r)}}),Object.assign(yp.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ll(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ql(this,t)}}),Object.assign(an.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(gn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ln.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Pi.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Gn.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Gn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Mi.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Mi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Fe},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(ih.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(uh.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),oh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Gf.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Gi.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(bp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Gr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ze},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ze)}}}),Object.assign(Gr.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Ze:Je),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(ui.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Gr(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(ui.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ld.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Fc.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Ze},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Fc.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Ze:Je),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Dl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Od.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(zr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Lr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===p}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(uf.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Bi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Lc.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Lc.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?je:Ue}}}),Object.defineProperties(Ac.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(fn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(cd.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,n=new Kp;return n.load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),vd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},qi.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};un.crossOrigin=void 0,un.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Vf;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},un.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Bf;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},un.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},un.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}}))},"5b17":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("5a89"),i=n("1b53"),o={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float damp;","uniform sampler2D tOld;","uniform sampler2D tNew;","varying vec2 vUv;","vec4 when_gt( vec4 x, float y ) {","\treturn max( sign( x - y ), 0.0 );","}","void main() {","\tvec4 texelOld = texture2D( tOld, vUv );","\tvec4 texelNew = texture2D( tNew, vUv );","\ttexelOld *= damp * when_gt( texelOld, 0.1 );","\tgl_FragColor = max(texelNew, texelOld);","}"].join("\n")},a=function(t){i["a"].call(this),void 0===o&&console.error("AfterimagePass relies on AfterimageShader"),this.shader=o,this.uniforms=r["x"].clone(this.shader.uniforms),this.uniforms["damp"].value=void 0!==t?t:.96,this.textureComp=new r["z"](window.innerWidth,window.innerHeight,{minFilter:r["e"],magFilter:r["k"],format:r["q"]}),this.textureOld=new r["z"](window.innerWidth,window.innerHeight,{minFilter:r["e"],magFilter:r["k"],format:r["q"]}),this.shaderMaterial=new r["s"]({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new i["a"].FullScreenQuad(this.shaderMaterial);var e=new r["h"];this.copyFsQuad=new i["a"].FullScreenQuad(e)};a.prototype=Object.assign(Object.create(i["a"].prototype),{constructor:a,render:function(t,e,n){this.uniforms["tOld"].value=this.textureOld.texture,this.uniforms["tNew"].value=n.texture,t.setRenderTarget(this.textureComp),this.compFsQuad.render(t),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(t.setRenderTarget(null),this.copyFsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.copyFsQuad.render(t));var r=this.textureOld;this.textureOld=this.textureComp,this.textureComp=r},setSize:function(t,e){this.textureComp.setSize(t,e),this.textureOld.setSize(t,e)}})},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5cc6":function(t,e,n){var r=n("74e8");r("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"5d60":function(t,e,n){"use strict";var r=n("cbf1"),i=n.n(r);i.a},"5f96":function(t,e,n){"use strict";var r=n("ebb5"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].join;o("join",(function(t){return a.apply(i(this),arguments)}))},"60a3":function(t,e,n){"use strict";n.d(e,"a",(function(){return E})),n.d(e,"c",(function(){return r["a"]})),n.d(e,"b",(function(){return M})),n.d(e,"d",(function(){return A}));var r=n("2b0e");
/**
  * vue-class-component v7.2.3
  * (c) 2015-present Evan You
  * @license MIT
  */function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return s(t)||u(t)||c()}function s(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(){return"undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function l(t,e){f(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(n){f(t.prototype,e.prototype,n)})),Object.getOwnPropertyNames(e).forEach((function(n){f(t,e,n)}))}function f(t,e,n){var r=n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e);r.forEach((function(r){var i=n?Reflect.getOwnMetadata(r,e,n):Reflect.getOwnMetadata(r,e);n?Reflect.defineMetadata(r,i,t,n):Reflect.defineMetadata(r,i,t)}))}var p={__proto__:[]},d=p instanceof Array;function v(t){return function(e,n,r){var i="function"===typeof e?e:e.constructor;i.__decorators__||(i.__decorators__=[]),"number"!==typeof r&&(r=void 0),i.__decorators__.push((function(e){return t(e,n,r)}))}}function m(t){var e=i(t);return null==t||"object"!==e&&"function"!==e}function g(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)t.hasOwnProperty(r)||n.push(r);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})}))};var r=new e;e.prototype._init=n;var i={};return Object.keys(r).forEach((function(t){void 0!==r[t]&&(i[t]=r[t])})),i}var y=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(t){if("constructor"!==t)if(y.indexOf(t)>-1)e[t]=n[t];else{var r=Object.getOwnPropertyDescriptor(n,t);void 0!==r.value?"function"===typeof r.value?(e.methods||(e.methods={}))[t]=r.value:(e.mixins||(e.mixins=[])).push({data:function(){return o({},t,r.value)}}):(r.get||r.set)&&((e.computed||(e.computed={}))[t]={get:r.get,set:r.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return g(this,t)}});var i=t.__decorators__;i&&(i.forEach((function(t){return t(e)})),delete t.__decorators__);var a=Object.getPrototypeOf(t.prototype),s=a instanceof r["a"]?a.constructor:r["a"],u=s.extend(e);return w(u,t,s),h()&&l(u,t),u}var _={prototype:!0,arguments:!0,callee:!0,caller:!0};function w(t,e,n){Object.getOwnPropertyNames(e).forEach((function(r){if(!_[r]){var i=Object.getOwnPropertyDescriptor(t,r);if(!i||i.configurable){var o=Object.getOwnPropertyDescriptor(e,r);if(!d){if("cid"===r)return;var a=Object.getOwnPropertyDescriptor(n,r);if(!m(o.value)&&a&&a.value===o.value)return}0,Object.defineProperty(t,r,o)}}}))}function x(t){return"function"===typeof t?b(t):function(e){return b(e,t)}}x.registerHooks=function(t){y.push.apply(y,a(t))};var E=x;var S="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function T(t,e,n){if(S&&!Array.isArray(t)&&"function"!==typeof t&&"undefined"===typeof t.type){var r=Reflect.getMetadata("design:type",e,n);r!==Object&&(t.type=r)}}function M(t){return void 0===t&&(t={}),function(e,n){T(t,e,n),v((function(e,n){(e.props||(e.props={}))[n]=t}))(e,n)}}function A(t,e){void 0===e&&(e={});var n=e.deep,r=void 0!==n&&n,i=e.immediate,o=void 0!==i&&i;return v((function(e,n){"object"!==typeof e.watch&&(e.watch=Object.create(null));var i=e.watch;"object"!==typeof i[t]||Array.isArray(i[t])?"undefined"===typeof i[t]&&(i[t]=[]):i[t]=[i[t]],i[t].push({handler:n,deep:r,immediate:o})}))}},"60bd":function(t,e,n){"use strict";var r=n("da84"),i=n("ebb5"),o=n("e260"),a=n("b622"),s=a("iterator"),u=r.Uint8Array,c=o.values,h=o.keys,l=o.entries,f=i.aTypedArray,p=i.exportTypedArrayMethod,d=u&&u.prototype[s],v=!!d&&("values"==d.name||void 0==d.name),m=function(){return c.call(f(this))};p("entries",(function(){return l.call(f(this))})),p("keys",(function(){return h.call(f(this))})),p("values",m,!v),p(s,m,!v)},"60da":function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),o=n("df75"),a=n("7418"),s=n("d1e7"),u=n("7b0b"),c=n("44ad"),h=Object.assign,l=Object.defineProperty;t.exports=!h||i((function(){if(r&&1!==h({b:1},h(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||o(h({},e)).join("")!=i}))?function(t,e){var n=u(t),i=arguments.length,h=1,l=a.f,f=s.f;while(i>h){var p,d=c(arguments[h++]),v=l?o(d).concat(l(d)):o(d),m=v.length,g=0;while(m>g)p=v[g++],r&&!f.call(d,p)||(n[p]=d[p])}return n}:h},"621a":function(t,e,n){"use strict";var r=n("da84"),i=n("83ab"),o=n("a981"),a=n("9112"),s=n("e2cc"),u=n("d039"),c=n("19aa"),h=n("a691"),l=n("50c4"),f=n("0b25"),p=n("77a7"),d=n("e163"),v=n("d2bb"),m=n("241c").f,g=n("9bf2").f,y=n("81d5"),b=n("d44e"),_=n("69f3"),w=_.get,x=_.set,E="ArrayBuffer",S="DataView",T="prototype",M="Wrong length",A="Wrong index",C=r[E],I=C,N=r[S],R=N&&N[T],O=Object.prototype,P=r.RangeError,L=p.pack,D=p.unpack,k=function(t){return[255&t]},F=function(t){return[255&t,t>>8&255]},U=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},j=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},z=function(t){return L(t,23,4)},B=function(t){return L(t,52,8)},V=function(t,e){g(t[T],e,{get:function(){return w(this)[e]}})},G=function(t,e,n,r){var i=f(n),o=w(t);if(i+e>o.byteLength)throw P(A);var a=w(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+e);return r?u:u.reverse()},H=function(t,e,n,r,i,o){var a=f(n),s=w(t);if(a+e>s.byteLength)throw P(A);for(var u=w(s.buffer).bytes,c=a+s.byteOffset,h=r(+i),l=0;l<e;l++)u[c+l]=h[o?l:e-l-1]};if(o){if(!u((function(){C(1)}))||!u((function(){new C(-1)}))||u((function(){return new C,new C(1.5),new C(NaN),C.name!=E}))){I=function(t){return c(this,I),new C(f(t))};for(var W,q=I[T]=C[T],Y=m(C),X=0;Y.length>X;)(W=Y[X++])in I||a(I,W,C[W]);q.constructor=I}v&&d(R)!==O&&v(R,O);var K=new N(new I(2)),$=R.setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||s(R,{setInt8:function(t,e){$.call(this,t,e<<24>>24)},setUint8:function(t,e){$.call(this,t,e<<24>>24)}},{unsafe:!0})}else I=function(t){c(this,I,E);var e=f(t);x(this,{bytes:y.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},N=function(t,e,n){c(this,N,S),c(t,I,S);var r=w(t).byteLength,o=h(e);if(o<0||o>r)throw P("Wrong offset");if(n=void 0===n?r-o:l(n),o+n>r)throw P(M);x(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(V(I,"byteLength"),V(N,"buffer"),V(N,"byteLength"),V(N,"byteOffset")),s(N[T],{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return j(G(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return j(G(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return D(G(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return D(G(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){H(this,1,t,k,e)},setUint8:function(t,e){H(this,1,t,k,e)},setInt16:function(t,e){H(this,2,t,F,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){H(this,2,t,F,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){H(this,4,t,U,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){H(this,4,t,U,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){H(this,4,t,z,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){H(this,8,t,B,e,arguments.length>2?arguments[2]:void 0)}});b(I,E),b(N,S),t.exports={ArrayBuffer:I,DataView:N}},"649e":function(t,e,n){"use strict";var r=n("ebb5"),i=n("b727").some,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("some",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},6547:function(t,e,n){var r=n("a691"),i=n("1d80"),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},6566:function(t,e,n){"use strict";var r=n("9bf2").f,i=n("7c73"),o=n("e2cc"),a=n("0366"),s=n("19aa"),u=n("2266"),c=n("7dd0"),h=n("2626"),l=n("83ab"),f=n("f183").fastKey,p=n("69f3"),d=p.set,v=p.getterFor;t.exports={getConstructor:function(t,e,n,c){var h=t((function(t,r){s(t,h,e),d(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),l||(t.size=0),void 0!=r&&u(r,t[c],t,n)})),p=v(e),m=function(t,e,n){var r,i,o=p(t),a=g(t,e);return a?a.value=n:(o.last=a={index:i=f(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),l?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},g=function(t,e){var n,r=p(t),i=f(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(h.prototype,{clear:function(){var t=this,e=p(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,l?e.size=0:t.size=0},delete:function(t){var e=this,n=p(e),r=g(e,t);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),l?n.size--:e.size--}return!!r},forEach:function(t){var e,n=p(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),o(h.prototype,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),l&&r(h.prototype,"size",{get:function(){return p(this).size}}),h},setStrong:function(t,e,n){var r=e+" Iterator",i=v(e),o=v(r);c(t,e,(function(t,e){d(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),h(e)}}},"65f0":function(t,e,n){var r=n("861d"),i=n("e8b5"),o=n("b622"),a=o("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"66d3":function(t,e,n){"use strict";var r=n("fb6d"),i=n.n(r);i.a},"69f3":function(t,e,n){var r,i,o,a=n("7f9a"),s=n("da84"),u=n("861d"),c=n("9112"),h=n("5135"),l=n("f772"),f=n("d012"),p=s.WeakMap,d=function(t){return o(t)?i(t):r(t,{})},v=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(a){var m=new p,g=m.get,y=m.has,b=m.set;r=function(t,e){return b.call(m,t,e),e},i=function(t){return g.call(m,t)||{}},o=function(t){return y.call(m,t)}}else{var _=l("state");f[_]=!0,r=function(t,e){return c(t,_,e),e},i=function(t){return h(t,_)?t[_]:{}},o=function(t){return h(t,_)}}t.exports={set:r,get:i,has:o,enforce:d,getterFor:v}},"6bc6":function(t,e,n){"use strict";var r=n("bf98"),i=n.n(r);i.a},"6d09":function(t,e,n){"use strict";function r(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("c23d"));n("7d28");var o,a,s,u,c=n("9ab4"),h=n("cd51"),l=n("abfd"),f=n("4be4"),p="@firebase/performance",d="0.2.36",v=d,m="FB-PERF-TRACE-START",g="FB-PERF-TRACE-STOP",y="FB-PERF-TRACE-MEASURE",b="_wt_",_="_fp",w="_fcp",x="_fid",E="@firebase/performance/config",S="@firebase/performance/configexpire",T="performance",M="Performance",A=(o={},o["trace started"]="Trace {$traceName} was started before.",o["trace stopped"]="Trace {$traceName} is not running.",o["no window"]="Window is not available.",o["no app id"]="App id is not available.",o["no project id"]="Project id is not available.",o["no api key"]="Api key is not available.",o["invalid cc log"]="Attempted to queue invalid cc event",o["FB not default"]="Performance can only start when Firebase app instance is the default one.",o["RC response not ok"]="RC response is not ok",o["invalid attribute name"]="Attribute name {$attributeName} is invalid.",o["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",o["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",o),C=new h.ErrorFactory(T,M,A),I=function(){function t(t){if(this.window=t,!t)throw C.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===a&&(a=new t(s)),a},t}();function N(t){s=t}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R,O,P=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw C.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw C.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw C.create("no api key");return t},t.getInstance=function(){return void 0===u&&(u=new t),u},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(){var t=P.getInstance().installationsService.getId();return t.then((function(t){R=t})),t}function D(){return R}function k(){var t=P.getInstance().installationsService.getToken();return t.then((function(t){})),t}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["VISIBLE"]=1]="VISIBLE",t[t["HIDDEN"]=2]="HIDDEN"})(O||(O={}));var F=["firebase_","google_","ga_"],U=new RegExp("^[a-zA-Z]\\w*$"),j=40,z=100;function B(){var t=I.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function V(){var t=I.getInstance().document,e=t.visibilityState;switch(e){case"visible":return O.VISIBLE;case"hidden":return O.HIDDEN;default:return O.UNKNOWN}}function G(){var t=I.getInstance().navigator,e=t.connection,n=e&&e.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function H(t){if(0===t.length||t.length>j)return!1;var e=F.some((function(e){return t.startsWith(e)}));return!e&&!!t.match(U)}function W(t){return 0!==t.length&&t.length<=z}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q=new l.Logger(M);q.logLevel=l.LogLevel.INFO;
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Y="0.0.1",X={loggingEnabled:!0},K="FIREBASE_INSTALLATIONS_AUTH";function $(t){var e=Q();return e?(et(e),Promise.resolve()):tt(t).then((function(t){return et(t)})).then((function(t){return J(t)}),(function(){}))}function Q(){var t=I.getInstance().localStorage;if(t){var e=t.getItem(S);if(e&&nt(e)){var n=t.getItem(E);if(n)try{var r=JSON.parse(n);return r}catch(o){return}}}}function J(t){var e=I.getInstance().localStorage;t&&e&&(e.setItem(E,JSON.stringify(t)),e.setItem(S,String(Date.now()+60*P.getInstance().configTimeToLive*60*1e3)))}var Z="Could not fetch config, will use default configs";function tt(t){return k().then((function(e){var n=P.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+P.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:K+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:P.getInstance().getAppId(),app_version:v,sdk_version:Y})});return fetch(i).then((function(t){if(t.ok)return t.json();throw C.create("RC response not ok")}))})).catch((function(){q.info(Z)}))}function et(t){if(!t)return t;var e=P.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=X.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=rt(e.tracesSamplingRate),e.logNetworkAfterSampling=rt(e.networkRequestsSamplingRate),t}function nt(t){return Number(t)>Date.now()}function rt(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,ot=1;function at(){return ot=2,it=it||ut(),it}function st(){return 3===ot}function ut(){return ct().then((function(){return L()})).then((function(t){return $(t)})).then((function(){return ht()}),(function(){return ht()}))}function ct(){var t=I.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}function ht(){ot=3}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,ft=1e4,pt=5500,dt=3,vt=dt,mt=[],gt=!1;function yt(){gt||(bt(pt),gt=!0)}function bt(t){setTimeout((function(){if(0!==vt){if(!mt.length)return bt(ft);var t=c.__spreadArrays(mt);mt=[];var e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:P.getInstance().logSource,log_event:e};fetch(P.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(n)}).then((function(t){return t.ok||q.info("Call to Firebase backend failed."),t.json()})).then((function(t){var e=Number(t.next_request_wait_millis),n=isNaN(e)?ft:Math.max(ft,e);vt=dt,bt(n)})).catch((function(){mt=c.__spreadArrays(t,mt),vt--,q.info("Tries left: "+vt+"."),bt(ft)}))}}),t)}function _t(t){if(!t.eventTime||!t.message)throw C.create("invalid cc log");mt=c.__spreadArrays(mt,[t])}function wt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);_t({message:r,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e){lt||(lt=wt(Mt)),lt(t,e)}function Et(t){var e=P.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&I.getInstance().requiredApisAvailable()&&(t.isAuto&&V()!==O.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(st()?St(t):at().then((function(){return St(t)}),(function(){return St(t)}))))}function St(t){D()&&setTimeout((function(){return xt(t,1)}),0)}function Tt(t){var e=P.getInstance();e.instrumentationEnabled&&t.url!==e.logEndPointUrl.split("?")[0]&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return xt(t,0)}),0)}function Mt(t,e){return 0===e?At(t):Ct(t)}function At(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:It(),network_request_metric:e};return JSON.stringify(n)}function Ct(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:It(),trace_metric:e};return JSON.stringify(r)}function It(){return{google_app_id:P.getInstance().getAppId(),app_instance_id:D(),web_app_info:{sdk_version:v,page_url:I.getInstance().getUrl(),service_worker_status:B(),visibility_state:V(),effective_connection_type:G()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt=100,Rt="_",Ot=[_,w,x];function Pt(t,e){return!(0===t.length||t.length>Nt)&&(e&&e.startsWith(b)&&Ot.indexOf(t)>-1||!t.startsWith(Rt))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=I.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=m+"-"+this.randomId+"-"+this.name,this.traceStopMark=g+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||y+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw C.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw C.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Et(this)},t.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=c.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Et(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},t.prototype.putMetric=function(t,e){if(!Pt(t,this.name))throw C.create("invalide custom metric name",{customMetricName:t});this.counters[t]=e},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=H(t),r=W(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw C.create("invalid attribute name",{attributeName:t});if(!r)throw C.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return c.__assign({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=I.getInstance().getUrl();if(i){var o=new t(b+i,!0),a=Math.floor(1e3*I.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));var s="first-paint",u="first-contentful-paint";if(n){var c=n.find((function(t){return t.name===s}));c&&c.startTime&&o.putMetric(_,Math.floor(1e3*c.startTime));var h=n.find((function(t){return t.name===u}));h&&h.startTime&&o.putMetric(w,Math.floor(1e3*h.startTime)),r&&o.putMetric(x,Math.floor(1e3*r))}Et(o)}},t.createUserTimingTrace=function(e){var n=new t(e,!1,e);Et(n)},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){var e=t;if(e&&void 0!==e.responseStart){var n=I.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime)),a=e.name&&e.name.split("?")[0],s={url:a,responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Tt(s)}}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt=5e3;function Ft(){D()&&(setTimeout((function(){return jt()}),0),setTimeout((function(){return Ut()}),0),setTimeout((function(){return zt()}),0))}function Ut(){for(var t=I.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){var i=r[n];Dt(i)}t.setupObserver("resource",Dt)}function jt(){var t=I.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Lt.createOobTrace(e,n),r=void 0}),kt);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Lt.createOobTrace(e,n,t))}))}else Lt.createOobTrace(e,n)}function zt(){for(var t=I.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){var i=r[n];Bt(i)}t.setupObserver("measure",Bt)}function Bt(t){var e=t.name;e.substring(0,y.length)!==y&&Lt.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt=function(){function t(t){this.app=t,I.getInstance().requiredApisAvailable()?(yt(),at().then(Ft,Ft)):q.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return t.prototype.trace=function(t){return new Lt(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return P.getInstance().instrumentationEnabled},set:function(t){P.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return P.getInstance().dataCollectionEnabled},set:function(t){P.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),t}(),Gt="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){var e=function(t,e){if(t.name!==Gt)throw C.create("FB not default");if("undefined"===typeof window)throw C.create("no window");return N(window),P.getInstance().firebaseAppInstance=t,P.getInstance().installationsService=e,new Vt(t)};t.INTERNAL.registerComponent(new f.Component("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion(p,d)}Ht(i),e.registerPerformance=Ht},"6d61":function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("94ca"),a=n("6eeb"),s=n("f183"),u=n("2266"),c=n("19aa"),h=n("861d"),l=n("d039"),f=n("1c7e"),p=n("d44e"),d=n("7156");t.exports=function(t,e,n){var v=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),g=v?"set":"add",y=i[t],b=y&&y.prototype,_=y,w={},x=function(t){var e=b[t];a(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!h(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!h(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!h(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof y||!(m||b.forEach&&!l((function(){(new y).entries().next()})))))_=n.getConstructor(e,t,v,g),s.REQUIRED=!0;else if(o(t,!0)){var E=new _,S=E[g](m?{}:-0,1)!=E,T=l((function(){E.has(1)})),M=f((function(t){new y(t)})),A=!m&&l((function(){var t=new y,e=5;while(e--)t[g](e,e);return!t.has(-0)}));M||(_=e((function(e,n){c(e,_,t);var r=d(new y,e,_);return void 0!=n&&u(n,r[g],r,v),r})),_.prototype=b,b.constructor=_),(T||A)&&(x("delete"),x("has"),v&&x("get")),(A||S)&&x(g),m&&b.clear&&delete b.clear}return w[t]=_,r({global:!0,forced:_!=y},w),p(_,t),m||n.setStrong(_,t,v),_}},"6e78":function(t,e,n){},"6eeb":function(t,e,n){var r=n("da84"),i=n("9112"),o=n("5135"),a=n("ce4e"),s=n("8925"),u=n("69f3"),c=u.get,h=u.enforce,l=String(String).split("String");(t.exports=function(t,e,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),h(n).source=l.join("string"==typeof e?e:"")),t!==r?(u?!f&&t[e]&&(c=!0):delete t[e],c?t[e]=n:i(t,e,n)):c?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},7156:function(t,e,n){var r=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},"72f7":function(t,e,n){"use strict";var r=n("ebb5").exportTypedArrayMethod,i=n("d039"),o=n("da84"),a=o.Uint8Array,s=a&&a.prototype||{},u=[].toString,c=[].join;i((function(){u.call({})}))&&(u=function(){return c.call(this)});var h=s.toString!=u;r("toString",u,h)},"735e":function(t,e,n){"use strict";var r=n("ebb5"),i=n("81d5"),o=r.aTypedArray,a=r.exportTypedArrayMethod;a("fill",(function(t){return i.apply(o(this),arguments)}))},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"741b":function(t,e,n){"use strict";var r=n("96f5"),i=n.n(r);i.a},"742f":function(t,e,n){},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),o=n("e538"),a=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},"74e8":function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("83ab"),a=n("8aa7"),s=n("ebb5"),u=n("621a"),c=n("19aa"),h=n("5c6c"),l=n("9112"),f=n("50c4"),p=n("0b25"),d=n("182d"),v=n("c04e"),m=n("5135"),g=n("f5df"),y=n("861d"),b=n("7c73"),_=n("d2bb"),w=n("241c").f,x=n("a078"),E=n("b727").forEach,S=n("2626"),T=n("9bf2"),M=n("06cf"),A=n("69f3"),C=n("7156"),I=A.get,N=A.set,R=T.f,O=M.f,P=Math.round,L=i.RangeError,D=u.ArrayBuffer,k=u.DataView,F=s.NATIVE_ARRAY_BUFFER_VIEWS,U=s.TYPED_ARRAY_TAG,j=s.TypedArray,z=s.TypedArrayPrototype,B=s.aTypedArrayConstructor,V=s.isTypedArray,G="BYTES_PER_ELEMENT",H="Wrong length",W=function(t,e){var n=0,r=e.length,i=new(B(t))(r);while(r>n)i[n]=e[n++];return i},q=function(t,e){R(t,e,{get:function(){return I(this)[e]}})},Y=function(t){var e;return t instanceof D||"ArrayBuffer"==(e=g(t))||"SharedArrayBuffer"==e},X=function(t,e){return V(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},K=function(t,e){return X(t,e=v(e,!0))?h(2,t[e]):O(t,e)},$=function(t,e,n){return!(X(t,e=v(e,!0))&&y(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?R(t,e,n):(t[e]=n.value,t)};o?(F||(M.f=K,T.f=$,q(z,"buffer"),q(z,"byteOffset"),q(z,"byteLength"),q(z,"length")),r({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:K,defineProperty:$}),t.exports=function(t,e,n){var o=t.match(/\d+$/)[0]/8,s=t+(n?"Clamped":"")+"Array",u="get"+t,h="set"+t,v=i[s],m=v,g=m&&m.prototype,T={},M=function(t,e){var n=I(t);return n.view[u](e*o+n.byteOffset,!0)},A=function(t,e,r){var i=I(t);n&&(r=(r=P(r))<0?0:r>255?255:255&r),i.view[h](e*o+i.byteOffset,r,!0)},O=function(t,e){R(t,e,{get:function(){return M(this,e)},set:function(t){return A(this,e,t)},enumerable:!0})};F?a&&(m=e((function(t,e,n,r){return c(t,m,s),C(function(){return y(e)?Y(e)?void 0!==r?new v(e,d(n,o),r):void 0!==n?new v(e,d(n,o)):new v(e):V(e)?W(m,e):x.call(m,e):new v(p(e))}(),t,m)})),_&&_(m,j),E(w(v),(function(t){t in m||l(m,t,v[t])})),m.prototype=g):(m=e((function(t,e,n,r){c(t,m,s);var i,a,u,h=0,l=0;if(y(e)){if(!Y(e))return V(e)?W(m,e):x.call(m,e);i=e,l=d(n,o);var v=e.byteLength;if(void 0===r){if(v%o)throw L(H);if(a=v-l,a<0)throw L(H)}else if(a=f(r)*o,a+l>v)throw L(H);u=a/o}else u=p(e),a=u*o,i=new D(a);N(t,{buffer:i,byteOffset:l,byteLength:a,length:u,view:new k(i)});while(h<u)O(t,h++)})),_&&_(m,j),g=m.prototype=b(z)),g.constructor!==m&&l(g,"constructor",m),U&&l(g,U,s),T[s]=m,r({global:!0,forced:m!=v,sham:!F},T),G in m||l(m,G,o),G in g||l(g,G,o),S(s)}):t.exports=function(){}},"77a7":function(t,e){var n=1/0,r=Math.abs,i=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2,u=function(t,e,u){var c,h,l,f=new Array(u),p=8*u-e-1,d=(1<<p)-1,v=d>>1,m=23===e?i(2,-24)-i(2,-77):0,g=t<0||0===t&&1/t<0?1:0,y=0;for(t=r(t),t!=t||t===n?(h=t!=t?1:0,c=d):(c=o(a(t)/s),t*(l=i(2,-c))<1&&(c--,l*=2),t+=c+v>=1?m/l:m*i(2,1-v),t*l>=2&&(c++,l/=2),c+v>=d?(h=0,c=d):c+v>=1?(h=(t*l-1)*i(2,e),c+=v):(h=t*i(2,v-1)*i(2,e),c=0));e>=8;f[y++]=255&h,h/=256,e-=8);for(c=c<<e|h,p+=e;p>0;f[y++]=255&c,c/=256,p-=8);return f[--y]|=128*g,f},c=function(t,e){var r,o=t.length,a=8*o-e-1,s=(1<<a)-1,u=s>>1,c=a-7,h=o-1,l=t[h--],f=127&l;for(l>>=7;c>0;f=256*f+t[h],h--,c-=8);for(r=f&(1<<-c)-1,f>>=-c,c+=e;c>0;r=256*r+t[h],h--,c-=8);if(0===f)f=1-u;else{if(f===s)return r?NaN:l?-n:n;r+=i(2,e),f-=u}return(l?-1:1)*r*i(2,f-e)};t.exports={pack:u,unpack:c}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a77":function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},"7a90":function(t,e,n){},"7aac":function(t,e,n){"use strict";var r=n("c532");t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7c73":function(t,e,n){var r,i=n("825a"),o=n("37e8"),a=n("7839"),s=n("d012"),u=n("1be4"),c=n("cc12"),h=n("f772"),l=">",f="<",p="prototype",d="script",v=h("IE_PROTO"),m=function(){},g=function(t){return f+d+l+t+f+"/"+d+l},y=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=c("iframe"),n="java"+d+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(g("document.F=Object")),t.close(),t.F},_=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}_=r?y(r):b();var t=a.length;while(t--)delete _[p][a[t]];return _()};s[v]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[p]=i(t),n=new m,m[p]=null,n[v]=t):n=_(),void 0===e?n:o(n,e)}},"7d28":function(t,e,n){"use strict";n.r(e),n.d(e,"registerInstallations",(function(){return It}));var r,i=n("c23d"),o=n.n(i),a=n("4be4"),s=n("9ab4"),u=n("cd51"),c=n("9dbb"),h="@firebase/installations",l="0.4.6",f=1e4,p="w:"+l,d="FIS_v2",v="https://firebaseinstallations.googleapis.com/v1",m=36e5,g="installations",y="Installations",b=(r={},r["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),_=new u["ErrorFactory"](g,y,b);function w(t){return t instanceof u["FirebaseError"]&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(t){var e=t.projectId;return v+"/projects/"+e+"/installations"}function E(t){return{token:t.token,requestStatus:2,expiresIn:C(t.expiresIn),creationTime:Date.now()}}function S(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,_.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function T(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function M(t,e){var n=e.refreshToken,r=T(t);return r.append("Authorization",I(n)),r}function A(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(s["__generator"])(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),e.status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function C(t){return Number(t.replace("s","000"))}function I(t){return d+" "+t}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t,e){var n=e.fid;return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,r,i,o,a,u,c;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:return e=x(t),r=T(t),i={fid:n,authVersion:d,appId:t.appId,sdkVersion:p},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,A((function(){return fetch(e,o)}))];case 1:return a=s.sent(),a.ok?[4,a.json()]:[3,3];case 2:return u=s.sent(),c={fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:E(u.authToken)},[2,c];case 3:return[4,S("Create Installation",a)];case 4:throw s.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t){var e=btoa(String.fromCharCode.apply(String,Object(s["__spread"])(t)));return e.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P=/^[cdef][\w-]{21}$/,L="";function D(){try{var t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;var n=k(t);return P.test(n)?n:L}catch(r){return L}}function k(t){var e=O(t);return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U=new Map;function j(t,e){var n=F(t);V(n,e),G(n,e)}function z(t,e){W();var n=F(t),r=U.get(n);r||(r=new Set,U.set(n,r)),r.add(e)}function B(t,e){var n=F(t),r=U.get(n);r&&(r.delete(e),0===r.size&&U.delete(n),q())}function V(t,e){var n,r,i=U.get(t);if(i)try{for(var o=Object(s["__values"])(i),a=o.next();!a.done;a=o.next()){var u=a.value;u(e)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function G(t,e){var n=W();n&&n.postMessage({key:t,fid:e}),q()}var H=null;function W(){return!H&&"BroadcastChannel"in self&&(H=new BroadcastChannel("[Firebase] FID Change"),H.onmessage=function(t){V(t.data.key,t.data.fid)}),H}function q(){0===U.size&&H&&(H.close(),H=null)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y="firebase-installations-database",X=1,K="firebase-installations-store",$=null;function Q(){return $||($=Object(c["openDb"])(Y,X,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(K)}}))),$}function J(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:return n=F(t),[4,Q()];case 1:return r=s.sent(),i=r.transaction(K,"readwrite"),o=i.objectStore(K),[4,o.get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||j(t,e.fid),[2,e]}}))}))}function Z(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return e=F(t),[4,Q()];case 1:return n=i.sent(),r=n.transaction(K,"readwrite"),[4,r.objectStore(K).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function tt(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,u;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:return n=F(t),[4,Q()];case 1:return r=s.sent(),i=r.transaction(K,"readwrite"),o=i.objectStore(K),[4,o.get(n)];case 2:return a=s.sent(),u=e(a),void 0!==u?[3,4]:[4,o.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,o.put(u,n)];case 5:s.sent(),s.label=6;case 6:return[4,i.complete];case 7:return s.sent(),!u||a&&a.fid===u.fid||j(t,u.fid),[2,u]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return[4,tt(t,(function(n){var r=nt(n),i=rt(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return n=i.sent(),n.fid!==L?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function nt(t){var e=t||{fid:D(),registrationStatus:0};return st(e)}function rt(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var n=Promise.reject(_.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=it(t,r);return{installationEntry:r,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:ot(t)}:{installationEntry:e}}function it(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,N(t,e)];case 1:return n=i.sent(),[2,J(t,n)];case 2:return r=i.sent(),w(r)&&409===r.serverCode?[4,Z(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,J(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}function ot(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i;return Object(s["__generator"])(this,(function(o){switch(o.label){case 0:return[4,at(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,R(100)];case 3:return o.sent(),[4,at(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,et(t)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,e]}}))}))}function at(t){return tt(t,(function(t){if(!t)throw _.create("installation-not-found");return st(t)}))}function st(t){return ut(t)?{fid:t.fid,registrationStatus:0}:t}function ut(t){return 1===t.registrationStatus&&t.registrationTime+f<Date.now()}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(s["__awaiter"])(this,void 0,void 0,(function(){var t,i,o,a,u,c,h,l;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:return t=ht(n,e),i=M(n,e),o=r.getImmediate({optional:!0}),o&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:p}},u={method:"POST",headers:i,body:JSON.stringify(a)},[4,A((function(){return fetch(t,u)}))];case 1:return c=s.sent(),c.ok?[4,c.json()]:[3,3];case 2:return h=s.sent(),l=E(h),[2,l];case 3:return[4,S("Generate Auth Token",c)];case 4:throw s.sent()}}))}))}function ht(t,e){var n=e.fid;return x(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t,e){return void 0===e&&(e=!1),Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(s["__generator"])(this,(function(a){switch(a.label){case 0:return[4,tt(t.appConfig,(function(r){if(!vt(r))throw _.create("not-registered");var i=r.authToken;if(!e&&mt(i))return r;if(1===i.requestStatus)return n=ft(t,e),r;if(!navigator.onLine)throw _.create("app-offline");var o=yt(r);return n=dt(t,o),o}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return i=o,[2,i]}}))}))}function ft(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return[4,pt(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,R(100)];case 3:return i.sent(),[4,pt(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,lt(t,e)]:[2,r]}}))}))}function pt(t){return tt(t,(function(t){if(!vt(t))throw _.create("not-registered");var e=t.authToken;return bt(e)?Object(s["__assign"])(Object(s["__assign"])({},t),{authToken:{requestStatus:0}}):t}))}function dt(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(s["__generator"])(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,ct(t,e)];case 1:return n=o.sent(),i=Object(s["__assign"])(Object(s["__assign"])({},e),{authToken:n}),[4,J(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!w(r)||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,Z(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(s["__assign"])(Object(s["__assign"])({},e),{authToken:{requestStatus:0}}),[4,J(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}function vt(t){return void 0!==t&&2===t.registrationStatus}function mt(t){return 2===t.requestStatus&&!gt(t)}function gt(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+m}function yt(t){var e={requestStatus:1,requestTime:Date.now()};return Object(s["__assign"])(Object(s["__assign"])({},t),{authToken:e})}function bt(t){return 1===t.requestStatus&&t.requestTime+f<Date.now()}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return[4,et(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,r=e.registrationPromise,r?r.catch(console.error):lt(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){return void 0===e&&(e=!1),Object(s["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(s["__generator"])(this,(function(r){switch(r.label){case 0:return[4,xt(t.appConfig)];case 1:return r.sent(),[4,lt(t,e)];case 2:return n=r.sent(),[2,n.token]}}))}))}function xt(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(s["__generator"])(this,(function(n){switch(n.label){case 0:return[4,et(t)];case 1:return e=n.sent().registrationPromise,e?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(s["__generator"])(this,(function(a){switch(a.label){case 0:return n=St(t,e),r=M(t,e),i={method:"DELETE",headers:r},[4,A((function(){return fetch(n,i)}))];case 1:return o=a.sent(),o.ok?[3,3]:[4,S("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function St(t,e){var n=e.fid;return x(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n;return Object(s["__generator"])(this,(function(r){switch(r.label){case 0:return e=t.appConfig,[4,tt(e,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw _.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw _.create("app-offline");case 3:return[4,Et(e,n)];case 4:return r.sent(),[4,Z(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t,e){var n=t.appConfig;return z(n,e),function(){B(n,e)}}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t){var e,n;if(!t||!t.options)throw Ct("App Configuration");if(!t.name)throw Ct("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Object(s["__values"])(r),o=i.next();!o.done;o=i.next()){var a=o.value;if(!t.options[a])throw Ct(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ct(t){return _.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){var e="installations";t.INTERNAL.registerComponent(new a["Component"](e,(function(t){var e=t.getProvider("app").getImmediate(),n=At(e),r=t.getProvider("platform-logger"),i={appConfig:n,platformLoggerProvider:r},o={app:e,getId:function(){return _t(i)},getToken:function(t){return wt(i,t)},delete:function(){return Tt(i)},onIdChange:function(t){return Mt(i,t)}};return o}),"PUBLIC")),t.registerVersion(h,l)}It(o.a)},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),i=n("9ed3"),o=n("e163"),a=n("d2bb"),s=n("d44e"),u=n("9112"),c=n("6eeb"),h=n("b622"),l=n("c430"),f=n("3f8c"),p=n("ae93"),d=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,m=h("iterator"),g="keys",y="values",b="entries",_=function(){return this};t.exports=function(t,e,n,h,p,w,x){i(n,e,h);var E,S,T,M=function(t){if(t===p&&R)return R;if(!v&&t in I)return I[t];switch(t){case g:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case b:return function(){return new n(this,t)}}return function(){return new n(this)}},A=e+" Iterator",C=!1,I=t.prototype,N=I[m]||I["@@iterator"]||p&&I[p],R=!v&&N||M(p),O="Array"==e&&I.entries||N;if(O&&(E=o(O.call(new t)),d!==Object.prototype&&E.next&&(l||o(E)===d||(a?a(E,d):"function"!=typeof E[m]&&u(E,m,_)),s(E,A,!0,!0),l&&(f[A]=_))),p==y&&N&&N.name!==y&&(C=!0,R=function(){return N.call(this)}),l&&!x||I[m]===R||u(I,m,R),f[e]=R,p)if(S={values:M(y),keys:w?R:M(g),entries:M(b)},x)for(T in S)(v||C||!(T in I))&&c(I,T,S[T]);else r({target:e,proto:!0,forced:v||C},S);return S}},"7f9a":function(t,e,n){var r=n("da84"),i=n("8925"),o=r.WeakMap;t.exports="function"===typeof o&&/native code/.test(i(o))},8071:function(t,e,n){"use strict";n.r(e);var r,i=n("c23d"),o=n.n(i),a=(n("7d28"),n("4be4")),s=n("9ab4"),u=n("cd51"),c=n("9dbb"),h=(r={},r["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["permission-default"]="The notification permission was not granted and dismissed instead.",r["permission-blocked"]="The notification permission was not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",r["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",r["invalid-vapid-key"]="The public VAPID key must be a string.",r["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r),l=new u["ErrorFactory"]("messaging","Messaging",h);
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function f(t){var e,n;if(!t||!t.options)throw p("App Configuration Object");if(!t.name)throw p("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=t.options;try{for(var o=Object(s["__values"])(r),a=o.next();!a.done;a=o.next()){var u=a.value;if(!i[u])throw p(u)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function p(t){return l.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(t){var e=new Uint8Array(t),n=btoa(String.fromCharCode.apply(String,Object(s["__spread"])(e)));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v="fcm_token_details_db",m=5,g="fcm_token_object_Store";function y(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i,o=this;return Object(s["__generator"])(this,(function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=a.sent(),n=e.map((function(t){return t.name})),!n.includes(v))return[2,null];a.label=2;case 2:return r=null,[4,Object(c["openDb"])(v,m,(function(e){return Object(s["__awaiter"])(o,void 0,void 0,(function(){var n,i,o,a;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(g)?(n=e.transaction.objectStore(g),[4,n.index("fcmSenderId").get(t)]):[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===e.oldVersion){if(o=i,!o.auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:d(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(o=i,r={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:d(o.auth),p256dh:d(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:d(o.vapidKey)}});return[2]}}))}))}))];case 3:return i=a.sent(),i.close(),[4,Object(c["deleteDb"])(v)];case 4:return a.sent(),[4,Object(c["deleteDb"])("fcm_vapid_details_db")];case 5:return a.sent(),[4,Object(c["deleteDb"])("undefined")];case 6:return a.sent(),[2,b(r)?r:null]}}))}))}function b(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _="firebase-messaging-database",w=1,x="firebase-messaging-store",E=null;function S(){return E||(E=Object(c["openDb"])(_,w,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(x)}}))),E}function T(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i;return Object(s["__generator"])(this,(function(o){switch(o.label){case 0:return e=C(t),[4,S()];case 1:return n=o.sent(),[4,n.transaction(x).objectStore(x).get(e)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,y(t.appConfig.senderId)];case 4:return i=o.sent(),i?[4,M(t,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}}))}))}function M(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(s["__generator"])(this,(function(o){switch(o.label){case 0:return n=C(t),[4,S()];case 1:return r=o.sent(),i=r.transaction(x,"readwrite"),[4,i.objectStore(x).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function A(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return e=C(t),[4,S()];case 1:return n=i.sent(),r=n.transaction(x,"readwrite"),[4,r.objectStore(x).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function C(t){var e=t.appConfig;return e.appId}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I="/firebase-messaging-sw.js",N="/firebase-cloud-messaging-push-scope",R="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",O="https://fcmregistrations.googleapis.com/v1",P="FCM_MSG",L="google.c.a.c_id",D="google.c.a.c_l",k="google.c.a.ts",F="google.c.a.e";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function U(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,u,c;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:return[4,V(t)];case 1:n=s.sent(),r=G(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(B(t.appConfig),i)];case 3:return a=s.sent(),[4,a.json()];case 4:return o=s.sent(),[3,6];case 5:throw u=s.sent(),l.create("token-subscribe-failed",{errorInfo:u});case 6:if(o.error)throw c=o.error.message,l.create("token-subscribe-failed",{errorInfo:c});if(!o.token)throw l.create("token-subscribe-no-token");return[2,o.token]}}))}))}function j(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,u,c;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:return[4,V(t)];case 1:n=s.sent(),r=G(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(B(t.appConfig)+"/"+e.token,i)];case 3:return a=s.sent(),[4,a.json()];case 4:return o=s.sent(),[3,6];case 5:throw u=s.sent(),l.create("token-update-failed",{errorInfo:u});case 6:if(o.error)throw c=o.error.message,l.create("token-update-failed",{errorInfo:c});if(!o.token)throw l.create("token-update-no-token");return[2,o.token]}}))}))}function z(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,u;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:return[4,V(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(B(t.appConfig)+"/"+e,r)];case 3:return i=s.sent(),[4,i.json()];case 4:if(o=s.sent(),o.error)throw a=o.error.message,l.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw u=s.sent(),l.create("token-unsubscribe-failed",{errorInfo:u});case 6:return[2]}}))}))}function B(t){var e=t.projectId;return O+"/projects/"+e+"/registrations"}function V(t){var e=t.appConfig,n=t.installations;return Object(s["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(s["__generator"])(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function G(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==R&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H,W=6048e5;function q(t,e,n){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw l.create("permission-blocked");return[4,$(e,n)];case 1:return r=s.sent(),[4,T(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:d(r.getKey("auth")),p256dh:d(r.getKey("p256dh"))},i?[3,3]:[2,K(t,o)];case 3:if(Q(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,z(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,K(t,o)];case 8:return Date.now()>=i.createTime+W?[2,X({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function Y(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return[4,T(t)];case 1:return n=i.sent(),n?[4,z(t,n.token)]:[3,4];case 2:return i.sent(),[4,A(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}}))}))}function X(t,e,n){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var r,i,o;return Object(s["__generator"])(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,j(e,t)];case 1:return r=a.sent(),i=Object(s["__assign"])({token:r,createTime:Date.now()},t),[4,M(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,Y(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function K(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return[4,U(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,M(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function $(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(s["__generator"])(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})]}}))}))}function Q(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function J(t){return"object"===typeof t&&!!t&&L in t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["PUSH_RECEIVED"]="push-received",t["NOTIFICATION_CLICKED"]="notification-clicked"})(H||(H={}));var Z=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),t.prototype.getToken=function(){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(s["__generator"])(this,(function(e){switch(e.label){case 0:return this.vapidKey||(this.vapidKey=R),[4,this.getServiceWorkerRegistration()];case 1:return t=e.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:e.sent(),e.label=3;case 3:if("granted"!==Notification.permission)throw l.create("permission-blocked");return[2,q(this.firebaseDependencies,t,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(s["__generator"])(this,(function(e){switch(e.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return t=e.sent(),[2,Y(this.firebaseDependencies,t)]}}))}))},t.prototype.requestPermission=function(){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(s["__generator"])(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(t=e.sent(),"granted"===t)return[2];throw"denied"===t?l.create("permission-blocked"):l.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw l.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw l.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw l.create("invalid-sw-registration");if(this.swRegistration)throw l.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"===typeof t?t:t.next,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw l.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.getServiceWorkerRegistration=function(){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var t,e;return Object(s["__generator"])(this,(function(n){switch(n.label){case 0:if(this.swRegistration)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),t=this,[4,navigator.serviceWorker.register(I,{scope:N})];case 2:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,4];case 3:throw e=n.sent(),l.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 4:return[2,this.swRegistration]}}))}))},t.prototype.messageEventListener=function(t){var e;return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(s["__generator"])(this,(function(a){switch(a.label){case 0:return(null===(e=t.data)||void 0===e?void 0:e.firebaseMessaging)?(n=t.data.firebaseMessaging,r=n.type,i=n.payload,this.onMessageCallback&&r===H.PUSH_RECEIVED&&this.onMessageCallback(i),o=i.data,J(o)&&"1"===o[F]?[4,this.logEvent(r,o)]:[3,2]):[2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},t.prototype.logEvent=function(t,e){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return n=tt(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r=i.sent(),r.logEvent(n,{message_id:e[L],message_name:e[D],message_time:e[k],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function tt(t){switch(t){case H.NOTIFICATION_CLICKED:return"notification_open";case H.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!==typeof t)throw l.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.getToken=function(){var t,e;return Object(s["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(s["__generator"])(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,T(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:R,r.label=2;case 2:return[2,q(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Y(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw l.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw l.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw l.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw l.create("only-available-in-window")},t.prototype.onMessage=function(){throw l.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw l.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(s["__generator"])(this,(function(i){switch(i.label){case 0:return e=rt(t),e?[4,ut()]:[2];case 1:return n=i.sent(),at(n)?[2,st(n,e)]:(r=it(e),r?[4,ht(r)]:[3,3]);case 2:return i.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(s["__awaiter"])(this,void 0,void 0,(function(){var r,i;return Object(s["__generator"])(this,(function(o){switch(o.label){case 0:return r=t.newSubscription,r?[3,2]:[4,Y(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,T(this.firebaseDependencies)];case 3:return i=o.sent(),[4,Y(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,q(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:R)];case 5:return o.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(s["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a;return Object(s["__generator"])(this,(function(s){switch(s.label){case 0:return r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[P],r?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=lt(r),i?[4,ot(i)]:[2]):[2];case 1:return o=s.sent(),o?[3,4]:[4,self.clients.openWindow(i)];case 2:return o=s.sent(),[4,et(3e3)];case 3:return s.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=s.sent(),s.label=6;case 6:return o?(a=ct(H.NOTIFICATION_CLICKED,r),[2,o.postMessage(a)]):[2]}}))}))},t}();function rt(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}function it(t){var e;if(t&&"object"===typeof t.notification){var n=Object(s["__assign"])({},t.notification);return n.data=Object(s["__assign"])(Object(s["__assign"])({},t.notification.data),(e={},e[P]=t,e)),n}}function ot(t){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i,o,a,u,c;return Object(s["__generator"])(this,(function(h){switch(h.label){case 0:return e=new URL(t,self.location.href).href,[4,ut()];case 1:n=h.sent();try{for(r=Object(s["__values"])(n),i=r.next();!i.done;i=r.next())if(o=i.value,a=new URL(o.url,self.location.href).href,a===e)return[2,o]}catch(l){u={error:l}}finally{try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}}return[2,null]}}))}))}function at(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}function st(t,e){var n,r,i=ct(H.PUSH_RECEIVED,e);try{for(var o=Object(s["__values"])(t),a=o.next();!a.done;a=o.next()){var u=a.value;u.postMessage(i)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function ut(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function ct(t,e){return{firebaseMessaging:{type:t,payload:e}}}function ht(t){var e,n=null!==(e=t.title)&&void 0!==e?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}function lt(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(J(t.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft="messaging";function pt(t){var e=t.getProvider("app").getImmediate(),n=f(e),r=t.getProvider("installations").getImmediate(),i=t.getProvider("analytics-internal"),o={app:e,appConfig:n,installations:r,analyticsProvider:i};if(!vt())throw l.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new nt(o):new Z(o)}var dt={isSupported:vt};function vt(){return self&&"ServiceWorkerGlobalScope"in self?gt():mt()}function mt(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function gt(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}o.a.INTERNAL.registerComponent(new a["Component"](ft,pt,"PUBLIC").setServiceProps(dt))},"80f2":function(t,e,n){},"81d5":function(t,e,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("50c4");t.exports=function(t){var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);while(c>s)e[s++]=t;return e}},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"82f8":function(t,e,n){"use strict";var r=n("ebb5"),i=n("4d64").includes,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"83b9":function(t,e,n){"use strict";var r=n("d925"),i=n("e683");t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},8418:function(t,e,n){"use strict";var r=n("c04e"),i=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8925:function(t,e,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},"89df":function(t,e,n){"use strict";var r=n("742f"),i=n.n(r);i.a},"8aa5":function(t,e,n){"use strict";function r(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}var i=r(n("c23d"));n("b7aa"),n("3523"),n("e89a"),n("001a"),n("8071"),n("2e66"),n("6d09"),n("dcaa"),n("3b59");var o="firebase",a="7.12.0";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.registerVersion(o,a,"app");var s="firebase",u="7.12.0";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),i.registerVersion(s,u),t.exports=i},"8aa59":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"8aa7":function(t,e,n){var r=n("da84"),i=n("d039"),o=n("1c7e"),a=n("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},"8c4f":function(t,e,n){"use strict";
/*!
  * vue-router v3.1.6
  * (c) 2020 Evan You
  * @license MIT
  */function r(t,e){0}function i(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function o(t,e){return e instanceof t||e&&(e.name===t.name||e._name===t._name)}function a(t,e){for(var n in e)t[n]=e[n];return t}var s={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var n=e.props,r=e.children,i=e.parent,o=e.data;o.routerView=!0;var s=i.$createElement,c=n.name,h=i.$route,l=i._routerViewCache||(i._routerViewCache={}),f=0,p=!1;while(i&&i._routerRoot!==i){var d=i.$vnode?i.$vnode.data:{};d.routerView&&f++,d.keepAlive&&i._directInactive&&i._inactive&&(p=!0),i=i.$parent}if(o.routerViewDepth=f,p){var v=l[c],m=v&&v.component;return m?(v.configProps&&u(m,o,v.route,v.configProps),s(m,o,r)):s()}var g=h.matched[f],y=g&&g.components[c];if(!g||!y)return l[c]=null,s();l[c]={component:y},o.registerRouteInstance=function(t,e){var n=g.instances[c];(e&&n!==t||!e&&n===t)&&(g.instances[c]=e)},(o.hook||(o.hook={})).prepatch=function(t,e){g.instances[c]=e.componentInstance},o.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==g.instances[c]&&(g.instances[c]=t.componentInstance)};var b=g.props&&g.props[c];return b&&(a(l[c],{route:h,configProps:b}),u(y,o,h,b)),s(y,o,r)}};function u(t,e,n,r){var i=e.props=c(n,r);if(i){i=e.props=a({},i);var o=e.attrs=e.attrs||{};for(var s in i)t.props&&s in t.props||(o[s]=i[s],delete i[s])}}function c(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:0}}var h=/[!'()*]/g,l=function(t){return"%"+t.charCodeAt(0).toString(16)},f=/%2C/g,p=function(t){return encodeURIComponent(t).replace(h,l).replace(f,",")},d=decodeURIComponent;function v(t,e,n){void 0===e&&(e={});var r,i=n||m;try{r=i(t||"")}catch(a){r={}}for(var o in e)r[o]=e[o];return r}function m(t){var e={};return t=t.trim().replace(/^(\?|#|&)/,""),t?(t.split("&").forEach((function(t){var n=t.replace(/\+/g," ").split("="),r=d(n.shift()),i=n.length>0?d(n.join("=")):null;void 0===e[r]?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]})),e):e}function g(t){var e=t?Object.keys(t).map((function(e){var n=t[e];if(void 0===n)return"";if(null===n)return p(e);if(Array.isArray(n)){var r=[];return n.forEach((function(t){void 0!==t&&(null===t?r.push(p(e)):r.push(p(e)+"="+p(t)))})),r.join("&")}return p(e)+"="+p(n)})).filter((function(t){return t.length>0})).join("&"):null;return e?"?"+e:""}var y=/\/?$/;function b(t,e,n,r){var i=r&&r.options.stringifyQuery,o=e.query||{};try{o=_(o)}catch(s){}var a={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:E(e,i),matched:t?x(t):[]};return n&&(a.redirectedFrom=E(n,i)),Object.freeze(a)}function _(t){if(Array.isArray(t))return t.map(_);if(t&&"object"===typeof t){var e={};for(var n in t)e[n]=_(t[n]);return e}return t}var w=b(null,{path:"/"});function x(t){var e=[];while(t)e.unshift(t),t=t.parent;return e}function E(t,e){var n=t.path,r=t.query;void 0===r&&(r={});var i=t.hash;void 0===i&&(i="");var o=e||g;return(n||"/")+o(r)+i}function S(t,e){return e===w?t===e:!!e&&(t.path&&e.path?t.path.replace(y,"")===e.path.replace(y,"")&&t.hash===e.hash&&T(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&T(t.query,e.query)&&T(t.params,e.params)))}function T(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){var r=t[n],i=e[n];return"object"===typeof r&&"object"===typeof i?T(r,i):String(r)===String(i)}))}function M(t,e){return 0===t.path.replace(y,"/").indexOf(e.path.replace(y,"/"))&&(!e.hash||t.hash===e.hash)&&A(t.query,e.query)}function A(t,e){for(var n in e)if(!(n in t))return!1;return!0}function C(t,e,n){var r=t.charAt(0);if("/"===r)return t;if("?"===r||"#"===r)return e+t;var i=e.split("/");n&&i[i.length-1]||i.pop();for(var o=t.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function I(t){var e="",n="",r=t.indexOf("#");r>=0&&(e=t.slice(r),t=t.slice(0,r));var i=t.indexOf("?");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{path:t,query:n,hash:e}}function N(t){return t.replace(/\/\//g,"/")}var R=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},O=Q,P=U,L=j,D=V,k=$,F=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function U(t,e){var n,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/";while(null!=(n=F.exec(t))){var u=n[0],c=n[1],h=n.index;if(a+=t.slice(o,h),o=h+u.length,c)a+=c[1];else{var l=t[o],f=n[2],p=n[3],d=n[4],v=n[5],m=n[6],g=n[7];a&&(r.push(a),a="");var y=null!=f&&null!=l&&l!==f,b="+"===m||"*"===m,_="?"===m||"*"===m,w=n[2]||s,x=d||v;r.push({name:p||i++,prefix:f||"",delimiter:w,optional:_,repeat:b,partial:y,asterisk:!!g,pattern:x?H(x):g?".*":"[^"+G(w)+"]+?"})}}return o<t.length&&(a+=t.substr(o)),a&&r.push(a),r}function j(t,e){return V(U(t,e))}function z(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function B(t){return encodeURI(t).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function V(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"===typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},a=r||{},s=a.pretty?z:encodeURIComponent,u=0;u<t.length;u++){var c=t[u];if("string"!==typeof c){var h,l=o[c.name];if(null==l){if(c.optional){c.partial&&(i+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(R(l)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<l.length;f++){if(h=s(l[f]),!e[u].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");i+=(0===f?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?B(l):s(l),!e[u].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');i+=c.prefix+h}}else i+=c}return i}}function G(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function H(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function W(t,e){return t.keys=e,t}function q(t){return t.sensitive?"":"i"}function Y(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return W(t,e)}function X(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(Q(t[i],e,n).source);var o=new RegExp("(?:"+r.join("|")+")",q(n));return W(o,e)}function K(t,e,n){return $(U(t,n),e,n)}function $(t,e,n){R(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<t.length;a++){var s=t[a];if("string"===typeof s)o+=G(s);else{var u=G(s.prefix),c="(?:"+s.pattern+")";e.push(s),s.repeat&&(c+="(?:"+u+c+")*"),c=s.optional?s.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")",o+=c}}var h=G(n.delimiter||"/"),l=o.slice(-h.length)===h;return r||(o=(l?o.slice(0,-h.length):o)+"(?:"+h+"(?=$))?"),o+=i?"$":r&&l?"":"(?="+h+"|$)",W(new RegExp("^"+o,q(n)),e)}function Q(t,e,n){return R(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?Y(t,e):R(t)?X(t,e,n):K(t,e,n)}O.parse=P,O.compile=L,O.tokensToFunction=D,O.tokensToRegExp=k;var J=Object.create(null);function Z(t,e,n){e=e||{};try{var r=J[t]||(J[t]=O.compile(t));return"string"===typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(i){return""}finally{delete e[0]}}function tt(t,e,n,r){var i="string"===typeof t?{path:t}:t;if(i._normalized)return i;if(i.name){i=a({},t);var o=i.params;return o&&"object"===typeof o&&(i.params=a({},o)),i}if(!i.path&&i.params&&e){i=a({},i),i._normalized=!0;var s=a(a({},e.params),i.params);if(e.name)i.name=e.name,i.params=s;else if(e.matched.length){var u=e.matched[e.matched.length-1].path;i.path=Z(u,s,"path "+e.path)}else 0;return i}var c=I(i.path||""),h=e&&e.path||"/",l=c.path?C(c.path,h,n||i.append):h,f=v(c.query,i.query,r&&r.options.parseQuery),p=i.hash||c.hash;return p&&"#"!==p.charAt(0)&&(p="#"+p),{_normalized:!0,path:l,query:f,hash:p}}var et,nt=[String,Object],rt=[String,Array],it=function(){},ot={name:"RouterLink",props:{to:{type:nt,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:rt,default:"click"}},render:function(t){var e=this,n=this.$router,r=this.$route,i=n.resolve(this.to,r,this.append),o=i.location,s=i.route,u=i.href,c={},h=n.options.linkActiveClass,l=n.options.linkExactActiveClass,f=null==h?"router-link-active":h,p=null==l?"router-link-exact-active":l,d=null==this.activeClass?f:this.activeClass,v=null==this.exactActiveClass?p:this.exactActiveClass,m=s.redirectedFrom?b(null,tt(s.redirectedFrom),null,n):s;c[v]=S(r,m),c[d]=this.exact?c[v]:M(r,m);var g=function(t){at(t)&&(e.replace?n.replace(o,it):n.push(o,it))},y={click:at};Array.isArray(this.event)?this.event.forEach((function(t){y[t]=g})):y[this.event]=g;var _={class:c},w=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:u,route:s,navigate:g,isActive:c[d],isExactActive:c[v]});if(w){if(1===w.length)return w[0];if(w.length>1||!w.length)return 0===w.length?t():t("span",{},w)}if("a"===this.tag)_.on=y,_.attrs={href:u};else{var x=st(this.$slots.default);if(x){x.isStatic=!1;var E=x.data=a({},x.data);for(var T in E.on=E.on||{},E.on){var A=E.on[T];T in y&&(E.on[T]=Array.isArray(A)?A:[A])}for(var C in y)C in E.on?E.on[C].push(y[C]):E.on[C]=g;var I=x.data.attrs=a({},x.data.attrs);I.href=u}else _.on=y}return t(this.tag,_,this.$slots.default)}};function at(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function st(t){if(t)for(var e,n=0;n<t.length;n++){if(e=t[n],"a"===e.tag)return e;if(e.children&&(e=st(e.children)))return e}}function ut(t){if(!ut.installed||et!==t){ut.installed=!0,et=t;var e=function(t){return void 0!==t},n=function(t,n){var r=t.$options._parentVnode;e(r)&&e(r=r.data)&&e(r=r.registerRouteInstance)&&r(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",s),t.component("RouterLink",ot);var r=t.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}}var ct="undefined"!==typeof window;function ht(t,e,n,r){var i=e||[],o=n||Object.create(null),a=r||Object.create(null);t.forEach((function(t){lt(i,o,a,t)}));for(var s=0,u=i.length;s<u;s++)"*"===i[s]&&(i.push(i.splice(s,1)[0]),u--,s--);return{pathList:i,pathMap:o,nameMap:a}}function lt(t,e,n,r,i,o){var a=r.path,s=r.name;var u=r.pathToRegexpOptions||{},c=pt(a,i,u.strict);"boolean"===typeof r.caseSensitive&&(u.sensitive=r.caseSensitive);var h={path:c,regex:ft(c,u),components:r.components||{default:r.component},instances:{},name:s,parent:i,matchAs:o,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};if(r.children&&r.children.forEach((function(r){var i=o?N(o+"/"+r.path):void 0;lt(t,e,n,r,h,i)})),e[h.path]||(t.push(h.path),e[h.path]=h),void 0!==r.alias)for(var l=Array.isArray(r.alias)?r.alias:[r.alias],f=0;f<l.length;++f){var p=l[f];0;var d={path:p,children:r.children};lt(t,e,n,d,i,h.path||"/")}s&&(n[s]||(n[s]=h))}function ft(t,e){var n=O(t,[],e);return n}function pt(t,e,n){return n||(t=t.replace(/\/$/,"")),"/"===t[0]||null==e?t:N(e.path+"/"+t)}function dt(t,e){var n=ht(t),r=n.pathList,i=n.pathMap,o=n.nameMap;function a(t){ht(t,r,i,o)}function s(t,n,a){var s=tt(t,n,!1,e),u=s.name;if(u){var c=o[u];if(!c)return h(null,s);var l=c.regex.keys.filter((function(t){return!t.optional})).map((function(t){return t.name}));if("object"!==typeof s.params&&(s.params={}),n&&"object"===typeof n.params)for(var f in n.params)!(f in s.params)&&l.indexOf(f)>-1&&(s.params[f]=n.params[f]);return s.path=Z(c.path,s.params,'named route "'+u+'"'),h(c,s,a)}if(s.path){s.params={};for(var p=0;p<r.length;p++){var d=r[p],v=i[d];if(vt(v.regex,s.path,s.params))return h(v,s,a)}}return h(null,s)}function u(t,n){var r=t.redirect,i="function"===typeof r?r(b(t,n,null,e)):r;if("string"===typeof i&&(i={path:i}),!i||"object"!==typeof i)return h(null,n);var a=i,u=a.name,c=a.path,l=n.query,f=n.hash,p=n.params;if(l=a.hasOwnProperty("query")?a.query:l,f=a.hasOwnProperty("hash")?a.hash:f,p=a.hasOwnProperty("params")?a.params:p,u){o[u];return s({_normalized:!0,name:u,query:l,hash:f,params:p},void 0,n)}if(c){var d=mt(c,t),v=Z(d,p,'redirect route with path "'+d+'"');return s({_normalized:!0,path:v,query:l,hash:f},void 0,n)}return h(null,n)}function c(t,e,n){var r=Z(n,e.params,'aliased route with path "'+n+'"'),i=s({_normalized:!0,path:r});if(i){var o=i.matched,a=o[o.length-1];return e.params=i.params,h(a,e)}return h(null,e)}function h(t,n,r){return t&&t.redirect?u(t,r||n):t&&t.matchAs?c(t,n,t.matchAs):b(t,n,r,e)}return{match:s,addRoutes:a}}function vt(t,e,n){var r=e.match(t);if(!r)return!1;if(!n)return!0;for(var i=1,o=r.length;i<o;++i){var a=t.keys[i-1],s="string"===typeof r[i]?decodeURIComponent(r[i]):r[i];a&&(n[a.name||"pathMatch"]=s)}return!0}function mt(t,e){return C(t,e.parent?e.parent.path:"/",!0)}var gt=ct&&window.performance&&window.performance.now?window.performance:Date;function yt(){return gt.now().toFixed(3)}var bt=yt();function _t(){return bt}function wt(t){return bt=t}var xt=Object.create(null);function Et(){var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,""),n=a({},window.history.state);n.key=_t(),window.history.replaceState(n,"",e),window.addEventListener("popstate",(function(t){Tt(),t.state&&t.state.key&&wt(t.state.key)}))}function St(t,e,n,r){if(t.app){var i=t.options.scrollBehavior;i&&t.app.$nextTick((function(){var o=Mt(),a=i.call(t,e,n,r?o:null);a&&("function"===typeof a.then?a.then((function(t){Pt(t,o)})).catch((function(t){0})):Pt(a,o))}))}}function Tt(){var t=_t();t&&(xt[t]={x:window.pageXOffset,y:window.pageYOffset})}function Mt(){var t=_t();if(t)return xt[t]}function At(t,e){var n=document.documentElement,r=n.getBoundingClientRect(),i=t.getBoundingClientRect();return{x:i.left-r.left-e.x,y:i.top-r.top-e.y}}function Ct(t){return Rt(t.x)||Rt(t.y)}function It(t){return{x:Rt(t.x)?t.x:window.pageXOffset,y:Rt(t.y)?t.y:window.pageYOffset}}function Nt(t){return{x:Rt(t.x)?t.x:0,y:Rt(t.y)?t.y:0}}function Rt(t){return"number"===typeof t}var Ot=/^#\d/;function Pt(t,e){var n="object"===typeof t;if(n&&"string"===typeof t.selector){var r=Ot.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(r){var i=t.offset&&"object"===typeof t.offset?t.offset:{};i=Nt(i),e=At(r,i)}else Ct(t)&&(e=It(t))}else n&&Ct(t)&&(e=It(t));e&&window.scrollTo(e.x,e.y)}var Lt=ct&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}();function Dt(t,e){Tt();var n=window.history;try{if(e){var r=a({},n.state);r.key=_t(),n.replaceState(r,"",t)}else n.pushState({key:wt(yt())},"",t)}catch(i){window.location[e?"replace":"assign"](t)}}function kt(t){Dt(t,!0)}function Ft(t,e,n){var r=function(i){i>=t.length?n():t[i]?e(t[i],(function(){r(i+1)})):r(i+1)};r(0)}function Ut(t){return function(e,n,r){var o=!1,a=0,s=null;jt(t,(function(t,e,n,u){if("function"===typeof t&&void 0===t.cid){o=!0,a++;var c,h=Gt((function(e){Vt(e)&&(e=e.default),t.resolved="function"===typeof e?e:et.extend(e),n.components[u]=e,a--,a<=0&&r()})),l=Gt((function(t){var e="Failed to resolve async component "+u+": "+t;s||(s=i(t)?t:new Error(e),r(s))}));try{c=t(h,l)}catch(p){l(p)}if(c)if("function"===typeof c.then)c.then(h,l);else{var f=c.component;f&&"function"===typeof f.then&&f.then(h,l)}}})),o||r()}}function jt(t,e){return zt(t.map((function(t){return Object.keys(t.components).map((function(n){return e(t.components[n],t.instances[n],t,n)}))})))}function zt(t){return Array.prototype.concat.apply([],t)}var Bt="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Vt(t){return t.__esModule||Bt&&"Module"===t[Symbol.toStringTag]}function Gt(t){var e=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];if(!e)return e=!0,t.apply(this,n)}}var Ht=function(t){function e(e){t.call(this),this.name=this._name="NavigationDuplicated",this.message='Navigating to current location ("'+e.fullPath+'") is not allowed',Object.defineProperty(this,"stack",{value:(new t).stack,writable:!0,configurable:!0})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);Ht._name="NavigationDuplicated";var Wt=function(t,e){this.router=t,this.base=qt(e),this.current=w,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function qt(t){if(!t)if(ct){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function Yt(t,e){var n,r=Math.max(t.length,e.length);for(n=0;n<r;n++)if(t[n]!==e[n])break;return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}function Xt(t,e,n,r){var i=jt(t,(function(t,r,i,o){var a=Kt(t,e);if(a)return Array.isArray(a)?a.map((function(t){return n(t,r,i,o)})):n(a,r,i,o)}));return zt(r?i.reverse():i)}function Kt(t,e){return"function"!==typeof t&&(t=et.extend(t)),t.options[e]}function $t(t){return Xt(t,"beforeRouteLeave",Jt,!0)}function Qt(t){return Xt(t,"beforeRouteUpdate",Jt)}function Jt(t,e){if(e)return function(){return t.apply(e,arguments)}}function Zt(t,e,n){return Xt(t,"beforeRouteEnter",(function(t,r,i,o){return te(t,i,o,e,n)}))}function te(t,e,n,r,i){return function(o,a,s){return t(o,a,(function(t){"function"===typeof t&&r.push((function(){ee(t,e.instances,n,i)})),s(t)}))}}function ee(t,e,n,r){e[n]&&!e[n]._isBeingDestroyed?t(e[n]):r()&&setTimeout((function(){ee(t,e,n,r)}),16)}Wt.prototype.listen=function(t){this.cb=t},Wt.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},Wt.prototype.onError=function(t){this.errorCbs.push(t)},Wt.prototype.transitionTo=function(t,e,n){var r=this,i=this.router.match(t,this.current);this.confirmTransition(i,(function(){r.updateRoute(i),e&&e(i),r.ensureURL(),r.ready||(r.ready=!0,r.readyCbs.forEach((function(t){t(i)})))}),(function(t){n&&n(t),t&&!r.ready&&(r.ready=!0,r.readyErrorCbs.forEach((function(e){e(t)})))}))},Wt.prototype.confirmTransition=function(t,e,n){var a=this,s=this.current,u=function(t){!o(Ht,t)&&i(t)&&(a.errorCbs.length?a.errorCbs.forEach((function(e){e(t)})):(r(!1,"uncaught error during route navigation:"),console.error(t))),n&&n(t)};if(S(t,s)&&t.matched.length===s.matched.length)return this.ensureURL(),u(new Ht(t));var c=Yt(this.current.matched,t.matched),h=c.updated,l=c.deactivated,f=c.activated,p=[].concat($t(l),this.router.beforeHooks,Qt(h),f.map((function(t){return t.beforeEnter})),Ut(f));this.pending=t;var d=function(e,n){if(a.pending!==t)return u();try{e(t,s,(function(t){!1===t||i(t)?(a.ensureURL(!0),u(t)):"string"===typeof t||"object"===typeof t&&("string"===typeof t.path||"string"===typeof t.name)?(u(),"object"===typeof t&&t.replace?a.replace(t):a.push(t)):n(t)}))}catch(r){u(r)}};Ft(p,d,(function(){var n=[],r=function(){return a.current===t},i=Zt(f,n,r),o=i.concat(a.router.resolveHooks);Ft(o,d,(function(){if(a.pending!==t)return u();a.pending=null,e(t),a.router.app&&a.router.app.$nextTick((function(){n.forEach((function(t){t()}))}))}))}))},Wt.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach((function(n){n&&n(t,e)}))};var ne=function(t){function e(e,n){var r=this;t.call(this,e,n);var i=e.options.scrollBehavior,o=Lt&&i;o&&Et();var a=re(this.base);window.addEventListener("popstate",(function(t){var n=r.current,i=re(r.base);r.current===w&&i===a||r.transitionTo(i,(function(t){o&&St(e,t,n,!0)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,(function(t){Dt(N(r.base+t.fullPath)),St(r.router,t,o,!1),e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,(function(t){kt(N(r.base+t.fullPath)),St(r.router,t,o,!1),e&&e(t)}),n)},e.prototype.ensureURL=function(t){if(re(this.base)!==this.current.fullPath){var e=N(this.base+this.current.fullPath);t?Dt(e):kt(e)}},e.prototype.getCurrentLocation=function(){return re(this.base)},e}(Wt);function re(t){var e=decodeURI(window.location.pathname);return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var ie=function(t){function e(e,n,r){t.call(this,e,n),r&&oe(this.base)||ae()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router,n=e.options.scrollBehavior,r=Lt&&n;r&&Et(),window.addEventListener(Lt?"popstate":"hashchange",(function(){var e=t.current;ae()&&t.transitionTo(se(),(function(n){r&&St(t.router,n,e,!0),Lt||he(n.fullPath)}))}))},e.prototype.push=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,(function(t){ce(t.fullPath),St(r.router,t,o,!1),e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var r=this,i=this,o=i.current;this.transitionTo(t,(function(t){he(t.fullPath),St(r.router,t,o,!1),e&&e(t)}),n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;se()!==e&&(t?ce(e):he(e))},e.prototype.getCurrentLocation=function(){return se()},e}(Wt);function oe(t){var e=re(t);if(!/^\/#/.test(e))return window.location.replace(N(t+"/#"+e)),!0}function ae(){var t=se();return"/"===t.charAt(0)||(he("/"+t),!1)}function se(){var t=window.location.href,e=t.indexOf("#");if(e<0)return"";t=t.slice(e+1);var n=t.indexOf("?");if(n<0){var r=t.indexOf("#");t=r>-1?decodeURI(t.slice(0,r))+t.slice(r):decodeURI(t)}else t=decodeURI(t.slice(0,n))+t.slice(n);return t}function ue(t){var e=window.location.href,n=e.indexOf("#"),r=n>=0?e.slice(0,n):e;return r+"#"+t}function ce(t){Lt?Dt(ue(t)):window.location.hash=t}function he(t){Lt?kt(ue(t)):window.location.replace(ue(t))}var le=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var r=this;this.transitionTo(t,(function(t){r.stack=r.stack.slice(0,r.index+1).concat(t),r.index++,e&&e(t)}),n)},e.prototype.replace=function(t,e,n){var r=this;this.transitionTo(t,(function(t){r.stack=r.stack.slice(0,r.index).concat(t),e&&e(t)}),n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,(function(){e.index=n,e.updateRoute(r)}),(function(t){o(Ht,t)&&(e.index=n)}))}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Wt),fe=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=dt(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!Lt&&!1!==t.fallback,this.fallback&&(e="hash"),ct||(e="abstract"),this.mode=e,e){case"history":this.history=new ne(this,t.base);break;case"hash":this.history=new ie(this,t.base,this.fallback);break;case"abstract":this.history=new le(this,t.base);break;default:0}},pe={currentRoute:{configurable:!0}};function de(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function ve(t,e,n){var r="hash"===n?"#"+e:e;return t?N(t+"/"+r):r}fe.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},pe.currentRoute.get=function(){return this.history&&this.history.current},fe.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",(function(){var n=e.apps.indexOf(t);n>-1&&e.apps.splice(n,1),e.app===t&&(e.app=e.apps[0]||null)})),!this.app){this.app=t;var n=this.history;if(n instanceof ne)n.transitionTo(n.getCurrentLocation());else if(n instanceof ie){var r=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen((function(t){e.apps.forEach((function(e){e._route=t}))}))}},fe.prototype.beforeEach=function(t){return de(this.beforeHooks,t)},fe.prototype.beforeResolve=function(t){return de(this.resolveHooks,t)},fe.prototype.afterEach=function(t){return de(this.afterHooks,t)},fe.prototype.onReady=function(t,e){this.history.onReady(t,e)},fe.prototype.onError=function(t){this.history.onError(t)},fe.prototype.push=function(t,e,n){var r=this;if(!e&&!n&&"undefined"!==typeof Promise)return new Promise((function(e,n){r.history.push(t,e,n)}));this.history.push(t,e,n)},fe.prototype.replace=function(t,e,n){var r=this;if(!e&&!n&&"undefined"!==typeof Promise)return new Promise((function(e,n){r.history.replace(t,e,n)}));this.history.replace(t,e,n)},fe.prototype.go=function(t){this.history.go(t)},fe.prototype.back=function(){this.go(-1)},fe.prototype.forward=function(){this.go(1)},fe.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(t){return Object.keys(t.components).map((function(e){return t.components[e]}))}))):[]},fe.prototype.resolve=function(t,e,n){e=e||this.history.current;var r=tt(t,e,n,this),i=this.match(r,e),o=i.redirectedFrom||i.fullPath,a=this.history.base,s=ve(a,o,this.mode);return{location:r,route:i,href:s,normalizedTo:r,resolved:i}},fe.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==w&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(fe.prototype,pe),fe.install=ut,fe.version="3.1.6",ct&&window.Vue&&window.Vue.use(fe),e["a"]=fe},"8df4":function(t,e,n){"use strict";var r=n("7a77");function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t,e=new i((function(e){t=e}));return{token:e,cancel:t}},t.exports=i},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9263:function(t,e,n){"use strict";var r=n("ad6d"),i=n("9f7f"),o=RegExp.prototype.exec,a=String.prototype.replace,s=o,u=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,h=void 0!==/()??/.exec("")[1],l=u||h||c;l&&(s=function(t){var e,n,i,s,l=this,f=c&&l.sticky,p=r.call(l),d=l.source,v=0,m=t;return f&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),m=String(t).slice(l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==t[l.lastIndex-1])&&(d="(?: "+d+")",m=" "+m,v++),n=new RegExp("^(?:"+d+")",p)),h&&(n=new RegExp("^"+d+"$(?!\\s)",p)),u&&(e=l.lastIndex),i=o.call(f?n:l,m),f?i?(i.input=i.input.slice(v),i[0]=i[0].slice(v),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:u&&i&&(l.lastIndex=l.global?i.index+i[0].length:e),h&&i&&i.length>1&&a.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),t.exports=s},"93e9":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("1b53"),i=function(t,e,n,i,o){r["a"].call(this),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};i.prototype=Object.assign(Object.create(r["a"].prototype),{constructor:i,render:function(t,e,n){var r,i,o,a=t.autoClear;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r=t.getClearColor().getHex(),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(r,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=a}})},"94ca":function(t,e,n){var r=n("d039"),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},9628:function(t,e,n){},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=S(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var h="suspendedStart",l="suspendedYield",f="executing",p="completed",d={};function v(){}function m(){}function g(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(I([])));_&&_!==n&&r.call(_,o)&&(y=_);var w=g.prototype=v.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t,e){function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var h=u.arg,l=h.value;return l&&"object"===typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){h.value=t,a(h)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;function o(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function S(t,e,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return N()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?p:l,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}function T(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function I(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:N}}function N(){return{value:e,done:!0}}return m.prototype=w.constructor=g,g.constructor=m,g[s]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new E(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),w[s]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},"96f5":function(t,e,n){},"99af":function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("e8b5"),a=n("861d"),s=n("7b0b"),u=n("50c4"),c=n("8418"),h=n("65f0"),l=n("1dde"),f=n("b622"),p=n("2d00"),d=f("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",g=p>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),y=l("concat"),b=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)},_=!g||!y;r({target:"Array",proto:!0,forced:_},{concat:function(t){var e,n,r,i,o,a=s(this),l=h(a,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],b(o)){if(i=u(o.length),f+i>v)throw TypeError(m);for(n=0;n<i;n++,f++)n in o&&c(l,f,o[n])}else{if(f>=v)throw TypeError(m);c(l,f++,o)}return l.length=f,l}})},"9a8c":function(t,e,n){"use strict";var r=n("ebb5"),i=n("145e"),o=r.aTypedArray,a=r.exportTypedArrayMethod;a("copyWithin",(function(t,e){return i.call(o(this),t,e,arguments.length>2?arguments[2]:void 0)}))},"9ab4":function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return h})),n.d(e,"__generator",(function(){return l})),n.d(e,"__exportStar",(function(){return f})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return d})),n.d(e,"__spread",(function(){return v})),n.d(e,"__spreadArrays",(function(){return m})),n.d(e,"__await",(function(){return g})),n.d(e,"__asyncGenerator",(function(){return y})),n.d(e,"__asyncDelegator",(function(){return b})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return w})),n.d(e,"__importStar",(function(){return x})),n.d(e,"__importDefault",(function(){return E})),n.d(e,"__classPrivateFieldGet",(function(){return S})),n.d(e,"__classPrivateFieldSet",(function(){return T}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function y(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{u(i[t](e))}catch(n){l(o[0][3],n)}}function u(t){t.value instanceof g?Promise.resolve(t.value.v).then(c,h):l(o[0][2],t)}function c(t){s("next",t)}function h(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:g(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"===typeof p?p(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){e=t[n](e),i(r,o,e.done,e.value)}))}}function i(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},"9bdd":function(t,e,n){var r=n("825a");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){var o=t["return"];throw void 0!==o&&r(o.call(t)),a}}},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),o=n("825a"),a=n("c04e"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9dbb":function(t,e,n){(function(t,n){n(e)})(0,(function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){i=t[e].apply(t,r),n(i).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function m(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),a(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),a(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=m,Object.defineProperty(t,"__esModule",{value:!0})}))},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),a=n("d44e"),s=n("3f8c"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},"9f7f":function(t,e,n){"use strict";var r=n("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a078:function(t,e,n){var r=n("7b0b"),i=n("50c4"),o=n("35a1"),a=n("e95a"),s=n("0366"),u=n("ebb5").aTypedArrayConstructor;t.exports=function(t){var e,n,c,h,l,f,p=r(t),d=arguments.length,v=d>1?arguments[1]:void 0,m=void 0!==v,g=o(p);if(void 0!=g&&!a(g)){l=g.call(p),f=l.next,p=[];while(!(h=f.call(l)).done)p.push(h.value)}for(m&&d>2&&(v=s(v,arguments[2],2)),n=i(p.length),c=new(u(this))(n),e=0;n>e;e++)c[e]=m?v(p[e],e):p[e];return c}},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),a=n("c430"),s=n("83ab"),u=n("4930"),c=n("fdbf"),h=n("d039"),l=n("5135"),f=n("e8b5"),p=n("861d"),d=n("825a"),v=n("7b0b"),m=n("fc6a"),g=n("c04e"),y=n("5c6c"),b=n("7c73"),_=n("df75"),w=n("241c"),x=n("057f"),E=n("7418"),S=n("06cf"),T=n("9bf2"),M=n("d1e7"),A=n("9112"),C=n("6eeb"),I=n("5692"),N=n("f772"),R=n("d012"),O=n("90e3"),P=n("b622"),L=n("e538"),D=n("746f"),k=n("d44e"),F=n("69f3"),U=n("b727").forEach,j=N("hidden"),z="Symbol",B="prototype",V=P("toPrimitive"),G=F.set,H=F.getterFor(z),W=Object[B],q=i.Symbol,Y=o("JSON","stringify"),X=S.f,K=T.f,$=x.f,Q=M.f,J=I("symbols"),Z=I("op-symbols"),tt=I("string-to-symbol-registry"),et=I("symbol-to-string-registry"),nt=I("wks"),rt=i.QObject,it=!rt||!rt[B]||!rt[B].findChild,ot=s&&h((function(){return 7!=b(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=X(W,e);r&&delete W[e],K(t,e,n),r&&t!==W&&K(W,e,r)}:K,at=function(t,e){var n=J[t]=b(q[B]);return G(n,{type:z,tag:t,description:e}),s||(n.description=e),n},st=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof q},ut=function(t,e,n){t===W&&ut(Z,e,n),d(t);var r=g(e,!0);return d(n),l(J,r)?(n.enumerable?(l(t,j)&&t[j][r]&&(t[j][r]=!1),n=b(n,{enumerable:y(0,!1)})):(l(t,j)||K(t,j,y(1,{})),t[j][r]=!0),ot(t,r,n)):K(t,r,n)},ct=function(t,e){d(t);var n=m(e),r=_(n).concat(dt(n));return U(r,(function(e){s&&!lt.call(n,e)||ut(t,e,n[e])})),t},ht=function(t,e){return void 0===e?b(t):ct(b(t),e)},lt=function(t){var e=g(t,!0),n=Q.call(this,e);return!(this===W&&l(J,e)&&!l(Z,e))&&(!(n||!l(this,e)||!l(J,e)||l(this,j)&&this[j][e])||n)},ft=function(t,e){var n=m(t),r=g(e,!0);if(n!==W||!l(J,r)||l(Z,r)){var i=X(n,r);return!i||!l(J,r)||l(n,j)&&n[j][r]||(i.enumerable=!0),i}},pt=function(t){var e=$(m(t)),n=[];return U(e,(function(t){l(J,t)||l(R,t)||n.push(t)})),n},dt=function(t){var e=t===W,n=$(e?Z:m(t)),r=[];return U(n,(function(t){!l(J,t)||e&&!l(W,t)||r.push(J[t])})),r};if(u||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=O(t),n=function(t){this===W&&n.call(Z,t),l(this,j)&&l(this[j],e)&&(this[j][e]=!1),ot(this,e,y(1,t))};return s&&it&&ot(W,e,{configurable:!0,set:n}),at(e,t)},C(q[B],"toString",(function(){return H(this).tag})),C(q,"withoutSetter",(function(t){return at(O(t),t)})),M.f=lt,T.f=ut,S.f=ft,w.f=x.f=pt,E.f=dt,L.f=function(t){return at(P(t),t)},s&&(K(q[B],"description",{configurable:!0,get:function(){return H(this).description}}),a||C(W,"propertyIsEnumerable",lt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),U(_(nt),(function(t){D(t)})),r({target:z,stat:!0,forced:!u},{for:function(t){var e=String(t);if(l(tt,e))return tt[e];var n=q(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(l(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:ht,defineProperty:ut,defineProperties:ct,getOwnPropertyDescriptor:ft}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:pt,getOwnPropertySymbols:dt}),r({target:"Object",stat:!0,forced:h((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(v(t))}}),Y){var vt=!u||h((function(){var t=q();return"[null]"!=Y([t])||"{}"!=Y({a:t})||"{}"!=Y(Object(t))}));r({target:"JSON",stat:!0,forced:vt},{stringify:function(t,e,n){var r,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=e,(p(e)||void 0!==t)&&!st(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,Y.apply(null,i)}})}q[B][V]||A(q[B],V,q[B].valueOf),k(q,z),R[j]=!0},a584:function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=function(){};function a(t,e){return new Promise((function(n,r){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");if(o.async=!0,o.src=t,o.charset="utf-8",e){var a=document.createElement("link");a.href=e,a.rel="preconnect",i.appendChild(a)}i.appendChild(o),o.onload=n,o.onerror=r}))}function s(t,e){console.warn("[vue-gtag] "+t),e&&e.stack&&console.warn(e.stack)}function u(t){return"function"===typeof t}function c(t){return t&&"object"===r(t)&&!Array.isArray(t)}function h(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var o=n.shift();if(c(t)&&c(o)){for(var a in o)c(o[a])?(t[a]||Object.assign(t,i({},a,{})),h(t[a],o[a])):Object.assign(t,i({},a,o[a]));return h.apply(void 0,[t].concat(n))}}function l(){var t,e=D(),n=e.globalObjectName;"undefined"!==typeof window&&(t=window)[n].apply(t,arguments)}var f,p,d=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=D(),i=r.config,o=r.includes;l.apply(void 0,["config",i.id].concat(e)),Array.isArray(o)&&o.forEach((function(t){l.apply(void 0,["config",t.id].concat(e))}))},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=D(),r=n.defaultGroupName,i=n.includes,o=e;i&&null==o.send_to&&(o.send_to=i.map((function(t){return t.id})).concat(r)),l("event",t,o)},m=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i={};i="string"===typeof r?{page_path:r,page_location:window.location.href}:r,v("page_view",i)},g=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(void 0,["screen_view"].concat(e))},y=function(t){d({custom_map:t})},b=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(void 0,["timing_complete"].concat(e))},_=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(void 0,["exception"].concat(e))},w=function(t){d("linker",t)},x=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(void 0,["purchase"].concat(e))},E=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];v.apply(void 0,["refund"].concat(e))},S=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];l.apply(void 0,["set"].concat(e))},T=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=D(),n=e.includes,r=e.config;window["ga-disable-".concat(r.id)]=t,Array.isArray(n)&&n.forEach((function(e){window["ga-disable-".concat(e.id)]=t}))},M=function(){T(!1)},A=function(){T(!0)},C={query:l,config:d,event:v,pageview:m,screenview:g,customMap:y,time:b,exception:_,linker:w,purchase:x,refund:E,set:S,optIn:M,optOut:A},I=function(){var t=F();t.$gtag=t.prototype.$gtag=C},N=function(t,e){if(t.path!==e.path){var n,r=D(),i=r.pageTrackerTemplate,o=r.pageTrackerScreenviewEnabled,a=r.appName,u=i(t,e);n=u||(o?{app_name:a,screen_name:t.name}:{page_title:t.name,page_path:t.path,page_location:window.location.href}),!o||n.app_name?!o||n.screen_name?o?g(n):m(n):s("To use the screenview, name your routes"):s("To use the screenview, add the appName to the plugin options")}},R=function(t){var e=F(),n=D(),r=n.onBeforeTrack,i=n.onAfterTrack;t.onReady((function(){t.afterEach((function(t,n){e.nextTick().then((function(){r(t,n),N(t,n),i(t,n)}))}))}))},O=function(){var t=U();t&&R(t)};function P(){if("undefined"!==typeof document&&"undefined"!==typeof window){var t=D(),e=t.enabled,n=t.globalObjectName,r=t.config,i=r.id,o=r.params,c=t.includes,h=t.pageTrackerEnabled,l=t.onReady,f=t.disableScriptLoad;if(e||A(),null==window[n]&&(window.dataLayer=window.dataLayer||[],window[n]=function(){window.dataLayer.push(arguments)}),window[n]("js",new Date),o?window[n]("config",i,o):window[n]("config",i),Array.isArray(c)&&c.forEach((function(t){t.params?window[n]("config",t.id,t.params):window[n]("config",t.id)})),h&&O(),!f){var p="https://www.googletagmanager.com",d="".concat(p,"/gtag/js?id=").concat(i);return a(d,p).then((function(){var t=window[n];return u(l)&&l(t),t})).catch((function(t){return s("Ops! Something happened and gtag.js couldn't be loaded",t),t}))}}}var L={pageTrackerTemplate:o,onBeforeTrack:o,onAfterTrack:o,onReady:o,enabled:!0,disableScriptLoad:!1,bootstrap:!0,globalObjectName:"gtag",pageTrackerEnabled:!0,pageTrackerScreenviewEnabled:!1,defaultGroupName:"default",includes:null,config:null},D=function(){return L},k=function(t){return h(L,t)},F=function(){return f},U=function(){return p};function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;f=t,p=n,k(e),I(),L.bootstrap&&P()}C.query,C.config,C.event,C.pageview,C.screenview,C.customMap,C.time,C.exception,C.linker,C.purchase,C.set,C.optIn,C.optOut;e["a"]=j},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a79d:function(t,e,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),a=n("d039"),s=n("d066"),u=n("4840"),c=n("cdf9"),h=n("6eeb"),l=!!o&&a((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:l},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype["finally"]||h(o.prototype,"finally",s("Promise").prototype["finally"])},a7fe:function(t,e,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function n(t,e){if(!n.installed){if(n.installed=!0,!e)return void console.error("You have to install axios");t.axios=e,Object.defineProperties(t.prototype,{axios:{get:function(){return e}},$http:{get:function(){return e}}})}}"object"==o(e)?t.exports=n:(r=[],i=function(){return n}.apply(e,r),void 0===i||(t.exports=i))}()},a975:function(t,e,n){"use strict";var r=n("ebb5"),i=n("b727").every,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("every",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},a981:function(t,e){t.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},a9e3:function(t,e,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("94ca"),a=n("6eeb"),s=n("5135"),u=n("c6b6"),c=n("7156"),h=n("c04e"),l=n("d039"),f=n("7c73"),p=n("241c").f,d=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,g="Number",y=i[g],b=y.prototype,_=u(f(b))==g,w=function(t){var e,n,r,i,o,a,s,u,c=h(t,!1);if("string"==typeof c&&c.length>2)if(c=m(c),e=c.charCodeAt(0),43===e||45===e){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=c.slice(2),a=o.length,s=0;s<a;s++)if(u=o.charCodeAt(s),u<48||u>i)return NaN;return parseInt(o,r)}return+c};if(o(g,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var x,E=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof E&&(_?l((function(){b.valueOf.call(n)})):u(n)!=g)?c(new y(w(e)),n,E):w(e)},S=r?p(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;S.length>T;T++)s(y,x=S[T])&&!s(E,x)&&v(E,x,d(y,x));E.prototype=b,b.constructor=E,a(i,g,E)}},abfd:function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return l})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return p}));var o,a=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=(i={},i[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){var e="string"===typeof t?s[t]:t;a.forEach((function(t){t.logLevel=e}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){var u=i[r];n(u)}}},ac1f:function(t,e,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ace4:function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("621a"),a=n("825a"),s=n("23cb"),u=n("50c4"),c=n("4840"),h=o.ArrayBuffer,l=o.DataView,f=h.prototype.slice,p=i((function(){return!new h(2).slice(1,void 0).byteLength}));r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:p},{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(a(this),t);var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(c(this,h))(u(i-r)),p=new l(this),d=new l(o),v=0;while(r<i)d.setUint8(v++,p.getUint8(r++));return o}})},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae40:function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("5135"),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,h=o(e,0)?e[0]:u,l=o(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,h,l)}))}},ae93:function(t,e,n){"use strict";var r,i,o,a=n("e163"),s=n("9112"),u=n("5135"),c=n("b622"),h=n("c430"),l=c("iterator"),f=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)),i!==Object.prototype&&(r=i)):f=!0),void 0==r&&(r={}),h||u(r,l)||s(r,l,p),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},b041:function(t,e,n){"use strict";var r=n("00ee"),i=n("f5df");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b39a:function(t,e,n){"use strict";var r=n("da84"),i=n("ebb5"),o=n("d039"),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,h=[].slice,l=!!a&&o((function(){c.call(new a(1))})),f=o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])}));u("toLocaleString",(function(){return c.apply(l?h.call(s(this)):s(this),arguments)}),f)},b50d:function(t,e,n){"use strict";var r=n("c532"),i=n("467f"),o=n("30b5"),a=n("83b9"),s=n("c345"),u=n("3934"),c=n("2d83");t.exports=function(t){return new Promise((function(e,h){var l=t.data,f=t.headers;r.isFormData(l)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",v=t.auth.password||"";f.Authorization="Basic "+btoa(d+":"+v)}var m=a(t.baseURL,t.url);if(p.open(t.method.toUpperCase(),o(m,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?p.response:p.responseText,o={data:r,status:p.status,statusText:p.statusText,headers:n,config:t,request:p};i(e,h,o),p=null}},p.onabort=function(){p&&(h(c("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){h(c("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),h(c(e,t,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var g=n("7aac"),y=(t.withCredentials||u(m))&&t.xsrfCookieName?g.read(t.xsrfCookieName):void 0;y&&(f[t.xsrfHeaderName]=y)}if("setRequestHeader"in p&&r.forEach(f,(function(t,e){"undefined"===typeof l&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),t.responseType)try{p.responseType=t.responseType}catch(b){if("json"!==t.responseType)throw b}"function"===typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),h(t),p=null)})),void 0===l&&(l=null),p.send(l)}))}},b575:function(t,e,n){var r,i,o,a,s,u,c,h,l=n("da84"),f=n("06cf").f,p=n("c6b6"),d=n("2cf4").set,v=n("1cdc"),m=l.MutationObserver||l.WebKitMutationObserver,g=l.process,y=l.Promise,b="process"==p(g),_=f(l,"queueMicrotask"),w=_&&_.value;w||(r=function(){var t,e;b&&(t=g.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?a():o=void 0,n}}o=void 0,t&&t.enter()},b?a=function(){g.nextTick(r)}:m&&!v?(s=!0,u=document.createTextNode(""),new m(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),h=c.then,a=function(){h.call(c,r)}):a=function(){d.call(l,r)}),t.exports=w||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},b622:function(t,e,n){var r=n("da84"),i=n("5692"),o=n("5135"),a=n("90e3"),s=n("4930"),u=n("fdbf"),c=i("wks"),h=r.Symbol,l=u?h:h&&h.withoutSetter||a;t.exports=function(t){return o(c,t)||(s&&o(h,t)?c[t]=h[t]:c[t]=l("Symbol."+t)),c[t]}},b680:function(t,e,n){"use strict";var r=n("23e7"),i=n("a691"),o=n("408a"),a=n("1148"),s=n("d039"),u=1..toFixed,c=Math.floor,h=function(t,e,n){return 0===e?n:e%2===1?h(t,e-1,n*t):h(t*t,e/2,n)},l=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},f=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}));r({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,n,r,s,u=o(this),f=i(t),p=[0,0,0,0,0,0],d="",v="0",m=function(t,e){var n=-1,r=e;while(++n<6)r+=t*p[n],p[n]=r%1e7,r=c(r/1e7)},g=function(t){var e=6,n=0;while(--e>=0)n+=p[e],p[e]=c(n/t),n=n%t*1e7},y=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var n=String(p[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(d="-",u=-u),u>1e-21)if(e=l(u*h(2,69,1))-69,n=e<0?u*h(2,-e,1):u/h(2,e,1),n*=4503599627370496,e=52-e,e>0){m(0,n),r=f;while(r>=7)m(1e7,0),r-=7;m(h(10,r,1),0),r=e-1;while(r>=23)g(1<<23),r-=23;g(1<<r),m(1,1),g(2),v=y()}else m(0,n),m(1<<-e,0),v=y()+a.call("0",f);return f>0?(s=v.length,v=d+(s<=f?"0."+a.call("0",f-s)+v:v.slice(0,s-f)+"."+v.slice(s-f))):v=d+v,v}})},b727:function(t,e,n){var r=n("0366"),i=n("44ad"),o=n("7b0b"),a=n("50c4"),s=n("65f0"),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,h=4==t,l=6==t,f=5==t||l;return function(p,d,v,m){for(var g,y,b=o(p),_=i(b),w=r(d,v,3),x=a(_.length),E=0,S=m||s,T=e?S(p,x):n?S(p,0):void 0;x>E;E++)if((f||E in _)&&(g=_[E],y=w(g,E,b),t))if(e)T[E]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return E;case 2:u.call(T,g)}else if(h)return!1;return l?-1:c||h?h:T}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},b7aa:function(t,e,n){"use strict";n.r(e),function(t){var e=n("c23d"),r=n.n(e);(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function i(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}var o=i(this);function a(t,e){if(e){var r=o;t=t.split(".");for(var i=0;i<t.length-1;i++){var a=t[i];a in r||(r[a]={}),r=r[a]}t=t[t.length-1],i=r[t],e=e(i),e!=i&&null!=e&&n(r,t,{configurable:!0,writable:!0,value:e})}}function s(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function u(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:s(t)}}a("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var i=o.setTimeout;n.prototype.c=function(t){i(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.w(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},e.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Oa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=u(t),o=i.next();!o.done;o=i.next())r(o.value).Oa(e,n)}))},e.all=function(t){var n=u(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,s--,0==s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Oa(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var c=c||{},h=this||self,l=/^[\w+/_-]+[=]{0,2}$/,f=null;function p(){}function d(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function v(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function m(t){return"function"==d(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,b)&&t[b]||(t[b]=++_)}var b="closure_uid_"+(1e9*Math.random()>>>0),_=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function x(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:x,E.apply(null,arguments)}function S(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now||function(){return+new Date};function M(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t,e,n){this.code=N+t,this.message=e||R[t]||"",this.a=n||null}function C(t){var e=t&&t.code;return e?new A(e.substring(N.length),t.message,t.serverResponse):null}M(A,Error),A.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.v()};var I,N="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in O)if(O[e].id===t)return t=O[e],{firebaseEndpoint:t.Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function L(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function k(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function F(t,e){throw new k("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function z(){this.b=this.a=null}I=P("__EID__")?"__EID__":void 0,M(D,Error),D.prototype.name="CustomError",M(k,D),k.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var B=new U((function(){return new G}),(function(t){t.reset()}));function V(){var t=Me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function G(){this.next=this.b=this.a=null}z.prototype.add=function(t,e){var n=B.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},G.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},G.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},W=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function q(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}var Y=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},X=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},K=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function $(t){t:{for(var e=ts,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function Q(t,e){return 0<=H(t,e)}function J(t,e){var n;return e=H(t,e),(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function Z(t,e){q(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function tt(t){return Array.prototype.concat.apply([],arguments)}function et(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var nt,rt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},it=/&/g,ot=/</g,at=/>/g,st=/"/g,ut=/'/g,ct=/\x00/g,ht=/[\x00&<>"']/;function lt(t,e){return-1!=t.indexOf(e)}function ft(t,e){return t<e?-1:t>e?1:0}t:{var pt=h.navigator;if(pt){var dt=pt.userAgent;if(dt){nt=dt;break t}}nt=""}function vt(t){return lt(nt,t)}function mt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function gt(t){for(var e in t)return!1;return!0}function yt(t){var e,n={};for(e in t)n[e]=t[e];return n}var bt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _t(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<bt.length;o++)n=bt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||h,r.Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function xt(t,e){this.a=t===Tt&&e||"",this.b=St}function Et(t){return t instanceof xt&&t.constructor===xt&&t.b===St?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}xt.prototype.ra=!0,xt.prototype.qa=function(){return this.a},xt.prototype.toString=function(){return"Const{"+this.a+"}"};var St={},Tt={},Mt=new xt(Tt,"");function At(t,e){this.a=t===Pt&&e||"",this.b=Ot}function Ct(t){return t instanceof At&&t.constructor===At&&t.b===Ot?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function It(t,e){var n=Et(t);if(!Rt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Nt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof xt?Et(t):encodeURIComponent(String(t))})),new At(Pt,t)}At.prototype.ra=!0,At.prototype.qa=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Nt=/%{(\w+)}/g,Rt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ot={},Pt={};function Lt(t,e){this.a=t===jt&&e||"",this.b=Ut}function Dt(t){return t instanceof Lt&&t.constructor===Lt&&t.b===Ut?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Lt.prototype.ra=!0,Lt.prototype.qa=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var kt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){return t instanceof Lt?t:(t="object"==typeof t&&t.ra?t.qa():String(t),kt.test(t)||(t="about:invalid#zClosurez"),new Lt(jt,t))}var Ut={},jt={};function zt(){this.a="",this.b=Vt}function Bt(t){return t instanceof zt&&t.constructor===zt&&t.b===Vt?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}zt.prototype.ra=!0,zt.prototype.qa=function(){return this.a.toString()},zt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function Gt(t){var e=new zt;return e.a=t,e}Gt("<!DOCTYPE html>");var Ht=Gt("");function Wt(t){var e=new At(Pt,Et(Mt));wt(t,"HTMLIFrameElement"),t.src=Ct(e).toString()}function qt(t,e){wt(t,"HTMLScriptElement"),t.src=Ct(e),null===f&&(e=h.document,f=(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""),e=f,e&&t.setAttribute("nonce",e)}function Yt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Xt(t){return ht.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(it,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ot,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(at,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(st,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ut,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ct,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}function $t(t,e){var n=ce;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}Gt("<br>"),Kt[" "]=p;var Qt,Jt=vt("Opera"),Zt=vt("Trident")||vt("MSIE"),te=vt("Edge"),ee=te||Zt,ne=vt("Gecko")&&!(lt(nt.toLowerCase(),"webkit")&&!vt("Edge"))&&!(vt("Trident")||vt("MSIE"))&&!vt("Edge"),re=lt(nt.toLowerCase(),"webkit")&&!vt("Edge");function ie(){var t=h.document;return t?t.documentMode:void 0}t:{var oe="",ae=function(){var t=nt;return ne?/rv:([^\);]+)(\)|;)/.exec(t):te?/Edge\/([\d\.]+)/.exec(t):Zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):re?/WebKit\/(\S+)/.exec(t):Jt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ae&&(oe=ae?ae[1]:""),Zt){var se=ie();if(null!=se&&se>parseFloat(oe)){Qt=String(se);break t}}Qt=oe}var ue,ce={};function he(t){return $t(t,(function(){for(var e=0,n=rt(String(Qt)).split("."),r=rt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ft(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ft(0==a[2].length,0==s[2].length)||ft(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}ue=h.document&&Zt?ie():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Bp){}var le=!Zt||9<=Number(ue);function fe(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function pe(t,e){mt(e,(function(e,n){e&&"object"==typeof e&&e.ra&&(e=e.qa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:me.hasOwnProperty(n)?t.setAttribute(me[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var de,ve,me={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ge(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!le&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Xt(a.name),'"'),a.type){o.push(' type="',Xt(a.type),'"');var s={};_t(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=be(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):pe(o,a)),2<r.length&&ye(i,o,r),o}function ye(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!v(o)||g(o)&&0<o.nodeType?r(o):W(_e(o)?et(o):o,r)}}function be(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function _e(t){if(t&&"number"==typeof t.length){if(g(t))return"function"==typeof t.item||"string"==typeof t.item;if(m(t))return"function"==typeof t.item}return!1}function we(t){h.setTimeout((function(){throw t}),0)}function xe(){var t=h.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!vt("Presto")&&(t=function(){var t=be(document,"IFRAME");t.style.display="none",Wt(t),document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.write(Bt(Ht)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=E((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!vt("Trident")&&!vt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}return function(t){h.setTimeout(t,0)}}function Ee(t,e){ve||Se(),Te||(ve(),Te=!0),Me.add(t,e)}function Se(){if(h.Promise&&h.Promise.resolve){var t=h.Promise.resolve(void 0);ve=function(){t.then(Ae)}}else ve=function(){var t=Ae;!m(h.setImmediate)||h.Window&&h.Window.prototype&&!vt("Edge")&&h.Window.prototype.setImmediate==h.setImmediate?(de||(de=xe()),de(t)):h.setImmediate(t)}}var Te=!1,Me=new z;function Ae(){for(var t;t=V();){try{t.a.call(t.b)}catch(e){we(e)}j(B,t)}Te=!1}function Ce(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=p)try{var n=this;t.call(e,(function(t){Ge(n,Ne,t)}),(function(t){if(!(t instanceof Je))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Ge(n,Re,t)}))}catch(r){Ge(this,Re,r)}}var Ie=0,Ne=2,Re=3;function Oe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Oe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Pe=new U((function(){return new Oe}),(function(t){t.reset()}));function Le(t,e,n){var r=Pe.get();return r.g=t,r.b=e,r.f=n,r}function De(t){if(t instanceof Ce)return t;var e=new Ce(p);return Ge(e,Ne,t),e}function ke(t){return new Ce((function(e,n){n(t)}))}function Fe(t,e,n){He(t,e,n,null)||Ee(S(e,t))}function Ue(t){return new Ce((function(e,n){var r=t.length,i=[];if(r)for(var o,a=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},u=0;u<t.length;u++)o=t[u],Fe(o,S(a,u),s);else e(i)}))}function je(t){return new Ce((function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&e(r)},a=0;a<t.length;a++)i=t[a],Fe(i,S(o,a,!0),S(o,a,!1));else e(r)}))}function ze(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ie&&1==r?ze(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Ye(n),Xe(n,i,Re,e)))}t.c=null}else Ge(t,Re,e)}function Be(t,e){t.b||t.a!=Ne&&t.a!=Re||qe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ve(t,e,n,r){var i=Le(null,null,null);return i.a=new Ce((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Je?o(e):t(i)}catch(a){o(a)}}:o})),i.a.c=t,Be(t,i),i.a}function Ge(t,e,n){t.a==Ie&&(t===n&&(e=Re,n=new TypeError("Promise cannot resolve to itself")),t.a=1,He(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,qe(t),e!=Re||n instanceof Je||$e(t,n)))}function He(t,e,n,r){if(t instanceof Ce)return Be(t,Le(e||p,n||null,r)),!0;if(L(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(m(i))return We(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function We(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}function qe(t){t.h||(t.h=!0,Ee(t.ec,t))}function Ye(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Xe(t,e,n,r){if(n==Re&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ke(e,n,r);else try{e.c?e.g.call(e.f):Ke(e,n,r)}catch(i){Qe.call(null,i)}j(Pe,e)}function Ke(t,e,n){e==Ne?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function $e(t,e){t.g=!0,Ee((function(){t.g&&Qe.call(null,e)}))}Ce.prototype.then=function(t,e,n){return Ve(this,m(t)?t:null,m(e)?e:null,n)},Ce.prototype.$goog_Thenable=!0,e=Ce.prototype,e.ma=function(t,e){return t=Le(t,t,e),t.c=!0,Be(this,t),this},e.o=function(t,e){return Ve(this,null,t,e)},e.cancel=function(t){if(this.a==Ie){var e=new Je(t);Ee((function(){ze(this,e)}),this)}},e.Yc=function(t){this.a=Ie,Ge(this,Ne,t)},e.Zc=function(t){this.a=Ie,Ge(this,Re,t)},e.ec=function(){for(var t;t=Ye(this);)Xe(this,t,this.a,this.i);this.h=!1};var Qe=we;function Je(t){D.call(this,t)}function Ze(){0!=tn&&(en[y(this)]=this),this.wa=this.wa,this.na=this.na}M(Je,D),Je.prototype.name="cancel";var tn=0,en={};function nn(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=tn)){var e=y(t);if(0!=tn&&t.na&&0<t.na.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete en[e]}}Ze.prototype.wa=!1,Ze.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var rn=Object.freeze||function(t){return t},on=!Zt||9<=Number(ue),an=Zt&&!he("9"),sn=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{h.addEventListener("test",p,e),h.removeEventListener("test",p,e)}catch(n){}return t}();function un(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function cn(t,e){if(un.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ne){t:{try{Kt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:hn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}un.prototype.preventDefault=function(){this.defaultPrevented=!0},M(cn,un);var hn=rn({2:"touch",3:"pen",4:"mouse"});cn.prototype.preventDefault=function(){cn.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,an)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},cn.prototype.f=function(){return this.a};var ln="closure_listenable_"+(1e6*Math.random()|0),fn=0;function pn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++fn,this.ua=this.Na=!1}function dn(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function vn(t){this.src=t,this.a={},this.b=0}function mn(t,e){var n=e.type;n in t.a&&J(t.a[n],e)&&(dn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function gn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}vn.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var a=gn(t,e,r,i);return-1<a?(e=t[a],n||(e.Na=!1)):(e=new pn(e,this.src,o,!!r,i),e.Na=n,t.push(e)),e};var yn="closure_lm_"+(1e6*Math.random()|0),bn={};function _n(t,e,n,r,i){if(r&&r.once)En(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)_n(t,e[o],n,r,i);else n=On(n),t&&t[ln]?Ln(t,e,n,g(r)?!!r.capture:!!r,i):wn(t,e,n,!1,r,i)}function wn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=g(i)?!!i.capture:!!i,s=Nn(t);if(s||(t[yn]=s=new vn(t)),n=s.add(e,n,r,a,o),!n.proxy){if(r=xn(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)sn||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function xn(){var t=In,e=on?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function En(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)En(t,e[o],n,r,i);else n=On(n),t&&t[ln]?Dn(t,e,n,g(r)?!!r.capture:!!r,i):wn(t,e,n,!0,r,i)}function Sn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Sn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=On(n),t&&t[ln]?(t=t.u,e=String(e).toString(),e in t.a&&(o=t.a[e],n=gn(o,n,r,i),-1<n&&(dn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Nn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=gn(e,n,r,i)),(n=-1<t?e[t]:null)&&Tn(n))}function Tn(t){if("number"!==typeof t&&t&&!t.ua){var e=t.src;if(e&&e[ln])mn(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Nn(e))?(mn(n,t),0==n.b&&(n.src=null,e[yn]=null)):dn(t)}}}function Mn(t){return t in bn?bn[t]:bn[t]="on"+t}function An(t,e,n,r){var i=!0;if((t=Nn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=Cn(o,r),i=i&&!1!==o)}return i}function Cn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&Tn(t),n.call(r,e)}function In(t,e){if(t.ua)return!0;if(!on){if(!e)t:{e=["window","event"];for(var n=h,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}if(r=e,e=new cn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=An(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=An(r[i],t,!1,e),n=n&&o}return n}return Cn(t,new cn(e,this))}function Nn(t){return t=t[yn],t instanceof vn?t:null}var Rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function On(t){return m(t)?t:(t[Rn]||(t[Rn]=function(e){return t.handleEvent(e)}),t[Rn])}function Pn(){Ze.call(this),this.u=new vn(this),this.Yb=this,this.eb=null}function Ln(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function Dn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function kn(t,e,n,r){if(e=t.u.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ua&&a.capture==n){var s=a.listener,u=a.Ta||a.src;a.Na&&mn(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Fn(t,e,n){if(m(t))n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function Un(t){var e=null;return new Ce((function(n,r){e=Fn((function(){n(void 0)}),t),-1==e&&r(Error("Failed to schedule timer."))})).o((function(t){throw h.clearTimeout(e),t}))}function jn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"===typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function zn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(v(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Bn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"===typeof t)W(t,e,void 0);else for(var n=zn(t),r=jn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}function Vn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Vn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Gn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Hn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Hn(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Hn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}M(Pn,Ze),Pn.prototype[ln]=!0,Pn.prototype.addEventListener=function(t,e,n,r){_n(this,t,e,n,r)},Pn.prototype.removeEventListener=function(t,e,n,r){Sn(this,t,e,n,r)},Pn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"===typeof t)t=new un(t,n);else if(t instanceof un)t.target=t.target||n;else{var i=t;t=new un(r,n),_t(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=kn(a,r,!0,t)&&i}if(a=t.b=n,i=kn(a,r,!0,t)&&i,i=kn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)a=t.b=e[o],i=kn(a,r,!1,t)&&i;return i},Pn.prototype.Ba=function(){if(Pn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)dn(n[r]);delete e.a[t],e.b--}}this.eb=null},e=Vn.prototype,e.V=function(){Gn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.X=function(){return Gn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(t,e){return Hn(this.b,t)?this.b[t]:e},e.set=function(t,e){Hn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Wn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qn(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Yn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Yn?(this.h=void 0!==e?e:t.h,Xn(this,t.f),this.i=t.i,this.b=t.b,Kn(this,t.l),this.c=t.c,$n(this,vr(t.a)),this.g=t.g):t&&(n=String(t).match(Wn))?(this.h=!!e,Xn(this,n[1]||"",!0),this.i=er(n[2]||""),this.b=er(n[3]||"",!0),Kn(this,n[4]),this.c=er(n[5]||"",!0),$n(this,n[6]||"",!0),this.g=er(n[7]||"")):(this.h=!!e,this.a=new cr(null,this.h))}function Xn(t,e,n){t.f=n?er(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Kn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function $n(t,e,n){e instanceof cr?(t.a=e,gr(t.a,t.h)):(n||(e=nr(e,sr)),t.a=new cr(e,t.h))}function Qn(t,e,n){t.a.set(e,n)}function Jn(t,e){return t.a.get(e)}function Zn(t){return t instanceof Yn?new Yn(t):new Yn(t,void 0)}function tr(t,e){var n=new Yn(null,void 0);return Xn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function er(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nr(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,rr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function rr(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Yn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(nr(e,ir,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(nr(e,ir,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.l,null!=n&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(nr(n,"/"==n.charAt(0)?ar:or,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",nr(n,ur)),t.join("")},Yn.prototype.resolve=function(t){var e=new Yn(this),n=!!t.f;n?Xn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)Kn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(lt(i,"./")||lt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?$n(e,vr(t.a)):n=!!t.g,n&&(e.g=t.g),e};var ir=/[#\/\?@]/g,or=/[#\?:]/g,ar=/[#\?]/g,sr=/[#\?@]/g,ur=/#/g;function cr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function hr(t){t.a||(t.a=new Vn,t.b=0,t.c&&qn(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function lr(t){var e=zn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new cr(null,void 0);t=jn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?dr(n,i,o):n.add(i,o)}return n}function fr(t,e){hr(t),e=mr(t,e),Hn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Hn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Gn(t)))}function pr(t,e){return hr(t),e=mr(t,e),Hn(t.a.b,e)}function dr(t,e,n){fr(t,e),0<n.length&&(t.c=null,t.a.set(mr(t,e),et(n)),t.b+=n.length)}function vr(t){var e=new cr;return e.c=t.c,t.a&&(e.a=new Vn(t.a),e.b=t.b),e}function mr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function gr(t,e){e&&!t.f&&(hr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(fr(this,e),dr(this,n,t))}),t)),t.f=e}function yr(t){var e=[];return _r(new br,t,e),e.join("")}function br(){}function _r(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),_r(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],"function"!=typeof o&&(n.push(i),Er(r,n),n.push(":"),_r(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Er(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}e=cr.prototype,e.add=function(t,e){hr(this),this.c=null,t=mr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(t,e){hr(this),this.a.forEach((function(n,r){W(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.X=function(){hr(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.V=function(t){hr(this);var e=[];if("string"===typeof t)pr(this,t)&&(e=tt(e,this.a.get(mr(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=tt(e,t[n])}return e},e.set=function(t,e){return hr(this),this.c=null,t=mr(this,t),pr(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t?(t=this.V(t),0<t.length?String(t[0]):e):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var wr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},xr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Er(t,e){e.push('"',t.replace(xr,(function(t){var e=wr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),wr[t]=e),e})),'"')}function Sr(){var t=Xr();return Zt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function Tr(){return h.window&&h.window.location.href||self&&self.location&&self.location.href||""}function Mr(t,e){e=e||h.window;var n="about:blank";t&&(n=Dt(Ft(t))),e.location.href=n}function Ar(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<Ar(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function Cr(){var t=Xr();return t=Wr(t)!=Hr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null,!(t&&30>t)&&(!Zt||!ue||9<ue)}function Ir(t){return t=(t||Xr()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Nr(t){t=t||h.window;try{t.close()}catch(e){}}function Rr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Xr().toLowerCase(),r&&(e.target=r,lt(n,"crios/")&&(e.target="_blank")),Wr(Xr())==Gr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Lt?n:Ft("undefined"!=typeof n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((vt("iPhone")&&!vt("iPod")&&!vt("iPad")||vt("iPad")||vt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=be(document,"A"),wt(a,"HTMLAnchorElement"),e instanceof Lt||e instanceof Lt||(e="object"==typeof e&&e.ra?e.qa():String(e),kt.test(e)||(e="about:invalid#zClosurez"),e=new Lt(jt,e)),a.href=Dt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Dt(e),a&&(ee&&lt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Gt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Xt(t)+'">'),r=a.document)&&(r.write(Bt(t)),r.close())):(a=r.open(Dt(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}function Or(t){return new Ce((function(e){function n(){Un(2e3).then((function(){if(t&&!t.closed)return n();e()}))}return n()}))}var Pr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lr=/^[^@]+@[^@]+$/;function Dr(){var t=null;return new Ce((function(e){"complete"==h.document.readyState?e():(t=function(){e()},En(window,"load",t))})).o((function(e){throw Sn(window,"load",t),e}))}function kr(){return Fr(void 0)?Dr().then((function(){return new Ce((function(t,e){var n=h.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))}function Fr(t){return t=t||Xr(),!("file:"!==Zr()&&"ionic:"!==Zr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ur(){var t=h.window;try{return!(!t||t==t.top)}catch(e){return!1}}function jr(){return"undefined"!==typeof h.WorkerGlobalScope&&"function"===typeof h.importScripts}function zr(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":jr()?"Worker":"Browser"}function Br(){var t=zr();return"ReactNative"===t||"Node"===t}function Vr(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}var Gr="Firefox",Hr="Chrome";function Wr(t){var e=t.toLowerCase();return lt(e,"opera/")||lt(e,"opr/")||lt(e,"opios/")?"Opera":lt(e,"iemobile")?"IEMobile":lt(e,"msie")||lt(e,"trident/")?"IE":lt(e,"edge/")?"Edge":lt(e,"firefox/")?Gr:lt(e,"silk/")?"Silk":lt(e,"blackberry")?"Blackberry":lt(e,"webos")?"Webos":!lt(e,"safari/")||lt(e,"chrome/")||lt(e,"crios/")||lt(e,"android")?!lt(e,"chrome/")&&!lt(e,"crios/")||lt(e,"edge/")?lt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Hr:"Safari"}var qr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function Yr(t,e){e=e||[];var n,r=[],i={};for(n in qr)i[qr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=zr(),"Browser"===r?(i=Xr(),r=Wr(i)):"Worker"===r&&(i=Xr(),r=Wr(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Xr(){return h.navigator&&h.navigator.userAgent||""}function Kr(t,e){t=t.split("."),e=e||h;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function $r(){try{var t=h.localStorage,e=ii();if(t)return t.setItem(e,"1"),t.removeItem(e),!Sr()||!!h.indexedDB}catch(n){return jr()&&!!h.indexedDB}return!1}function Qr(){return(Jr()||"chrome-extension:"===Zr()||Fr())&&!Br()&&$r()&&!jr()}function Jr(){return"http:"===Zr()||"https:"===Zr()}function Zr(){return h.location&&h.location.protocol||null}function ti(t){return t=t||Xr(),!Ir(t)&&Wr(t)!=Gr}function ei(t){return"undefined"===typeof t?null:yr(t)}function ni(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function ri(t){if(null!==t)return JSON.parse(t)}function ii(t){return t||Math.floor(1e9*Math.random()).toString()}function oi(t){return t=t||Xr(),"Safari"!=Wr(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function ai(){var t=h.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function si(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Xr(),e=zr(),this.b=Ir(t)||"ReactNative"===e}function ui(){var t=h.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function ci(){var t=h.document,e=null;return ui()||!t?De():new Ce((function(n){e=function(){ui()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function hi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function li(){return!(!Kr("fireauth.oauthhelper",h)&&!Kr("fireauth.iframe",h))}function fi(){var t=h.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}function pi(){var t=h.navigator;return t&&t.serviceWorker?De().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):De(null)}si.prototype.get=function(){var t=h.navigator;return!t||"boolean"!==typeof t.onLine||!Jr()&&"chrome-extension:"!==Zr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var di,vi={};function mi(t){vi[t]||(vi[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var gi={};Object.defineProperty(gi,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(gi,"abcd",{configurable:!0,enumerable:!0,value:2}),di=2==gi.abcd}catch(Bp){di=!1}function yi(t,e,n){di?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function bi(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&yi(t,n,e[n])}function _i(t){var e={};return bi(e,t),e}function wi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function xi(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)yi(e,n,Ei(t[n]));return e}function Si(t){var e=t&&(t[Ii]?"phone":null);if(!(e&&t&&t[Ci]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");yi(this,"uid",t[Ci]),yi(this,"displayName",t[Mi]||null);var n=null;t[Ai]&&(n=new Date(t[Ai]).toUTCString()),yi(this,"enrollmentTime",n),yi(this,"factorId",e)}function Ti(t){try{var e=new Ni(t)}catch(n){e=null}return e}Si.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Mi="displayName",Ai="enrolledAt",Ci="mfaEnrollmentId",Ii="phoneInfo";function Ni(t){Si.call(this,t),yi(this,"phoneNumber",t[Ii])}function Ri(t){var e={},n=t[Di],r=t[Fi],i=t[Ui];if(t=Ti(t[ki]),!i||i!=Pi&&i!=Li&&!n||i==Li&&!r||i==Oi&&!t)throw Error("Invalid checkActionCode response!");i==Li?(e[zi]=n||null,e[Vi]=n||null,e[ji]=r):(e[zi]=r||null,e[Vi]=r||null,e[ji]=n||null),e[Bi]=t||null,yi(this,Hi,i),yi(this,Gi,Ei(e))}M(Ni,Si),Ni.prototype.v=function(){var t=Ni.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var Oi="REVERT_SECOND_FACTOR_ADDITION",Pi="EMAIL_SIGNIN",Li="VERIFY_AND_CHANGE_EMAIL",Di="email",ki="mfaInfo",Fi="newEmail",Ui="requestType",ji="email",zi="fromEmail",Bi="multiFactorInfo",Vi="previousEmail",Gi="data",Hi="operation";function Wi(t){t=Zn(t);var e=Jn(t,qi)||null,n=Jn(t,Yi)||null,r=Jn(t,$i)||null;if(r=r&&Ji[r]||null,!e||!n||!r)throw new A("argument-error",qi+", "+Yi+"and "+$i+" are required in a valid action code URL.");bi(this,{apiKey:e,operation:r,code:n,continueUrl:Jn(t,Xi)||null,languageCode:Jn(t,Ki)||null,tenantId:Jn(t,Qi)||null})}var qi="apiKey",Yi="oobCode",Xi="continueUrl",Ki="languageCode",$i="mode",Qi="tenantId",Ji={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Oi,signIn:Pi,verifyAndChangeEmail:Li,verifyEmail:"VERIFY_EMAIL"};function Zi(t){try{return new Wi(t)}catch(e){return null}}function to(t){var e=t[oo];if("undefined"===typeof e)throw new A("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[eo];if(n&&"object"===typeof n){e=n[uo];var r=n[ao];if(n=n[so],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new A("argument-error",ao+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new A("argument-error",so+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new A("argument-error",uo+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new A("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new A("argument-error",eo+" property must be a non null object when specified.");if(this.f=null,(e=t[io])&&"object"===typeof e){if(e=e[co],"string"===typeof e&&e.length)this.f=e;else if("undefined"!==typeof e)throw new A("argument-error",co+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new A("argument-error",io+" property must be a non null object when specified.");if(e=t[ro],"undefined"!==typeof e&&"boolean"!==typeof e)throw new A("argument-error",ro+" property must be a boolean when specified.");if(this.c=!!e,t=t[no],"undefined"!==typeof t&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new A("argument-error",no+" property must be a non empty string when specified.");this.i=t||null}var eo="android",no="dynamicLinkDomain",ro="handleCodeInApp",io="iOS",oo="url",ao="installApp",so="minimumVersion",uo="packageName",co="bundleId";function ho(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}function lo(t){return X(t,(function(t){return t=t.toString(16),1<t.length?t:"0"+t})).join("")}var fo=null;function po(t){var e="";return vo(t,(function(t){e+=String.fromCharCode(t)})),e}function vo(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=fo[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}mo();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}function mo(){if(!fo){fo={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===fo[o]&&(fo[o]=i)}}}function go(t){var e=bo(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,T(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function yo(t){try{return new go(t)}catch(e){return null}}function bo(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(po(t))}catch(r){}return null}go.prototype.S=function(){return this.f},go.prototype.i=function(){return this.b},go.prototype.toString=function(){return this.g};var _o="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),wo=["client_id","response_type","scope","redirect_uri","state"],xo={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:wo},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:wo},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:wo},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:_o},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function Eo(t){for(var e in xo)if(xo[e].ea==t)return xo[e];return null}function So(t){var e={};e["facebook.com"]=Io,e["google.com"]=Ro,e["github.com"]=No,e["twitter.com"]=Oo;var n=t&&t[Mo];try{if(n)return e[n]?new e[n](t):new Co(t);if("undefined"!==typeof t[To])return new Ao(t)}catch(r){}return null}var To="idToken",Mo="providerId";function Ao(t){var e=t[Mo];if(!e&&t[To]){var n=yo(t[To]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),yi(this,"providerId",e),yi(this,"isNewUser",n)}function Co(t){Ao.call(this,t),t=ri(t.rawUserInfo||"{}"),yi(this,"profile",Ei(t||{}))}function Io(t){if(Co.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function No(t){if(Co.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");yi(this,"username",this.profile&&this.profile.login||null)}function Ro(t){if(Co.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Oo(t){if(Co.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");yi(this,"username",t.screenName||null)}function Po(t){var e=Zn(t),n=Jn(e,"link"),r=Jn(Zn(n),"link");return e=Jn(e,"deep_link_id"),Jn(Zn(e),"link")||e||r||n||t}function Lo(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Do:ko}M(Co,Ao),M(Io,Co),M(No,Co),M(Ro,Co),M(Oo,Co);var Do="enroll",ko="signin";function Fo(){}function Uo(t,e){return t.then((function(t){if(t[Rs]){var n=yo(t[Rs]);if(!n||e!=n.h)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new A("user-mismatch"):t}))}function jo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,yi(this,"providerId",t),yi(this,"signInMethod",t)}function zo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Bo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new jo(t.providerId,t.pendingToken)}catch(e){}return null}function Vo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&yi(this,"idToken",e.idToken),e.accessToken&&yi(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&yi(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");yi(this,"accessToken",e.oauthToken),yi(this,"secret",e.oauthTokenSecret)}yi(this,"providerId",t),yi(this,"signInMethod",n)}function Go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:lr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Ho(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Vo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Wo(t,e){this.Oc=e||[],bi(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Eo(t)||{}).Ha||null,this.kb=null}function qo(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');Wo.call(this,t,[])}function Yo(t){Wo.call(this,t,wo),this.a=[]}function Xo(){Yo.call(this,"facebook.com")}function Ko(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Xo).credential({accessToken:e})}function $o(){Yo.call(this,"github.com")}function Qo(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new $o).credential({accessToken:e})}function Jo(){Yo.call(this,"google.com"),this.Aa("profile")}function Zo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Jo).credential({idToken:n,accessToken:e})}function ta(){Wo.call(this,"twitter.com",_o)}function ea(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Vo("twitter.com",n,"twitter.com")}function na(t,e,n){this.a=t,this.f=e,yi(this,"providerId","password"),yi(this,"signInMethod",n===ia.EMAIL_LINK_SIGN_IN_METHOD?ia.EMAIL_LINK_SIGN_IN_METHOD:ia.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ra(t){return t&&t.email&&t.password?new na(t.email,t.password,t.signInMethod):null}function ia(){bi(this,{providerId:"password",isOAuthProvider:!1})}function oa(t,e){if(e=aa(e),!e)throw new A("argument-error","Invalid email link!");return new na(t,e.code,ia.EMAIL_LINK_SIGN_IN_METHOD)}function aa(t){return t=Po(t),(t=Zi(t))&&t.operation===Pi?t:null}function sa(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new A("internal-error");this.a=t,yi(this,"providerId","phone"),this.ea="phone",yi(this,"signInMethod","phone")}function ua(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return W(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new sa(e)}return null}function ca(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function ha(t){try{this.a=t||r.a.auth()}catch(e){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}bi(this,{providerId:"phone",isOAuthProvider:!1})}function la(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new sa({bb:t,ab:e})}function fa(t){if(t.temporaryProof&&t.phoneNumber)return new sa({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Zo(o,n);case"facebook.com":return Ko(n);case"github.com":return Qo(n);case"twitter.com":return ea(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new jo(e,a):new Vo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Yo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function pa(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function da(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function va(t){return t=t||{},t.type?new da(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&C(t.error),t.postBody,t.tenantId):null}function ma(){this.b=null,this.a=[]}Lo.prototype.Fa=function(){return this.a?De(this.a):De(this.b)},Lo.prototype.v=function(){return this.type==Do?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Fo.prototype.ia=function(){},Fo.prototype.b=function(){},Fo.prototype.c=function(){},Fo.prototype.v=function(){},jo.prototype.ia=function(t){return ou(t,zo(this))},jo.prototype.b=function(t,e){var n=zo(this);return n.idToken=e,au(t,n)},jo.prototype.c=function(t,e){return Uo(su(t,zo(this)),e)},jo.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Vo.prototype.ia=function(t){return ou(t,Go(this))},Vo.prototype.b=function(t,e){var n=Go(this);return n.idToken=e,au(t,n)},Vo.prototype.c=function(t,e){var n=Go(this);return Uo(su(t,n),e)},Vo.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Wo.prototype.Ia=function(t){return this.Fb=yt(t),this},M(qo,Wo),M(Yo,Wo),Yo.prototype.Aa=function(t){return Q(this.a,t)||this.a.push(t),this},Yo.prototype.Nb=function(){return et(this.a)},Yo.prototype.credential=function(t,e){var n;if(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null},!n.idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new Vo(this.providerId,n,this.providerId)},M(Xo,Yo),yi(Xo,"PROVIDER_ID","facebook.com"),yi(Xo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),M($o,Yo),yi($o,"PROVIDER_ID","github.com"),yi($o,"GITHUB_SIGN_IN_METHOD","github.com"),M(Jo,Yo),yi(Jo,"PROVIDER_ID","google.com"),yi(Jo,"GOOGLE_SIGN_IN_METHOD","google.com"),M(ta,Wo),yi(ta,"PROVIDER_ID","twitter.com"),yi(ta,"TWITTER_SIGN_IN_METHOD","twitter.com"),na.prototype.ia=function(t){return this.signInMethod==ia.EMAIL_LINK_SIGN_IN_METHOD?Vu(t,vu,{email:this.a,oobCode:this.f}):Vu(t,Fu,{email:this.a,password:this.f})},na.prototype.b=function(t,e){return this.signInMethod==ia.EMAIL_LINK_SIGN_IN_METHOD?Vu(t,mu,{idToken:e,email:this.a,oobCode:this.f}):Vu(t,Iu,{idToken:e,email:this.a,password:this.f})},na.prototype.c=function(t,e){return Uo(this.ia(t),e)},na.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},bi(ia,{PROVIDER_ID:"password"}),bi(ia,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),bi(ia,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),sa.prototype.ia=function(t){return t.cb(ca(this))},sa.prototype.b=function(t,e){var n=ca(this);return n.idToken=e,Vu(t,ju,n)},sa.prototype.c=function(t,e){var n=ca(this);return n.operation="REAUTH",t=Vu(t,zu,n),Uo(t,e)},sa.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},ha.prototype.cb=function(t,e){var n=this.a.b;return De(e.verify()).then((function(r){if("string"!==typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i,o=g(t)?t.session:null,a=g(t)?t.phoneNumber:t;return i=o&&o.type==Do?o.Fa().then((function(t){return Js(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==ko?o.Fa().then((function(e){return tu(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):Qs(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},bi(ha,{PROVIDER_ID:"phone"}),bi(ha,{PHONE_SIGN_IN_METHOD:"phone"}),da.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},da.prototype.S=function(){return this.h},da.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var ga,ya=null;function ba(t){var e=ya;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},t=Kr("universalLinks.subscribe",h),"function"===typeof t&&t(null,e.b))}function _a(t){var e="unauthorized-domain",n=void 0,r=Zn(t);t=r.b,r=r.f,"chrome-extension"==r?n=Yt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Yt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function wa(t,e,n){A.call(this,t,n),t=e||{},t.Gb&&yi(this,"email",t.Gb),t.da&&yi(this,"phoneNumber",t.da),t.credential&&yi(this,"credential",t.credential),t.Wb&&yi(this,"tenantId",t.Wb)}function xa(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:fa(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new wa(e,n,t.message)}return null}function Ea(){}function Sa(t){return t.c||(t.c=t.b())}function Ta(){}function Ma(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Aa(){}function Ca(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.oc,this),this.a.onerror=E(this.Pb,this),this.a.onprogress=E(this.pc,this),this.a.ontimeout=E(this.tc,this)}function Ia(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Na(t,e,n){this.reset(t,e,n,void 0,void 0)}M(_a,A),M(wa,A),wa.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&_t(t,e),t},wa.prototype.toJSON=function(){return this.v()},Ea.prototype.c=null,M(Ta,Ea),Ta.prototype.a=function(){var t=Ma(this);return t?new ActiveXObject(t):new XMLHttpRequest},Ta.prototype.b=function(){var t={};return Ma(this)&&(t[0]=!0,t[1]=!0),t},ga=new Ta,M(Aa,Ea),Aa.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ca;throw Error("Unsupported browser")},Aa.prototype.b=function(){return{}},e=Ca.prototype,e.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},e.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},e.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ia(this,4)},e.Pb=function(){this.status=500,this.response=this.responseText="",Ia(this,4)},e.tc=function(){this.Pb()},e.pc=function(){this.status=200,Ia(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Na.prototype.a=null;function Ra(t){this.f=t,this.b=this.c=this.a=null}function Oa(t,e){this.name=t,this.value=e}Na.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||T(),delete this.a},Oa.prototype.toString=function(){return this.name};var Pa=new Oa("SEVERE",1e3),La=new Oa("WARNING",900),Da=new Oa("CONFIG",700),ka=new Oa("FINE",500);function Fa(t){return t.c?t.c:t.a?Fa(t.a):(F("Root logger has no level set."),null)}Ra.prototype.log=function(t,e,n){if(t.value>=Fa(this).value)for(m(e)&&(e=e()),t=new Na(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ua={},ja=null;function za(t){var e;if(ja||(ja=new Ra(""),Ua[""]=ja,ja.c=Da),!(e=Ua[t])){e=new Ra(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=za(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,Ua[t]=e}return e}function Ba(t,e){t&&t.log(ka,e,void 0)}function Va(t){this.f=t}function Ga(t){Pn.call(this),this.s=t,this.readyState=Ha,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=za("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}M(Va,Ea),Va.prototype.a=function(){return new Ga(this.f)},Va.prototype.b=function(t){return function(){return t}}({}),M(Ga,Pn);var Ha=0;function Wa(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function qa(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,Ya(t)}function Ya(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Xa(t){Pn.call(this),this.headers=new Vn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=Ka,this.w=this.R=!1}e=Ga.prototype,e.open=function(t,e){if(this.readyState!=Ha)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,Ya(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,qa(this,!1)),this.readyState=Ha},e.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,Ya(this)),this.a&&(this.readyState=3,Ya(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):"undefined"!==typeof h.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Wa(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},e.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?qa(this,!0):Ya(this),3==this.readyState&&Wa(this)}},e.rc=function(t){this.a&&(this.response=this.responseText=t,qa(this,!0))},e.qc=function(t){this.a&&(this.response=t,qa(this,!0))},e.Sa=function(t){var e=this.h;e&&e.log(La,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&qa(this,!0)},e.setRequestHeader=function(t,e){this.i.append(t,e)},e.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(La,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(La,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},M(Xa,Pn);var Ka="";Xa.prototype.b=za("goog.net.XhrIo");var $a=/^https?$/i,Qa=["POST","PUT"];function Ja(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():ga.a(),t.B=t.D?Sa(t.D):Sa(ga),t.a.onreadystatechange=E(t.Sb,t);try{Ba(t.b,cs(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(a){return Ba(t.b,cs(t,"Error opening Xhr: "+a.message)),void es(t,a)}e=r||"";var o=new Vn(t.headers);i&&Bn(i,(function(t,e){o.set(e,t)})),i=$(o.X()),r=h.FormData&&e instanceof h.FormData,!Q(Qa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{os(t),0<t.g&&(t.w=Za(t.a),Ba(t.b,cs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ka,t)):t.s=Fn(t.Ka,t.g,t)),Ba(t.b,cs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){Ba(t.b,cs(t,"Send error: "+a.message)),es(t,a)}}function Za(t){return Zt&&he(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function ts(t){return"content-type"==t.toLowerCase()}function es(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ns(t),is(t)}function ns(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function rs(t){if(t.c&&"undefined"!=typeof c)if(t.B[1]&&4==as(t)&&2==ss(t))Ba(t.b,cs(t,"Local request error detected and ignored"));else if(t.i&&4==as(t))Fn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==as(t)){Ba(t.b,cs(t,"Request complete")),t.c=!1;try{var e,n=ss(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Wn)[1]||null;if(!o&&h.self&&h.self.location){var a=h.self.location.protocol;o=a.substr(0,a.length-1)}i=!$a.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var s=2<as(t)?t.a.statusText:""}catch(u){Ba(t.b,"Can not get status: "+u.message),s=""}t.h=s+" ["+ss(t)+"]",ns(t)}}finally{is(t)}}}function is(t,e){if(t.a){os(t);var n=t.a,r=t.B[0]?p:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Pa,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function os(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(h.clearTimeout(t.s),t.s=null)}function as(t){return t.a?t.a.readyState:0}function ss(t){try{return 2<as(t)?t.a.status:-1}catch(e){return-1}}function us(t){try{return t.a?t.a.responseText:""}catch(e){return Ba(t.b,"Can not get responseText: "+e.message),""}}function cs(t,e){return e+" ["+t.P+" "+t.l+" "+ss(t)+"]"}function hs(t){var e=Es;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function ls(t,e,n){t.a=!0,t.c=n,t.f=!e,ms(t)}function fs(t){if(t.a){if(!t.u)throw new gs(t);t.u=!1}}function ps(t,e){ds(t,null,e,void 0)}function ds(t,e,n,r){t.g.push([e,n,r]),t.a&&ms(t)}function vs(t){return K(t.g,(function(t){return m(t[1])}))}function ms(t){if(t.h&&t.a&&vs(t)){var e=t.h,n=_s[e];n&&(h.clearTimeout(n.a),delete _s[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(L(e)||"function"===typeof h.Promise&&e instanceof h.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,vs(t)||(n=!0)}}t.c=e,r&&(s=E(t.m,t,!0),r=E(t.m,t,!1),e instanceof hs?(ds(e,s,r),e.B=!0):e.then(s,r)),n&&(e=new bs(e),_s[e.a]=e,t.h=e.a)}function gs(){D.call(this)}function ys(){D.call(this)}function bs(t){this.a=h.setTimeout(E(this.c,this),0),this.b=t}e=Xa.prototype,e.Ka=function(){"undefined"!=typeof c&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ba(this.b,cs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Ba(this.b,cs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),is(this))},e.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),is(this,!0)),Xa.Za.Ba.call(this)},e.Sb=function(){this.wa||(this.O||this.i||this.f?rs(this):this.Hc())},e.Hc=function(){rs(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ka:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Pa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Ba(this.b,"Can not get response: "+e.message),null}},hs.prototype.cancel=function(t){if(this.a)this.c instanceof hs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new ys(this),fs(this),ls(this,!1,t))}},hs.prototype.m=function(t,e){this.i=!1,ls(this,t,e)},hs.prototype.then=function(t,e,n){var r,i,o=new Ce((function(t,e){r=t,i=e}));return ds(this,r,(function(t){t instanceof ys?o.cancel():i(t)})),o.then(t,e,n)},hs.prototype.$goog_Thenable=!0,M(gs,D),gs.prototype.message="Deferred has already fired",gs.prototype.name="AlreadyCalledError",M(ys,D),ys.prototype.message="Deferred was canceled",ys.prototype.name="CanceledError",bs.prototype.c=function(){throw delete _s[this.a],this.b};var _s={};function ws(t){var e={},n=e.document||document,r=Ct(t).toString(),i=be(document,"SCRIPT"),o={Tb:i,Ka:void 0},a=new hs(o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){Ss(i,!0);var t=new As(Ms,"Timeout reached for loading script "+r);fs(a),ls(a,!1,t)}),u),o.Ka=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ss(i,e.ud||!1,s),fs(a),ls(a,!0,null))},i.onerror=function(){Ss(i,!0,s);var t=new As(Ts,"Error while loading script "+r);fs(a),ls(a,!1,t)},o=e.attributes||{},_t(o,{type:"text/javascript",charset:"UTF-8"}),pe(i,o),qt(i,t),xs(n).appendChild(i),a}function xs(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function Es(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Ss(t,!0,this.Ka)}}function Ss(t,e,n){null!=n&&h.clearTimeout(n),t.onload=p,t.onerror=p,t.onreadystatechange=p,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ts=0,Ms=1;function As(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Cs(t){this.f=t}function Is(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Os,this.g=yt(t.secureTokenHeaders||Ps),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Ls,this.a=yt(t.firebaseHeaders||Ds),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==zr(),n=h.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest,!n&&!jr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,jr()?this.f=new Va(self):Br()?this.f=new Cs(n):this.f=new Aa,this.b=null}M(As,D),M(Cs,Ea),Cs.prototype.a=function(){return new this.f},Cs.prototype.b=function(){return{}};var Ns,Rs="idToken",Os=new si(3e4,6e4),Ps={"Content-Type":"application/x-www-form-urlencoded"},Ls=new si(3e4,6e4),Ds={"Content-Type":"application/json"};function ks(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Fs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Us(t,e,n,r,i,o,a){Cr()||jr()?t=E(t.w,t):(Ns||(Ns=new Ce((function(t,e){Bs(t,e)}))),t=E(t.s,t)),t(e,n,r,i,o,a)}Is.prototype.S=function(){return this.b},Is.prototype.w=function(t,e,n,r,i,o){if(jr()&&("undefined"===typeof h.fetch||"undefined"===typeof h.Headers||"undefined"===typeof h.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Xa(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Ln(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(us(this))||null}catch(n){t=null}e&&e(t)})),Dn(a,"ready",(function(){s&&clearTimeout(s),nn(this)})),Dn(a,"timeout",(function(){s&&clearTimeout(s),nn(this),e&&e(null)})),Ja(a,t,n,r,i)};var js=new xt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),zs="__fcb"+Math.floor(1e6*Math.random()).toString();function Bs(t,e){if(((window.gapi||{}).client||{}).request)t();else{h[zs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=It(js,{onload:zs});ps(ws(n),(function(){e(Error("CORS_UNSUPPORTED"))}))}}function Vs(t,e){return new Ce((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Us(t,t.u+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Hu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",lr(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}function Gs(t,e,n,r,i,o,a){var s=Zn(e+n);Qn(s,"key",t.c),a&&Qn(s,"cb",T().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Qn(s,c,i[c]);return new Ce((function(e,n){Us(t,s.toString(),(function(t){t?t.error?n(Hu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:yr(ni(i)),t.a,t.i.get())}))}function Hs(t){if(t=t.email,"string"!==typeof t||!Lr.test(t))throw new A("invalid-email")}function Ws(t){"email"in t&&Hs(t)}function qs(t,e){return Vu(t,fu,{identifier:e,continueUri:Jr()?Tr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}function Ys(t){return Vu(t,Su,{}).then((function(t){return t.authorizedDomains||[]}))}function Xs(t){if(!t[Rs]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,yt(t));throw new A("internal-error")}}function Ks(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}Is.prototype.s=function(t,e,n,r,i){var o=this;Ns.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Is.prototype.vb=function(){return Vu(this,Nu,{})},Is.prototype.xb=function(t,e){return Vu(this,Cu,{idToken:t,email:e})},Is.prototype.yb=function(t,e){return Vu(this,Iu,{idToken:t,password:e})};var $s={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Qs(t,e){return Vu(t,Au,e)}function Js(t,e){return Vu(t,Ru,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}function Zs(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function tu(t,e){return Vu(t,Ou,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}function eu(t,e,n){return Vu(t,du,{idToken:e,deleteProvider:n})}function nu(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function ru(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(t=new cr(t.postBody),pr(t,"nonce")&&(e.nonce=t.get("nonce")))),e}function iu(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=xa(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=xa(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=xa(t)):t.errorMessage&&(e=Gu(t.errorMessage)),e)throw e;Xs(t)}function ou(t,e){return e.returnIdpCredential=!0,Vu(t,Pu,e)}function au(t,e){return e.returnIdpCredential=!0,Vu(t,Du,e)}function su(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Vu(t,Lu,e)}function uu(t){if(!t.oobCode)throw new A("invalid-action-code")}e=Is.prototype,e.zb=function(t,e){var n={idToken:t},r=[];return mt($s,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Vu(this,Cu,n)},e.rb=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},_t(t,e),Vu(this,Eu,t)},e.sb=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},_t(t,e),Vu(this,_u,t)},e.qb=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},_t(t,e),Vu(this,wu,t)},e.Ab=function(t,e,n){return t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},_t(t,n),Vu(this,xu,t)},e.cb=function(t){return Vu(this,Uu,t)},e.jb=function(t,e){return Vu(this,Mu,{oobCode:t,newPassword:e})},e.Pa=function(t){return Vu(this,hu,{oobCode:t})},e.fb=function(t){return Vu(this,cu,{oobCode:t})};var cu={endpoint:"setAccountInfo",A:uu,Y:"email",C:!0},hu={endpoint:"resetPassword",A:uu,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},C:!0},lu={endpoint:"signupNewUser",A:function(t){if(Hs(t),!t.password)throw new A("weak-password")},G:Xs,U:!0,C:!0},fu={endpoint:"createAuthUri",C:!0},pu={endpoint:"deleteAccount",M:["idToken"]},du={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=d(t.deleteProvider))throw new A("internal-error")}},vu={endpoint:"emailLinkSignin",M:["email","oobCode"],A:Hs,G:Xs,U:!0,C:!0},mu={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:Hs,G:Xs,U:!0},gu={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:Zs,G:Xs,C:!0,La:!0},yu={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:Zs,G:Xs,C:!0,La:!0},bu={endpoint:"getAccountInfo"},_u={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");Hs(t)},Y:"email",C:!0},wu={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Y:"email",C:!0},xu={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Y:"email",C:!0},Eu={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");Hs(t)},Y:"email",C:!0},Su={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Tu={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},Mu={endpoint:"resetPassword",A:uu,Y:"email",C:!0},Au={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Cu={endpoint:"setAccountInfo",M:["idToken"],A:Ws,U:!0},Iu={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(Ws(t),!t.password)throw new A("weak-password")},G:Xs,U:!0},Nu={endpoint:"signupNewUser",G:Xs,U:!0,C:!0},Ru={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},C:!0,La:!0},Ou={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},C:!0,La:!0},Pu={endpoint:"verifyAssertion",A:nu,Wa:ru,G:iu,U:!0,C:!0},Lu={endpoint:"verifyAssertion",A:nu,Wa:ru,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw Gu(t.errorMessage);Xs(t)},U:!0,C:!0},Du={endpoint:"verifyAssertion",A:function(t){if(nu(t),!t.idToken)throw new A("internal-error")},Wa:ru,G:iu,U:!0},ku={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:Xs,U:!0,C:!0},Fu={endpoint:"verifyPassword",A:function(t){if(Hs(t),!t.password)throw new A("wrong-password")},G:Xs,U:!0,C:!0},Uu={endpoint:"verifyPhoneNumber",A:Ks,G:Xs,C:!0},ju={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");Ks(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",xa(t);Xs(t)}},zu={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Ks,G:Xs,C:!0},Bu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Rs]^!!t.refreshToken)throw new A("internal-error")},C:!0,La:!0};function Vu(t,e,n){if(!xi(n,e.M))return ke(new A("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return De(n).then(e.A).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),Gs(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)})).then((function(t){return r=t,e.Wa?e.Wa(n,r):r})).then(e.G).then((function(){if(!e.Y)return r;if(!(e.Y in r))throw new A("internal-error");return r[e.Y]}))}function Gu(t){return Hu({error:{errors:[{message:t}],code:400,message:t}})}function Hu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},_t(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=ei(t)),new A("internal-error",e)}function Wu(t){this.b=t,this.a=null,this.nb=qu(this)}function qu(t){return Zu().then((function(){return new Ce((function(e,n){Kr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Qu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function Yu(t,e){return t.nb.then((function(){return new Ce((function(n){t.a.send(e.type,e,n,Kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function Xu(t,e){t.nb.then((function(){t.a.register("authEvent",e,Kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var Ku=new xt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),$u=new si(3e4,6e4),Qu=new si(5e3,15e3),Ju=null;function Zu(){return Ju||(Ju=new Ce((function(t,e){function n(){ai(),Kr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){ai(),e(Error("Network Error"))},timeout:$u.get()})}if(Kr("gapi.iframes.Iframe"))t();else if(Kr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();h[r]=function(){Kr("gapi.load")?n():e(Error("Network Error"))},r=It(Ku,{onload:r}),De(ws(r)).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw Ju=null,t})))}function tc(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=tr(this.i,"/__/auth/iframe"),Qn(this.a,"apiKey",this.g),Qn(this.a,"appName",this.h),this.b=null,this.c=[]}function ec(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function nc(t){try{return r.a.app(t).auth().Ea()}catch(e){return[]}}function rc(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function ic(t){var e=Tr();return Ys(t).then((function(t){t:{var n=Zn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Zn(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Pr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new _a(Tr())}))}function oc(t){return t.l||(t.l=Dr().then((function(){if(!t.s){var e=t.c,n=t.h,r=nc(t.b),i=new tc(t.u,t.f,t.b);i.f=e,i.b=n,i.c=et(r||[]),t.s=i.toString()}t.i=new Wu(t.s),uc(t)}))),t.l}function ac(t){return t.m||(t.w=t.c?Yr(t.c,nc(t.b)):null,t.m=new Is(t.f,P(t.h),t.w)),t.m}function sc(t,e,n,r,i,o,a,s,u,c,h){return t=new ec(t,e,n,r,i),t.l=o,t.g=a,t.i=s,t.b=yt(u||null),t.f=c,t.ub(h).toString()}function uc(t){if(!t.i)throw Error("IfcHandler must be initialized!");Xu(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=va(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return n={},n.status=r?"ACK":"ERROR",De(n)}return n.status="ERROR",De(n)}))}function cc(t){var e={type:"webStorageSupport"};return oc(t).then((function(){return Yu(t.i,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))}function hc(t){if(this.a=t||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function lc(t){this.b=t,this.a={},this.f=E(this.c,this)}tc.prototype.toString=function(){return this.f?Qn(this.a,"v",this.f):fr(this.a.a,"v"),this.b?Qn(this.a,"eid",this.b):fr(this.a.a,"eid"),this.c.length?Qn(this.a,"fw",this.c.join(",")):fr(this.a.a,"fw"),this.a.toString()},ec.prototype.ub=function(t){return this.h=t,this},ec.prototype.toString=function(){var t=tr(this.s,"/__/auth/handler");if(Qn(t,"apiKey",this.m),Qn(t,"appName",this.c),Qn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=r.a.app(this.c).auth().ja()}catch(u){n=null}for(var i in e.kb=n,Qn(t,"providerId",this.a.providerId),e=this.a,n=ni(e.Fb),n)n[i]=n[i].toString();i=e.Oc,n=yt(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),gt(n)||Qn(t,"customParameters",ei(n))}if("function"===typeof this.a.Nb&&(e=this.a.Nb(),e.length&&Qn(t,"scopes",e.join(","))),this.l?Qn(t,"redirectUrl",this.l):fr(t.a,"redirectUrl"),this.g?Qn(t,"eventId",this.g):fr(t.a,"eventId"),this.i?Qn(t,"v",this.i):fr(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Jn(t,s)&&Qn(t,s,this.b[s]);return this.h?Qn(t,"tid",this.h):fr(t.a,"tid"),this.f?Qn(t,"eid",this.f):fr(t.a,"eid"),s=nc(this.c),s.length&&Qn(t,"fw",s.join(",")),t.toString()},e=rc.prototype,e.Lb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,a=!1;return this.ka().then((function(){cc(o).then((function(n){n||(t&&Nr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return Or(t)})).then((function(){if(!a)return Un(n).then((function(){e(r)}))}))},e.Ub=function(){var t=Xr();return!ti(t)&&!oi(t)},e.Qb=function(){return!1},e.Jb=function(t,e,n,r,i,o,a,s){if(!t)return ke(new A("popup-blocked"));if(a&&!ti())return this.ka().o((function(e){Nr(t),i(e)})),r(),De();this.a||(this.a=ic(ac(this)));var u=this;return this.a.then((function(){var e=u.ka().o((function(e){throw Nr(t),i(e),e}));return r(),e})).then((function(){if(pa(n),!a){var r=sc(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,s);Mr(r,t)}})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},e.Kb=function(t,e,n,r){this.a||(this.a=ic(ac(this)));var i=this;return this.a.then((function(){pa(e);var o=sc(i.u,i.f,i.b,t,e,Tr(),n,i.c,void 0,i.h,r);Mr(o)})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},e.ka=function(){var t=this;return oc(this).then((function(){return t.i.nb})).o((function(){throw t.a=null,new A("network-request-failed")}))},e.Xb=function(){return!0},e.Ca=function(t){this.g.push(t)},e.Qa=function(t){Z(this.g,(function(e){return e==t}))},e=hc.prototype,e.get=function(t){return De(this.a.getItem(t)).then((function(t){return t&&ri(t)}))},e.set=function(t,e){return De(this.a.setItem(t,ei(e)))},e.T=function(t){return De(this.a.removeItem(t))},e.ba=function(){},e.ha=function(){};var fc,pc=[];function dc(){var t=jr()?self:null;if(W(pc,(function(n){n.b==t&&(e=n)})),!e){var e=new lc(t);pc.push(e)}return e}function vc(t,e,n){gt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function mc(t){this.a=t}function gc(t){this.c=t,this.b=!1,this.a=[]}function yc(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Ce((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:l,onMessage:o},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return bc(t,c),e})).o((function(e){throw bc(t,c),e}))}function bc(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Z(t.a,(function(t){return t==e}))}}function _c(){if(!Sc())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=h.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t=this;jr()&&self?(this.l=dc(),vc(this.l,"keyChanged",(function(e,n){return Ic(t).then((function(e){return 0<e.length&&W(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),vc(this.l,"ping",(function(){return De(["keyChanged"])}))):pi().then((function(e){(t.h=e)&&(t.g=new gc(new mc(e)),yc(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function wc(t){return new Ce((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}function xc(t){return new Ce((function(e,n){var r=t.u.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):wc(t).then((function(){return xc(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Ec(t){return t.m||(t.m=xc(t)),t.m}function Sc(){try{return!!h.indexedDB}catch(Bp){return!1}}function Tc(t){return t.objectStore("firebaseLocalStorage")}function Mc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ac(t){return new Ce((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Cc(t,e){return t.g&&t.h&&fi()===t.h?yc(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):De()}function Ic(t){return Ec(t).then((function(t){var e=Tc(Mc(t,!1));return e.getAll?Ac(e.getAll()):new Ce((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e["continue"]()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=Ar(t.c,n),t.c=n}return r}))}function Nc(t){function e(){t.f=setTimeout((function(){t.i=Ic(t).then((function(e){0<e.length&&W(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Rc(t),e()}function Rc(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Oc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=De().then((function(){if(Sc()){var t=ii(),r="__sak"+t;return fc||(fc=new _c),n=fc,n.set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ba((function(t){W(e.a,(function(e){e(t)}))})),t}))}function Pc(){this.a={},this.type="inMemory"}function Lc(){if(!kc()){if("Node"==zr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Dc()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Dc(){try{var t=h.localStorage,e=ii();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function kc(){var t="Node"==zr();if(t=Dc()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function Fc(){this.type="nullStorage"}function Uc(){if(!zc()){if("Node"==zr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=jc()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function jc(){try{var t=h.sessionStorage,e=ii();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zc(){var t="Node"==zr();if(t=jc()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}function Bc(){var t={};t.Browser=Hc,t.Node=Wc,t.ReactNative=qc,t.Worker=Yc,this.a=t[zr()]}lc.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];W(r,(function(e){i.push(De().then((function(){return e(t.origin,t.data.data)})))})),je(i).then((function(r){var i=[];W(r,(function(t){i.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),W(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},mc.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},gc.prototype.close=function(){for(;0<this.a.length;)bc(this,this.a[0]);this.b=!0},e=_c.prototype,e.set=function(t,e){var n,r=!1,i=this;return Ec(this).then((function(e){return n=e,e=Tc(Mc(n,!0)),Ac(e.get(t))})).then((function(o){var a=Tc(Mc(n,!0));return o?(o.value=e,Ac(a.put(o))):(i.b++,r=!0,o={},o.fbase_key=t,o.value=e,Ac(a.add(o)))})).then((function(){return i.c[t]=e,Cc(i,t)})).ma((function(){r&&i.b--}))},e.get=function(t){return Ec(this).then((function(e){return Ac(Tc(Mc(e,!1)).get(t))})).then((function(t){return t&&t.value}))},e.T=function(t){var e=!1,n=this;return Ec(this).then((function(r){return e=!0,n.b++,Ac(Tc(Mc(r,!0))["delete"](t))})).then((function(){return delete n.c[t],Cc(n,t)})).ma((function(){e&&n.b--}))},e.ba=function(t){0==this.a.length&&Nc(this),this.a.push(t)},e.ha=function(t){Z(this.a,(function(e){return e==t})),0==this.a.length&&Rc(this)},e=Oc.prototype,e.get=function(t){return this.b.then((function(e){return e.get(t)}))},e.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},e.T=function(t){return this.b.then((function(e){return e.T(t)}))},e.ba=function(t){this.a.push(t)},e.ha=function(t){Z(this.a,(function(e){return e==t}))},e=Pc.prototype,e.get=function(t){return De(this.a[t])},e.set=function(t,e){return this.a[t]=e,De()},e.T=function(t){return delete this.a[t],De()},e.ba=function(){},e.ha=function(){},e=Lc.prototype,e.get=function(t){var e=this;return De().then((function(){var n=e.a.getItem(t);return ri(n)}))},e.set=function(t,e){var n=this;return De().then((function(){var r=ei(e);null===r?n.T(t):n.a.setItem(t,r)}))},e.T=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},e.ba=function(t){h.window&&_n(h.window,"storage",t)},e.ha=function(t){h.window&&Sn(h.window,"storage",t)},e=Fc.prototype,e.get=function(){return De(null)},e.set=function(){return De()},e.T=function(){return De()},e.ba=function(){},e.ha=function(){},e=Uc.prototype,e.get=function(t){var e=this;return De().then((function(){var n=e.a.getItem(t);return ri(n)}))},e.set=function(t,e){var n=this;return De().then((function(){var r=ei(e);null===r?n.T(t):n.a.setItem(t,r)}))},e.T=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},e.ba=function(){},e.ha=function(){};var Vc,Gc,Hc={F:Lc,$a:Uc},Wc={F:Lc,$a:Uc},qc={F:hc,$a:Fc},Yc={F:Lc,$a:Fc},Xc={od:"local",NONE:"none",qd:"session"};function Kc(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in Xc)if(Xc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(zr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!$r()&&"none"!==t)throw n}}function $c(){var t=!(oi(Xr())||!Ur()),e=ti(),n=$r();this.m=t,this.h=e,this.l=n,this.a={},Vc||(Vc=new Bc),t=Vc;try{this.g=!Sr()&&li()||!h.indexedDB?new t.a.F:new Oc(jr()?new Pc:new t.a.F)}catch(r){this.g=new Pc,this.h=!0}try{this.i=new t.a.$a}catch(r){this.i=new Pc}this.u=new Pc,this.f=E(this.Vb,this),this.b={}}function Qc(){return Gc||(Gc=new $c),Gc}function Jc(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Zc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function th(t,e,n){var r=Zc(e,n),i=Jc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=ri(h.localStorage.getItem(r))}catch(s){}if(a&&!o)return h.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&h.localStorage.removeItem(r)}))}function eh(t,e,n){return n=Zc(e,n),"local"==e.F&&(t.b[n]=null),Jc(t,e.F).T(n)}function nh(t){rh(t),t.c=setInterval((function(){for(var e in t.a){var n=h.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new cn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Vb(n))}}),1e3)}function rh(t){t.c&&(clearInterval(t.c),t.c=null)}function ih(t){this.a=t,this.b=Qc()}e=$c.prototype,e.get=function(t,e){return Jc(this,t.F).get(Zc(t,e))},e.set=function(t,e,n){var r=Zc(t,n),i=this,o=Jc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},e.addListener=function(t,e,n){t=Zc(t,e),this.l&&(this.b[t]=h.localStorage.getItem(t)),gt(this.a)&&(Jc(this,"local").ba(this.f),this.h||(Sr()||!li())&&h.indexedDB||!this.l||nh(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},e.removeListener=function(t,e,n){t=Zc(t,e),this.a[t]&&(Z(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),gt(this.a)&&(Jc(this,"local").ha(this.f),rh(this))},e.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=h.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?Jc(this,"local").ha(this.f):rh(this),this.m)if(n=h.localStorage.getItem(e),r=t.a.newValue,r!==n)null!==r?h.localStorage.setItem(e,r):h.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===h.localStorage.getItem(e)||(o.b[e]=h.localStorage.getItem(e),o.ib(e))},Zt&&ue&&10==ue&&h.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else W(t,E(this.ib,this))},e.ib=function(t){this.a[t]&&W(this.a[t],(function(t){t()}))};var oh,ah={name:"authEvent",F:"local"};function sh(t){return t.b.get(ah,t.a).then((function(t){return va(t)}))}function uh(){this.a=Qc()}function ch(){this.b=-1}function hh(t,e){this.b=lh,this.f=h.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=h.Int32Array?new Int32Array(64):Array(64),void 0===oh&&(oh=h.Int32Array?new Int32Array(yh):yh),this.reset()}M(hh,ch);for(var lh=64,fh=lh-1,ph=[],dh=0;dh<fh;dh++)ph[dh]=0;var vh=tt(128,ph);function mh(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&h^~c&l,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|oh[e])|0,a=o+(a+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function gh(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(mh(t),i=0);else{if(!v(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(mh(t),i=0)}}t.c=i,t.g+=n}hh.prototype.reset=function(){this.g=this.c=0,this.a=h.Int32Array?new Int32Array(this.h):et(this.h)};var yh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bh(){hh.call(this,8,_h)}M(bh,hh);var _h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wh(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new uh,this.g=new ih(this.h),this.f=null,this.b=[],this.a=this.c=null}function xh(t){return new A("invalid-cordova-configuration",t)}function Eh(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function Sh(t){var e=new bh;gh(e,t),t=[];var n=8*e.g;56>e.c?gh(e,vh,56-e.c):gh(e,vh,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(mh(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return lo(t)}function Th(t,e,n,r,i){var o=Eh(),a=new da(e,r,null,o,new A("no-auth-event"),null,i),s=Kr("BuildInfo.packageName",h);if("string"!==typeof s)throw new A("invalid-cordova-configuration");var u=Kr("BuildInfo.displayName",h),c={};if(Xr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!Xr().toLowerCase().match(/android/))return ke(new A("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=Sh(o),c.sessionId=o;var l=sc(t.u,t.i,t.l,e,n,null,r,t.m,c,t.s,i);return t.ka().then((function(){var e=t.h;return t.w.a.set(ah,a.v(),e)})).then((function(){var e=Kr("cordova.plugins.browsertab.isAvailable",h);if("function"!==typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if(n=Kr("cordova.plugins.browsertab.openUrl",h),"function"!==typeof n)throw new A("invalid-cordova-configuration");n(l)}else{if(n=Kr("cordova.InAppBrowser.open",h),"function"!==typeof n)throw new A("invalid-cordova-configuration");e=Xr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function Mh(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Ah(t){return t.f||(t.f=t.ka().then((function(){return new Ce((function(e){function n(r){return e(r),t.Qa(n),!1}t.Ca(n),Ih(t)}))}))),t.f}function Ch(t){var e=null;return sh(t.g).then((function(n){return e=n,n=t.g,eh(n.b,ah,n.a)})).then((function(){return e}))}function Ih(t){function e(e){r=!0,i&&i.cancel(),Ch(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;i=Po(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=Zn(i),o=ri(Jn(o,"firebaseError")||null),o=(o="object"===typeof o?C(o):null)?new da(r.c,r.b,null,null,o,null,r.S()):new da(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}Mh(t,i)}))}var n=new da("unknown",null,null,null,new A("no-auth-event")),r=!1,i=Un(500).then((function(){return Ch(t).then((function(){r||Mh(t,n)}))})),o=h.handleOpenURL;h.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Kr("BuildInfo.packageName",h).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},ya||(ya=new ma),ba(e)}function Nh(t){this.a=t,this.b=Qc()}e=wh.prototype,e.ka=function(){return this.Ga?this.Ga:this.Ga=kr().then((function(){if("function"!==typeof Kr("universalLinks.subscribe",h))throw xh("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Kr("BuildInfo.packageName",h))throw xh("cordova-plugin-buildinfo is not installed");if("function"!==typeof Kr("cordova.plugins.browsertab.openUrl",h))throw xh("cordova-plugin-browsertab is not installed");if("function"!==typeof Kr("cordova.InAppBrowser.open",h))throw xh("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},e.Lb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),De()},e.Jb=function(){return ke(new A("operation-not-supported-in-this-environment"))},e.Xb=function(){return!1},e.Ub=function(){return!0},e.Qb=function(){return!0},e.Kb=function(t,e,n,r){if(this.c)return ke(new A("redirect-operation-pending"));var i=this,o=h.document,a=null,s=null,u=null,c=null;return this.c=De().then((function(){return pa(e),Ah(i)})).then((function(){return Th(i,t,e,n,r)})).then((function(){return new Ce((function(t,e){s=function(){var e=Kr("cordova.plugins.browsertab.close",h);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(s),u=function(){a||(a=Un(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},c=function(){ui()&&u()},o.addEventListener("resume",u,!1),Xr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(t){return Ch(i).then((function(){throw t}))}))})).ma((function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Qa(s),i.c=null}))},e.Ca=function(t){this.b.push(t),Ah(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new da("unknown",null,null,null,new A("no-auth-event")),t(e))}))},e.Qa=function(t){Z(this.b,(function(e){return e==t}))};var Rh={name:"pendingRedirect",F:"session"};function Oh(t){return t.b.set(Rh,"pending",t.a)}function Ph(t){return eh(t.b,Rh,t.a)}function Lh(t){return t.b.get(Rh,t.a).then((function(t){return"pending"==t}))}function Dh(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=E(this.s,this),this.b=new Kh,this.B=new rl,this.g=new Nh(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=kh(this.D,this.u,this.m,I)}function kh(t,e,n,i){var o=r.a.SDK_VERSION||null;return Fr()?new wh(t,e,n,o,i):new rc(t,e,n,o,i)}function Fh(t){t.f||(t.f=!0,t.a.Ca(t.l));var e=t.a;return t.a.ka().o((function(n){throw t.a==e&&t.reset(),n}))}function Uh(t){t.a.Ub()&&Fh(t).o((function(e){var n=new da("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Hh(e)&&t.s(n)})),t.a.Qb()||$h(t.b)}function jh(t,e){Q(t.h,e)||t.h.push(e),t.f||Lh(t.g).then((function(e){e?Ph(t.g).then((function(){Fh(t).o((function(e){var n=new da("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Hh(e)&&t.s(n)}))})):Uh(t)})).o((function(){Uh(t)}))}function zh(t,e){Z(t.h,(function(t){return t==e}))}Dh.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=kh(this.D,this.u,this.m),this.i={}},Dh.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=T()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=T())),e=!0;break}}return $h(this.b),e};var Bh=new si(2e3,1e4),Vh=new si(3e4,6e4);function Gh(t,e,n,r,i,o,a){return t.a.Jb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ca(t.l))}),(function(){t.reset()}),i,o,a)}function Hh(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Wh(t,e,n,r,i){var o;return Oh(t.g).then((function(){return t.a.Kb(e,n,r,i).o((function(e){if(Hh(e))throw new A("operation-not-supported-in-this-environment");return o=e,Ph(t.g).then((function(){throw o}))})).then((function(){return t.a.Xb()?new Ce((function(){})):Ph(t.g).then((function(){return t.pa()})).then((function(){})).o((function(){}))}))}))}function qh(t,e,n,r,i){return t.a.Lb(r,(function(t){e.la(n,null,t,i)}),Bh.get())}Dh.prototype.pa=function(){return this.b.pa()};var Yh={};function Xh(t,e,n){var r=e+":"+n;return Yh[r]||(Yh[r]=new Dh(t,e,n)),Yh[r]}function Kh(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function $h(t){t.g||(t.g=!0,el(t,!1,null,null))}function Qh(t){t.g&&!t.i&&el(t,!1,null,null)}function Jh(t,e,n){n=n.Da(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.S(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){el(t,s,e,null)})).o((function(e){el(t,s,null,e)}))}function Zh(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function tl(t,e){if(t.b=function(){return De(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function el(t,e,n,r){e?r?Zh(t,r):tl(t,n):tl(t,{user:null}),t.f=[],t.c=[]}function nl(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=Un(Vh.get()).then((function(){t.b||(t.g=!0,el(t,!0,null,e))}))}function rl(){}function il(t,e){var n=t.b,r=t.c;e.Da(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.la(r,t,null,n)})).o((function(t){e.la(r,null,t,n)}))}function ol(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function al(t,e){this.a=e,yi(this,"verificationId",t)}function sl(t,e,n,r){return new ha(t).cb(e,n).then((function(t){return new al(t,r)}))}function ul(t){var e=bo(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");bi(this,{token:t,expirationTime:hi(1e3*e.exp),authTime:hi(1e3*e.auth_time),issuedAtTime:hi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function cl(t,e,n){var r=e&&e[ll];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=yt(e),this.g=n,this.c=new Lo(null,r),this.b=[];var i=this;W(e[hl]||[],(function(t){(t=Ti(t))&&i.b.push(t)})),yi(this,"auth",this.a),yi(this,"session",this.c),yi(this,"hints",this.b)}Kh.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Kh.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(el(this,!0,null,t.a),De()):e.Da(n,r)?Jh(this,t,e):ke(new A("invalid-auth-event")):(el(this,!1,null,null),De())}else ke(new A("invalid-auth-event"))},Kh.prototype.pa=function(){var t=this;return new Ce((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),nl(t))}))},rl.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),De()):e.Da(n,r)?il(t,e):ke(new A("invalid-auth-event"))}else ke(new A("invalid-auth-event"))},al.prototype.confirm=function(t){return t=la(this.verificationId,t),this.a(t)};var hl="mfaInfo",ll="mfaPendingCredential";function fl(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new cl(t,e,n),yi(this,"resolver",this.b)}function pl(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new fl(e,t.serverResponse,n,t.message)}catch(r){}return null}function dl(){}function vl(t,e,n,r){return n.Fa().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),_t(n,{phoneVerificationInfo:ca(t.a)}),Vu(e,gu,n)}))}function ml(t,e,n){return n.Fa().then((function(n){return n={mfaPendingCredential:n},_t(n,{phoneVerificationInfo:ca(t.a)}),Vu(e,yu,n)}))}function gl(t){yi(this,"factorId",t.ea),this.a=t}function yl(t){if(gl.call(this,t),this.a.ea!=ha.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function bl(t,e){for(var n in un.call(this,t),e)this[n]=e[n]}function _l(t,e){this.a=t,this.b=[],this.c=E(this.wc,this),_n(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&W(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Ci]=t.uid),t.displayName&&(r[Mi]=t.displayName),t.enrollmentTime&&(r[Ai]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Ii]=t.phoneNumber);try{e=new Ni(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),xl(this,n)}function wl(t){var e=[];return W(t.mfaInfo||[],(function(t){(t=Ti(t))&&e.push(t)})),e}function xl(t,e){t.b=e,yi(t,"enrolledFactors",e)}function El(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Sl(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Tl(t,e){t.stop(),t.b=Un(Sl(t,e)).then((function(){return ci()})).then((function(){return t.h()})).then((function(){Tl(t,!0)})).o((function(e){t.i(e)&&Tl(t,!1)}))}function Ml(t){this.c=t,this.b=this.a=null}function Al(t){return t.b&&1e3*t.b.c||0}function Cl(t,e){var n=e.refreshToken;t.b=yo(e[Rs]||""),t.a=n}function Il(t,e){t.b=e.b,t.a=e.a}function Nl(t,e){return Vs(t.c,e).then((function(e){return t.b=yo(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Rl(t,e){this.a=t||null,this.b=e||null,bi(this,{lastSignInTime:hi(e||null),creationTime:hi(t||null)})}function Ol(t){return new Rl(t.a,t.b)}function Pl(t,e,n,r,i,o){bi(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Ll(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=r.a.SDK_VERSION?Yr(r.a.SDK_VERSION):null,this.a=new Is(this.l,P(I),t),this.b=new Ml(this.a),Vl(this,e[Rs]),Cl(this.b,e),yi(this,"refreshToken",this.b.a),ql(this,n||{}),Pn.call(this),this.P=!1,this.s&&Qr()&&(this.i=Xh(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=jl(this),this.Z=E(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){kl(i,t.c)},this.$=null,this.O=new _l(this,n),yi(this,"multiFactor",this.O)}function Dl(t,e){t.aa&&Sn(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&_n(e,"languageCodeChanged",t.za)}function kl(t,e){t.W=e,Fs(t.a,r.a.SDK_VERSION?Yr(r.a.SDK_VERSION,t.W):null)}function Fl(t,e){t.$&&Sn(t.$,"frameworkChanged",t.ya),(t.$=e)&&_n(e,"frameworkChanged",t.ya)}function Ul(t){try{return r.a.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function jl(t){return new El((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=Al(t.b)-T()-3e5;return 0<e?e:0}))}function zl(t){t.D||t.B.b||(t.B.start(),Sn(t,"tokenChanged",t.Z),_n(t,"tokenChanged",t.Z))}function Bl(t){Sn(t,"tokenChanged",t.Z),t.B.stop()}function Vl(t,e){t.xa=e,yi(t,"_lat",e)}function Gl(t,e){Z(t.R,(function(t){return t==e}))}function Hl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return je(e).then((function(){return t}))}function Wl(t){t.i&&!t.P&&(t.P=!0,jh(t.i,t))}function ql(t,e){bi(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Rl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Yl(){}function Xl(t){return De().then((function(){if(t.D)throw new A("app-deleted")}))}function Kl(t){return X(t.providerData,(function(t){return t.providerId}))}function $l(t,e){e&&(Ql(t,e.providerId),t.providerData.push(e))}function Ql(t,e){Z(t.providerData,(function(t){return t.providerId==e}))}function Jl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&yi(t,e,n)}function Zl(t,e){t!=e&&(bi(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?yi(t,"metadata",Ol(e.metadata)):yi(t,"metadata",new Rl),W(e.providerData,(function(e){$l(t,e)})),Il(t.b,e.b),yi(t,"refreshToken",t.b.a),xl(t.O,e.O.b))}function tf(t){return t.I().then((function(e){var n=t.isAnonymous;return nf(t,e).then((function(){return n||Jl(t,"isAnonymous",!1),e}))}))}function ef(t,e){e[Rs]&&t.xa!=e[Rs]&&(Cl(t.b,e),t.dispatchEvent(new bl("tokenChanged")),Vl(t,e[Rs]),Jl(t,"refreshToken",t.b.a))}function nf(t,e){return Vu(t.a,bu,{idToken:e}).then(E(t.Ic,t))}function rf(t){return(t=t.providerUserInfo)&&t.length?X(t,(function(t){return new Pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}function of(t,e){return tf(t).then((function(){if(Q(Kl(t),e))return Hl(t).then((function(){throw new A("provider-already-linked")}))}))}function af(t,e,n){var r=fa(e);return e=So(e),_i({user:t,credential:r,additionalUserInfo:e,operationType:n})}function sf(t,e){return ef(t,e),t.reload().then((function(){return t}))}function uf(t,e,n,i,o){if(!Qr())return ke(new A("operation-not-supported-in-this-environment"));if(t.h&&!o)return ke(t.h);var a=Eo(n.providerId),s=ii(t.uid+":::"),u=null;(!ti()||Ur())&&t.s&&n.isOAuthProvider&&(u=sc(t.s,t.l,t.m,e,n,null,s,r.a.SDK_VERSION||null,null,null,t.tenantId));var c=Rr(u,a&&a.ta,a&&a.sa);return i=i().then((function(){if(hf(t),!o)return t.I().then((function(){}))})).then((function(){return Gh(t.i,c,e,n,s,!!u,t.tenantId)})).then((function(){return new Ce((function(n,r){t.la(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.w=r,t.g=s,t.c=qh(t.i,t,e,c,s)}))})).then((function(t){return c&&Nr(c),t?_i(t):null})).o((function(t){throw c&&Nr(c),t})),lf(t,i,o)}function cf(t,e,n,r,i){if(!Qr())return ke(new A("operation-not-supported-in-this-environment"));if(t.h&&!i)return ke(t.h);var o=null,a=ii(t.uid+":::");return r=r().then((function(){if(hf(t),!i)return t.I().then((function(){}))})).then((function(){return t.fa=a,Hl(t)})).then((function(e){return t.ga&&(e=t.ga,e=e.b.set(gf,t.v(),e.a)),e})).then((function(){return Wh(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ga)return yf(t.ga);throw o})).then((function(){if(o)throw o})),lf(t,r,i)}function hf(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function lf(t,e,n){var r=ff(t,e,n);return t.N.push(r),r.ma((function(){J(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=pl(e.v(),Ul(t),E(t.hc,t))),n||e}))}function ff(t,e,n){return t.h&&!n?(e.cancel(),ke(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new bl("userInvalidated")),t.h=e),e}))}function pf(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Rs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new Ll(e,n,t);return t.providerData&&W(t.providerData,(function(t){t&&$l(r,_i(t))})),t.redirectEventId&&(r.fa=t.redirectEventId),r}function df(t,e,n,r){var i=new Ll(t,e);return n&&(i.ga=n),r&&kl(i,r),i.reload().then((function(){return i}))}function vf(t,e,n,r){var i=t.b,o={};return o[Rs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Ll(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ga=n),r&&kl(e,r),Zl(e,t),e}function mf(t){this.a=t,this.b=Qc()}cl.prototype.Pc=function(t){var e=this;return t.ob(this.a.b,this.c).then((function(t){var n=yt(e.f);return delete n[hl],delete n[ll],_t(n,t),e.g(n)}))},M(fl,A),dl.prototype.ob=function(t,e,n){return e.type==Do?vl(this,t,e,n):ml(this,t,e)},M(gl,dl),M(yl,gl),M(bl,un),e=_l.prototype,e.wc=function(t){xl(this,wl(t.ed))},e.Ob=function(){return this.a.I().then((function(t){return new Lo(t,null)}))},e.dc=function(t,e){var n=this,r=this.a.a;return this.Ob().then((function(n){return t.ob(r,n,e)})).then((function(t){return ef(n.a,t),n.a.reload()}))},e.$c=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Vu(r,Bu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=Y(e.b,(function(t){return t.uid!=n}));return xl(e,r),ef(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},e.v=function(){return{multiFactor:{enrolledFactors:X(this.b,(function(t){return t.v()}))}}},El.prototype.start=function(){this.a=this.c,Tl(this,!0)},El.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ml.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Al(this)}},Ml.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new A("user-token-expired")):t||!this.b||T()>Al(this)-3e4?this.a?Nl(this,{grant_type:"refresh_token",refresh_token:this.a}):De(null):De({accessToken:this.b.toString(),refreshToken:this.a})},Rl.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},M(Ll,Pn),Ll.prototype.va=function(t){this.oa=t,ks(this.a,t)},Ll.prototype.ja=function(){return this.oa},Ll.prototype.Ea=function(){return et(this.W)},Ll.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},yi(Ll.prototype,"providerId","firebase"),e=Ll.prototype,e.reload=function(){var t=this;return lf(this,Xl(this).then((function(){return tf(t).then((function(){return Hl(t)})).then(Yl)})))},e.mc=function(t){return this.I(t).then((function(t){return new ul(t)}))},e.I=function(t){var e=this;return lf(this,Xl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.xa&&(Vl(e,t.accessToken),e.dispatchEvent(new bl("tokenChanged"))),Jl(e,"refreshToken",t.refreshToken),t.accessToken})))},e.Ic=function(t){if(t=t.users,!t||!t.length)throw new A("internal-error");t=t[0],ql(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=rf(t),n=0;n<e.length;n++)$l(this,e[n]);Jl(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new bl("userReloaded",{ed:t}))},e.Jc=function(t){return mi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},e.pb=function(t){var e=this,n=null;return lf(this,t.c(this.a,this.uid).then((function(t){return ef(e,t),n=af(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},e.Ac=function(t){return mi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},e.mb=function(t){var e=this,n=null;return lf(this,of(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=af(e,t,"link"),sf(e,t)})).then((function(){return n})))},e.Bc=function(t,e){var n=this;return lf(this,of(this,"phone").then((function(){return sl(Ul(n),t,e,E(n.mb,n))})))},e.Kc=function(t,e){var n=this;return lf(this,De().then((function(){return sl(Ul(n),t,e,E(n.pb,n))})),!0)},e.xb=function(t){var e=this;return lf(this,this.I().then((function(n){return e.a.xb(n,t)})).then((function(t){return ef(e,t),e.reload()})))},e.cd=function(t){var e=this;return lf(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return ef(e,t),e.reload()})))},e.yb=function(t){var e=this;return lf(this,this.I().then((function(n){return e.a.yb(n,t)})).then((function(t){return ef(e,t),e.reload()})))},e.zb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Xl(this);var e=this;return lf(this,this.I().then((function(n){return e.a.zb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return ef(e,t),Jl(e,"displayName",t.displayName||null),Jl(e,"photoURL",t.photoUrl||null),W(e.providerData,(function(t){"password"===t.providerId&&(yi(t,"displayName",e.displayName),yi(t,"photoURL",e.photoURL))})),Hl(e)})).then(Yl))},e.ad=function(t){var e=this;return lf(this,tf(this).then((function(n){return Q(Kl(e),t)?eu(e.a,n,[t]).then((function(t){var n={};return W(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),W(Kl(e),(function(t){n[t]||Ql(e,t)})),n[ha.PROVIDER_ID]||yi(e,"phoneNumber",null),Hl(e)})):Hl(e).then((function(){throw new A("no-such-provider")}))})))},e.delete=function(){var t=this;return lf(this,this.I().then((function(e){return Vu(t.a,pu,{idToken:e})})).then((function(){t.dispatchEvent(new bl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Dl(t,null),Fl(t,null),t.N=[],t.D=!0,Bl(t),yi(t,"refreshToken",null),t.i&&zh(t.i,t)}))},e.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},e.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?E(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?E(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?E(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?E(this.Ib,this):null},e.Cc=function(t){var e=this;return uf(this,"linkViaPopup",t,(function(){return of(e,t.providerId).then((function(){return Hl(e)}))}),!1)},e.Lc=function(t){return uf(this,"reauthViaPopup",t,(function(){return De()}),!0)},e.Dc=function(t){var e=this;return cf(this,"linkViaRedirect",t,(function(){return of(e,t.providerId)}),!1)},e.Mc=function(t){return cf(this,"reauthViaRedirect",t,(function(){return De()}),!0)},e.Hb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return au(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=af(i,t,"link"),sf(i,t)})).then((function(){return o})),lf(this,n)},e.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,a=De().then((function(){return Uo(su(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=af(i,t,"reauthenticate"),ef(i,t),i.h=null,i.reload()})).then((function(){return o}));return lf(this,a,!0)},e.qb=function(t){var e=this,n=null;return lf(this,this.I().then((function(e){return n=e,"undefined"===typeof t||gt(t)?{}:ho(new to(t))})).then((function(t){return e.a.qb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},e.Ab=function(t,e){var n=this,r=null;return lf(this,this.I().then((function(t){return r=t,"undefined"===typeof e||gt(e)?{}:ho(new to(e))})).then((function(e){return n.a.Ab(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},e.hc=function(t){var e=null,n=this;return t=Uo(De(t),n.uid).then((function(t){return e=af(n,t,"reauthenticate"),ef(n,t),n.h=null,n.reload()})).then((function(){return e})),lf(this,t,!0)},e.toJSON=function(){return this.v()},e.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&_t(t,this.metadata.v()),W(this.providerData,(function(e){t.providerData.push(wi(e))})),_t(t,this.O.v()),t};var gf={name:"redirectUser",F:"session"};function yf(t){return eh(t.b,gf,t.a)}function bf(t,e){return t.b.get(gf,t.a).then((function(t){return t&&e&&(t.authDomain=e),pf(t||{})}))}function _f(t){this.a=t,this.b=Qc(),this.c=null,this.f=xf(this),this.b.addListener(Sf("local"),this.a,E(this.g,this))}function wf(t,e){var n,r=[];for(n in Xc)Xc[n]!==e&&r.push(eh(t.b,Sf(Xc[n]),t.a));return r.push(eh(t.b,Ef,t.a)),Ue(r)}function xf(t){var e=Sf("local"),n=Sf("session"),r=Sf("none");return th(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Ef,t.a).then((function(t){return t?Sf(t):e}))}))}))})).then((function(e){return t.c=e,wf(t,e.F)})).o((function(){t.c||(t.c=e)}))}_f.prototype.g=function(){var t=this,e=Sf("local");If(this,(function(){return De().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return wf(t,"local").then((function(){t.c=e}))}))}))};var Ef={name:"persistence",F:"session"};function Sf(t){return{name:"authUser",F:t}}function Tf(t){return If(t,(function(){return t.b.set(Ef,t.c.F,t.a)}))}function Mf(t,e){return If(t,(function(){return t.b.set(t.c,e.v(),t.a)}))}function Af(t){return If(t,(function(){return eh(t.b,t.c,t.a)}))}function Cf(t,e){return If(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),pf(t||{})}))}))}function If(t,e){return t.f=t.f.then(e,e),t.f}function Nf(t){if(this.l=!1,yi(this,"settings",new ol),yi(this,"app",t),!Gf(this).options||!Gf(this).options.apiKey)throw new A("invalid-api-key");t=r.a.SDK_VERSION?Yr(r.a.SDK_VERSION):null,this.b=new Is(Gf(this).options&&Gf(this).options.apiKey,P(I),t),this.P=[],this.m=[],this.O=[],this.$b=r.a.INTERNAL.createSubscribe(E(this.xc,this)),this.W=void 0,this.ac=r.a.INTERNAL.createSubscribe(E(this.yc,this)),Uf(this,null),this.i=new _f(Gf(this).options.apiKey+":"+Gf(this).name),this.B=new mf(Gf(this).options.apiKey+":"+Gf(this).name),this.Z=Xf(this,zf(this)),this.h=Xf(this,Bf(this)),this.aa=!1,this.oa=E(this.Xc,this),this.Ma=E(this.ca,this),this.xa=E(this.jc,this),this.ya=E(this.uc,this),this.za=E(this.vc,this),this.a=null,Df(this),this.INTERNAL={},this.INTERNAL["delete"]=E(this.delete,this),this.INTERNAL.logFramework=E(this.Ec,this),this.s=0,Pn.call(this),Pf(this),this.N=[]}function Rf(t){un.call(this,"languageCodeChanged"),this.g=t}function Of(t){un.call(this,"frameworkChanged"),this.c=t}function Pf(t){Object.defineProperty(t,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),t.$=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),t.R=null}function Lf(t){return t.Zb||ke(new A("auth-domain-config-required"))}function Df(t){var e=Gf(t).options.authDomain,n=Gf(t).options.apiKey;e&&Qr()&&(t.Zb=t.Z.then((function(){if(!t.l){if(t.a=Xh(e,n,Gf(t).name),jh(t.a,t),Hf(t)&&Wl(Hf(t)),t.D){Wl(t.D);var r=t.D;r.va(t.ja()),Dl(r,t),r=t.D,kl(r,t.N),Fl(r,t),t.D=null}return t.a}})))}function kf(t){if(!Qr())return ke(new A("operation-not-supported-in-this-environment"));var e=Lf(t).then((function(){return t.a.pa()})).then((function(t){return t?_i(t):null}));return Xf(t,e)}function Ff(t,e){var n={};return n.apiKey=Gf(t).options.apiKey,n.authDomain=Gf(t).options.authDomain,n.appName=Gf(t).name,t.Z.then((function(){return df(n,e,t.B,t.Ea())})).then((function(e){return Hf(t)&&e.uid==Hf(t).uid?(Zl(Hf(t),e),t.ca(e)):(Uf(t,e),Wl(e),t.ca(e))})).then((function(){qf(t)}))}function Uf(t,e){Hf(t)&&(Gl(Hf(t),t.Ma),Sn(Hf(t),"tokenChanged",t.xa),Sn(Hf(t),"userDeleted",t.ya),Sn(Hf(t),"userInvalidated",t.za),Bl(Hf(t))),e&&(e.R.push(t.Ma),_n(e,"tokenChanged",t.xa),_n(e,"userDeleted",t.ya),_n(e,"userInvalidated",t.za),0<t.s&&zl(e)),yi(t,"currentUser",e),e&&(e.va(t.ja()),Dl(e,t),kl(e,t.N),Fl(e,t))}function jf(t){var e=bf(t.B,Gf(t).options.authDomain).then((function(e){return(t.D=e)&&(e.ga=t.B),yf(t.B)}));return Xf(t,e)}function zf(t){var e=Gf(t).options.authDomain,n=jf(t).then((function(){return Cf(t.i,e)})).then((function(e){return e?(e.ga=t.B,t.D&&(t.D.fa||null)==(e.fa||null)?e:e.reload().then((function(){return Mf(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Af(t.i)}))):null})).then((function(e){Uf(t,e||null)}));return Xf(t,n)}function Bf(t){return t.Z.then((function(){return kf(t)})).o((function(){})).then((function(){if(!t.l)return t.oa()})).o((function(){})).then((function(){if(!t.l){t.aa=!0;var e=t.i;e.b.addListener(Sf("local"),e.a,t.oa)}}))}function Vf(t,e){var n=null,r=null;return Xf(t,e.then((function(e){return n=fa(e),r=So(e),Ff(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=pl(e.v(),t,E(t.ic,t))),n||e})).then((function(){return _i({user:Hf(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Gf(t){return t.app}function Hf(t){return t.currentUser}function Wf(t){return Hf(t)&&Hf(t)._lat||null}function qf(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Wf(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](Wf(t))}}function Yf(t,e){t.O.push(e),Xf(t,t.h.then((function(){!t.l&&Q(t.O,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Wf(t)))})))}function Xf(t,e){return t.P.push(e),e.ma((function(){J(t.P,e)})),e}function Kf(){}function $f(){this.a={},this.b=1e12}_f.prototype.tb=function(t){var e=null,n=this;return Kc(t),If(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,wf(n,t)})).then((function(){if(n.c=Sf(t),e)return n.b.set(n.c,e,n.a)})):De()}))},M(Nf,Pn),M(Rf,un),M(Of,un),e=Nf.prototype,e.tb=function(t){return t=this.i.tb(t),Xf(this,t)},e.va=function(t){this.$===t||this.l||(this.$=t,ks(this.b,this.$),this.dispatchEvent(new Rf(this.ja())))},e.ja=function(){return this.$},e.dd=function(){var t=h.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},e.Ec=function(t){this.N.push(t),Fs(this.b,r.a.SDK_VERSION?Yr(r.a.SDK_VERSION,this.N):null),this.dispatchEvent(new Of(this.N))},e.Ea=function(){return et(this.N)},e.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},e.S=function(){return this.R},e.toJSON=function(){return{apiKey:Gf(this).options.apiKey,authDomain:Gf(this).options.authDomain,appName:Gf(this).name,currentUser:Hf(this)&&Hf(this).v()}},e.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},e.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?E(this.gc,this):null},e.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then((function(){return Vf(i,ou(i.b,o))}))},e.Vc=function(t){if(!Qr())return ke(new A("operation-not-supported-in-this-environment"));var e=this,n=Eo(t.providerId),i=ii(),o=null;(!ti()||Ur())&&Gf(this).options.authDomain&&t.isOAuthProvider&&(o=sc(Gf(this).options.authDomain,Gf(this).options.apiKey,Gf(this).name,"signInViaPopup",t,null,i,r.a.SDK_VERSION||null,null,null,this.S()));var a=Rr(o,n&&n.ta,n&&n.sa);return n=Lf(this).then((function(n){return Gh(n,a,"signInViaPopup",t,i,!!o,e.S())})).then((function(){return new Ce((function(t,n){e.la("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.w=n,e.g=i,e.c=qh(e.a,e,"signInViaPopup",a,i)}))})).then((function(t){return a&&Nr(a),t?_i(t):null})).o((function(t){throw a&&Nr(a),t})),Xf(this,n)},e.Wc=function(t){if(!Qr())return ke(new A("operation-not-supported-in-this-environment"));var e=this,n=Lf(this).then((function(){return Tf(e.i)})).then((function(){return Wh(e.a,"signInViaRedirect",t,void 0,e.S())}));return Xf(this,n)},e.pa=function(){var t=this;return kf(this).then((function(e){return t.a&&Qh(t.a.b),e})).o((function(e){throw t.a&&Qh(t.a.b),e}))},e.bd=function(t){if(!t)return ke(new A("null-user"));if(this.R!=t.tenantId)return ke(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=Gf(this).options.apiKey,n.authDomain=Gf(this).options.authDomain,n.appName=Gf(this).name;var r=vf(t,n,e.B,e.Ea());return Xf(this,this.h.then((function(){if(Gf(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Hf(e)&&t.uid==Hf(e).uid?(Zl(Hf(e),t),e.ca(t)):(Uf(e,r),Wl(r),e.ca(r))})).then((function(){qf(e)})))},e.wb=function(){var t=this,e=this.h.then((function(){return t.a&&Qh(t.a.b),Hf(t)?(Uf(t,null),Af(t.i).then((function(){qf(t)}))):De()}));return Xf(this,e)},e.Xc=function(){var t=this;return Cf(this.i,Gf(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Hf(t)&&e){n=Hf(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Zl(Hf(t),e),Hf(t).I();(Hf(t)||e)&&(Uf(t,e),e&&(Wl(e),e.ga=t.B),t.a&&jh(t.a,t),qf(t))}}))},e.ca=function(t){return Mf(this.i,t)},e.jc=function(){qf(this),this.ca(Hf(this))},e.uc=function(){this.wb()},e.vc=function(){this.wb()},e.ic=function(t){var e=this;return this.h.then((function(){return Vf(e,De(t))}))},e.xc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Hf(e))}))},e.yc=function(t){var e=this;Yf(this,(function(){t.next(Hf(e))}))},e.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){m(t)?t(Hf(r)):m(t.next)&&t.next(Hf(r))})),this.$b(t,e,n)},e.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){r.W=r.getUid(),m(t)?t(Hf(r)):m(t.next)&&t.next(Hf(r))})),this.ac(t,e,n)},e.kc=function(t){var e=this,n=this.h.then((function(){return Hf(e)?Hf(e).I(t).then((function(t){return{accessToken:t}})):null}));return Xf(this,n)},e.Rc=function(t){var e=this;return this.h.then((function(){return Vf(e,Vu(e.b,ku,{token:t}))})).then((function(t){var n=t.user;return Jl(n,"isAnonymous",!1),e.ca(n),t}))},e.Sc=function(t,e){var n=this;return this.h.then((function(){return Vf(n,Vu(n.b,Fu,{email:t,password:e}))}))},e.cc=function(t,e){var n=this;return this.h.then((function(){return Vf(n,Vu(n.b,lu,{email:t,password:e}))}))},e.Ya=function(t){var e=this;return this.h.then((function(){return Vf(e,t.ia(e.b))}))},e.Qc=function(t){return mi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},e.vb=function(){var t=this;return this.h.then((function(){var e=Hf(t);if(e&&e.isAnonymous){var n=_i({providerId:null,isNewUser:!1});return _i({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Vf(t,t.b.vb()).then((function(e){var n=e.user;return Jl(n,"isAnonymous",!0),t.ca(n),e}))}))},e.getUid=function(){return Hf(this)&&Hf(this).uid||null},e.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&Hf(this)&&zl(Hf(this))},e.Nc=function(t){var e=this;W(this.m,(function(n){n==t&&e.s--})),0>this.s&&(this.s=0),0==this.s&&Hf(this)&&Bl(Hf(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(t){var e=this;this.m.push(t),Xf(this,this.h.then((function(){e.l||Q(e.m,t)&&t(Wf(e))})))},e.removeAuthTokenListener=function(t){Z(this.m,(function(e){return e==t}))},e.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i,t.b.removeListener(Sf("local"),t.a,this.oa)),this.a&&(zh(this.a,this),Qh(this.a.b)),Promise.resolve()},e.fc=function(t){return Xf(this,qs(this.b,t))},e.zc=function(t){return!!aa(t)},e.sb=function(t,e){var n=this;return Xf(this,De().then((function(){var t=new to(e);if(!t.c)throw new A("argument-error",ro+" must be true when sending sign in link to email");return ho(t)})).then((function(e){return n.b.sb(t,e)})).then((function(){})))},e.fd=function(t){return this.Pa(t).then((function(t){return t.data.email}))},e.jb=function(t,e){return Xf(this,this.b.jb(t,e).then((function(){})))},e.Pa=function(t){return Xf(this,this.b.Pa(t).then((function(t){return new Ri(t)})))},e.fb=function(t){return Xf(this,this.b.fb(t).then((function(){})))},e.rb=function(t,e){var n=this;return Xf(this,De().then((function(){return"undefined"===typeof e||gt(e)?{}:ho(new to(e))})).then((function(e){return n.b.rb(t,e)})).then((function(){})))},e.Uc=function(t,e){return Xf(this,sl(this,t,e,E(this.Ya,this)))},e.Tc=function(t,e){var n=this;return Xf(this,De().then((function(){var r=e||Tr(),i=oa(t,r);if(r=aa(r),!r)throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new A("tenant-id-mismatch");return n.Ya(i)})))},Kf.prototype.render=function(){},Kf.prototype.reset=function(){},Kf.prototype.getResponse=function(){},Kf.prototype.execute=function(){};var Qf=null;function Jf(t,e){return(e=Zf(e))&&t.a[e]||null}function Zf(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function tp(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=fe(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():_n(this.f,"click",this.i)}function ep(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function np(){}function rp(){}$f.prototype.render=function(t,e){return this.a[this.b.toString()]=new tp(t,e),this.b++},$f.prototype.reset=function(t){var e=Jf(this,t);t=Zf(t),e&&t&&(e.delete(),delete this.a[t])},$f.prototype.getResponse=function(t){return(t=Jf(this,t))?t.getResponse():null},$f.prototype.execute=function(t){(t=Jf(this,t))&&t.execute()},tp.prototype.getResponse=function(){return ep(this),this.b},tp.prototype.execute=function(){ep(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=Vr();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},tp.prototype.delete=function(){ep(this),this.g=!0,clearTimeout(this.a),this.a=null,Sn(this.f,"click",this.i)},yi(np,"FACTOR_ID","phone"),rp.prototype.g=function(){return Qf||(Qf=new $f),De(Qf)},rp.prototype.c=function(){};var ip=null;function op(){this.b=h.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ap=new xt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),sp=new si(3e4,6e4);op.prototype.g=function(t){var e=this;return new Ce((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),sp.get());if(!h.grecaptcha||t!==e.f&&!e.b){h[e.a]=function(){if(h.grecaptcha){e.f=t;var o=h.grecaptcha.render;h.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(h.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete h[e.a]};var o=It(ap,{onload:e.a,hl:t||""});De(ws(o)).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(h.grecaptcha)}))},op.prototype.c=function(){this.b--};var up=null;function cp(t,e,n,r,i,o,a){if(yi(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,a?(ip||(ip=new rp),a=ip):(up||(up=new op),a=up),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[fp])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[pp],!h.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!fe(e)||!this.i&&fe(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Is(t,o||null,i||null),this.w=r||function(){return null};var s=this;this.l=[];var u=this.a[hp];this.a[hp]=function(t){if(dp(s,t),"function"===typeof u)u(t);else if("string"===typeof u){var e=Kr(u,h);"function"===typeof e&&e(t)}};var c=this.a[lp];this.a[lp]=function(){if(dp(s,null),"function"===typeof c)c();else if("string"===typeof c){var t=Kr(c,h);"function"===typeof t&&t()}}}var hp="callback",lp="expired-callback",fp="sitekey",pp="size";function dp(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function vp(t,e){Z(t.l,(function(t){return t==e}))}function mp(t,e){return t.h.push(e),e.ma((function(){J(t.h,e)})),e}function gp(t){if(t.D)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function yp(t,e,n){var i=!1;try{this.b=n||r.a.app()}catch(s){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ea()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=r.a.SDK_VERSION?Yr(r.a.SDK_VERSION,a):null,cp.call(this,n,t,e,(function(){try{var t=o.b.auth().ja()}catch(e){t=null}return t}),a,P(I),i)}function bp(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=_p.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=_p[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}e=cp.prototype,e.Ga=function(){var t=this;return this.f?this.f:this.f=mp(this,De().then((function(){if(Jr()&&!jr())return Dr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.w())})).then((function(e){return t.g=e,Vu(t.s,Tu,{})})).then((function(e){t.a[fp]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},e.render=function(){gp(this);var t=this;return mp(this,this.Ga().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=fe(e);e=ge("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},e.verify=function(){gp(this);var t=this;return mp(this,this.render().then((function(e){return new Ce((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(vp(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},e.reset=function(){gp(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){gp(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=fe(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},M(yp,cp);var _p="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function wp(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"===typeof t}}}function xp(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"===typeof t}}}function Ep(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:g}}function Sp(t,e){return{name:t||"",J:"a function",optional:!!e,K:m}}function Tp(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Mp(){return{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}}}function Ap(){return{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Nf)}}}function Cp(){return{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof r.a.app.App)}}}function Ip(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ia||!n)}}}function Np(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function Rp(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Op(t,e){return g(t)&&"string"===typeof t.type&&t.type===e&&m(t.Fa)}function Pp(t){return g(t)&&"string"===typeof t.uid}function Lp(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!==typeof t.type||!m(t.verify))}}}function Dp(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function kp(t,e){for(var n in e){var r=e[n].name;t[r]=jp(r,t[n],e[n].j)}}function Fp(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:S((function(t){return this[t]}),n),set:S((function(t,e,n,r){bp(t,[n],[r],!0),this[e]=r}),r,n,e[n].gb),enumerable:!0})}}function Up(t,e,n,r){t[e]=jp(e,n,r)}function jp(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return bp(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=zp(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function zp(t){return t=t.split("."),t[t.length-1]}kp(Nf.prototype,{fb:{name:"applyActionCode",j:[wp("code")]},Pa:{name:"checkActionCode",j:[wp("code")]},jb:{name:"confirmPasswordReset",j:[wp("code"),wp("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[wp("email"),wp("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[wp("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[wp("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Dp(Ep(),Sp(),"nextOrObserver"),Sp("opt_error",!0),Sp("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Dp(Ep(),Sp(),"nextOrObserver"),Sp("opt_error",!0),Sp("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[wp("email"),Dp(Ep("opt_actionCodeSettings",!0),Tp(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[wp("email"),Ep("actionCodeSettings")]},tb:{name:"setPersistence",j:[wp("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Ip()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Ip()]},Rc:{name:"signInWithCustomToken",j:[wp("token")]},Sc:{name:"signInWithEmailAndPassword",j:[wp("email"),wp("password")]},Tc:{name:"signInWithEmailLink",j:[wp("email"),wp("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[wp("phoneNumber"),Lp()]},Vc:{name:"signInWithPopup",j:[Rp()]},Wc:{name:"signInWithRedirect",j:[Rp()]},bd:{name:"updateCurrentUser",j:[Dp(function(t){return{name:"user",J:"an instance of Firebase User",optional:!!t,K:function(t){return!!(t&&t instanceof Ll)}}}(),Tp(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[wp(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[wp("code")]}}),Fp(Nf.prototype,{lc:{name:"languageCode",gb:Dp(wp(),Tp(),"languageCode")},ti:{name:"tenantId",gb:Dp(wp(),Tp(),"tenantId")}}),Nf.Persistence=Xc,Nf.Persistence.LOCAL="local",Nf.Persistence.SESSION="session",Nf.Persistence.NONE="none",kp(Ll.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[xp("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[xp("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Ip()]},mb:{name:"linkWithCredential",j:[Ip()]},Bc:{name:"linkWithPhoneNumber",j:[wp("phoneNumber"),Lp()]},Cc:{name:"linkWithPopup",j:[Rp()]},Dc:{name:"linkWithRedirect",j:[Rp()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ip()]},pb:{name:"reauthenticateWithCredential",j:[Ip()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[wp("phoneNumber"),Lp()]},Lc:{name:"reauthenticateWithPopup",j:[Rp()]},Mc:{name:"reauthenticateWithRedirect",j:[Rp()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Dp(Ep("opt_actionCodeSettings",!0),Tp(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[wp(null,!0)]},ad:{name:"unlink",j:[wp("provider")]},xb:{name:"updateEmail",j:[wp("email")]},yb:{name:"updatePassword",j:[wp("password")]},cd:{name:"updatePhoneNumber",j:[Ip("phone")]},zb:{name:"updateProfile",j:[Ep("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[wp("email"),Dp(Ep("opt_actionCodeSettings",!0),Tp(null,!0),"opt_actionCodeSettings",!0)]}}),kp($f.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),kp(Kf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),kp(Ce.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Fp(ol.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:xp("appVerificationDisabledForTesting")}}),kp(al.prototype,{confirm:{name:"confirm",j:[wp("verificationCode")]}}),Up(Fo,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[Ho,ra,ua,Bo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Dp(wp(),Ep(),"json")]),Up(ia,"credential",(function(t,e){return new na(t,e)}),[wp("email"),wp("password")]),kp(na.prototype,{v:{name:"toJSON",j:[wp(null,!0)]}}),kp(Xo.prototype,{Aa:{name:"addScope",j:[wp("scope")]},Ia:{name:"setCustomParameters",j:[Ep("customOAuthParameters")]}}),Up(Xo,"credential",Ko,[Dp(wp(),Ep(),"token")]),Up(ia,"credentialWithLink",oa,[wp("email"),wp("emailLink")]),kp($o.prototype,{Aa:{name:"addScope",j:[wp("scope")]},Ia:{name:"setCustomParameters",j:[Ep("customOAuthParameters")]}}),Up($o,"credential",Qo,[Dp(wp(),Ep(),"token")]),kp(Jo.prototype,{Aa:{name:"addScope",j:[wp("scope")]},Ia:{name:"setCustomParameters",j:[Ep("customOAuthParameters")]}}),Up(Jo,"credential",Zo,[Dp(wp(),Dp(Ep(),Tp()),"idToken"),Dp(wp(),Tp(),"accessToken",!0)]),kp(ta.prototype,{Ia:{name:"setCustomParameters",j:[Ep("customOAuthParameters")]}}),Up(ta,"credential",ea,[Dp(wp(),Ep(),"token"),wp("secret",!0)]),kp(Yo.prototype,{Aa:{name:"addScope",j:[wp("scope")]},credential:{name:"credential",j:[Dp(wp(),Dp(Ep(),Tp()),"optionsOrIdToken"),Dp(wp(),Tp(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Ep("customOAuthParameters")]}}),kp(Vo.prototype,{v:{name:"toJSON",j:[wp(null,!0)]}}),kp(jo.prototype,{v:{name:"toJSON",j:[wp(null,!0)]}}),Up(ha,"credential",la,[wp("verificationId"),wp("verificationCode")]),kp(ha.prototype,{cb:{name:"verifyPhoneNumber",j:[Dp(wp(),function(t,e){return{name:t||"phoneInfoOptions",J:"valid phone info options",optional:!!e,K:function(t){return!!t&&(t.session&&t.phoneNumber?Op(t.session,Do)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?Op(t.session,ko)&&Pp(t.multiFactorHint):t.session&&t.multiFactorUid?Op(t.session,ko)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}}}(),"phoneInfoOptions"),Lp()]}}),kp(sa.prototype,{v:{name:"toJSON",j:[wp(null,!0)]}}),kp(A.prototype,{toJSON:{name:"toJSON",j:[wp(null,!0)]}}),kp(wa.prototype,{toJSON:{name:"toJSON",j:[wp(null,!0)]}}),kp(_a.prototype,{toJSON:{name:"toJSON",j:[wp(null,!0)]}}),kp(fl.prototype,{toJSON:{name:"toJSON",j:[wp(null,!0)]}}),kp(cl.prototype,{Pc:{name:"resolveSignIn",j:[Np()]}}),kp(_l.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Np(),wp("displayName",!0)]},$c:{name:"unenroll",j:[Dp({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Pp},wp(),"multiFactorInfoIdentifier")]}}),kp(yp.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Up(Wi,"parseLink",Zi,[wp("link")]),Up(np,"assertion",(function(t){return new yl(t)}),[Ip("phone")]),function(){if("undefined"===typeof r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Pi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Oi,VERIFY_AND_CHANGE_EMAIL:Li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Nf,AuthCredential:Fo,Error:A};Up(t,"EmailAuthProvider",ia,[]),Up(t,"FacebookAuthProvider",Xo,[]),Up(t,"GithubAuthProvider",$o,[]),Up(t,"GoogleAuthProvider",Jo,[]),Up(t,"TwitterAuthProvider",ta,[]),Up(t,"OAuthProvider",Yo,[wp("providerId")]),Up(t,"SAMLAuthProvider",qo,[wp("providerId")]),Up(t,"PhoneAuthProvider",ha,[Ap()]),Up(t,"RecaptchaVerifier",yp,[Dp(wp(),Mp(),"recaptchaContainer"),Ep("recaptchaParameters",!0),Cp()]),Up(t,"ActionCodeURL",Wi,[]),Up(t,"PhoneMultiFactorGenerator",np,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return t=t.getProvider("app").getImmediate(),new Nf(t)},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return t=t.getProvider("auth").getImmediate(),{getUid:E(t.getUid,t),getToken:E(t.kc,t),addAuthTokenListener:E(t.bc,t),removeAuthTokenListener:E(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.14.1"),r.a.INTERNAL.extendNamespace({User:Ll})}()}).apply("undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}.call(this,n("c8ba"))},bb2f:function(t,e,n){var r=n("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc3a:function(t,e,n){t.exports=n("cee4")},bdb4:function(t,e,n){},bee2:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},bf98:function(t,e,n){},c04e:function(t,e,n){var r=n("861d");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c1ac:function(t,e,n){"use strict";var r=n("ebb5"),i=n("b727").filter,o=n("4840"),a=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod;u("filter",(function(t){var e=i(a(this),t,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),r=0,u=e.length,c=new(s(n))(u);while(u>r)c[r]=e[r++];return c}))},c23d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n("9ab4"),a=n("cd51"),s=n("4be4"),u=n("abfd"),c=(r={},r["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new a.ErrorFactory("app","Firebase",c),l="@firebase/app",f="0.6.0",p="@firebase/analytics",d="@firebase/auth",v="@firebase/database",m="@firebase/functions",g="@firebase/installations",y="@firebase/messaging",b="@firebase/performance",_="@firebase/remote-config",w="@firebase/storage",x="@firebase/firestore",E="firebase-wrapper",S="[DEFAULT]",T=(i={},i[l]="fire-core",i[p]="fire-analytics",i[d]="fire-auth",i[v]="fire-rtdb",i[m]="fire-fn",i[g]="fire-iid",i[y]="fire-fcm",i[b]="fire-perf",i[_]="fire-rc",i[w]="fire-gcs",i[x]="fire-fst",i["fire-js"]="fire-js",i[E]="fire-js-all",i),M=new u.Logger("@firebase/app"),A=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next()){var l=h.value;this._addComponent(l)}}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=S),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=S),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){M.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();A.prototype.name&&A.prototype.options||A.prototype.delete||console.log("dc");var C="7.12.0";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(t){var e={},n=new Map,r={__esModule:!0,initializeApp:l,app:c,registerVersion:d,setLogLevel:u.setLogLevel,onLog:v,apps:null,SDK_VERSION:C,INTERNAL:{registerComponent:p,removeApp:i,components:n,useAsService:m}};function i(t){delete e[t]}function c(t){if(t=t||S,!a.contains(e,t))throw h.create("no-app",{appName:t});return e[t]}function l(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=S);var u=s.name;if("string"!==typeof u||!u)throw h.create("bad-app-name",{appName:String(u)});if(a.contains(e,u))throw h.create("duplicate-app",{appName:u});var c=new t(n,s,r);return e[u]=c,c}function f(){return Object.keys(e).map((function(t){return e[t]}))}function p(i){var s,u,l=i.name;if(n.has(l))return M.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===i.type?r[l]:null;if(n.set(l,i),"PUBLIC"===i.type){var f=function(t){if(void 0===t&&(t=c()),"function"!==typeof t[l])throw h.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==i.serviceProps&&a.deepExtend(f,i.serviceProps),r[l]=f,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,l);return n.apply(this,i.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(e)),d=p.next();!d.done;d=p.next()){var v=d.value;e[v]._addComponent(i)}}catch(m){s={error:m}}finally{try{d&&!d.done&&(u=p.return)&&u.call(p)}finally{if(s)throw s.error}}return"PUBLIC"===i.type?r[l]:null}function d(t,e,n){var r,i=null!==(r=T[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void M.warn(u.join(" "))}p(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function v(t,e){if(null!==t&&"function"!==typeof t)throw h.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)}function m(t,e){if("serverAuth"===e)return null;var n=e;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:f}),c["App"]=t,r}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(){var t=I(A);function e(e){a.deepExtend(t,e)}return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:N,extendNamespace:e,createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}var R=N(),O=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(P(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new O(t)}),"PRIVATE")),t.registerVersion(l,f,e),t.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(a.isBrowser()&&void 0!==self.firebase){M.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var D=self.firebase.SDK_VERSION;D&&D.indexOf("LITE")>=0&&M.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var k=R.initializeApp;R.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&M.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),k.apply(void 0,t)};var F=R;L(F),e.default=F,e.firebase=F},c345:function(t,e,n){"use strict";var r=n("c532"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},c401:function(t,e,n){"use strict";var r=n("c532");t.exports=function(t,e,n){return r.forEach(n,(function(n){t=n(t,e)})),t}},c430:function(t,e){t.exports=!1},c532:function(t,e,n){"use strict";var r=n("1d2b"),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function a(t){return"undefined"===typeof t}function s(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function u(t){return"[object ArrayBuffer]"===i.call(t)}function c(t){return"undefined"!==typeof FormData&&t instanceof FormData}function h(t){var e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function l(t){return"string"===typeof t}function f(t){return"number"===typeof t}function p(t){return null!==t&&"object"===typeof t}function d(t){return"[object Date]"===i.call(t)}function v(t){return"[object File]"===i.call(t)}function m(t){return"[object Blob]"===i.call(t)}function g(t){return"[object Function]"===i.call(t)}function y(t){return p(t)&&g(t.pipe)}function b(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function _(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function w(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function x(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function E(){var t={};function e(e,n){"object"===typeof t[n]&&"object"===typeof e?t[n]=E(t[n],e):t[n]=e}for(var n=0,r=arguments.length;n<r;n++)x(arguments[n],e);return t}function S(){var t={};function e(e,n){"object"===typeof t[n]&&"object"===typeof e?t[n]=S(t[n],e):t[n]="object"===typeof e?S({},e):e}for(var n=0,r=arguments.length;n<r;n++)x(arguments[n],e);return t}function T(t,e,n){return x(e,(function(e,i){t[i]=n&&"function"===typeof e?r(e,n):e})),t}t.exports={isArray:o,isArrayBuffer:u,isBuffer:s,isFormData:c,isArrayBufferView:h,isString:l,isNumber:f,isObject:p,isUndefined:a,isDate:d,isFile:v,isBlob:m,isFunction:g,isStream:y,isURLSearchParams:b,isStandardBrowserEnv:w,forEach:x,merge:E,deepMerge:S,extend:T,trim:_}},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},c7b2:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",(function(){return Cr})),n.d(e,"EventType",(function(){return Ir})),n.d(e,"WebChannel",(function(){return Nr})),n.d(e,"XhrIo",(function(){return Rr})),n.d(e,"createWebChannelTransport",(function(){return Ar}));var r,i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},o=o||{},a=i;function s(t){return"string"==typeof t}function u(t){return"number"==typeof t}function c(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length;n++)if(e=e[t[n]],null==e)return null;return e}function h(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function f(t){return"array"==l(t)}function p(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y,b.apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function x(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function E(){this.j=this.j,this.i=this.i}var S=0;E.prototype.j=!1,E.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0!=S))this[v]||(this[v]=++m)},E.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var T=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},M=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function A(t){t:{for(var e=Wn,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}function C(t){return Array.prototype.concat.apply([],arguments)}function I(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function N(t){return/^[\s\xa0]*$/.test(t)}var R,O=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function P(t,e){return-1!=t.indexOf(e)}function L(t,e){return t<e?-1:t>e?1:0}t:{var D=a.navigator;if(D){var k=D.userAgent;if(k){R=k;break t}}R=""}function F(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function U(t){var e,n={};for(e in t)n[e]=t[e];return n}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function B(t){return B[" "](t),t}function V(t,e){var n=et;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}B[" "]=h;var G,H=P(R,"Opera"),W=P(R,"Trident")||P(R,"MSIE"),q=P(R,"Edge"),Y=q||W,X=P(R,"Gecko")&&!(P(R.toLowerCase(),"webkit")&&!P(R,"Edge"))&&!(P(R,"Trident")||P(R,"MSIE"))&&!P(R,"Edge"),K=P(R.toLowerCase(),"webkit")&&!P(R,"Edge");function $(){var t=a.document;return t?t.documentMode:void 0}t:{var Q="",J=function(){var t=R;return X?/rv:([^\);]+)(\)|;)/.exec(t):q?/Edge\/([\d\.]+)/.exec(t):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):K?/WebKit\/(\S+)/.exec(t):H?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(J&&(Q=J?J[1]:""),W){var Z=$();if(null!=Z&&Z>parseFloat(Q)){G=String(Z);break t}}G=Q}var tt,et={};function nt(t){return V(t,(function(){for(var e=0,n=O(String(G)).split("."),r=O(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=L(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||L(0==a[2].length,0==s[2].length)||L(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var rt=a.document;tt=rt&&W?$()||("CSS1Compat"==rt.compatMode?parseInt(G,10):5):void 0;var it=!W||9<=Number(tt),ot=W&&!nt("9"),at=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function st(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function ut(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(X){t:{try{B(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:ct[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}st.prototype.b=function(){this.Ia=!1},x(ut,st);var ct={2:"touch",3:"pen",4:"mouse"};ut.prototype.b=function(){ut.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ot)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ht="closure_listenable_"+(1e6*Math.random()|0),lt=0;function ft(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++lt,this.X=this.Z=!1}function pt(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function dt(t){this.src=t,this.a={},this.b=0}function vt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=T(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(pt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function mt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var a=mt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):(e=new ft(e,this.src,o,!!r,i),e.Z=n,t.push(e)),e};var gt="closure_lm_"+(1e6*Math.random()|0),yt={};function bt(t,e,n,r,i){if(r&&r.once)return xt(t,e,n,r,i);if(f(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=Nt(n),t&&t[ht]?t.za(e,n,d(r)?!!r.capture:!!r,i):_t(t,e,n,!1,r,i)}function _t(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i;if(a&&!it)return null;var s=Ct(t);if(s||(t[gt]=s=new dt(t)),n=s.add(e,n,r,a,o),n.proxy)return n;if(r=wt(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)at||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Tt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function wt(){var t=At,e=it?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function xt(t,e,n,r,i){if(f(e)){for(var o=0;o<e.length;o++)xt(t,e[o],n,r,i);return null}return n=Nt(n),t&&t[ht]?t.Aa(e,n,d(r)?!!r.capture:!!r,i):_t(t,e,n,!0,r,i)}function Et(t,e,n,r,i){if(f(e))for(var o=0;o<e.length;o++)Et(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=Nt(n),t&&t[ht]?(t=t.c,e=String(e).toString(),e in t.a&&(o=t.a[e],n=mt(o,n,r,i),-1<n&&(pt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Ct(t))&&(e=t.a[e.toString()],t=-1,e&&(t=mt(e,n,r,i)),(n=-1<t?e[t]:null)&&St(n))}function St(t){if(!u(t)&&t&&!t.X){var e=t.src;if(e&&e[ht])vt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Tt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ct(e))?(vt(n,t),0==n.b&&(n.src=null,e[gt]=null)):pt(t)}}}function Tt(t){return t in yt?yt[t]:yt[t]="on"+t}function Mt(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&St(t),n.call(r,e)}function At(t,e){return!!t.X||(it?Mt(t,new ut(e,this)):(e=new ut(e||c("window.event"),this),Mt(t,e)))}function Ct(t){return t=t[gt],t instanceof dt?t:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nt(t){return"function"==l(t)?t:(t[It]||(t[It]=function(e){return t.handleEvent(e)}),t[It])}function Rt(){E.call(this),this.c=new dt(this),this.J=this,this.B=null}function Ot(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&vt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}x(Rt,E),Rt.prototype[ht]=!0,r=Rt.prototype,r.addEventListener=function(t,e,n,r){bt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){Et(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(s(t))t=new st(t,n);else if(t instanceof st)t.target=t.target||n;else{var i=t;t=new st(r,n),z(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Ot(a,r,!0,t)&&i}if(a=t.a=n,i=Ot(a,r,!0,t)&&i,i=Ot(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)a=t.a=e[o],i=Ot(a,r,!1,t)&&i;return i},r.G=function(){if(Rt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)pt(n[r]);delete e.a[t],e.b--}}this.B=null},r.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Pt=a.JSON.stringify;function Lt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Dt(){this.b=this.a=null}Lt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var kt,Ft=new Lt((function(){return new jt}),(function(t){t.reset()}));function Ut(){var t=Ht,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function jt(){this.next=this.b=this.a=null}function zt(t){a.setTimeout((function(){throw t}),0)}function Bt(t,e){kt||Vt(),Gt||(kt(),Gt=!0),Ht.add(t,e)}function Vt(){var t=a.Promise.resolve(void 0);kt=function(){t.then(Wt)}}Dt.prototype.add=function(t,e){var n=Ft.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},jt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},jt.prototype.reset=function(){this.next=this.b=this.a=null};var Gt=!1,Ht=new Dt;function Wt(){for(var t;t=Ut();){try{t.a.call(t.b)}catch(n){zt(n)}var e=Ft;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Gt=!1}function qt(t,e){Rt.call(this),this.b=t||1,this.a=e||a,this.f=b(this.gb,this),this.g=w()}function Yt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Xt(t,e,n){if("function"==l(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Kt(t,e,n){E.call(this),this.f=null!=n?b(t,n):t,this.c=e,this.b=b(this.$a,this),this.a=[]}function $t(t){t.U=Xt(t.b,t.c),t.f.apply(null,t.a)}function Qt(t){E.call(this),this.b=t,this.a={}}x(qt,Rt),r=qt.prototype,r.ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=w()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Yt(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=w())},r.G=function(){qt.N.G.call(this),Yt(this),delete this.a},x(Kt,E),r=Kt.prototype,r.ea=!1,r.U=null,r.Ta=function(t){this.a=arguments,this.U?this.ea=!0:$t(this)},r.G=function(){Kt.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,$t(this))},x(Qt,E);var Jt=[];function Zt(t,e,n,r){f(n)||(n&&(Jt[0]=n.toString()),n=Jt);for(var i=0;i<n.length;i++){var o=bt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function te(t){F(t.a,(function(t,e){this.a.hasOwnProperty(e)&&St(t)}),t),t.a={}}function ee(){}Qt.prototype.G=function(){Qt.N.G.call(this),te(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ne=new Rt;function re(t){st.call(this,"serverreachability",t)}function ie(t){ne.dispatchEvent(new re(ne,t))}function oe(t){st.call(this,"statevent",t)}function ae(t){ne.dispatchEvent(new oe(ne,t))}function se(t){st.call(this,"timingevent",t)}function ue(t,e){if("function"!=l(t))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}x(re,st),x(oe,st),x(se,st);var ce={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},he={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function le(){}function fe(t){var e;return(e=t.a)||(e=t.a={}),e}function pe(){}le.prototype.a=null;var de,ve={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function me(){st.call(this,"d")}function ge(){st.call(this,"c")}function ye(){}function be(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Qt(this),this.O=_e,t=Y?125:void 0,this.P=new qt(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}x(me,st),x(ge,st),x(ye,le),de=new ye;var _e=45e3,we={},xe={};function Ee(t,e,n){t.F=1,t.f=Qe(He(e)),t.l=n,t.H=!0,Te(t,null)}function Se(t,e,n,r){t.F=1,t.f=Qe(He(e)),t.l=null,t.H=n,Te(t,r)}function Te(t,e){t.v=w(),Ce(t),t.D=He(t.f),$e(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Kt(b(t.Ja,t,t.a),t.J)),Zt(t.I,t.a,"readystatechange",t.cb),e=t.h?U(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),ie(1)}function Me(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=Ae(t,n);if(i==xe){4==e&&(t.c=4,ae(14),r=!1);break}if(i==we){t.c=4,ae(15),r=!1;break}Pe(t,i)}4==e&&0==n.length&&(t.c=1,ae(16),r=!1),t.b=t.b&&r,r||(Oe(t),Re(t))}function Ae(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?xe:(n=Number(e.substring(n,r)),isNaN(n)?we:(r+=1,r+n>e.length?xe:(e=e.substr(r,n),t.A=r+n,e)))}function Ce(t){t.R=w()+t.O,Ie(t,t.O)}function Ie(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ue(b(t.ab,t),e)}function Ne(t){t.i&&(a.clearTimeout(t.i),t.i=null)}function Re(t){t.g.Ca()||t.m||t.g.na(t)}function Oe(t){Ne(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Yt(t.P),te(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Pe(t,e){try{t.g.Fa(t,e),ie(4)}catch(n){}}function Le(t){if(t.C&&"function"==typeof t.C)return t.C();if(s(t))return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function De(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||s(t))M(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(p(t)||s(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=Le(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ke(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ke)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Fe(t){t.b={},t.a.length=0,t.c=0}function Ue(t,e){ze(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&je(t))}function je(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ze(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],ze(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ze(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r=be.prototype,r.setTimeout=function(t){this.O=t},r.cb=function(t){t=t.target;var e=this.B;e&&3==Qn(t)?e.Ta():this.Ja(t)},r.Ja=function(t){try{if(t==this.a)t:{var e=Qn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!Y&&!this.a.aa())){this.m||4!=e||7==n||ie(8==n||0>=r?3:2),Ne(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Jn(this.a,"X-HTTP-Initial-Response");if(a&&!N(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,ae(12),Oe(this),Re(this);break t}this.s=!0,Pe(this,s)}this.H?(Me(this,e,o),Y&&this.b&&3==e&&(Zt(this.I,this.P,"tick",this.bb),this.P.start())):Pe(this,o),4==e&&Oe(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,Ce(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,ae(12)):(this.c=0,ae(13)),Oe(this),Re(this)}}}catch(u){}},r.bb=function(){if(this.a){var t=Qn(this.a),e=this.a.aa();this.A<e.length&&(Ne(this),Me(this,t,e),this.b&&4!=t&&Ce(this))}},r.cancel=function(){this.m=!0,Oe(this)},r.ab=function(){this.i=null;var t=w();0<=t-this.R?(2!=this.F&&(ie(3),ae(17)),Oe(this),this.c=2,Re(this)):Ie(this,this.R-t)},r=ke.prototype,r.C=function(){je(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return je(this),this.a.concat()},r.get=function(t,e){return ze(this.b,t)?this.b[t]:e},r.set=function(t,e){ze(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Be=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ve(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ge(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Ge?(this.h=void 0!==e?e:t.h,We(this,t.f),this.j=t.j,qe(this,t.b),Ye(this,t.i),this.a=t.a,Xe(this,dn(t.c)),this.g=t.g):t&&(n=String(t).match(Be))?(this.h=!!e,We(this,n[1]||"",!0),this.j=tn(n[2]||""),qe(this,n[3]||"",!0),Ye(this,n[4]),this.a=tn(n[5]||"",!0),Xe(this,n[6]||"",!0),this.g=tn(n[7]||"")):(this.h=!!e,this.c=new cn(null,this.h))}function He(t){return new Ge(t)}function We(t,e,n){t.f=n?tn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function qe(t,e,n){t.b=n?tn(e,!0):e}function Ye(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Xe(t,e,n){e instanceof cn?(t.c=e,mn(t.c,t.h)):(n||(e=en(e,sn)),t.c=new cn(e,t.h))}function Ke(t,e,n){t.c.set(e,n)}function $e(t,e,n){f(n)||(n=[String(n)]),pn(t.c,e,n)}function Qe(t){return Ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),t}function Je(t){return t instanceof Ge?He(t):new Ge(t,void 0)}function Ze(t,e,n,r){var i=new Ge(null,void 0);return t&&We(i,t),e&&qe(i,e),n&&Ye(i,n),r&&(i.a=r),i}function tn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function en(t,e,n){return s(t)?(t=encodeURI(t).replace(e,nn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nn(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Ge.prototype.toString=function(){var t=[],e=this.f;e&&t.push(en(e,rn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(en(e,rn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.i,null!=n&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(en(n,"/"==n.charAt(0)?an:on,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",en(n,un)),t.join("")},Ge.prototype.resolve=function(t){var e=He(this),n=!!t.f;n?We(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?qe(e,t.b):n=null!=t.i;var r=t.a;if(n)Ye(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(P(i,"./")||P(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Xe(e,dn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var rn=/[#\/\?@]/g,on=/[#\?:]/g,an=/[#\?]/g,sn=/[#\?@]/g,un=/#/g;function cn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function hn(t){t.a||(t.a=new ke,t.b=0,t.c&&Ve(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ln(t,e){hn(t),e=vn(t,e),ze(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ue(t.a,e))}function fn(t,e){return hn(t),e=vn(t,e),ze(t.a.b,e)}function pn(t,e,n){ln(t,e),0<n.length&&(t.c=null,t.a.set(vn(t,e),I(n)),t.b+=n.length)}function dn(t){var e=new cn;return e.c=t.c,t.a&&(e.a=new ke(t.a),e.b=t.b),e}function vn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function mn(t,e){e&&!t.f&&(hn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ln(this,e),pn(this,n,t))}),t)),t.f=e}function gn(){}function yn(){}function bn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function _n(t){var e=t.a.F.a;if(null!=e)ae(4),e?(ae(10),fr(t.a,t,!1)):(ae(11),fr(t.a,t,!0));else{t.b=new be(t,void 0,void 0),t.b.h=t.h,e=t.a,e=gr(e,e.Y()?t.f:null,t.i),ae(4),$e(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Ke(e,n,r),Se(t.b,e,!1,t.f)}}function wn(){this.a=this.b=null}function xn(){this.a=new ke}function En(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[v]||(t[v]=++m)):e.charAt(0)+t}function Sn(t,e){this.b=t,this.a=e}function Tn(t){this.g=t||Mn,a.PerformanceNavigationTiming?(t=a.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new xn),this.b=null,this.c=[]}r=cn.prototype,r.add=function(t,e){hn(this),this.c=null,t=vn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){hn(this),this.a.forEach((function(n,r){M(n,(function(n){t.call(e,n,r,this)}),this)}),this)},r.K=function(){hn(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){hn(this);var e=[];if(s(t))fn(this,t)&&(e=C(e,this.a.get(vn(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=C(e,t[n])}return e},r.set=function(t,e){return hn(this),this.c=null,t=vn(this,t),fn(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t?(t=this.C(t),0<t.length?String(t[0]):e):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},x(yn,gn),r=bn.prototype,r.M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Jn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Jn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return e=this.a,e.m=this.c,void vr(e,2)}this.f=r[0]}else e=this.a,e.m=this.c,vr(e,2)}else 1==this.M&&(this.g?ae(6):"11111"==e?(ae(5),this.g=!0,(!W||10<=Number(tt))&&(this.c=200,this.b.cancel(),ae(11),fr(this.a,this,!0))):(ae(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,_n(this)):1==this.M&&(this.g?(ae(11),fr(this.a,this,!0)):(ae(10),fr(this.a,this,!1)));else{0==this.M?ae(8):1==this.M&&ae(9);var t=this.a;t.m=this.c,vr(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},xn.prototype.add=function(t){this.a.set(En(t),t)},xn.prototype.C=function(){return this.a.C()};var Mn=10;function An(t,e){!t.a&&(P(e,"spdy")||P(e,"quic")||P(e,"h2"))&&(t.f=t.g,t.a=new xn,t.b&&(Rn(t,t.b),t.b=null))}function Cn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function In(t){return t.b?1:t.a?t.a.a.c:0}function Nn(t,e){return t.b?t=t.b==e:t.a?(e=En(e),t=ze(t.a.a.b,e)):t=!1,t}function Rn(t,e){t.a?t.a.add(e):t.b=e}function On(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=En(e),n=ze(t.a.a.b,n)),n&&Ue(t.a.a,En(e)))}function Pn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return M(t.a.C(),(function(t){e=e.concat(t.j)})),e}return I(t.c)}function Ln(){}function Dn(){this.a=new Ln}function kn(t,e,n){var r=n||"";try{De(t,(function(t,n){var i=t;d(t)&&(i=Pt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Fn(t,e){var n=new ee;if(a.Image){var r=new Image;r.onload=_(Un,n,r,"TestLoadImage: loaded",!0,e),r.onerror=_(Un,n,r,"TestLoadImage: error",!1,e),r.onabort=_(Un,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=_(Un,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function Un(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Tn.prototype.cancel=function(){this.c=Pn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(M(this.a.C(),(function(t){t.cancel()})),Fe(this.a.a))},Ln.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},Ln.prototype.parse=function(t){return a.JSON.parse(t,void 0)};var jn=a.JSON.parse;function zn(t){Rt.call(this),this.headers=new ke,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Bn,this.D=this.F=!1}x(zn,Rt);var Bn="",Vn=/^https?$/i,Gn=["POST","PUT"];function Hn(t){return W&&nt(9)&&u(t.timeout)&&void 0!==t.ontimeout}function Wn(t){return"content-type"==t.toLowerCase()}function qn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Yn(t),Kn(t)}function Yn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Xn(t){if(t.b&&"undefined"!=typeof o&&(!t.s[1]||4!=Qn(t)||2!=t.T()))if(t.l&&4==Qn(t))Xt(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==Qn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.A).match(Be)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Vn.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<Qn(t)?t.a.statusText:""}catch(h){c=""}t.f=c+" ["+t.T()+"]",Yn(t)}}finally{Kn(t)}}}function Kn(t,e){if(t.a){$n(t);var n=t.a,r=t.s[0]?h:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function $n(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(a.clearTimeout(t.m),t.m=null)}function Qn(t){return t.a?t.a.readyState:0}function Jn(t,e){return t.a?t.a.getResponseHeader(e):null}function Zn(t){var e="";return F(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function tr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=Zn(n),s(t)){if(e=encodeURIComponent(String(e)),n=null!=n?"="+encodeURIComponent(String(n)):"",e+=n){if(n=t.indexOf("#"),0>n&&(n=t.length),r=t.indexOf("?"),0>r||r>n){r=n;var i=""}else i=t.substring(r+1,n);t=[t.substr(0,r),i,t.substr(n)],n=t[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Ke(t,e,n),t}function er(t){this.f=[],this.F=new wn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!c("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=c("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=c("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=c("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new Tn(t&&t.concurrentRequestLimit),this.ja=new Dn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function nr(t){if(rr(t),3==t.u){var e=t.P++,n=He(t.B);Ke(n,"SID",t.H),Ke(n,"RID",e),Ke(n,"TYPE","terminate"),ur(t,n),e=new be(t,e,void 0),e.F=2,e.f=Qe(He(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.f.toString(),"")),!n&&a.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=w(),Ce(e)}mr(t)}function rr(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(a.clearTimeout(t.l),t.l=null),pr(t),t.b.cancel(),t.h&&(u(t.h)&&a.clearTimeout(t.h),t.h=null)}function ir(t,e){t.f.push(new Sn(t.Qa++,e)),3==t.u&&or(t)}function or(t){Cn(t.b)||t.h||(t.h=!0,Bt(t.Ha,t),t.A=0)}function ar(t,e){return!(In(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.f=e.j.concat(t.f),!0):!(1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa))&&(t.h=ue(b(t.Ha,t,e),dr(t,t.A)),t.A++,!0))}function sr(t,e){var n;n=e?e.W:t.P++;var r=He(t.B);Ke(r,"SID",t.H),Ke(r,"RID",n),Ke(r,"AID",t.O),ur(t,r),t.g&&t.i&&tr(r,t.g,t.i),n=new be(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=cr(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),Rn(t.b,n),Ee(n,r,e)}function ur(t,e){t.c&&De({},(function(t,n){Ke(e,n,t)}))}function cr(t,e,n){n=Math.min(t.f.length,n);var r=t.c?b(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(c-=o,0>c)o=Math.max(0,i[u].b-100),s=!1;else try{kn(h,a,"req"+c+"_")}catch(l){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function hr(t){t.a||t.l||(t.S=1,Bt(t.Ga,t),t.v=0)}function lr(t){return!(t.a||t.l||3<=t.v)&&(t.S++,t.l=ue(b(t.Ga,t),dr(t,t.v)),t.v++,!0)}function fr(t,e,n){var r=e.l;r&&An(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=gr(t,null,t.ha),or(t)}function pr(t){null!=t.s&&(a.clearTimeout(t.s),t.s=null)}function dr(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function vr(t,e){if(2==e){var n=null;t.c&&(n=null);var r=b(t.eb,t);n||(n=new Ge("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||We(n,"https"),Qe(n)),Fn(n.toString(),r)}else ae(2);t.u=0,t.c&&t.c.ta(e),mr(t),rr(t)}function mr(t){t.u=0,t.m=-1,t.c&&(0==Pn(t.b).length&&0==t.f.length||(t.b.c.length=0,I(t.f),t.f.length=0),t.c.sa())}function gr(t,e,n){var r=Je(n);if(""!=r.b)e&&qe(r,e+"."+r.b),Ye(r,r.i);else{var i,o=a.location;i=e?e+"."+o.hostname:o.hostname,r=Ze(o.protocol,i,+o.port,n)}return t.V&&F(t.V,(function(t,e){Ke(r,e,t)})),e=t.j,n=t.I,e&&n&&Ke(r,e,n),Ke(r,"VER",t.wa),ur(t,r),r}function yr(){}function br(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))e=i;else(r=""==e)||(r=e.length-1,r=0<=r&&e.indexOf("/",r)==r),e+=r?i:"/"+i}return e}function _r(){if(W&&!(10<=Number(tt)))throw Error("Environmental error: no available transport.")}function wr(t,e){Rt.call(this),this.a=new er(e),this.g=t,this.m=e&&e.fb?e.fb:br(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!N(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.a.j=e,t=this.b,null!==t&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new Sr(this)}function xr(t){me.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Er(){ge.call(this),this.status=1}function Sr(t){this.a=t}r=zn.prototype,r.ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?fe(this.H):fe(de),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void qn(this,o)}t=n||"";var i=new ke(this.headers);r&&De(r,(function(t,e){i.set(e,t)})),r=A(i.K()),n=a.FormData&&t instanceof a.FormData,!(0<=T(Gn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{$n(this),0<this.o&&((this.D=Hn(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=Xt(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){qn(this,o)}},r.Ba=function(){"undefined"!=typeof o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Kn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Kn(this,!0)),zn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?Xn(this):this.Za())},r.Za=function(){Xn(this)},r.T=function(){try{return 2<Qn(this)?this.a.status:-1}catch(t){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},r.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),jn(e)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},r=er.prototype,r.wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random()),t=this.P++;var e,n=new be(this,t,void 0),r=this.i;if(this.J&&(r?(r=U(r),z(r,this.J)):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(o="__data__"in o.a&&(o=o.a.__data__,s(o))?o.length:void 0,void 0===o)break;if(e+=o,4096<e){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=cr(this,n,e),i=He(this.B),Ke(i,"RID",t),Ke(i,"CVER",22),this.o&&this.j&&Ke(i,"X-HTTP-Session-Id",this.j),ur(this,i),this.g&&r&&tr(i,this.g,r),Rn(this.b,n),this.W?(Ke(i,"$req",e),Ke(i,"SID","null"),n.S=!0,Ee(n,i,null)):Ee(n,i,e),this.u=2}}else 3==this.u&&(t?sr(this,t):0==this.f.length||Cn(this.b)||sr(this))},r.Ga=function(){this.l=null,this.a=new be(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=He(this.pa);Ke(t,"RID","rpc"),Ke(t,"SID",this.H),Ke(t,"CI",this.ia?"0":"1"),Ke(t,"AID",this.O),ur(this,t),Ke(t,"TYPE","xmlhttp"),this.g&&this.i&&tr(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),Se(this.a,t,!0,this.ga)},r.Fa=function(t,e){if(0!=this.u&&(this.a==t||Nn(this.b,t)))if(this.m=t.o,!t.s&&Nn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(f(n)&&3==n.length){if(e=n,0==e[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;pr(this),this.a.cancel(),this.a=null}lr(this),ae(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ue(b(this.Ya,this),6e3));if(1>=In(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else vr(this,11)}else if((t.s||this.a==t)&&pr(this),!N(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),r=r[5],null!=r&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Jn(r,"X-Client-Wire-Protocol"))&&An(this.b,i),this.j&&(r=Jn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ke(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=gr(this,this.Y()?this.ga:null,this.ha),r.s?(On(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ne(r),Ce(r)),this.a=r):hr(this),0<this.f.length&&or(this)}else"stop"!=r[0]&&"close"!=r[0]||vr(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?vr(this,7):nr(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,lr(this),ae(19))},r.na=function(t){var e=null;if(this.a==t){pr(this),this.a=null;var n=2}else{if(!Nn(this.b,t))return;e=t.j,On(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=w()-t.v,ne.dispatchEvent(new se(ne,t.l?t.l.length:0,e,this.A)),or(this)):hr(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&ar(this,t)||2==n&&lr(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:vr(this,5);break;case 4:vr(this,10);break;case 3:vr(this,6);break;default:vr(this,2)}}},r.eb=function(t){ae(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return t=new zn(this.Ka),t.F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},r=yr.prototype,r.va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},_r.prototype.a=function(t,e){return new wr(t,e)},x(wr,Rt),r=wr.prototype,r.addEventListener=function(t,e,n,r){wr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){wr.N.removeEventListener.call(this,t,e,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;ae(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new bn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=tr(e,t.g,t.i)),t=t.w,t.i=n,e=gr(t.a,null,t.i),ae(3),n=t.a.F.b,null!=n?(t.f=n[0],t.M=1,_n(t)):($e(e,"MODE","init"),!t.a.o&&t.a.j&&$e(e,"X-HTTP-Session-Id",t.a.j),t.b=new be(t,void 0,void 0),t.b.h=t.h,Se(t.b,e,!1,null),t.M=0)},r.close=function(){nr(this.a)},r.Wa=function(t){if(s(t)){var e={};e.__data__=t,ir(this.a,e)}else this.h?(e={},e.__data__=Pt(t),ir(this.a,e)):ir(this.a,t)},r.G=function(){this.a.c=null,delete this.f,nr(this.a),delete this.a,wr.N.G.call(this)},x(xr,me),x(Er,ge),x(Sr,yr),Sr.prototype.va=function(){this.a.dispatchEvent("a")},Sr.prototype.ua=function(t){this.a.dispatchEvent(new xr(t))},Sr.prototype.ta=function(t){this.a.dispatchEvent(new Er(t))},Sr.prototype.sa=function(){this.a.dispatchEvent("b")};var Tr=_((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),_r);_r.prototype.createWebChannel=_r.prototype.a,wr.prototype.send=wr.prototype.Wa,wr.prototype.open=wr.prototype.Va,wr.prototype.close=wr.prototype.close,ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,he.COMPLETE="complete",pe.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",Rt.prototype.listen=Rt.prototype.za,zn.prototype.listenOnce=zn.prototype.Aa,zn.prototype.getLastError=zn.prototype.Xa,zn.prototype.getLastErrorCode=zn.prototype.ya,zn.prototype.getStatus=zn.prototype.T,zn.prototype.getResponseJson=zn.prototype.Ua,zn.prototype.getResponseText=zn.prototype.aa,zn.prototype.send=zn.prototype.ca;var Mr={createWebChannelTransport:Tr,ErrorCode:ce,EventType:he,WebChannel:pe,XhrIo:zn},Ar=Mr.createWebChannelTransport,Cr=Mr.ErrorCode,Ir=Mr.EventType,Nr=Mr.WebChannel,Rr=Mr.XhrIo;e["default"]=Mr}.call(this,n("c8ba"))},c8af:function(t,e,n){"use strict";var r=n("c532");t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},c8d2:function(t,e,n){var r=n("d039"),i=n("5899"),o="​᠎";t.exports=function(t){return r((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},ca84:function(t,e,n){var r=n("5135"),i=n("fc6a"),o=n("4d64").indexOf,a=n("d012");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);while(e.length>u)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},ca91:function(t,e,n){"use strict";var r=n("ebb5"),i=n("d58f").left,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("reduce",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},ca9a:function(t,e,n){"use strict";var r=n("bdb4"),i=n.n(r);i.a},cbf1:function(t,e,n){},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},cca6:function(t,e,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cd26:function(t,e,n){"use strict";var r=n("ebb5"),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){var t,e=this,n=i(e).length,r=a(n/2),o=0;while(o<r)t=e[o],e[o++]=e[--n],e[n]=t;return e}))},cd51:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n("9ab4"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var a=t[n++],s=t[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{o=t[n++],a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length,s=a?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var h=i<t.length,l=h?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==l)throw Error();var f=o<<2|s>>4;if(r.push(f),64!==c){var p=s<<4&240|c>>2;if(r.push(p),64!==l){var d=c<<6&192|l;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},h=function(t){var e=s(t);return c.encodeByteArray(e,!0)},l=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function f(t){return p(void 0,t)}function p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=p(t[r],e[r]));return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function m(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())}function g(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function y(){return"object"===typeof self&&self.self===self}function b(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function _(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function w(){return v().indexOf("Electron/")>=0}function x(){var t=v();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E(){return v().indexOf("MSAppHost/")>=0}function S(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T="FirebaseError",M=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=T,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,A.prototype.create),i}return r.__extends(e,t),e}(Error),A=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?C(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new M(i,s),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},t}();function C(t,e){return t.replace(I,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var I=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t){return JSON.parse(t)}function R(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=N(l(o[0])||""),n=N(l(o[1])||""),i=o[2],r=n["d"]||{},delete n["d"]}catch(a){}return{header:e,claims:n,data:r,signature:i}},P=function(t){var e=O(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof e&&(e.hasOwnProperty("nbf")?r=e["nbf"]:e.hasOwnProperty("iat")&&(r=e["iat"]),i=e.hasOwnProperty("exp")?e["exp"]:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},L=function(t){var e=O(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e["iat"]:null},D=function(t){var e=O(t),n=e.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},k=function(t){var e=O(t).claims;return"object"===typeof e&&!0===e["admin"]};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function U(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function j(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function z(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],a=o[0],s=o[1];n(a,s)}return e.length?"&"+e.join("&"):""}function V(t){var e={},n=t.replace(/^\?/,"").split("&");return n.forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function H(t,e){var n=new W(t,e);return n.subscribe.bind(n)}var W=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=Y(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=X),void 0===r.error&&(r.error=X),void 0===r.complete&&(r.complete=X);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function q(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}}function Y(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}function X(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function $(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument ",i}function Q(t,e,n,r){if((!r||n)&&"string"!==typeof n)throw new Error($(t,e,r)+"must be a valid firebase namespace.")}function J(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error($(t,e,r)+"must be a valid function.")}function Z(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error($(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate.");var s=t.charCodeAt(r)-56320;i=65536+(a<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},et=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};e.CONSTANTS=i,e.Deferred=d,e.ErrorFactory=A,e.FirebaseError=M,e.Sha1=G,e.assert=o,e.assertionError=a,e.async=q,e.base64=c,e.base64Decode=l,e.base64Encode=h,e.contains=F,e.createSubscribe=H,e.decode=O,e.deepCopy=f,e.deepExtend=p,e.errorPrefix=$,e.getUA=v,e.isAdmin=k,e.isBrowser=y,e.isBrowserExtension=b,e.isElectron=w,e.isEmpty=j,e.isIE=x,e.isMobileCordova=m,e.isNode=g,e.isNodeSdk=S,e.isReactNative=_,e.isUWP=E,e.isValidFormat=D,e.isValidTimestamp=P,e.issuedAtTime=L,e.jsonEval=N,e.map=z,e.querystring=B,e.querystringDecode=V,e.safeGet=U,e.stringLength=et,e.stringToByteArray=tt,e.stringify=R,e.validateArgCount=K,e.validateCallback=J,e.validateContextObject=Z,e.validateNamespace=Q}).call(this,n("c8ba"))},cdf9:function(t,e,n){var r=n("825a"),i=n("861d"),o=n("f069");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},ce4e:function(t,e,n){var r=n("da84"),i=n("9112");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},cee4:function(t,e,n){"use strict";var r=n("c532"),i=n("1d2b"),o=n("0a06"),a=n("4a7b"),s=n("2444");function u(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var c=u(s);c.Axios=o,c.create=function(t){return u(a(c.defaults,t))},c.Cancel=n("7a77"),c.CancelToken=n("8df4"),c.isCancel=n("2e67"),c.all=function(t){return Promise.all(t)},c.spread=n("0df6"),t.exports=c,t.exports.default=c},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("428f"),i=n("da84"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},d139:function(t,e,n){"use strict";var r=n("ebb5"),i=n("b727").find,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("find",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d28b:function(t,e,n){var r=n("746f");r("iterator")},d2bb:function(t,e,n){var r=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},d3b7:function(t,e,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(t,e,n){var r=n("9bf2").f,i=n("5135"),o=n("b622"),a=o("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},d4ec:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},d58f:function(t,e,n){var r=n("1c0b"),i=n("7b0b"),o=n("44ad"),a=n("50c4"),s=function(t){return function(e,n,s,u){r(n);var c=i(e),h=o(c),l=a(c.length),f=t?l-1:0,p=t?-1:1;if(s<2)while(1){if(f in h){u=h[f],f+=p;break}if(f+=p,t?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:l>f;f+=p)f in h&&(u=n(u,h[f],f,c));return u}};t.exports={left:s(!1),right:s(!0)}},d5d6:function(t,e,n){"use strict";var r=n("ebb5"),i=n("b727").forEach,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("forEach",(function(t){i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),o=n("b622"),a=n("9263"),s=n("9112"),u=o("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){return"$0"==="a".replace(/./,"$0")}(),l=o("replace"),f=function(){return!!/./[l]&&""===/./[l]("a","$0")}(),p=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,l){var d=o(t),v=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),m=v&&!i((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!v||!m||"replace"===t&&(!c||!h||f)||"split"===t&&!p){var g=/./[d],y=n(d,""[t],(function(t,e,n,r,i){return e.exec===a?v&&!i?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=y[0],_=y[1];r(String.prototype,t,b),r(RegExp.prototype,d,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}l&&s(RegExp.prototype[d],"sham",!0)}},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),a=n("ae40"),s=o("map"),u=a("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},d925:function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n("c8ba"))},dcaa:function(t,e,n){"use strict";n.r(e),n.d(e,"factory",(function(){return j})),n.d(e,"getGlobalVars",(function(){return F})),n.d(e,"registerAnalytics",(function(){return G})),n.d(e,"resetGlobalVars",(function(){return k})),n.d(e,"settings",(function(){return U}));var r,i,o=n("c23d"),a=n.n(o),s=(n("7d28"),n("9ab4")),u=n("abfd"),c=n("cd51"),h=n("4be4"),l="measurementId",f="firebase_id",p="origin",d="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(t,e,n,i,o){var a=i||{};o&&o.global||(a=Object(s["__assign"])(Object(s["__assign"])({},i),{send_to:e})),t(r.EVENT,n,a||{})}function m(t,e,n,i){i&&i.global?t(r.SET,{screen_name:n}):t(r.CONFIG,e,{update:!0,screen_name:n})}function g(t,e,n,i){i&&i.global?t(r.SET,{user_id:n}):t(r.CONFIG,e,{update:!0,user_id:n})}function y(t,e,n,i){if(i&&i.global){for(var o={},a=0,s=Object.keys(n);a<s.length;a++){var u=s[a];o["user_properties."+u]=n[u]}t(r.SET,o)}else t(r.CONFIG,e,{update:!0,user_properties:n})}function b(t,e){window["ga-disable-"+t]=!e}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["EVENT"]="event",t["SET"]="set",t["CONFIG"]="config"})(r||(r={})),function(t){t["ADD_PAYMENT_INFO"]="add_payment_info",t["ADD_TO_CART"]="add_to_cart",t["ADD_TO_WISHLIST"]="add_to_wishlist",t["BEGIN_CHECKOUT"]="begin_checkout",t["CHECKOUT_PROGRESS"]="checkout_progress",t["EXCEPTION"]="exception",t["GENERATE_LEAD"]="generate_lead",t["LOGIN"]="login",t["PAGE_VIEW"]="page_view",t["PURCHASE"]="purchase",t["REFUND"]="refund",t["REMOVE_FROM_CART"]="remove_from_cart",t["SCREEN_VIEW"]="screen_view",t["SEARCH"]="search",t["SELECT_CONTENT"]="select_content",t["SET_CHECKOUT_OPTION"]="set_checkout_option",t["SHARE"]="share",t["SIGN_UP"]="sign_up",t["TIMING_COMPLETE"]="timing_complete",t["VIEW_ITEM"]="view_item",t["VIEW_ITEM_LIST"]="view_item_list",t["VIEW_PROMOTION"]="view_promotion",t["VIEW_SEARCH_RESULTS"]="view_search_results"}(i||(i={}));var _,w=new u["Logger"]("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(t,e,n){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(s["__generator"])(this,(function(a){switch(a.label){case 0:return[4,e.getId()];case 1:return i=a.sent(),n("js",new Date),n(r.CONFIG,t.options[l],(o={},o[f]=i,o[p]="firebase",o.update=!0,o)),[2]}}))}))}function E(t){var e=document.createElement("script");e.src=d+"?l="+t,e.async=!0,document.head.appendChild(e)}function S(t){var e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function T(t,e){return function(n,i,o){if(n===r.EVENT){var a=[];if(o&&o["send_to"]){var s=o["send_to"];Array.isArray(s)||(s=[s]);for(var u=0,c=s;u<c.length;u++){var h=c[u],l=e[h];if(!l){a=[];break}a.push(l)}}if(0===a.length)for(var f=0,p=Object.values(e);f<p.length;f++){var d=p[f];a.push(d)}Promise.all(a).then((function(){return t(r.EVENT,i,o||{})})).catch((function(t){return w.error(t)}))}else if(n===r.CONFIG){var v=e[i]||Promise.resolve();v.then((function(){t(r.CONFIG,i,o)})).catch((function(t){return w.error(t)}))}else t(r.SET,i)}}function M(t,e,n){var r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];window[e].push(arguments)};return window[n]&&"function"===typeof window[n]&&(r=window[n]),window[n]=T(r,t),{gtagCore:r,wrappedGtag:window[n]}}function A(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(d))return r}return null}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C,I,N=(_={},_["no-ga-id"]='"'+l+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',_["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",_["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",_["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",_),R=new c["ErrorFactory"]("analytics","Analytics",N),O={},P="dataLayer",L="gtag",D=!1;function k(t,e){void 0===t&&(t=!1),void 0===e&&(e={}),D=t,O=e,P="dataLayer",L="gtag"}function F(){return{initializedIdPromisesMap:O}}function U(t){if(D)throw R.create("already-initialized");t.dataLayerName&&(P=t.dataLayerName),t.gtagName&&(L=t.gtagName)}function j(t,e){var n=t.options[l];if(!n)throw R.create("no-ga-id");if(null!=O[n])throw R.create("already-exists",{id:n});if(!D){A()||E(P),S(P);var r=M(O,P,L),i=r.wrappedGtag,o=r.gtagCore;I=i,C=o,D=!0}O[n]=x(t,e,C);var a={app:t,logEvent:function(t,e,r){return v(I,n,t,e,r)},setCurrentScreen:function(t,e){return m(I,n,t,e)},setUserId:function(t,e){return g(I,n,t,e)},setUserProperties:function(t,e){return y(I,n,t,e)},setAnalyticsCollectionEnabled:function(t){return b(n,t)}};return a}var z="@firebase/analytics",B="0.2.18",V="analytics";function G(t){function e(t){try{var e=t.getProvider(V).getImmediate();return{logEvent:e.logEvent}}catch(n){throw R.create("interop-component-reg-failed",{reason:n})}}t.INTERNAL.registerComponent(new h["Component"](V,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return j(e,n)}),"PUBLIC").setServiceProps({settings:U,EventName:i})),t.INTERNAL.registerComponent(new h["Component"]("analytics-internal",e,"PRIVATE")),t.registerVersion(z,B)}G(a.a)},ddb0:function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("e260"),a=n("9112"),s=n("b622"),u=s("iterator"),c=s("toStringTag"),h=o.values;for(var l in i){var f=r[l],p=f&&f.prototype;if(p){if(p[u]!==h)try{a(p,u,h)}catch(v){p[u]=h}if(p[c]||a(p,c,l),i[l])for(var d in o)if(p[d]!==o[d])try{a(p,d,o[d])}catch(v){p[d]=o[d]}}}},df75:function(t,e,n){var r=n("ca84"),i=n("7839");t.exports=Object.keys||function(t){return r(t,i)}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),a="/"===o(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&a&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},e01a:function(t,e,n){"use strict";var r=n("23e7"),i=n("83ab"),o=n("da84"),a=n("5135"),s=n("861d"),u=n("9bf2").f,c=n("e893"),h=o.Symbol;if(i&&"function"==typeof h&&(!("description"in h.prototype)||void 0!==h().description)){var l={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new h(t):void 0===t?h():h(t);return""===t&&(l[e]=!0),e};c(f,h);var p=f.prototype=h.prototype;p.constructor=f;var d=p.toString,v="Symbol(test)"==String(h("test")),m=/^Symbol\((.*)\)[^)]+$/;u(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=d.call(t);if(a(l,t))return"";var n=v?e.slice(7,-1):e.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},e163:function(t,e,n){var r=n("5135"),i=n("7b0b"),o=n("f772"),a=n("e177"),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),a=n("69f3"),s=n("7dd0"),u="Array Iterator",c=a.set,h=a.getterFor(u);t.exports=s(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},e2cc:function(t,e,n){var r=n("6eeb");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},e2ed:function(t,e,n){"use strict";var r=n("facb"),i=n.n(r);i.a},e2f6:function(t,e,n){"use strict";var r=n("549e"),i=n.n(r);i.a},e538:function(t,e,n){var r=n("b622");e.f=r},e58c:function(t,e,n){"use strict";var r=n("fc6a"),i=n("a691"),o=n("50c4"),a=n("a640"),s=n("ae40"),u=Math.min,c=[].lastIndexOf,h=!!c&&1/[1].lastIndexOf(1,-0)<0,l=a("lastIndexOf"),f=s("indexOf",{ACCESSORS:!0,1:0}),p=h||!l||!f;t.exports=p?function(t){if(h)return c.apply(this,arguments)||0;var e=r(this),n=o(e.length),a=n-1;for(arguments.length>1&&(a=u(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},e63a:function(t,e,n){},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e683:function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},e6cf:function(t,e,n){"use strict";var r,i,o,a,s=n("23e7"),u=n("c430"),c=n("da84"),h=n("d066"),l=n("fea9"),f=n("6eeb"),p=n("e2cc"),d=n("d44e"),v=n("2626"),m=n("861d"),g=n("1c0b"),y=n("19aa"),b=n("c6b6"),_=n("8925"),w=n("2266"),x=n("1c7e"),E=n("4840"),S=n("2cf4").set,T=n("b575"),M=n("cdf9"),A=n("44de"),C=n("f069"),I=n("e667"),N=n("69f3"),R=n("94ca"),O=n("b622"),P=n("2d00"),L=O("species"),D="Promise",k=N.get,F=N.set,U=N.getterFor(D),j=l,z=c.TypeError,B=c.document,V=c.process,G=h("fetch"),H=C.f,W=H,q="process"==b(V),Y=!!(B&&B.createEvent&&c.dispatchEvent),X="unhandledrejection",K="rejectionhandled",$=0,Q=1,J=2,Z=1,tt=2,et=R(D,(function(){var t=_(j)!==String(j);if(!t){if(66===P)return!0;if(!q&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!j.prototype["finally"])return!0;if(P>=51&&/native code/.test(j))return!1;var e=j.resolve(1),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[L]=n,!(e.then((function(){}))instanceof n)})),nt=et||!x((function(t){j.all(t)["catch"]((function(){}))})),rt=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},it=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;T((function(){var i=e.value,o=e.state==Q,a=0;while(r.length>a){var s,u,c,h=r[a++],l=o?h.ok:h.fail,f=h.resolve,p=h.reject,d=h.domain;try{l?(o||(e.rejection===tt&&ut(t,e),e.rejection=Z),!0===l?s=i:(d&&d.enter(),s=l(i),d&&(d.exit(),c=!0)),s===h.promise?p(z("Promise-chain cycle")):(u=rt(s))?u.call(s,f,p):f(s)):p(i)}catch(v){d&&!c&&d.exit(),p(v)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&at(t,e)}))}},ot=function(t,e,n){var r,i;Y?(r=B.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},(i=c["on"+t])?i(r):t===X&&A("Unhandled promise rejection",n)},at=function(t,e){S.call(c,(function(){var n,r=e.value,i=st(e);if(i&&(n=I((function(){q?V.emit("unhandledRejection",r,t):ot(X,t,r)})),e.rejection=q||st(e)?tt:Z,n.error))throw n.value}))},st=function(t){return t.rejection!==Z&&!t.parent},ut=function(t,e){S.call(c,(function(){q?V.emit("rejectionHandled",t):ot(K,t,e.value)}))},ct=function(t,e,n,r){return function(i){t(e,n,i,r)}},ht=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=J,it(t,e,!0))},lt=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw z("Promise can't be resolved itself");var i=rt(n);i?T((function(){var r={done:!1};try{i.call(n,ct(lt,t,r,e),ct(ht,t,r,e))}catch(o){ht(t,r,o,e)}})):(e.value=n,e.state=Q,it(t,e,!1))}catch(o){ht(t,{done:!1},o,e)}}};et&&(j=function(t){y(this,j,D),g(t),r.call(this);var e=k(this);try{t(ct(lt,this,e),ct(ht,this,e))}catch(n){ht(this,e,n)}},r=function(t){F(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:$,value:void 0})},r.prototype=p(j.prototype,{then:function(t,e){var n=U(this),r=H(E(this,j));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=q?V.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=$&&it(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=k(t);this.promise=t,this.resolve=ct(lt,t,e),this.reject=ct(ht,t,e)},C.f=H=function(t){return t===j||t===o?new i(t):W(t)},u||"function"!=typeof l||(a=l.prototype.then,f(l.prototype,"then",(function(t,e){var n=this;return new j((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return M(j,G.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:et},{Promise:j}),d(j,D,!1,!0),v(D),o=h(D),s({target:D,stat:!0,forced:et},{reject:function(t){var e=H(this);return e.reject.call(void 0,t),e.promise}}),s({target:D,stat:!0,forced:u||et},{resolve:function(t){return M(u&&this===o?j:this,t)}}),s({target:D,stat:!0,forced:nt},{all:function(t){var e=this,n=H(e),r=n.resolve,i=n.reject,o=I((function(){var n=g(e.resolve),o=[],a=0,s=1;w(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=H(e),r=n.reject,i=I((function(){var i=g(e.resolve);w(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e7a7:function(t,e,n){},e893:function(t,e,n){var r=n("5135"),i=n("56ef"),o=n("06cf"),a=n("9bf2");t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var h=n[c];r(t,h)||s(t,h,u(e,h))}}},e89a:function(t,e,n){"use strict";(function(t){function r(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("c23d")),o=n("9ab4"),a=n("abfd"),s=n("cd51"),u=n("4be4"),c=n("c7b2"),h=i.SDK_VERSION,l=new a.Logger("@firebase/firestore");
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function f(){return l.logLevel===a.LogLevel.DEBUG?0:l.logLevel===a.LogLevel.SILENT?2:1}function p(t){switch(t){case 0:l.logLevel=a.LogLevel.DEBUG;break;case 1:l.logLevel=a.LogLevel.ERROR;break;case 2:l.logLevel=a.LogLevel.SILENT;break;default:l.error("Firestore ("+h+"): Invalid value passed to `setLogLevel`")}}function d(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l.logLevel<=a.LogLevel.DEBUG){var i=n.map(m);l.debug.apply(l,o.__spreadArrays(["Firestore ("+h+") ["+t+"]: "+e],i))}}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=a.LogLevel.ERROR){var r=e.map(m);l.error.apply(l,o.__spreadArrays(["Firestore ("+h+"): "+t],r))}}function m(t){if("string"==typeof t)return t;var e=un.t();try{return e.i(t)}catch(e){return t}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(t){var e="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function y(t,e){t||g(e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return y(20===e.length,"Invalid auto ID: "+e),e},t}();function _(t,e){return t<e?-1:t>e?1:0}function w(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function x(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},S=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.h=function(t){return _(this.projectId,t.projectId)||_(this.database,t.database)},t}(),T=function(){function t(t){this.uid=t}return t.prototype.l=function(){return null!=this.uid},t.prototype.v=function(){return this.l()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.m=new t("google-credentials-uid"),t.p=new t("first-party-uid"),t}(),M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(e,t),e}(Error),C=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},I=function(){function t(){this._=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.I=function(){},t.prototype.T=function(t){y(!this._,"Can only call setChangeListener() once."),this._=t,t(T.UNAUTHENTICATED)},t.prototype.D=function(){y(null!==this._,"removeChangeListener() when no listener registered"),this._=null},t}(),N=function(){function t(t){var e=this;this.S=null,this.currentUser=T.UNAUTHENTICATED,this.R=!1,this.C=0,this._=null,this.forceRefresh=!1,this.S=function(){e.C++,e.currentUser=e.A(),e.R=!0,e._&&e._(e.currentUser)},this.C=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.S):(this.S(null),t.get().then((function(t){e.auth=t,e.S&&e.auth.addAuthTokenListener(e.S)}),(function(){})))}return t.prototype.getToken=function(){var t=this;y(null!=this.S,"getToken cannot be called after listener removed.");var e=this.C,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.C!==e)throw new A(M.ABORTED,"getToken aborted due to token change.");return n?(y("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new C(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.I=function(){this.forceRefresh=!0},t.prototype.T=function(t){y(!this._,"Can only call setChangeListener() once."),this._=t,this.R&&t(this.currentUser)},t.prototype.D=function(){y(null!=this.S,"removeChangeListener() called twice"),y(null!==this._,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.S),this.S=null,this._=null},t.prototype.A=function(){var t=this.auth&&this.auth.getUid();return y(null===t||"string"==typeof t,"Received invalid UID: "+t),new T(t)},t}(),R=function(){function t(t,e){this.P=t,this.k=e,this.type="FirstParty",this.user=T.p}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.k},e=this.P.auth.N([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),O=function(){function t(t,e){this.P=t,this.k=e}return t.prototype.getToken=function(){return Promise.resolve(new R(this.P,this.k))},t.prototype.T=function(t){t(T.p)},t.prototype.D=function(){},t.prototype.I=function(){},t}();function P(t){if(!t)return new I;switch(t.type){case"gapi":var e=t.O;return y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new O(e,t.k||"0");case"provider":return t.O;default:throw new A(M.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function D(t,e){return void 0!==t?t:e}function k(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function F(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function U(t){for(var e in y(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(t,e){if(0!==e.length)throw new A(M.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+ot(e.length,"argument")+".")}function z(t,e,n){if(e.length!==n)throw new A(M.INVALID_ARGUMENT,"Function "+t+"() requires "+ot(n,"argument")+", but was called with "+ot(e.length,"argument")+".")}function B(t,e,n){if(e.length<n)throw new A(M.INVALID_ARGUMENT,"Function "+t+"() requires at least "+ot(n,"argument")+", but was called with "+ot(e.length,"argument")+".")}function V(t,e,n,r){if(e.length<n||e.length>r)throw new A(M.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+ot(e.length,"argument")+".")}function G(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new A(M.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+ot(r,"element")+".")}function H(t,e,n,r){Q(t,e,it(n)+" argument",r)}function W(t,e,n,r){void 0!==r&&H(t,e,n,r)}function q(t,e,n,r){Q(t,e,n+" option",r)}function Y(t,e,n,r){void 0!==r&&q(t,e,n,r)}function X(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new A(M.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Z(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new A(M.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+Z(r[o]))}(t,e,n,r,i)}function K(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(Z(u))}var c=Z(r);throw new A(M.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function $(t,e,n,r){if(!e.some((function(t){return t===r})))throw new A(M.INVALID_ARGUMENT,"Invalid value "+Z(r)+" provided to function "+t+"() for its "+it(n)+" argument. Acceptable values: "+e.join(", "))}function Q(t,e,n,r){if(!("object"===e?J(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Z(r);throw new A(M.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function J(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Z(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g("Unknown wrong type: "+typeof t)}function tt(t,e,n){if(void 0===n)throw new A(M.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+it(e)+" argument, but it was undefined.")}function et(t,e,n){F(e,(function(e,r){if(n.indexOf(e)<0)throw new A(M.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function nt(t,e,n,r){var i=Z(r);return new A(M.INVALID_ARGUMENT,"Function "+t+"() requires its "+it(n)+" argument to be a "+e+", but it was: "+i)}function rt(t,e,n){if(n<=0)throw new A(M.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+it(e)+" argument to be a positive number, but it was: "+n+".")}function it(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function ot(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at=function(){function t(t,e){if(z("GeoPoint",arguments,2),H("GeoPoint","number",1,t),H("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new A(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new A(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.F=t,this.V=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.F},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.V},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.F===t.F&&this.V===t.V},t.prototype.U=function(t){return _(this.F,t.F)||_(this.V,t.V)},t}(),st=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new A(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new A(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new A(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new A(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?_(this.nanoseconds,t.nanoseconds):_(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ut=function(){function t(t){this.timestamp=t}return t.j=function(e){var n=Math.floor(e/1e6);return new t(new st(n,e%1e6*1e3))},t.L=function(e){return new t(e)},t.q=function(){return t.MIN},t.prototype.h=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.B=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t.MIN=new t(new st(0,0)),t}(),ct=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&g("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&g("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.G(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.W(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.K=function(t){return t=void 0===t?1:t,y(this.length>=t,"Can't call popFirst() with less segments"),this.W(this.segments,this.offset+t,this.length-t)},t.prototype.H=function(){return y(!this.J(),"Can't call popLast() on empty path"),this.W(this.segments,this.offset,this.length-1)},t.prototype.Y=function(){return y(!this.J(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.X=function(){return this.get(this.length-1)},t.prototype.get=function(t){return y(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.J=function(){return 0===this.length},t.prototype.$=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.Z=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.tt=function(){return this.segments.slice(this.offset,this.limit())},t.G=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.W=function(t,n,r){return new e(t,n,r)},e.prototype.nt=function(){return this.tt().join("/")},e.prototype.toString=function(){return this.nt()},e.it=function(t){if(t.indexOf("//")>=0)throw new A(M.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.et=new e([]),e}(ct),lt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.W=function(t,n,r){return new e(t,n,r)},e.rt=function(t){return lt.test(t)},e.prototype.nt=function(){return this.tt().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.rt(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.nt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.st=function(){return new e(["__name__"])},e.ot=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new A(M.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new A(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new A(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new A(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.et=new e([]),e}(ct),pt=function(){function t(e){this.path=e,y(t.ht(e),"Invalid DocumentKey with an odd number of segments: "+e.tt().join("/"))}return t.prototype.ct=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ht.G(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.G=function(t,e){return ht.G(t.path,e.path)},t.ht=function(t){return t.length%2==0},t.at=function(e){return new t(new ht(e.slice()))},t.ft=function(e){return new t(ht.it(e))},t.EMPTY=new t(new ht([])),t}(),dt=function(){function t(t,e){this.G=t,this.root=e||mt.EMPTY}return t.prototype.lt=function(e,n){return new t(this.G,this.root.lt(e,n,this.G).copy(null,null,mt.dt,null,null))},t.prototype.remove=function(e){return new t(this.G,this.root.remove(e,this.G).copy(null,null,mt.dt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.J();){var n=this.G(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.J();){var r=this.G(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.J=function(){return this.root.J()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.vt=function(){return this.root.vt()},t.prototype.wt=function(){return this.root.wt()},t.prototype.pt=function(t){return this.root.pt(t)},t.prototype.forEach=function(t){this.pt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.pt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.bt=function(){return new vt(this.root,null,this.G,!1)},t.prototype.yt=function(t){return new vt(this.root,t,this.G,!1)},t.prototype._t=function(){return new vt(this.root,null,this.G,!0)},t.prototype.It=function(t){return new vt(this.root,t,this.G,!0)},t}(),vt=function(){function t(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.J();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.Dt=function(){y(this.Et.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.J();)this.Et.push(t),t=t.right;else for(t=t.right;!t.J();)this.Et.push(t),t=t.left;return e},t.prototype.St=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),mt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.J=function(){return!1},t.prototype.pt=function(t){return this.left.pt(t)||t(this.key,this.value)||this.right.pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.J()?this:this.left.min()},t.prototype.vt=function(){return this.min().key},t.prototype.wt=function(){return this.right.J()?this.key:this.right.wt()},t.prototype.lt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.lt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.lt(t,e,n))).Ct()},t.prototype.At=function(){if(this.left.J())return t.EMPTY;var e=this;return e.left.Pt()||e.left.left.Pt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.At(),null)).Ct()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.J()||i.left.Pt()||i.left.left.Pt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Pt()&&(i=i.Nt()),i.right.J()||i.right.Pt()||i.right.left.Pt()||(i=i.Ot()),0===n(e,i.key)){if(i.right.J())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.At())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ct()},t.prototype.Pt=function(){return this.color},t.prototype.Ct=function(){var t=this;return t.right.Pt()&&!t.left.Pt()&&(t=t.Ft()),t.left.Pt()&&t.left.left.Pt()&&(t=t.Nt()),t.left.Pt()&&t.right.Pt()&&(t=t.Vt()),t},t.prototype.kt=function(){var t=this.Vt();return t.right.left.Pt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Nt())).Ft()).Vt()),t},t.prototype.Ot=function(){var t=this.Vt();return t.left.left.Pt()&&(t=(t=t.Nt()).Vt()),t},t.prototype.Ft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Nt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Vt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.xt();return Math.pow(2,t)<=this.size+1},t.prototype.xt=function(){if(this.Pt()&&this.left.Pt())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.Pt())throw g("Right child of ("+this.key+","+this.value+") is red");var t=this.left.xt();if(t!==this.right.xt())throw g("Black depths differ");return t+(this.Pt()?0:1)},t.EMPTY=null,t.RED=!0,t.dt=!1,t}(),gt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw g("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw g("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw g("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw g("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw g("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.lt=function(t,e,n){return new mt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.J=function(){return!0},t.prototype.pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.vt=function(){return null},t.prototype.wt=function(){return null},t.prototype.Pt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.xt=function(){return 0},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mt.EMPTY=new gt;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yt=function(){function t(t){this.G=t,this.data=new dt(this.G)}return t.jt=function(e){var n=new t(e.G);return e.forEach((function(t){n=n.add(t)})),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.vt()},t.prototype.last=function(){return this.data.wt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.pt((function(e,n){return t(e),!1}))},t.prototype.Lt=function(t,e){for(var n=this.data.yt(t[0]);n.St();){var r=n.Dt();if(this.G(r.key,t[1])>=0)return;e(r.key)}},t.prototype.qt=function(t,e){var n;for(n=void 0!==e?this.data.yt(e):this.data.bt();n.St();)if(!t(n.Dt().key))return},t.prototype.Bt=function(t){var e=this.data.yt(t);return e.St()?e.Dt().key:null},t.prototype.bt=function(){return new bt(this.data.bt())},t.prototype.yt=function(t){return new bt(this.data.yt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).lt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.J=function(){return this.data.J()},t.prototype.Mt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.bt(),r=e.data.bt();n.St();){var i=n.Dt().key,o=r.Dt().key;if(0!==this.G(i,o))return!1}return!0},t.prototype.tt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.G);return n.data=e,n},t}(),bt=function(){function t(t){this.Qt=t}return t.prototype.Dt=function(){return this.Qt.Dt().key},t.prototype.St=function(){return this.Qt.St()},t}(),_t=function(){function t(){}return t.prototype.Gt=function(t,e){return new Wt(e,t)},t.prototype.Wt=function(t,e){return e},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),wt=function(){function t(t){this.elements=t}return t.prototype.Gt=function(t,e){return this.apply(t)},t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=St(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Qt(e)},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&w(e.elements,this.elements)},t}(),xt=function(){function t(t){this.elements=t}return t.prototype.Gt=function(t,e){return this.apply(t)},t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=St(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Qt(e)},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&w(e.elements,this.elements)},t}(),Et=function(){function t(t){this.Kt=t}return t.prototype.Gt=function(t,e){var n=this.zt(t);if(n instanceof Bt&&this.Kt instanceof Bt){var r=n.Ht+this.Kt.Ht;return new Bt(r)}return r=n.Ht+this.Kt.Ht,new Vt(r)},t.prototype.Wt=function(t,e){return y(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.zt=function(t){return t instanceof jt?t:new Bt(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.Kt.isEqual(e.Kt)},t}();function St(t){return t instanceof Qt?t.Ht.slice():[]}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt=function(){function t(t){this.fields=t}return t.Jt=function(e){return new t(e)},t.Yt=function(e){var n=new yt(ft.G);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.Xt=function(t){var e=!1;return this.fields.forEach((function(n){n.$(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),Mt=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),At=function(t,e){this.version=t,this.transformResults=e},Ct=function(){function t(t,e){this.updateTime=t,this.exists=e,y(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"$t",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.Zt=function(t){return void 0!==this.updateTime?t instanceof Zt&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Zt:(y(this.$t,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),It=function(){function t(){}return t.prototype.tn=function(t){null!=t&&y(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.nn=function(t){return t instanceof Zt?t.version:ut.MIN},t}(),Nt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.in=r,i.type=0,i}return o.__extends(e,t),e.prototype.Wt=function(t,e){this.tn(t),y(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new Zt(this.key,n,{hasCommittedMutations:!0},this.value)},e.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=It.nn(t);return new Zt(this.key,r,{en:!0},this.value)},e.prototype.rn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.in.isEqual(t.in)},e}(It),Rt=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.un=r,o.in=i,o.type=1,o}return o.__extends(e,t),e.prototype.Wt=function(t,e){if(this.tn(t),y(null==e.transformResults,"Transform results received by PatchMutation."),!this.in.Zt(t))return new ee(this.key,e.version);var n=this.sn(t);return new Zt(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=It.nn(t),i=this.sn(t);return new Zt(this.key,r,{en:!0},i)},e.prototype.rn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.un.isEqual(t.un)&&this.in.isEqual(t.in)},e.prototype.sn=function(t){var e;return e=t instanceof Zt?t.data():Kt.EMPTY,this.on(e)},e.prototype.on=function(t){var e=this,n=t.hn();return this.un.fields.forEach((function(t){if(!t.J()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.cn()},e}(It),Ot=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=2,r.in=Ct.exists(!0),r}return o.__extends(e,t),e.prototype.Wt=function(t,e){if(this.tn(t),y(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.in.Zt(t))return new ee(this.key,e.version);var n=this.an(t),r=this.fn(t,e.transformResults),i=e.version,o=this.ln(n.data(),r);return new Zt(this.key,i,{hasCommittedMutations:!0},o)},e.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=this.an(t),i=this.dn(n,t,e),o=this.ln(r.data(),i);return new Zt(this.key,r.version,{en:!0},o)},e.prototype.rn=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Zt?t.field(i.field):void 0,a=i.transform.zt(o||null);null!=a&&(e=null==e?Kt.vn().set(i.field,a):e.set(i.field,a))}return e?e.cn():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&w(this.fieldTransforms,t.fieldTransforms)&&this.in.isEqual(t.in)},e.prototype.an=function(t){return y(t instanceof Zt,"Unknown MaybeDocument type "+t),y(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},e.prototype.fn=function(t,e){var n=[];y(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof Zt&&(a=t.field(i.field)),n.push(o.Wt(a,e[r]))}return n},e.prototype.dn=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;e instanceof Zt&&(u=e.field(a.field)),null===u&&n instanceof Zt&&(u=n.field(a.field)),r.push(s.Gt(u,t))}return r},e.prototype.ln=function(t,e){y(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=t.hn(),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.cn()},e}(It),Pt=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.in=n,r.type=3,r}return o.__extends(e,t),e.prototype.Wt=function(t,e){return this.tn(t),y(null==e.transformResults,"Transform results received by DeleteMutation."),new te(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.Gt=function(t,e,n){return this.tn(t),this.in.Zt(t)?(t&&y(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new te(this.key,ut.q())):t},e.prototype.rn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},e}(It),Lt=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.in=n,r.type=4,r}return o.__extends(e,t),e.prototype.Wt=function(t,e){g("VerifyMutation should only be used in Transactions.")},e.prototype.Gt=function(t,e,n){g("VerifyMutation should only be used in Transactions.")},e.prototype.rn=function(t){g("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},e}(It),Dt=function(){function t(t,e){this.wn=t,this.timestampsInSnapshots=e}return t.mn=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(1,n);case"previous":return new t(2,n);case"none":case void 0:return new t(0,n);default:return g("fromSnapshotOptions() called with invalid options.")}},t}(),kt=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.pn=function(t){return y(this.gn!==t.gn,"Default compareTo should not be used for values of same type."),_(this.gn,t.gn)},t}(),Ft=function(t){function e(){var e=t.call(this)||this;return e.gn=0,e.Ht=null,e}return o.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.h=function(t){return t instanceof e?0:this.pn(t)},e.prototype.bn=function(){return 4},e.yn=new e,e}(kt),Ut=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=1,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht===t.Ht},e.prototype.h=function(t){return t instanceof e?_(this.Ht,t.Ht):this.pn(t)},e.prototype.bn=function(){return 4},e.of=function(t){return t?e._n:e.In},e._n=new e(!0),e.In=new e(!1),e}(kt),jt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=2,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.h=function(t){return t instanceof e?(n=this.Ht,r=t.Ht,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.pn(t);var n,r},e.prototype.bn=function(){return 8},e}(kt);function zt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&zt(this.Ht,t.Ht)},e}(jt),Vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&zt(this.Ht,t.Ht)},e.Tn=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(jt),Gt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=4,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht===t.Ht},e.prototype.h=function(t){return t instanceof e?_(this.Ht,t.Ht):this.pn(t)},e.prototype.bn=function(){return 2*this.Ht.length},e}(kt),Ht=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=3,n}return o.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.Ht:this.Ht.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):t instanceof Wt?-1:this.pn(t)},e.prototype.bn=function(){return 16},e}(kt),Wt=function(t){function e(e,n){var r=t.call(this)||this;return r.En=e,r.previousValue=n,r.gn=3,r}return o.__extends(e,t),e.prototype.value=function(t){return t&&1===t.wn?new Ht(this.En).value(t):t&&2===t.wn&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.En.isEqual(t.En)},e.prototype.h=function(t){return t instanceof e?this.En.U(t.En):t instanceof Ht?1:this.pn(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.En.toString()+">"},e.prototype.bn=function(){return 16+(this.previousValue?this.previousValue.bn():0)},e}(kt),qt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=5,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):this.pn(t)},e.prototype.bn=function(){return this.Ht.Dn()},e}(kt),Yt=function(t){function e(e,n){var r=t.call(this)||this;return r.s=e,r.key=n,r.gn=6,r}return o.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.s.isEqual(t.s)},e.prototype.h=function(t){if(t instanceof e){var n=this.s.h(t.s);return 0!==n?n:pt.G(this.key,t.key)}return this.pn(t)},e.prototype.bn=function(){return this.s.projectId.length+this.s.database.length+this.key.toString().length},e}(kt),Xt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=7,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):this.pn(t)},e.prototype.bn=function(){return 16},e}(kt),Kt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=9,n}return o.__extends(e,t),e.vn=function(){return new $t(e.EMPTY.Ht)},e.prototype.value=function(t){var e={};return this.Ht.pt((function(n,r){e[n]=r.value(t)})),e},e.prototype.forEach=function(t){this.Ht.pt(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.Ht.bt(),r=t.Ht.bt();n.St()&&r.St();){var i=n.Dt(),o=r.Dt();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.St()&&!r.St()}return!1},e.prototype.h=function(t){if(t instanceof e){for(var n=this.Ht.bt(),r=t.Ht.bt();n.St()&&r.St();){var i=n.Dt(),o=r.Dt(),a=_(i.key,o.key)||i.value.h(o.value);if(a)return a}return _(n.St(),r.St())}return this.pn(t)},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){y(!t.J(),"Can't get field of empty path");var n=this;return t.forEach((function(t){n=n instanceof e?n.Ht.get(t):null})),n},e.prototype.un=function(){var t=new yt(ft.G);return this.Ht.forEach((function(n,r){var i=new ft([n]);if(r instanceof e){var o=r.un().fields;o.J()?t=t.add(i):o.forEach((function(e){t=t.add(i.child(e))}))}else t=t.add(i)})),Tt.Jt(t)},e.prototype.bn=function(){var t=0;return this.Ht.pt((function(e,n){t+=e.length+n.bn()})),t},e.prototype.toString=function(){return this.Ht.toString()},e.prototype.hn=function(){return new $t(this.Ht)},e.EMPTY=new e(new dt(_)),e}(kt),$t=function(){function t(t){this.Ht=t}return t.prototype.set=function(t,e){y(!t.J(),"Cannot set field for empty path on ObjectValue");var n=t.Y();if(1===t.length)this.Ht=this.Ht.lt(n,e);else{var r=this.Ht.get(n),i=(r instanceof Kt?r:Kt.EMPTY).hn().set(t.K(),e).cn();this.Ht=this.Ht.lt(n,i)}return this},t.prototype.delete=function(t){y(!t.J(),"Cannot delete field for empty path on ObjectValue");var e=t.Y();if(1===t.length)this.Ht=this.Ht.remove(e);else{var n=this.Ht.get(e);if(n instanceof Kt){var r=n.hn().delete(t.K()).cn();this.Ht=this.Ht.lt(t.Y(),r)}}return this},t.prototype.cn=function(){return new Kt(this.Ht)},t}(),Qt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=8,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,n=this.Ht;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},e.prototype.forEach=function(t){this.Ht.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.Ht.length!==t.Ht.length)return!1;for(var n=0;n<this.Ht.length;n++)if(!this.Ht[n].isEqual(t.Ht[n]))return!1;return!0}return!1},e.prototype.h=function(t){if(t instanceof e){for(var n=Math.min(this.Ht.length,t.Ht.length),r=0;r<n;r++){var i=this.Ht[r].h(t.Ht[r]);if(i)return i}return _(this.Ht.length,t.Ht.length)}return this.pn(t)},e.prototype.bn=function(){return this.Ht.reduce((function(t,e){return t+e.bn()}),0)},e.prototype.toString=function(){return"["+this.Ht.map((function(t){return t.toString()})).join(",")+"]"},e}(kt),Jt=function(){function t(t,e){this.key=t,this.version=e}return t.Sn=function(t,e){return pt.G(t.key,e.key)},t}(),Zt=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n)||this;return s.Rn=i,s.proto=o,s.converter=a,y(void 0!==s.Rn||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.en=!!r.en,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return o.__extends(e,t),e.prototype.field=function(t){if(this.Rn)return this.Rn.field(t);this.Cn||(this.Cn=new Map);var e=t.nt(),n=this.Cn.get(e);if(void 0===n){var r=this.An(t);n=void 0===r?null:this.converter(r),this.Cn.set(e,n)}return n},e.prototype.data=function(){var t=this;if(!this.Rn){var e=Kt.vn();F(this.proto.fields||{},(function(n,r){e.set(new ft([n]),t.converter(r))})),this.Rn=e.cn(),this.Cn=void 0}return this.Rn},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.en===t.en&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.en+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.en||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.An=function(t){y(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.Y()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},e.Pn=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.h(i):g("Trying to compare documents on fields that don't exist")},e}(Jt),te=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Jt),ee=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Jt);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t){return null==t}function re(t){return-0===t&&1/t==-1/0}function ie(t){return"number"==typeof t&&Number.isInteger(t)&&!re(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.kn=null}return t.prototype.canonicalId=function(){if(null===this.kn){var t=this.path.nt();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";ne(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.kn=t}return this.kn},t.prototype.toString=function(){var t=this.path.nt();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),ne(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Nn=function(){return pt.ht(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),ae=function(){function t(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.On=n,this.filters=r,this.limit=i,this.Fn=o,this.startAt=a,this.endAt=s,this.Vn=null,this.Un=null,this.startAt&&this.xn(this.startAt),this.endAt&&this.xn(this.endAt)}return t.jn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.Vn){var t=this.Ln(),e=this.qn();if(null!==t&&null===e)t.ut()?this.Vn=[ye]:this.Vn=[new ge(t),ye];else{y(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.Vn=[];for(var n=!1,r=0,i=this.On;r<i.length;r++){var o=i[r];this.Vn.push(o),o.field.ut()&&(n=!0)}if(!n){var a=this.On.length>0?this.On[this.On.length-1].dir:ve.ASCENDING;this.Vn.push(a===ve.ASCENDING?ye:be)}}}return this.Vn},enumerable:!0,configurable:!0}),t.prototype.Bn=function(e){y(null==this.Ln()||!(e instanceof ce)||!e.Mn()||e.field.isEqual(this.Ln()),"Query must only have one inequality field."),y(!this.Nn(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.On.slice(),n,this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Qn=function(e){y(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.On.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Gn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Wn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.zn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,e,this.endAt)},t.prototype.Kn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,e)},t.prototype.Hn=function(e){return new t(e,null,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Jn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.On.length||1===this.On.length&&this.On[0].field.ut())},t.prototype.canonicalId=function(){return this.Yn().canonicalId()+"|lt:"+this.Fn},t.prototype.toString=function(){return"Query(target="+this.Yn().toString()+"; limitType="+this.Fn+")"},t.prototype.isEqual=function(t){return this.Yn().isEqual(t.Yn())&&this.Fn===t.Fn},t.prototype.Xn=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.ut()}return y(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.$n(t)&&this.Zn(t)&&this.ti(t)&&this.ni(t)},t.prototype.ii=function(){return!ne(this.limit)&&"F"===this.Fn},t.prototype.ei=function(){return!ne(this.limit)&&"L"===this.Fn},t.prototype.qn=function(){return this.On.length>0?this.On[0].field:null},t.prototype.Ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof ce&&n.Mn())return n.field}return null},t.prototype.ri=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof ce&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Nn=function(){return this.Yn().Nn()},t.prototype.ui=function(){return null!==this.collectionGroup},t.prototype.Yn=function(){if(!this.Un)if("F"===this.Fn)this.Un=new oe(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===ve.DESCENDING?ve.ASCENDING:ve.DESCENDING;t.push(new ge(r.field,i))}var o=this.endAt?new me(this.endAt.position,!this.endAt.before):null,a=this.startAt?new me(this.startAt.position,!this.startAt.before):null;this.Un=new oe(this.path,this.collectionGroup,t,this.filters,this.limit,o,a)}return this.Un},t.prototype.$n=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.ct(this.collectionGroup)&&this.path.$(e):pt.ht(this.path)?this.path.isEqual(e):this.path.Z(e)},t.prototype.Zn=function(t){for(var e=0,n=this.On;e<n.length;e++){var r=n[e];if(!r.field.ut()&&null===t.field(r.field))return!1}return!0},t.prototype.ti=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.ni=function(t){return!(this.startAt&&!this.startAt.si(this.orderBy,t))&&(!this.endAt||!this.endAt.si(this.orderBy,t))},t.prototype.xn=function(t){y(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),se=function(){},ue=function(){function t(t){this.name=t}return t.it=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return g("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),ce=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return o.__extends(e,t),e.create=function(t,n,r){if(t.ut())return n===ue.IN?(y(r instanceof Qt,"Comparing on key with IN, but filter value not an ArrayValue"),y(r.Ht.every((function(t){return t instanceof Yt})),"Comparing on key with IN, but an array value was not a RefValue"),new le(t,r)):(y(r instanceof Yt,"Comparing on key, but filter value not a RefValue"),y(n!==ue.ARRAY_CONTAINS&&n!==ue.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new he(t,n,r));if(r.isEqual(Ft.yn)){if(n!==ue.EQUAL)throw new A(M.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(Vt.Tn)){if(n!==ue.EQUAL)throw new A(M.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===ue.ARRAY_CONTAINS?new fe(t,r):n===ue.IN?(y(r instanceof Qt,"IN filter has invalid value: "+r.toString()),new pe(t,r)):n===ue.ARRAY_CONTAINS_ANY?(y(r instanceof Qt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new de(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.gn===e.gn&&this.oi(e.h(this.value))},e.prototype.oi=function(t){switch(this.op){case ue.LESS_THAN:return t<0;case ue.LESS_THAN_OR_EQUAL:return t<=0;case ue.EQUAL:return 0===t;case ue.GREATER_THAN:return t>0;case ue.GREATER_THAN_OR_EQUAL:return t>=0;default:return g("Unknown FieldFilter operator: "+this.op)}},e.prototype.Mn=function(){return[ue.LESS_THAN,ue.LESS_THAN_OR_EQUAL,ue.GREATER_THAN,ue.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.nt()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.nt()+" "+this.op+" "+this.value.value()},e}(se),he=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=pt.G(t.key,e.key);return this.oi(n)},e}(ce),le=function(t){function e(e,n){var r=t.call(this,e,ue.IN,n)||this;return r.value=n,r}return o.__extends(e,t),e.prototype.matches=function(t){return this.value.Ht.some((function(e){return t.key.isEqual(e.key)}))},e}(ce),fe=function(t){function e(e,n){return t.call(this,e,ue.ARRAY_CONTAINS,n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Qt&&e.contains(this.value)},e}(ce),pe=function(t){function e(e,n){var r=t.call(this,e,ue.IN,n)||this;return r.value=n,r}return o.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(ce),de=function(t){function e(e,n){var r=t.call(this,e,ue.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return o.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Qt&&n.Ht.some((function(t){return e.value.contains(t)}))},e}(ce),ve=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),me=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.si=function(t,e){y(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.ut())y(o instanceof Yt,"Bound has a non-key value where the key path is being used."),n=pt.G(o.key,e.key);else{var a=e.field(i.field);y(null!==a,"Field should exist since document matched the orderBy already."),n=o.h(a)}if(i.dir===ve.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0},t}(),ge=function(){function t(t,e){this.field=t,void 0===e&&(e=ve.ASCENDING),this.dir=e,this.hi=t.ut()}return t.prototype.compare=function(t,e){var n=this.hi?Zt.Sn(t,e):Zt.Pn(this.field,t,e);switch(this.dir){case ve.ASCENDING:return n;case ve.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.nt()+this.dir.toString()},t.prototype.toString=function(){return this.field.nt()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ye=new ge(ft.st(),ve.ASCENDING),be=new ge(ft.st(),ve.DESCENDING),_e=function(){function t(t){this.ci=t}return t.fromBase64String=function(e){return new t(un.t().atob(e))},t.fromUint8Array=function(e){return new t(we(e))},t.prototype.toBase64=function(){return un.t().btoa(this.ci)},t.prototype.toUint8Array=function(){return xe(this.ci)},t.prototype.bn=function(){return 2*this.ci.length},t.prototype.isEqual=function(t){return this.ci===t.ci},t.ai=new t(""),t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function xe(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee,Se,Te=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=ut.MIN),void 0===o&&(o=ut.MIN),void 0===a&&(a=_e.ai),this.target=t,this.targetId=e,this.fi=n,this.sequenceNumber=r,this.li=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.di=function(e){return new t(this.target,this.targetId,this.fi,e,this.li,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.vi=function(e,n){return new t(this.target,this.targetId,this.fi,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.wi=function(e){return new t(this.target,this.targetId,this.fi,this.sequenceNumber,this.li,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.fi===t.fi&&this.sequenceNumber===t.sequenceNumber&&this.li.isEqual(t.li)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},t}(),Me=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t){switch(t){case M.OK:return g("Treated status OK as error");case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return g("Unknown status code: "+t)}}function Ce(t){if(void 0===t)return v("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ee.OK:return M.OK;case Ee.CANCELLED:return M.CANCELLED;case Ee.UNKNOWN:return M.UNKNOWN;case Ee.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ee.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ee.INTERNAL:return M.INTERNAL;case Ee.UNAVAILABLE:return M.UNAVAILABLE;case Ee.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ee.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ee.NOT_FOUND:return M.NOT_FOUND;case Ee.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ee.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ee.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ee.ABORTED:return M.ABORTED;case Ee.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ee.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ee.DATA_LOSS:return M.DATA_LOSS;default:return g("Unknown status code: "+t)}}function Ie(t){if(void 0===t)return Ee.OK;switch(t){case M.OK:return Ee.OK;case M.CANCELLED:return Ee.CANCELLED;case M.UNKNOWN:return Ee.UNKNOWN;case M.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case M.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case M.INTERNAL:return Ee.INTERNAL;case M.UNAVAILABLE:return Ee.UNAVAILABLE;case M.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case M.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case M.NOT_FOUND:return Ee.NOT_FOUND;case M.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case M.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case M.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case M.ABORTED:return Ee.ABORTED;case M.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case M.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case M.DATA_LOSS:return Ee.DATA_LOSS;default:return g("Unknown status code: "+t)}}(Se=Ee||(Ee={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ne=new dt(pt.G);function Re(){return Ne}function Oe(){return Re()}var Pe=new dt(pt.G);function Le(){return Pe}var De=new dt(pt.G);function ke(){return De}var Fe=new yt(pt.G);function Ue(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Fe,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var je=new yt(_);function ze(){return je}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be=function(){function t(t){this.G=t?function(e,n){return t(e,n)||pt.G(e.key,n.key)}:function(t,e){return pt.G(t.key,e.key)},this.mi=Le(),this.pi=new dt(this.G)}return t.gi=function(e){return new t(e.G)},t.prototype.has=function(t){return null!=this.mi.get(t)},t.prototype.get=function(t){return this.mi.get(t)},t.prototype.first=function(){return this.pi.vt()},t.prototype.last=function(){return this.pi.wt()},t.prototype.J=function(){return this.pi.J()},t.prototype.indexOf=function(t){var e=this.mi.get(t);return e?this.pi.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pi.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.pi.pt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.mi.lt(t.key,t),e.pi.lt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.mi.remove(t),this.pi.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pi.bt(),r=e.pi.bt();n.St();){var i=n.Dt().key,o=r.Dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.G=this.G,r.mi=e,r.pi=n,r},t}(),Ve=function(){function t(){this.bi=new dt(pt.G)}return t.prototype.track=function(t){var e=t.doc.key,n=this.bi.get(e);n?0!==t.type&&3===n.type?this.bi=this.bi.lt(e,t):3===t.type&&1!==n.type?this.bi=this.bi.lt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.bi=this.bi.lt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.bi=this.bi.remove(e):1===t.type&&2===n.type?this.bi=this.bi.lt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):g("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.bi=this.bi.lt(e,t)},t.prototype.yi=function(){var t=[];return this.bi.pt((function(e,n){t.push(n)})),t},t}(),Ge=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this._i=n,this.docChanges=r,this.Ii=i,this.fromCache=o,this.Ti=a,this.Ei=s}return t.Di=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Be.gi(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ii.J()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ti===t.Ti&&this.Ii.isEqual(t.Ii)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this._i.isEqual(t._i)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),He=function(){function t(t,e,n,r,i){this.li=t,this.Si=e,this.Ri=n,this.Ci=r,this.Ai=i}return t.Pi=function(e,n){var r,i=((r={})[e]=We.ki(e,n),r);return new t(ut.MIN,i,ze(),Re(),Ue())},t}(),We=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ni=e,this.Oi=n,this.Fi=r,this.Vi=i}return t.ki=function(e,n){return new t(_e.ai,n,Ue(),Ue(),Ue())},t}(),qe=function(t,e,n,r){this.Ui=t,this.removedTargetIds=e,this.key=n,this.xi=r},Ye=function(t,e){this.targetId=t,this.ji=e},Xe=function(t,e,n,r){void 0===n&&(n=_e.ai),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ke=function(){function t(){this.Li=0,this.qi=Je(),this.Bi=_e.ai,this.Mi=!1,this.Qi=!0}return Object.defineProperty(t.prototype,"Ni",{get:function(){return this.Mi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Bi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Gi",{get:function(){return 0!==this.Li},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Wi",{get:function(){return this.Qi},enumerable:!0,configurable:!0}),t.prototype.zi=function(t){t.bn()>0&&(this.Qi=!0,this.Bi=t)},t.prototype.Ki=function(){var t=Ue(),e=Ue(),n=Ue();return this.qi.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:g("Encountered invalid change type: "+i)}})),new We(this.Bi,this.Mi,t,e,n)},t.prototype.Hi=function(){this.Qi=!1,this.qi=Je()},t.prototype.Ji=function(t,e){this.Qi=!0,this.qi=this.qi.lt(t,e)},t.prototype.Yi=function(t){this.Qi=!0,this.qi=this.qi.remove(t)},t.prototype.Xi=function(){this.Li+=1},t.prototype.$i=function(){this.Li-=1},t.prototype.Zi=function(){this.Qi=!0,this.Mi=!0},t}(),$e=function(){function t(t){this.te=t,this.ne={},this.ie=Re(),this.ee=Qe(),this.re=new yt(_)}return t.prototype.ue=function(t){for(var e=0,n=t.Ui;e<n.length;e++){var r=n[e];t.xi instanceof Zt?this.se(r,t.xi):t.xi instanceof te&&this.oe(r,t.key,t.xi)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.oe(r,t.key,t.xi)},t.prototype.he=function(t){var e=this;this.ce(t,(function(n){var r=e.ae(n);switch(t.state){case 0:e.fe(n)&&r.zi(t.resumeToken);break;case 1:r.$i(),r.Gi||r.Hi(),r.zi(t.resumeToken);break;case 2:r.$i(),r.Gi||e.removeTarget(n),y(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case 3:e.fe(n)&&(r.Zi(),r.zi(t.resumeToken));break;case 4:e.fe(n)&&(e.le(n),r.zi(t.resumeToken));break;default:g("Unknown target watch change state: "+t.state)}}))},t.prototype.ce=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):k(this.ne,e)},t.prototype.de=function(t){var e=t.targetId,n=t.ji.count,r=this.ve(e);if(r){var i=r.target;if(i.Nn())if(0===n){var o=new pt(i.path);this.oe(e,o,new te(o,ut.q()))}else y(1===n,"Single document existence filter with count: "+n);else this.we(e)!==n&&(this.le(e),this.re=this.re.add(e))}},t.prototype.me=function(t){var e=this,n={};k(this.ne,(function(r,i){var o=e.ve(r);if(o){if(i.Ni&&o.target.Nn()){var a=new pt(o.target.path);null!==e.ie.get(a)||e.pe(r,a)||e.oe(r,a,new te(a,t))}i.Wi&&(n[r]=i.Ki(),i.Hi())}}));var r=Ue();this.ee.forEach((function(t,n){var i=!0;n.qt((function(t){var n=e.ve(t);return!n||2===n.fi||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new He(t,n,this.re,this.ie,r);return this.ie=Re(),this.ee=Qe(),this.re=new yt(_),i},t.prototype.se=function(t,e){if(this.fe(t)){var n=this.pe(t,e.key)?2:0;this.ae(t).Ji(e.key,n),this.ie=this.ie.lt(e.key,e),this.ee=this.ee.lt(e.key,this.ge(e.key).add(t))}},t.prototype.oe=function(t,e,n){if(this.fe(t)){var r=this.ae(t);this.pe(t,e)?r.Ji(e,1):r.Yi(e),this.ee=this.ee.lt(e,this.ge(e).delete(t)),n&&(this.ie=this.ie.lt(e,n))}},t.prototype.removeTarget=function(t){delete this.ne[t]},t.prototype.we=function(t){var e=this.ae(t).Ki();return this.te.be(t).size+e.Oi.size-e.Vi.size},t.prototype.Xi=function(t){this.ae(t).Xi()},t.prototype.ae=function(t){return this.ne[t]||(this.ne[t]=new Ke),this.ne[t]},t.prototype.ge=function(t){var e=this.ee.get(t);return e||(e=new yt(_),this.ee=this.ee.lt(t,e)),e},t.prototype.fe=function(t){var e=null!==this.ve(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ve=function(t){var e=this.ne[t];return e&&e.Gi?null:this.te.ye(t)},t.prototype.le=function(t){var e=this;y(!this.ne[t].Gi,"Should only reset active targets"),this.ne[t]=new Ke,this.te.be(t).forEach((function(n){e.oe(t,n,null)}))},t.prototype.pe=function(t,e){return this.te.be(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(){return new dt(pt.G)}function Je(){return new dt(pt.G)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,tn,en=((Ze={})[ve.ASCENDING.name]="ASCENDING",Ze[ve.DESCENDING.name]="DESCENDING",Ze),nn=((tn={})[ue.LESS_THAN.name]="LESS_THAN",tn[ue.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",tn[ue.GREATER_THAN.name]="GREATER_THAN",tn[ue.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",tn[ue.EQUAL.name]="EQUAL",tn[ue.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",tn[ue.IN.name]="IN",tn[ue.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",tn),rn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function on(t,e){y(!ne(t),e+" is missing")}function an(t){return"number"==typeof t?t:"string"==typeof t?Number(t):g("can't parse "+t)}var sn=function(){function t(t,e){this.s=t,this.options=e}return t.prototype._e=function(t){var e=void 0===t.code?M.UNKNOWN:Ce(t.code);return new A(e,t.message||"")},t.prototype.Ie=function(t){return this.options.Te||ne(t)?t:{value:t}},t.prototype.Ee=function(t){var e;return ne(e="object"==typeof t?t.value:t)?null:e},t.prototype.M=function(t){return this.options.Te?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.L=function(t){if("string"==typeof t)return this.De(t);y(!!t,"Cannot deserialize null or undefined timestamp.");var e=an(t.seconds||"0"),n=t.nanos||0;return new st(e,n)},t.prototype.De=function(t){var e=0,n=rn.exec(t);if(y(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new st(o,e)},t.prototype.Se=function(t){return this.options.Te?t.toBase64():t.toUint8Array()},t.prototype.Re=function(t){return this.options.Te?(y(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),_e.fromBase64String(t||"")):(y(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),_e.fromUint8Array(t||new Uint8Array))},t.prototype.Ce=function(t){return"string"==typeof t?(y(this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),fn.fromBase64String(t)):(y(!this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),fn.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.M(t.M())},t.prototype.fromVersion=function(t){return y(!!t,"Trying to deserialize version that isn't set"),ut.L(this.L(t))},t.prototype.Ae=function(t,e){return this.Pe(t).child("documents").child(e).nt()},t.prototype.ke=function(t){var e=ht.it(t);return y(this.Ne(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.Oe=function(t){return this.Ae(this.s,t.path)},t.prototype.Fe=function(t){var e=this.ke(t);return y(e.get(1)===this.s.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.s.projectId),y(!e.get(3)&&!this.s.database||e.get(3)===this.s.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.s.database),new pt(this.Ve(e))},t.prototype.Ue=function(t){return this.Ae(this.s,t)},t.prototype.xe=function(t){var e=this.ke(t);return 4===e.length?ht.et:this.Ve(e)},Object.defineProperty(t.prototype,"je",{get:function(){return new ht(["projects",this.s.projectId,"databases",this.s.database]).nt()},enumerable:!0,configurable:!0}),t.prototype.Pe=function(t){return new ht(["projects",t.projectId,"databases",t.database])},t.prototype.Ve=function(t){return y(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.K(5)},t.prototype.Ne=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.Le=function(t){if(t instanceof Ft)return{nullValue:"NULL_VALUE"};if(t instanceof Ut)return{booleanValue:t.value()};if(t instanceof Bt)return{integerValue:""+t.value()};if(t instanceof Vt){var e=t.value();if(this.options.Te){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"};if(re(e))return{doubleValue:"-0"}}return{doubleValue:t.value()}}return t instanceof Gt?{stringValue:t.value()}:t instanceof Kt?{mapValue:this.qe(t)}:t instanceof Qt?{arrayValue:this.Be(t)}:t instanceof Ht?{timestampValue:this.M(t.Ht)}:t instanceof Xt?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof qt?{bytesValue:this.Se(t.value())}:t instanceof Yt?{referenceValue:this.Ae(t.s,t.key.path)}:g("Unknown FieldValue "+JSON.stringify(t))},t.prototype.Me=function(t){var e=this;if("nullValue"in t)return Ft.yn;if("booleanValue"in t)return Ut.of(t.booleanValue);if("integerValue"in t)return new Bt(an(t.integerValue));if("doubleValue"in t){if(this.options.Te){if("NaN"===t.doubleValue)return Vt.Tn;if("Infinity"===t.doubleValue)return Vt.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Vt.NEGATIVE_INFINITY;if("-0"===t.doubleValue)return new Vt(-0)}return new Vt(t.doubleValue)}if("stringValue"in t)return new Gt(t.stringValue);if("mapValue"in t)return this.Qe(t.mapValue.fields||{});if("arrayValue"in t){on(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new Qt(n.map((function(t){return e.Me(t)})))}if("timestampValue"in t)return on(t.timestampValue,"timestampValue"),new Ht(this.L(t.timestampValue));if("geoPointValue"in t){on(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,i=t.geoPointValue.longitude||0;return new Xt(new at(r,i))}if("bytesValue"in t){on(t.bytesValue,"bytesValue");var o=this.Ce(t.bytesValue);return new qt(o)}if("referenceValue"in t){on(t.referenceValue,"referenceValue");var a=this.ke(t.referenceValue),s=new S(a.get(1),a.get(3)),u=new pt(this.Ve(a));return new Yt(s,u)}return g("Unknown Value proto "+JSON.stringify(t))},t.prototype.Ge=function(t,e){return{name:this.Oe(t),fields:this.We(e)}},t.prototype.ze=function(t){return y(!t.en,"Can't serialize documents with mutations."),{name:this.Oe(t.key),fields:this.We(t.data()),updateTime:this.M(t.version.M())}},t.prototype.Ke=function(t,e){var n=this,r=this.Fe(t.name),i=this.fromVersion(t.updateTime);return new Zt(r,i,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.Me(t)}))},t.prototype.We=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.Le(r)})),n},t.prototype.Qe=function(t){var e=this,n=t,r=Kt.vn();return F(n,(function(t,n){r.set(new ft([t]),e.Me(n))})),r.cn()},t.prototype.qe=function(t){return{fields:this.We(t)}},t.prototype.Be=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.Le(t))})),{values:n}},t.prototype.He=function(t){var e=this;y(!!t.found,"Tried to deserialize a found document from a missing document."),on(t.found.name,"doc.found.name"),on(t.found.updateTime,"doc.found.updateTime");var n=this.Fe(t.found.name),r=this.fromVersion(t.found.updateTime);return new Zt(n,r,{},void 0,t.found,(function(t){return e.Me(t)}))},t.prototype.Je=function(t){y(!!t.missing,"Tried to deserialize a missing document from a found document."),y(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.Fe(t.missing),n=this.fromVersion(t.readTime);return new te(e,n)},t.prototype.Ye=function(t){return"found"in t?this.He(t):"missing"in t?this.Je(t):g("invalid batch get response: "+JSON.stringify(t))},t.prototype.Xe=function(t){switch(t){case 1:return"ADD";case 3:return"CURRENT";case 0:return"NO_CHANGE";case 2:return"REMOVE";case 4:return"RESET";default:return g("Unknown WatchTargetChangeState: "+t)}},t.prototype.$e=function(t){if(t instanceof Ye)return{filter:{count:t.ji.count,targetId:t.targetId}};if(t instanceof qe){if(t.xi instanceof Zt){var e=t.xi;return{documentChange:{document:{name:this.Oe(e.key),fields:this.We(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.Ui,removedTargetIds:t.removedTargetIds}}}if(t.xi instanceof te)return e=t.xi,{documentDelete:{document:this.Oe(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.xi)return{documentRemove:{document:this.Oe(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Xe){var n=void 0;return t.cause&&(n={code:Ie(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.Xe(t.state),targetIds:t.targetIds,resumeToken:this.Se(t.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.Ze=function(t){var e,n=this;if("targetChange"in t){on(t.targetChange,"targetChange");var r=this.tr(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=this.Re(t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&this._e(a);e=new Xe(r,i,o,s||null)}else if("documentChange"in t){on(t.documentChange,"documentChange");var u=t.documentChange;on(u.document,"documentChange.name"),on(u.document.name,"documentChange.document.name"),on(u.document.updateTime,"documentChange.document.updateTime");var c=this.Fe(u.document.name),h=this.fromVersion(u.document.updateTime),l=new Zt(c,h,{},void 0,u.document,(function(t){return n.Me(t)})),f=u.targetIds||[],p=u.removedTargetIds||[];e=new qe(f,p,l.key,l)}else if("documentDelete"in t){on(t.documentDelete,"documentDelete");var d=t.documentDelete;on(d.document,"documentDelete.document"),c=this.Fe(d.document),h=d.readTime?this.fromVersion(d.readTime):ut.q(),l=new te(c,h),p=d.removedTargetIds||[],e=new qe([],p,l.key,l)}else if("documentRemove"in t){on(t.documentRemove,"documentRemove");var v=t.documentRemove;on(v.document,"documentRemove"),c=this.Fe(v.document),p=v.removedTargetIds||[],e=new qe([],p,c,null)}else{if(!("filter"in t))return g("Unknown change type "+JSON.stringify(t));on(t.filter,"filter");var m=t.filter;on(m.targetId,"filter.targetId");var y=m.count||0,b=new Me(y),_=m.targetId;e=new Ye(_,b)}return e},t.prototype.tr=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:g("Got unexpected TargetChange.state: "+t)},t.prototype.nr=function(t){if(!("targetChange"in t))return ut.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?ut.MIN:e.readTime?this.fromVersion(e.readTime):ut.MIN},t.prototype.ir=function(t){var e,n=this;if(t instanceof Nt)e={update:this.Ge(t.key,t.value)};else if(t instanceof Pt)e={delete:this.Oe(t.key)};else if(t instanceof Rt)e={update:this.Ge(t.key,t.data),updateMask:this.er(t.un)};else if(t instanceof Ot)e={transform:{document:this.Oe(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.rr(t)}))}};else{if(!(t instanceof Lt))return g("Unknown mutation type "+t.type);e={verify:this.Oe(t.key)}}return t.in.$t||(e.currentDocument=this.ur(t.in)),e},t.prototype.sr=function(t){var e=this,n=t.currentDocument?this.or(t.currentDocument):Ct.NONE;if(t.update){on(t.update.name,"name");var r=this.Fe(t.update.name),i=this.Qe(t.update.fields||{});if(t.updateMask){var o=this.hr(t.updateMask);return new Rt(r,i,o,n)}return new Nt(r,i,n)}if(t.delete)return r=this.Fe(t.delete),new Pt(r,n);if(t.transform){r=this.Fe(t.transform.document);var a=t.transform.fieldTransforms.map((function(t){return e.cr(t)}));return y(!0===n.exists,'Transforms only support precondition "exists == true"'),new Ot(r,a)}return t.verify?(r=this.Fe(t.verify),new Lt(r,n)):g("unknown mutation proto: "+JSON.stringify(t))},t.prototype.ur=function(t){return y(!t.$t,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g("Unknown precondition")},t.prototype.or=function(t){return void 0!==t.updateTime?Ct.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Ct.exists(t.exists):Ct.NONE},t.prototype.ar=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);r.isEqual(ut.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map((function(t){return n.Me(t)}))),new At(r,i)},t.prototype.lr=function(t,e){var n=this;return t&&t.length>0?(y(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.ar(t,e)}))):[]},t.prototype.rr=function(t){var e=this,n=t.transform;if(n instanceof _t)return{fieldPath:t.field.nt(),setToServerValue:"REQUEST_TIME"};if(n instanceof wt)return{fieldPath:t.field.nt(),appendMissingElements:{values:n.elements.map((function(t){return e.Le(t)}))}};if(n instanceof xt)return{fieldPath:t.field.nt(),removeAllFromArray:{values:n.elements.map((function(t){return e.Le(t)}))}};if(n instanceof Et)return{fieldPath:t.field.nt(),increment:this.Le(n.Kt)};throw g("Unknown transform: "+t.transform)},t.prototype.cr=function(t){var e=this,n=null;if("setToServerValue"in t)y("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=_t.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new wt(r.map((function(t){return e.Me(t)})))}else if("removeAllFromArray"in t)r=t.removeAllFromArray.values||[],n=new xt(r.map((function(t){return e.Me(t)})));else if("increment"in t){var i=this.Me(t.increment);y(i instanceof jt,"NUMERIC_ADD transform requires a NumberValue"),n=new Et(i)}else g("Unknown transform proto: "+JSON.stringify(t));var o=ft.ot(t.fieldPath);return new Mt(o,n)},t.prototype.dr=function(t){return{documents:[this.Ue(t.path)]}},t.prototype.vr=function(t){var e=t.documents.length;y(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return ae.jn(this.xe(n)).Yn()},t.prototype.wr=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(y(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.Ue(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(y(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.Ue(n.H()),e.structuredQuery.from=[{collectionId:n.X()}]);var r=this.mr(t.filters);r&&(e.structuredQuery.where=r);var i=this.pr(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.Ie(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.gr(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.gr(t.endAt)),e},t.prototype.br=function(t){var e=this.xe(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){y(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.yr(n.where));var s=[];n.orderBy&&(s=this._r(n.orderBy));var u=null;n.limit&&(u=this.Ee(n.limit));var c=null;n.startAt&&(c=this.Ir(n.startAt));var h=null;return n.endAt&&(h=this.Ir(n.endAt)),new ae(e,i,s,a,u,"F",c,h).Yn()},t.prototype.Tr=function(t){var e=this.Er(t.fi);return null==e?null:{"goog-listen-tags":e}},t.prototype.Er=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g("Unrecognized query purpose: "+t)}},t.prototype.Yn=function(t){var e,n=t.target;return(e=n.Nn()?{documents:this.dr(n)}:{query:this.wr(n)}).targetId=t.targetId,t.resumeToken.bn()>0&&(e.resumeToken=this.Se(t.resumeToken)),e},t.prototype.mr=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof ce?e.Dr(t):g("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.yr=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Sr(t)]:void 0!==t.fieldFilter?[this.Rr(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.yr(t)})).reduce((function(t,e){return t.concat(e)})):g("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.pr=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.Cr(t)}))},t.prototype._r=function(t){var e=this;return t.map((function(t){return e.Ar(t)}))},t.prototype.gr=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.Le(t)}))}},t.prototype.Ir=function(t){var e=this,n=!!t.before,r=t.values.map((function(t){return e.Me(t)}));return new me(r,n)},t.prototype.Pr=function(t){return en[t.name]},t.prototype.kr=function(t){switch(t){case"ASCENDING":return ve.ASCENDING;case"DESCENDING":return ve.DESCENDING;default:return}},t.prototype.Nr=function(t){return nn[t.name]},t.prototype.Or=function(t){switch(t){case"EQUAL":return ue.EQUAL;case"GREATER_THAN":return ue.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return ue.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return ue.LESS_THAN;case"LESS_THAN_OR_EQUAL":return ue.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return ue.ARRAY_CONTAINS;case"IN":return ue.IN;case"ARRAY_CONTAINS_ANY":return ue.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return g("Unspecified operator");default:return g("Unknown operator")}},t.prototype.Fr=function(t){return{fieldPath:t.nt()}},t.prototype.Vr=function(t){return ft.ot(t.fieldPath)},t.prototype.Cr=function(t){return{field:this.Fr(t.field),direction:this.Pr(t.dir)}},t.prototype.Ar=function(t){return new ge(this.Vr(t.field),this.kr(t.direction))},t.prototype.Rr=function(t){return ce.create(this.Vr(t.fieldFilter.field),this.Or(t.fieldFilter.op),this.Me(t.fieldFilter.value))},t.prototype.Dr=function(t){if(t.op===ue.EQUAL){if(t.value.isEqual(Vt.Tn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NAN"}};if(t.value.isEqual(Ft.yn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.Fr(t.field),op:this.Nr(t.op),value:this.Le(t.value)}}},t.prototype.Sr=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.Vr(t.unaryFilter.field);return ce.create(e,ue.EQUAL,Vt.Tn);case"IS_NULL":var n=this.Vr(t.unaryFilter.field);return ce.create(n,ue.EQUAL,Ft.yn);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},t.prototype.er=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.nt())})),{fieldPaths:e}},t.prototype.hr=function(t){var e=(t.fieldPaths||[]).map((function(t){return ft.ot(t)}));return Tt.Yt(e)},t}(),un=function(){function t(){}return t.Ur=function(e){t.platform&&g("Platform already defined"),t.platform=e},t.t=function(){return t.platform||g("Platform not set"),t.platform},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new A(M.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function hn(){if("undefined"==typeof Uint8Array)throw new A(M.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ln(){if(!un.t().xr)throw new A(M.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var fn=function(){function t(t){ln(),this.ci=t}return t.fromBase64String=function(e){z("Blob.fromBase64String",arguments,1),H("Blob.fromBase64String","string",1,e),ln();try{var n=un.t().atob(e);return new t(n)}catch(t){throw new A(M.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(z("Blob.fromUint8Array",arguments,1),hn(),!(e instanceof Uint8Array))throw nt("Blob.fromUint8Array","Uint8Array",1,e);var n=we(e);return new t(n)},t.prototype.toBase64=function(){return z("Blob.toBase64",arguments,0),ln(),un.t().btoa(this.ci)},t.prototype.toUint8Array=function(){z("Blob.toUint8Array",arguments,0),hn();var t=xe(this.ci);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.ci===t.ci},t.prototype.Dn=function(){return 2*this.ci.length},t.prototype.U=function(t){return _(this.ci,t.ci)},t}(),pn=cn(fn,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),dn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.jr=function(t){return n.Lr(t)},this.qr=function(t){return e.Br(t)})}return t.prototype.Lr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.qr&&this.qr(t),t},t.Mr=-1,t}(),vn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},mn=function(){function t(t,e,n,r,i){this.Qr=t,this.Gr=e,this.Wr=n,this.op=r,this.zr=i,this.Kr=new vn,this.then=this.Kr.promise.then.bind(this.Kr.promise),this.catch=this.Kr.promise.catch.bind(this.Kr.promise),this.Kr.promise.catch((function(t){}))}return t.Hr=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.Jr=setTimeout((function(){return e.Yr()}),t)},t.prototype.Xr=function(){return this.Yr()},t.prototype.cancel=function(t){null!==this.Jr&&(this.clearTimeout(),this.Kr.reject(new A(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Yr=function(){var t=this;this.Qr.$r((function(){return null!==t.Jr?(t.clearTimeout(),t.op().then((function(e){return t.Kr.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Jr&&(this.zr(this),clearTimeout(this.Jr),this.Jr=null)},t}(),gn=function(){function t(){this.Zr=Promise.resolve(),this.tu=!1,this.nu=[],this.iu=null,this.eu=!1,this.ru=[]}return Object.defineProperty(t.prototype,"uu",{get:function(){return this.tu},enumerable:!0,configurable:!0}),t.prototype.$r=function(t){this.enqueue(t)},t.prototype.su=function(t){this.ou(),this.hu(t)},t.prototype.cu=function(t){return this.ou(),this.hu(t)},t.prototype.au=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.ou(),this.tu?[3,2]:(this.tu=!0,[4,this.cu(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.ou(),this.tu?new Promise((function(t){})):this.hu(t)},t.prototype.hu=function(t){var e=this,n=this.Zr.then((function(){return e.eu=!0,t().catch((function(t){e.iu=t,e.eu=!1;var n=t.stack||t.message||"";throw v("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.eu=!1,t}))}));return this.Zr=n,n},t.prototype.fu=function(t,e,n){var r=this;this.ou(),y(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.ru.indexOf(t)>-1&&(e=0);var i=mn.Hr(this,t,e,n,(function(t){return r.lu(t)}));return this.nu.push(i),i},t.prototype.ou=function(){this.iu&&g("AsyncQueue is already failed: "+(this.iu.stack||this.iu.message))},t.prototype.du=function(){y(this.eu,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.vu=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Zr];case 1:e.sent(),e.label=2;case 2:if(t!==this.Zr)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.wu=function(t){for(var e=0,n=this.nu;e<n.length;e++)if(n[e].Gr===t)return!0;return!1},t.prototype.mu=function(t){var e=this;return this.vu().then((function(){y("all"===t||e.wu(t),"Attempted to drain to missing operation "+t),e.nu.sort((function(t,e){return t.Wr-e.Wr}));for(var n=0,r=e.nu;n<r.length;n++){var i=r[n];if(i.Xr(),"all"!==t&&i.Gr===t)break}return e.vu()}))},t.prototype.pu=function(t){this.ru.push(t)},t.prototype.lu=function(t){var e=this.nu.indexOf(t);y(e>=0,"Delayed operation not found."),this.nu.splice(e,1)},t}();function yn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=_n(e)),e=bn(t.get(n),e);return _n(e)}function bn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function _n(t){return t+""}function wn(t){var e=t.length;if(y(e>=2,"Invalid path "+t),2===e)return y(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),ht.et;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&g('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:g('Invalid encoded resource path: "'+t+'"')}o=a+2}return new ht(r)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn=function(){function t(t,e,n,r){this.batchId=t,this.En=e,this.baseMutations=n,this.mutations=r,y(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.Wt=function(t,e,n){e&&y(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.gu;y(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.Wt(e,a)}}return e},t.prototype.Gt=function(t,e){e&&y(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=s.Gt(e,e,this.En));for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.Gt(e,i,this.En))}return e},t.prototype.bu=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Gt(r.key,t.get(r.key));i&&(n=n.lt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ue())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&w(this.mutations,t.mutations)&&w(this.baseMutations,t.baseMutations)},t}(),En=function(){function t(t,e,n,r,i){this.batch=t,this.yu=e,this.gu=n,this.streamToken=r,this._u=i}return t.from=function(e,n,r,i){y(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=ke(),a=e.mutations,s=0;s<a.length;s++)o=o.lt(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),Sn=function(){function t(){this.Iu=new yt(Tn.Sn),this.Tu=new yt(Tn.Eu)}return t.prototype.J=function(){return this.Iu.J()},t.prototype.Du=function(t,e){var n=new Tn(t,e);this.Iu=this.Iu.add(n),this.Tu=this.Tu.add(n)},t.prototype.Su=function(t,e){var n=this;t.forEach((function(t){return n.Du(t,e)}))},t.prototype.Ru=function(t,e){this.Cu(new Tn(t,e))},t.prototype.Au=function(t,e){var n=this;t.forEach((function(t){return n.Ru(t,e)}))},t.prototype.Pu=function(t){var e=this,n=pt.EMPTY,r=new Tn(n,t),i=new Tn(n,t+1),o=[];return this.Tu.Lt([r,i],(function(t){e.Cu(t),o.push(t.key)})),o},t.prototype.ku=function(){var t=this;this.Iu.forEach((function(e){return t.Cu(e)}))},t.prototype.Cu=function(t){this.Iu=this.Iu.delete(t),this.Tu=this.Tu.delete(t)},t.prototype.Nu=function(t){var e=pt.EMPTY,n=new Tn(e,t),r=new Tn(e,t+1),i=Ue();return this.Tu.Lt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ou=function(t){var e=new Tn(t,0),n=this.Iu.Bt(e);return null!==n&&t.isEqual(n.key)},t}(),Tn=function(){function t(t,e){this.key=t,this.Fu=e}return t.Sn=function(t,e){return pt.G(t.key,e.key)||_(t.Fu,e.Fu)},t.Eu=function(t,e){return _(t.Fu,e.Fu)||pt.G(t.key,e.key)},t}(),Mn=function(){function t(t){this.Vu=t,this.Uu={}}return t.prototype.get=function(t){var e=this.Vu(t),n=this.Uu[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Vu(t),r=this.Uu[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Uu[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Vu(t),n=this.Uu[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Uu[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){F(this.Uu,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.J=function(){return U(this.Uu)},t}(),An=function(){function t(t){var e=this;this.xu=null,this.ju=null,this.result=void 0,this.error=void 0,this.Lu=!1,this.qu=!1,t((function(t){e.Lu=!0,e.result=t,e.xu&&e.xu(t)}),(function(t){e.Lu=!0,e.error=t,e.ju&&e.ju(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.qu&&g("Called next() or catch() twice for PersistencePromise"),this.qu=!0,this.Lu?this.error?this.Bu(n,this.error):this.Mu(e,this.result):new t((function(t,i){r.xu=function(n){r.Mu(e,n).next(t,i)},r.ju=function(e){r.Bu(n,e).next(t,i)}}))},t.prototype.Qu=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Gu=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Mu=function(e,n){return e?this.Gu((function(){return e(n)})):t.resolve(n)},t.prototype.Bu=function(e,n){return e?this.Gu((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Wu=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.zu=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Wu(r)},t}(),Cn=function(){function t(){this.Ku=new Mn((function(t){return t.toString()})),this.Hu=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return y(void 0!==this.Ju,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.Ju},set:function(t){y(void 0===this.Ju||this.Ju.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.Ju=t},enumerable:!0,configurable:!0}),t.prototype.Yu=function(t,e){this.Xu(),this.readTime=e,this.Ku.set(t.key,t)},t.prototype.$u=function(t,e){this.Xu(),e&&(this.readTime=e),this.Ku.set(t,null)},t.prototype.Zu=function(t,e){this.Xu();var n=this.Ku.get(e);return void 0!==n?An.resolve(n):this.ts(t,e)},t.prototype.getEntries=function(t,e){return this.ns(t,e)},t.prototype.apply=function(t){return this.Xu(),this.Hu=!0,this.es(t)},t.prototype.Xu=function(){y(!this.Hu,"Changes have already been applied.")},t}(),In="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nn=function(){function t(){this.rs=[]}return t.prototype.us=function(t){this.rs.push(t)},t.prototype.ss=function(){this.rs.forEach((function(t){return t()}))},t}(),Rn=function(){function e(t){this.db=t,12.2===e.os(s.getUA())&&v("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.hs=function(t,n,r){return y(e.cs(),"IndexedDB not supported in current environment."),d("SimpleDb","Opening database:",t),new An((function(i,o){var a=window.indexedDB.open(t,n);a.onsuccess=function(t){var n=t.target.result;i(new e(n))},a.onblocked=function(){o(new A(M.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new A(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(e){d("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result;r.createOrUpgrade(n,a.transaction,e.oldVersion,pr).next((function(){d("SimpleDb","Database upgrade to version "+pr+" complete")}))}})).Qu()},e.delete=function(t){return d("SimpleDb","Removing database:",t),Dn(window.indexedDB.deleteDatabase(t)).Qu()},e.cs=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(e.as())return!0;if(void 0===window.navigator)return!1;var t=s.getUA(),n=e.os(t),r=0<n&&n<10,i=e.fs(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.as=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({NODE_ENV:"production",VUE_APP_ApiKey:"AIzaSyBARk3BcjSSYFGe3LkDQAu1H-6VMxrolNM",VUE_APP_AppId:"1:1095910844942:web:1a329d270ba9ed1c05aa5f",VUE_APP_AuthDomain:"tessellator-space.firebaseapp.com",VUE_APP_DatabaseURL:"https://tessellator-space.firebaseio.com",VUE_APP_MessagingSenderId:"1095910844942",VUE_APP_ProjectId:"tessellator-space",VUE_APP_StorageBucket:"tessellator-space.appspot.com",BASE_URL:"/"}))||void 0===e?void 0:e.ls)},e.ds=function(t,e){return t.store(e)},e.os=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.fs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.vs=function(t){this.db.onversionchange=function(e){return t(e)}},e.prototype.runTransaction=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c;return o.__generator(this,(function(h){switch(h.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),a=0,s=function(){var t,s,c,h;return o.__generator(this,(function(o){switch(o.label){case 0:++a,t=Pn.open(u.db,r?"readonly":"readwrite",e),o.label=1;case 1:return o.trys.push([1,3,,4]),(s=n(t).catch((function(e){return t.abort(e),An.reject(e)})).Qu()).catch((function(){})),[4,t.ws];case 2:return o.sent(),[2,{value:s}];case 3:return c=o.sent(),h=i&&"FirebaseError"!==c.name&&a<3,d("SimpleDb","Transaction failed with error: %s. Retrying: %s.",c.message,h),h?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,h.label=1;case 1:return[5,s()];case 2:return"object"==typeof(c=h.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),On=function(){function t(t){this.ms=t,this.ps=!1,this.gs=null}return Object.defineProperty(t.prototype,"Lu",{get:function(){return this.ps},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bs",{get:function(){return this.gs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ms=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.ps=!0},t.prototype.ys=function(t){this.gs=t},t.prototype.delete=function(){return Dn(this.ms.delete())},t}(),Pn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this._s=new vn,this.transaction.oncomplete=function(){e._s.resolve()},this.transaction.onabort=function(){t.error?e._s.reject(t.error):e._s.resolve()},this.transaction.onerror=function(t){var n=Fn(t.target.error);e._s.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"ws",{get:function(){return this._s.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return y(!!e,"Object store not part of transaction: "+t),new Ln(e)},t}(),Ln=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Dn(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),Dn(this.store.add(t))},t.prototype.get=function(t){var e=this;return Dn(this.store.get(t)).next((function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),Dn(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),Dn(this.store.count())},t.prototype.Is=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ts(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Es=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ds=!1;var r=this.cursor(n);return this.Ts(r,(function(t,e,n){return n.delete()}))},t.prototype.Ss=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ts(r,e)},t.prototype.Rs=function(t){var e=this.cursor({});return new An((function(n,r){e.onerror=function(t){var e=Fn(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Ts=function(t,e){var n=[];return new An((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new On(i),a=e(i.primaryKey,i.value,o);if(a instanceof An){var s=a.catch((function(t){return o.done(),An.reject(t)}));n.push(s)}o.Lu?r():null===o.bs?i.continue():i.continue(o.bs)}else r()}})).next((function(){return An.Wu(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(y(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ds?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Dn(t){return new An((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Fn(t.target.error);n(e)}}))}var kn=!1;function Fn(t){var e=Rn.os(s.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new A("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return kn||(kn=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Cs=n,this.As=r,this.Ps={}}return t.ks=function(e,n,r,i){return y(""!==e.uid,"UserID must not be an empty string."),new t(e.l()?e.uid:"",n,r,i)},t.prototype.Ns=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bn(t).Ss({index:yr.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Os=function(t,e,n){return this.Fs(t).next((function(e){return e.lastStreamToken=n.toBase64(),Gn(t).put(e)}))},t.prototype.Vs=function(t){return this.Fs(t).next((function(t){return _e.fromBase64String(t.lastStreamToken)}))},t.prototype.Us=function(t,e){return this.Fs(t).next((function(n){return n.lastStreamToken=e.toBase64(),Gn(t).put(n)}))},t.prototype.xs=function(t,e,n,r){var i=this,o=Vn(t),a=Bn(t);return a.add({}).next((function(s){y("number"==typeof s,"Auto-generated key is not a number");for(var u=new xn(s,e,n,r),c=i.serializer.js(i.userId,u),h=[],l=new yt((function(t,e){return _(t.nt(),e.nt())})),f=0,p=r;f<p.length;f++){var d=p[f],v=br.key(i.userId,d.key.path,s);l=l.add(d.key.path.H()),h.push(a.put(c)),h.push(o.put(v,br.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Cs.Ls(t,e))})),t.us((function(){i.Ps[s]=u.keys()})),An.Wu(h).next((function(){return u}))}))},t.prototype.qs=function(t,e){var n=this;return Bn(t).get(e).next((function(t){return t?(y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.Bs(t)):null}))},t.prototype.Ms=function(t,e){var n=this;return this.Ps[e]?An.resolve(this.Ps[e]):this.qs(t,e).next((function(t){if(t){var r=t.keys();return n.Ps[e]=r,r}return null}))},t.prototype.Qs=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Bn(t).Ss({index:yr.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(y(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.Bs(e)),i.done()})).next((function(){return o}))},t.prototype.Gs=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Bn(t).Ss({index:yr.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Ws=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bn(t).Is(yr.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.Bs(t)}))}))},t.prototype.zs=function(t,e){var n=this,r=br.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Vn(t).Ss({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=wn(u);if(s===n.userId&&e.path.isEqual(h))return Bn(t).get(c).next((function(t){if(!t)throw g("Dangling document-mutation reference found: "+r+" which points to "+c);y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.Bs(t))}));a.done()})).next((function(){return o}))},t.prototype.Ks=function(t,e){var n=this,r=new yt(_),i=[];return e.forEach((function(e){var o=br.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Vn(t).Ss({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=wn(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),An.Wu(i).next((function(){return n.Hs(t,r)}))},t.prototype.Js=function(t,e){var n=this;y(!e.Nn(),"Document queries shouldn't go down this path"),y(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=br.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new yt(_);return Vn(t).Ss({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=wn(u);a===n.userId&&r.$(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Hs(t,s)}))},t.prototype.Hs=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Bn(t).get(e).next((function(t){if(null===t)throw g("Dangling document-mutation reference found, which points to "+e);y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.Bs(t))})))})),An.Wu(i).next((function(){return r}))},t.prototype.Ys=function(t,e){var n=this;return zn(t.Xs,this.userId,e).next((function(r){return t.us((function(){n.$s(e.batchId)})),An.forEach(r,(function(e){return n.As.Zs(t,e)}))}))},t.prototype.$s=function(t){delete this.Ps[t]},t.prototype.to=function(t){var e=this;return this.Ns(t).next((function(n){if(!n)return An.resolve();var r=IDBKeyRange.lowerBound(br.prefixForUser(e.userId)),i=[];return Vn(t).Ss({range:r},(function(t,n,r){if(t[0]===e.userId){var o=wn(t[1]);i.push(o)}else r.done()})).next((function(){y(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.nt()})))}))}))},t.prototype.Ou=function(t,e){return jn(t,this.userId,e)},t.prototype.Fs=function(t){var e=this;return Gn(t).get(this.userId).next((function(t){return t||new gr(e.userId,-1,"")}))},t}();function jn(t,e,n){var r=br.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Vn(t).Ss({range:o,Ds:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function zn(t,e,n){var r=t.store(yr.store),i=t.store(br.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ss({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){y(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=br.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return An.Wu(o).next((function(){return c}))}function Bn(t){return jr.ds(t,yr.store)}function Vn(t){return jr.ds(t,br.store)}function Gn(t){return jr.ds(t,gr.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn=function(){function t(t,e){this.no=t,y((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.io(void 0!==e?e:this.no)}return t.prototype.next=function(){var t=this.eo;return this.eo+=2,t},t.prototype.after=function(t){return this.io(t+2),this.next()},t.prototype.io=function(t){y((1&t)===this.no,"Cannot supply target ID from different generator ID"),this.eo=t},t.ro=function(){return new t(0,2)},t.uo=function(){return new t(1)},t}(),Wn=function(){function t(t,e,n){this.so=t,this.oo=e,this.Cs=n}return t.prototype.ho=function(t,e){var n=this;return this.oo.zs(t,e).next((function(r){return n.co(t,e,r)}))},t.prototype.co=function(t,e,n){return this.so.Zu(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Gt(e,t);return t}))},t.prototype.ao=function(t,e,n){var r=Oe();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Gt(t,e);r=r.lt(t,e)})),r},t.prototype.fo=function(t,e){var n=this;return this.so.getEntries(t,e).next((function(e){return n.lo(t,e)}))},t.prototype.lo=function(t,e){var n=this;return this.oo.Ks(t,e).next((function(r){var i=n.ao(t,e,r),o=Re();return i.forEach((function(t,e){e||(e=new te(t,ut.q())),o=o.lt(t,e)})),o}))},t.prototype.do=function(t,e,n){return e.Nn()?this.vo(t,e.path):e.ui()?this.wo(t,e,n):this.mo(t,e,n)},t.prototype.vo=function(t,e){return this.ho(t,new pt(e)).next((function(t){var e=Le();return t instanceof Zt&&(e=e.lt(t.key,t)),e}))},t.prototype.wo=function(t,e,n){var r=this;y(e.path.J(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=Le();return this.Cs.po(t,i).next((function(a){return An.forEach(a,(function(a){var s=e.Hn(a.child(i));return r.mo(t,s,n).next((function(t){t.forEach((function(t,e){o=o.lt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.mo=function(t,e,n){var r,i,o=this;return this.so.do(t,e,n).next((function(n){return r=n,o.oo.Js(t,e)})).next((function(e){return i=e,o.bo(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c),l=u.Gt(h,h,o.En);r=l instanceof Zt?r.lt(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.bo=function(t,e,n){for(var r=Ue(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Rt&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.so.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Zt&&(c=c.lt(t,e))})),c}))},t}(),qn=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.yo=n,this._o=r}return t.Io=function(e,n){for(var r=Ue(),i=Ue(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Yn=function(){function t(t,e,n){this.persistence=t,this.To=e,this.Eo=new Sn,this.Do=new dt(_),this.So=new Mn((function(t){return t.canonicalId()})),this.Ro=ut.MIN,y(t.Co,"LocalStore was passed an unstarted persistence implementation"),this.persistence.As.Ao(this.Eo),this.oo=t.Po(n),this.ko=t.No(),this.Oo=t.Fo(),this.Vo=new Wn(this.ko,this.oo,this.persistence.Uo()),this.To.xo(this.Vo)}return t.prototype.start=function(){return this.jo()},t.prototype.Lo=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i=this;return o.__generator(this,(function(o){switch(o.label){case 0:return e=this.oo,n=this.Vo,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.oo.Ws(r).next((function(a){return o=a,e=i.persistence.Po(t),n=new Wn(i.ko,e,i.persistence.Uo()),e.Ws(r)})).next((function(t){for(var e=[],i=[],a=Ue(),s=0,u=o;s<u.length;s++){var c=u[s];e.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=t;p<d.length;p++){c=d[p],i.push(c.batchId);for(var v=0,m=c.mutations;v<m.length;v++)f=m[v],a=a.add(f.key)}return n.fo(r,a).next((function(t){return{qo:t,Bo:e,Mo:i}}))}))}))];case 1:return r=o.sent(),this.oo=e,this.Vo=n,this.To.xo(this.Vo),[2,r]}}))}))},t.prototype.Qo=function(t){var e,n=this,r=st.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Ue());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.Vo.fo(o,i).next((function(i){e=i;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],h=c.rn(e.get(c.key));null!=h&&a.push(new Rt(c.key,h,h.un(),Ct.exists(!0)))}return n.oo.xs(o,r,a,t)}))})).then((function(t){var n=t.bu(e);return{batchId:t.batchId,Ku:n}}))},t.prototype.Go=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.oo.Ms(n,t).next((function(t){return t?e.Vo.fo(n,t):An.resolve(null)}))}))},t.prototype.Os=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=t.batch.keys(),i=e.ko.Wo({zo:!0});return e.oo.Os(n,t.batch,t.streamToken).next((function(){return e.Ko(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.oo.to(n)})).next((function(){return e.Vo.fo(n,r)}))}))},t.prototype.Ho=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return e.oo.qs(n,t).next((function(t){return y(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.oo.Ys(n,t)})).next((function(){return e.oo.to(n)})).next((function(){return e.Vo.fo(n,r)}))}))},t.prototype.Gs=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.oo.Gs(e)}))},t.prototype.Vs=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.oo.Vs(e)}))},t.prototype.Us=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.oo.Us(n,t)}))},t.prototype.Jo=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.Oo.Jo(e)}))},t.prototype.Yo=function(e){var n=this,r=e.li,i=this.Do;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.ko.Wo({zo:!0});i=n.Do;var s=[];k(e.Si,(function(e,a){var u=i.get(e);if(u){s.push(n.Oo.Xo(o,a.Vi,e).next((function(){return n.Oo.$o(o,a.Oi,e)})));var c=a.resumeToken;if(c.bn()>0){var h=u.vi(c,r).di(o.Zo);i=i.lt(e,h),t.th(u,h,a)&&s.push(n.Oo.nh(o,h))}}}));var u=Re(),c=Ue();if(e.Ci.forEach((function(t,e){c=c.add(t)})),s.push(a.getEntries(o,c).next((function(t){e.Ci.forEach((function(i,c){var h=t.get(i);c instanceof te&&c.version.isEqual(ut.MIN)?(a.$u(i,r),u=u.lt(i,c)):null==h||c.version.h(h.version)>0||0===c.version.h(h.version)&&h.hasPendingWrites?(y(!ut.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.Yu(c,r),u=u.lt(i,c)):d("LocalStore","Ignoring outdated watch update for ",i,". Current version:",h.version," Watch version:",c.version),e.Ai.has(i)&&s.push(n.persistence.As.ih(o,i))}))}))),!r.isEqual(ut.MIN)){var h=n.Oo.Jo(o).next((function(t){return y(r.h(t)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+t),n.Oo.eh(o,o.Zo,r)}));s.push(h)}return An.Wu(s).next((function(){return a.apply(o)})).next((function(){return n.Vo.lo(o,u)}))})).then((function(t){return n.Do=i,t}))},t.th=function(t,e,n){return y(e.resumeToken.bn()>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.bn()||e.li.B()-t.li.B()>=this.rh||n.Oi.size+n.Fi.size+n.Vi.size>0},t.prototype.uh=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.Eo.Su(i.yo,o),this.Eo.Au(i._o,o),!i.fromCache){var a=this.Do.get(o);y(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.li,u=a.wi(s);this.Do=this.Do.lt(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return An.forEach(t,(function(t){return An.forEach(t._o,(function(t){return e.persistence.As.Ru(n,t)}))}))}))},t.prototype.sh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.oo.Qs(n,t)}))},t.prototype.oh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.Vo.ho(n,t)}))},t.prototype.hh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return e.Oo.ah(n,t).next((function(i){return i?(r=i,An.resolve(r)):e.Oo.fh(n).next((function(i){return r=new Te(t,i,0,n.Zo),e.Oo.lh(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.Do.get(n.targetId)&&(e.Do=e.Do.lt(n.targetId,n),e.So.set(t,n.targetId)),n}))},t.prototype.ah=function(t,e){var n=this.So.get(e);return void 0!==n?An.resolve(this.Do.get(n)):this.Oo.ah(t,e)},t.prototype.dh=function(t,e){var n=this,r=this.Do.get(t);y(null!==r,"Tried to release nonexistent target: "+t);var i=e?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.Eo.Pu(t);return e?An.resolve():An.forEach(o,(function(t){return n.persistence.As.Ru(i,t)})).next((function(){n.persistence.As.removeTarget(i,r)}))})).then((function(){n.Do=n.Do.remove(t),n.So.delete(r.target)}))},t.prototype.vh=function(t,e){var n=this,r=ut.MIN,i=Ue();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.ah(o,t.Yn()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Oo.wh(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.To.do(o,t,e?r:ut.MIN,e?i:Ue())})).next((function(t){return{documents:t,mh:i}}))}))},t.prototype.ph=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e.Oo.wh(n,t)}))},t.prototype.gh=function(){return this.persistence.gh()},t.prototype.bh=function(t){this.oo.$s(t)},t.prototype.yh=function(t){this.persistence.yh(t)},t.prototype.Ko=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=An.resolve();return o.forEach((function(r){a=a.next((function(){return n.Zu(t,r)})).next((function(t){var o=t,a=e._u.get(r);y(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.h(a)<0)&&((o=i.Wt(r,o,e))?n.Yu(o,e.yu):y(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),a.next((function(){return r.oo.Ys(t,i)}))},t.prototype._h=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.Ih(n,e.Do)}))},t.prototype.Th=function(t){var e=this,n=this.Do.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return e.Oo.ye(n,t).next((function(t){return t?t.target:null}))}))},t.prototype.Eh=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.ko.Eh(e,t.Ro)})).then((function(e){var n=e.Dh,r=e.readTime;return t.Ro=r,n}))},t.prototype.jo=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.ko.Sh(t)}))];case 1:return t.Ro=n.sent(),[2]}}))}))},t.rh=3e8,t}();function Xn(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){if(t.code!==M.FAILED_PRECONDITION||t.message!==In)throw t;return d("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=_(n,i);return 0===a?_(r,o):a}var $n=function(){function t(t){this.Rh=t,this.buffer=new yt(Kn),this.Ch=0}return t.prototype.Ah=function(){return++this.Ch},t.prototype.Ph=function(t){var e=[t,this.Ah()];if(this.buffer.size<this.Rh)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Kn(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Qn={kh:!1,Nh:0,Oh:0,Fh:0},Jn=function(){function t(t,e,n){this.Vh=t,this.Uh=e,this.xh=n}return t.jh=function(e){return new t(e,t.Lh,t.qh)},t.Bh=-1,t.Mh=1048576,t.Qh=41943040,t.Lh=10,t.qh=1e3,t.Gh=new t(t.Qh,t.Lh,t.qh),t.DISABLED=new t(t.Bh,0,0),t}(),Zn=function(){function t(t,e,n){this.Wh=t,this.Qr=e,this.zh=n,this.Kh=!1,this.Hh=null}return t.prototype.start=function(){y(null===this.Hh,"Cannot start an already started LruScheduler"),this.Wh.params.Vh!==Jn.Bh&&this.Jh()},t.prototype.stop=function(){this.Hh&&(this.Hh.cancel(),this.Hh=null)},Object.defineProperty(t.prototype,"Co",{get:function(){return null!==this.Hh},enumerable:!0,configurable:!0}),t.prototype.Jh=function(){var t=this;y(null===this.Hh,"Cannot schedule GC while a task is pending");var e=this.Kh?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.Hh=this.Qr.fu("lru_garbage_collection",e,(function(){return t.Hh=null,t.Kh=!0,t.zh._h(t.Wh).then((function(){return t.Jh()})).catch(Xn)}))},t}(),tr=function(){function t(t,e){this.Yh=t,this.params=e}return t.prototype.Xh=function(t,e){return this.Yh.$h(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Zh=function(t,e){var n=this;if(0===e)return An.resolve(dn.Mr);var r=new $n(e);return this.Yh.ce(t,(function(t){return r.Ph(t.sequenceNumber)})).next((function(){return n.Yh.tc(t,(function(t){return r.Ph(t)}))})).next((function(){return r.maxValue}))},t.prototype.nc=function(t,e,n){return this.Yh.nc(t,e,n)},t.prototype.ic=function(t,e){return this.Yh.ic(t,e)},t.prototype.Ih=function(t,e){var n=this;return this.params.Vh===Jn.Bh?(d("LruGarbageCollector","Garbage collection skipped; disabled"),An.resolve(Qn)):this.ec(t).next((function(r){return r<n.params.Vh?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Vh),Qn):n.rc(t,e)}))},t.prototype.ec=function(t){return this.Yh.ec(t)},t.prototype.rc=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.Xh(t,this.params.Uh).next((function(e){return e>c.params.xh?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.xh+" from "+e),r=c.params.xh):r=e,o=Date.now(),c.Zh(t,r)})).next((function(r){return n=r,a=Date.now(),c.nc(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.ic(t,n)})).next((function(t){return u=Date.now(),f()<=0&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),An.resolve({kh:!0,Nh:r,Oh:i,Fh:t})}))},t}(),er=function(){function t(t,e){this.As=t,this.serializer=e,this.uc=Hn.ro()}return t.prototype.fh=function(t){var e=this;return this.sc(t).next((function(n){return n.highestTargetId=e.uc.after(n.highestTargetId),e.oc(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Jo=function(t){return this.sc(t).next((function(t){return ut.L(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.hc=function(t){return ir(t.Xs)},t.prototype.eh=function(t,e,n){var r=this;return this.sc(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.oc(t,i)}))},t.prototype.lh=function(t,e){var n=this;return this.cc(t,e).next((function(){return n.sc(t).next((function(r){return r.targetCount+=1,n.ac(e,r),n.oc(t,r)}))}))},t.prototype.nh=function(t,e){return this.cc(t,e)},t.prototype.fc=function(t,e){var n=this;return this.lc(t,e.targetId).next((function(){return nr(t).delete(e.targetId)})).next((function(){return n.sc(t)})).next((function(e){return y(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,n.oc(t,e)}))},t.prototype.nc=function(t,e,n){var r=this,i=0,o=[];return nr(t).Ss((function(a,s){var u=r.serializer.dc(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.fc(t,u)))})).next((function(){return An.Wu(o)})).next((function(){return i}))},t.prototype.ce=function(t,e){var n=this;return nr(t).Ss((function(t,r){var i=n.serializer.dc(r);e(i)}))},t.prototype.sc=function(t){return rr(t.Xs)},t.prototype.oc=function(t,e){return(n=t,jr.ds(n,Mr.store)).put(Mr.key,e);var n},t.prototype.cc=function(t,e){return nr(t).put(this.serializer.vc(e))},t.prototype.ac=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.wc=function(t){return this.sc(t).next((function(t){return t.targetCount}))},t.prototype.ah=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return nr(t).Ss({range:i,index:Sr.queryTargetsIndexName},(function(t,r,i){var a=n.serializer.dc(r);e.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},t.prototype.$o=function(t,e,n){var r=this,i=[],o=or(t);return e.forEach((function(e){var a=yn(e.path);i.push(o.put(new Tr(n,a))),i.push(r.As.Du(t,e))})),An.Wu(i)},t.prototype.Xo=function(t,e,n){var r=this,i=or(t);return An.forEach(e,(function(e){var o=yn(e.path);return An.Wu([i.delete([n,o]),r.As.Ru(t,e)])}))},t.prototype.lc=function(t,e){var n=or(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.wh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=or(t),i=Ue();return r.Ss({range:n,Ds:!0},(function(t,e,n){var r=wn(t[1]),o=new pt(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ou=function(t,e){var n=yn(e.path),r=IDBKeyRange.bound([n],[x(n)],!1,!0),i=0;return or(t).Ss({index:Tr.documentTargetsIndex,Ds:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.ye=function(t,e){var n=this;return nr(t).get(e).next((function(t){return t?n.serializer.dc(t):null}))},t}();function nr(t){return jr.ds(t,Sr.store)}function rr(t){return Rn.ds(t,Mr.store).get(Mr.key).next((function(t){return y(null!==t,"Missing metadata row."),t}))}function ir(t){return rr(t).next((function(t){return t.highestListenSequenceNumber}))}function or(t){return jr.ds(t,Tr.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ar=function(){function t(t,e){this.serializer=t,this.Cs=e}return t.prototype.Yu=function(t,e,n){return ur(t).put(cr(e),n)},t.prototype.$u=function(t,e){var n=ur(t),r=cr(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.mc(t,r)}))},t.prototype.Zu=function(t,e){var n=this;return ur(t).get(cr(e)).next((function(t){return n.pc(t)}))},t.prototype.gc=function(t,e){var n=this;return ur(t).get(cr(e)).next((function(t){var e=n.pc(t);return e?{bc:e,size:hr(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Oe();return this.yc(t,e,(function(t,e){var i=n.pc(e);r=r.lt(t,i)})).next((function(){return r}))},t.prototype._c=function(t,e){var n=this,r=Oe(),i=new dt(pt.G);return this.yc(t,e,(function(t,e){var o=n.pc(e);o?(r=r.lt(t,o),i=i.lt(t,hr(e))):(r=r.lt(t,null),i=i.lt(t,0))})).next((function(){return{Ic:r,Tc:i}}))},t.prototype.yc=function(t,e,n){if(e.J())return An.resolve();var r=IDBKeyRange.bound(e.first().path.tt(),e.last().path.tt()),i=e.bt(),o=i.Dt();return ur(t).Ss({range:r},(function(t,e,r){for(var a=pt.at(t);o&&pt.G(o,a)<0;)n(o,null),o=i.Dt();o&&o.isEqual(a)&&(n(o,e),o=i.St()?i.Dt():null),o?r.ys(o.path.tt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.St()?i.Dt():null}))},t.prototype.do=function(t,e,n){var r=this;y(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Le(),o=e.path.length+1,a={};if(n.isEqual(ut.MIN)){var s=e.path.tt();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.tt(),c=this.serializer.Ec(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=xr.collectionReadTimeIndex}return ur(t).Ss(a,(function(t,n,a){if(t.length===o){var s=r.serializer.Dc(n);e.path.$(s.key.path)?s instanceof Zt&&e.matches(s)&&(i=i.lt(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.Eh=function(t,e){var n=this,r=Re(),i=this.serializer.Ec(e),o=ur(t),a=IDBKeyRange.lowerBound(i,!0);return o.Ss({index:xr.readTimeIndex,range:a},(function(t,e){var o=n.serializer.Dc(e);r=r.lt(o.key,o),i=e.readTime})).next((function(){return{Dh:r,readTime:n.serializer.Sc(i)}}))},t.prototype.Sh=function(t){var e=this,n=ur(t),r=ut.MIN;return n.Ss({index:xr.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.Sc(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.Wo=function(e){return new t.Rc(this,!!e&&e.zo)},t.prototype.Cc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return sr(t).get(Er.key).next((function(t){return y(!!t,"Missing document cache metadata"),t}))},t.prototype.mc=function(t,e){return sr(t).put(Er.key,e)},t.prototype.pc=function(t){if(t){var e=this.serializer.Dc(t);return e instanceof te&&e.version.isEqual(ut.q())?null:e}return null},t.Rc=function(t){function e(e,n){var r=t.call(this)||this;return r.Ac=e,r.zo=n,r.Pc=new Mn((function(t){return t.toString()})),r}return o.__extends(e,t),e.prototype.es=function(t){var e=this,n=[],r=0,i=new yt((function(t,e){return _(t.nt(),e.nt())}));return this.Ku.forEach((function(o,a){var s=e.Pc.get(o);if(y(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){y(!e.readTime.isEqual(ut.MIN),"Cannot add a document with a read time of zero");var u=e.Ac.serializer.kc(a,e.readTime);i=i.add(o.path.H());var c=hr(u);r+=c-s,n.push(e.Ac.Yu(t,o,u))}else if(r-=s,e.zo){var h=e.Ac.serializer.kc(new te(o,ut.q()),e.readTime);n.push(e.Ac.Yu(t,o,h))}else n.push(e.Ac.$u(t,o))})),i.forEach((function(r){n.push(e.Ac.Cs.Ls(t,r))})),n.push(this.Ac.updateMetadata(t,r)),An.Wu(n)},e.prototype.ts=function(t,e){var n=this;return this.Ac.gc(t,e).next((function(t){return null===t?(n.Pc.set(e,0),null):(n.Pc.set(e,t.size),t.bc)}))},e.prototype.ns=function(t,e){var n=this;return this.Ac._c(t,e).next((function(t){var e=t.Ic;return t.Tc.forEach((function(t,e){n.Pc.set(t,e)})),e}))},e}(Cn),t}();function sr(t){return jr.ds(t,Er.store)}function ur(t){return jr.ds(t,xr.store)}function cr(t){return t.path.tt()}function hr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lr=function(){function t(){this.Nc=new fr}return t.prototype.Ls=function(t,e){return this.Nc.add(e),An.resolve()},t.prototype.po=function(t,e){return An.resolve(this.Nc.getEntries(e))},t}(),fr=function(){function t(){this.index={}}return t.prototype.add=function(t){y(t.length%2==1,"Expected a collection path.");var e=t.X(),n=t.H(),r=this.index[e]||new yt(ht.G),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.X(),n=t.H(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new yt(ht.G)).tt()},t}(),pr=9,dr=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;y(n<r&&n>=0&&r<=pr,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Pn(e);n<1&&r>=1&&(function(t){t.createObjectStore(mr.store)}(t),function(t){t.createObjectStore(gr.store,{keyPath:gr.keyPath}),t.createObjectStore(yr.store,{keyPath:yr.keyPath,autoIncrement:!0}).createIndex(yr.userMutationsIndex,yr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(br.store)}(t),Cr(t),function(t){t.createObjectStore(xr.store)}(t));var a=An.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Tr.store),t.deleteObjectStore(Sr.store),t.deleteObjectStore(Mr.store)}(t),Cr(t)),a=a.next((function(){return function(t){var e=t.store(Mr.store),n=new Mr(0,0,ut.MIN.M(),0);return e.put(Mr.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(yr.store).Is().next((function(n){t.deleteObjectStore(yr.store),t.createObjectStore(yr.store,{keyPath:yr.keyPath,autoIncrement:!0}).createIndex(yr.userMutationsIndex,yr.userMutationsKeyPath,{unique:!0});var r=e.store(yr.store),i=n.map((function(t){return r.put(t)}));return An.Wu(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Ir.store,{keyPath:Ir.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Er.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(xr.store);e.createIndex(xr.readTimeIndex,xr.readTimeIndexPath,{unique:!1}),e.createIndex(xr.collectionReadTimeIndex,xr.collectionReadTimeIndexPath,{unique:!1})}(e)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(xr.store).Ss((function(t,n){e+=hr(n)})).next((function(){var n=new Er(e);return t.store(Er.store).put(Er.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(gr.store),r=t.store(yr.store);return n.Is().next((function(n){return An.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Is(yr.userMutationsIndex,i).next((function(r){return An.forEach(r,(function(r){y(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.Bs(r);return zn(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Tr.store),n=t.store(xr.store);return ir(t).next((function(t){var r=[];return n.Ss((function(n,i){var o=new ht(n),a=function(t){return[0,yn(t)]}(o);r.push(e.get(a).next((function(n){return n?An.resolve():function(n){return e.put(new Tr(0,yn(n),t))}(o)})))})).next((function(){return An.Wu(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Ar.store,{keyPath:Ar.keyPath});var n=e.store(Ar.store),r=new fr,i=function(t){if(r.add(t)){var e=t.X(),i=t.H();return n.put({collectionId:e,parent:yn(i)})}};return e.store(xr.store).Ss({Ds:!0},(function(t,e){var n=new ht(t);return i(n.H())})).next((function(){return e.store(br.store).Ss({Ds:!0},(function(t,e){t[0];var n=t[1],r=(t[2],wn(n));return i(r.H())}))}))},t}(),vr=function(t,e){this.seconds=t,this.nanoseconds=e},mr=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),gr=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),yr=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),br=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,yn(e)]},t.key=function(t,e,n){return[t,yn(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),_r=function(t,e){this.path=t,this.readTime=e},wr=function(t,e){this.path=t,this.version=e},xr=function(){function t(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),Er=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),Sr=function(){function t(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Tr=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,y(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),Mr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Ar=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function Cr(t){t.createObjectStore(Tr.store,{keyPath:Tr.keyPath}).createIndex(Tr.documentTargetsIndex,Tr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Sr.store,{keyPath:Sr.keyPath}).createIndex(Sr.queryTargetsIndexName,Sr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Mr.store)}var Ir=function(){function t(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}return t.store="clientMetadata",t.keyPath="clientId",t}(),Nr=[gr.store,yr.store,br.store,xr.store,Sr.store,mr.store,Mr.store,Tr.store],Rr=o.__spreadArrays(Nr,[Ir.store]),Or=o.__spreadArrays(Rr,[Er.store]),Pr=o.__spreadArrays(Or,[Ar.store]),Lr=function(){function t(){this.Oc=new fr}return t.prototype.Ls=function(t,e){var n=this;if(y(e.length%2==1,"Expected a collection path."),!this.Oc.has(e)){var r=e.X(),i=e.H();t.us((function(){n.Oc.add(e)}));var o={collectionId:r,parent:yn(i)};return Dr(t).put(o)}return An.resolve()},t.prototype.po=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[x(e),""],!1,!0);return Dr(t).Is(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(wn(o.parent))}return n}))},t}();function Dr(t){return jr.ds(t,Ar.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr=function(){function t(t){this.Fc=t}return t.prototype.Dc=function(t){if(t.document)return this.Fc.Ke(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=pt.at(t.noDocument.path),n=this.Vc(t.noDocument.readTime);return new te(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=pt.at(t.unknownDocument.path),n=this.Vc(t.unknownDocument.version),new ee(e,n)):g("Unexpected DbRemoteDocument")},t.prototype.kc=function(t,e){var n=this.Ec(e),r=t.key.path.H().tt();if(t instanceof Zt){var i=t.proto?t.proto:this.Fc.ze(t),o=t.hasCommittedMutations;return new xr(null,null,i,o,n,r)}if(t instanceof te){var a=t.key.path.tt(),s=this.Uc(t.version);return o=t.hasCommittedMutations,new xr(null,new _r(a,s),null,o,n,r)}if(t instanceof ee){a=t.key.path.tt();var u=this.Uc(t.version);return new xr(new wr(a,u),null,null,!0,n,r)}return g("Unexpected MaybeDocument")},t.prototype.Ec=function(t){var e=t.M();return[e.seconds,e.nanoseconds]},t.prototype.Sc=function(t){var e=new st(t[0],t[1]);return ut.L(e)},t.prototype.Uc=function(t){var e=t.M();return new vr(e.seconds,e.nanoseconds)},t.prototype.Vc=function(t){var e=new st(t.seconds,t.nanoseconds);return ut.L(e)},t.prototype.js=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.Fc.ir(t)})),i=e.mutations.map((function(t){return n.Fc.ir(t)}));return new yr(t,e.batchId,e.En.toMillis(),r,i)},t.prototype.Bs=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.Fc.sr(t)})),r=t.mutations.map((function(t){return e.Fc.sr(t)})),i=st.fromMillis(t.localWriteTimeMs);return new xn(t.batchId,i,n,r)},t.prototype.xc=function(t){var e=[];return t.forEach((function(t){e.push(yn(t.path))})),e},t.prototype.jc=function(t){for(var e=Ue(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new pt(wn(i)))}return e},t.prototype.dc=function(t){var e,n=this.Vc(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Vc(t.lastLimboFreeSnapshotVersion):ut.MIN;return e=void 0!==t.query.documents?this.Fc.vr(t.query):this.Fc.br(t.query),new Te(e,t.targetId,0,t.lastListenSequenceNumber,n,r,_e.fromBase64String(t.resumeToken))},t.prototype.vc=function(t){y(0===t.fi,"Only queries with purpose 0 may be stored, got "+t.fi);var e,n=this.Uc(t.li),r=this.Uc(t.lastLimboFreeSnapshotVersion);e=t.target.Nn()?this.Fc.dr(t.target):this.Fc.wr(t.target);var i=t.resumeToken.toBase64();return new Sr(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},t}(),Fr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Ur=function(t){function e(e,n){var r=t.call(this)||this;return r.Xs=e,r.Zo=n,r}return o.__extends(e,t),e}(Nn),jr=function(){function t(e,n,r,i,o,a,s,u){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Lc=a,this.qc=u,this.Bc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Mc=null,this.inForeground=!1,this.Qc=null,this.Gc=null,this.Wc=Number.NEGATIVE_INFINITY,this.zc=function(t){return Promise.resolve()},this.As=new Vr(this,o),this.Kc=n+t.Hc,this.serializer=new kr(s),this.document=i.document,this.Oo=new er(this.As,this.serializer),this.Cs=new Lr,this.so=new ar(this.serializer,this.Cs),!i.window||!i.window.localStorage)throw new A(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.Jc=this.window.localStorage}return t.ds=function(t,e){if(t instanceof Ur)return Rn.ds(t.Xs,e);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.Yc=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!t.cs())throw new A(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.Xc,e.Lc,e.serializer,e.qc)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return y(!this.Co,"IndexedDbPersistence double-started!"),y(null!==this.window,"Expected 'window' to be defined"),Rn.hs(this.Kc,pr,new dr(this.serializer)).then((function(e){return t.$c=e,t.Zc()})).then((function(){return t.ta(),t.na(),t.ia(),t.$c.runTransaction("readonly-idempotent",[Mr.store],(function(t){return ir(t)}))})).then((function(e){t.ea=new dn(e,t.qc)})).then((function(){t.Bc=!0})).catch((function(e){return t.$c&&t.$c.close(),Promise.reject(e)}))},t.prototype.ra=function(t){var e=this;return this.zc=function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.Co?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ua=function(t){var e=this;this.$c.vs((function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Lc.$r((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Co?[4,this.Zc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Zc=function(){var t=this;return this.$c.runTransaction("readwrite-idempotent",Pr,(function(e){return Br(e).put(new Ir(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.sa(e).next((function(e){e||(t.isPrimary=!1,t.Lc.$r((function(){return t.zc(!1)})))}))})).next((function(){return t.oa(e)})).next((function(n){return t.isPrimary&&!n?t.ha(e).next((function(){return!1})):!!n&&t.ca(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Lc.$r((function(){return t.zc(e)})),t.isPrimary=e}))},t.prototype.sa=function(t){var e=this;return zr(t).get(mr.key).next((function(t){return An.resolve(e.aa(t))}))},t.prototype.fa=function(t){return Br(t).delete(this.clientId)},t.prototype.la=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.da(this.Wc,18e5)?[3,2]:(this.Wc=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=t.ds(n,Ir.store);return r.Is().next((function(t){var n=e.va(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return An.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.wa(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.ia=function(){var t=this;this.Gc=this.Lc.fu("client_metadata_refresh",4e3,(function(){return t.Zc().then((function(){return t.la()})).then((function(){return t.ia()}))}))},t.prototype.aa=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.oa=function(t){var e=this;return zr(t).get(mr.key).next((function(n){if(null!==n&&e.da(n.leaseTimestampMs,5e3)&&!e.ma(n.ownerId)){if(e.aa(n)&&e.networkEnabled)return!0;if(!e.aa(n)){if(!n.allowTabSynchronization)throw new A(M.FAILED_PRECONDITION,Fr);return!1}}return!(!e.networkEnabled||!e.inForeground)||Br(t).Is().next((function(t){return void 0===e.va(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&d("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){switch(e.label){case 0:return this.Bc=!1,this.pa(),this.Gc&&(this.Gc.cancel(),this.Gc=null),this.ga(),this.ba(),[4,this.$c.runTransaction("readwrite-idempotent",[mr.store,Ir.store],(function(e){return t.ha(e).next((function(){return t.fa(e)}))}))];case 1:return e.sent(),this.$c.close(),this.ya(),[2]}}))}))},t.prototype.va=function(t,e){var n=this;return t.filter((function(t){return n.da(t.updateTimeMs,e)&&!n.ma(t.clientId)}))},t.prototype.gh=function(){var t=this;return this.$c.runTransaction("readonly-idempotent",[Ir.store],(function(e){return Br(e).Is().next((function(e){return t.va(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return t.cs()?(n=e+t.Hc,[4,Rn.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),t.prototype.Po=function(t){return y(this.Co,"Cannot initialize MutationQueue before persistence is started."),Un.ks(t,this.serializer,this.Cs,this.As)},t.prototype.Fo=function(){return y(this.Co,"Cannot initialize TargetCache before persistence is started."),this.Oo},t.prototype.No=function(){return y(this.Co,"Cannot initialize RemoteDocumentCache before persistence is started."),this.so},t.prototype.Uo=function(){return y(this.Co,"Cannot initialize IndexManager before persistence is started."),this.Cs},t.prototype.runTransaction=function(t,e,n){var r=this;d("IndexedDbPersistence","Starting transaction:",t);var i,o=e.endsWith("idempotent"),a=e.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.$c.runTransaction(a,Pr,(function(o){return i=new Ur(o,r.ea.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.sa(o).next((function(t){return!!t||r.oa(o)})).next((function(e){if(!e)throw v("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Lc.$r((function(){return r.zc(!1)})),new A(M.FAILED_PRECONDITION,In);return n(i)})).next((function(t){return r.ca(o).next((function(){return t}))})):r._a(o).next((function(){return n(i)}))})).then((function(t){return i.ss(),t}))},t.prototype._a=function(t){var e=this;return zr(t).get(mr.key).next((function(t){if(null!==t&&e.da(t.leaseTimestampMs,5e3)&&!e.ma(t.ownerId)&&!e.aa(t)&&!t.allowTabSynchronization)throw new A(M.FAILED_PRECONDITION,Fr)}))},t.prototype.ca=function(t){var e=new mr(this.clientId,this.allowTabSynchronization,Date.now());return zr(t).put(mr.key,e)},t.cs=function(){return Rn.cs()},t.Ia=function(t){var e=t.s.projectId;return t.s.o||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.ha=function(t){var e=this,n=zr(t);return n.get(mr.key).next((function(t){return e.aa(t)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(mr.key)):An.resolve()}))},t.prototype.da=function(t,e){var n=Date.now();return!(t<n-e)&&(!(t>n)||(v("Detected an update time that is in the future: "+t+" > "+n),!1))},t.prototype.ta=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Qc=function(){t.Lc.$r((function(){return t.inForeground="visible"===t.document.visibilityState,t.Zc()}))},this.document.addEventListener("visibilitychange",this.Qc),this.inForeground="visible"===this.document.visibilityState)},t.prototype.ga=function(){this.Qc&&(y(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.Qc),this.Qc=null)},t.prototype.na=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Mc=function(){t.pa(),t.Lc.$r((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Mc))},t.prototype.ba=function(){this.Mc&&(y("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Mc),this.Mc=null)},t.prototype.ma=function(t){try{var e=null!==this.Jc.getItem(this.wa(t));return d("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return v("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.pa=function(){try{this.Jc.setItem(this.wa(this.clientId),String(Date.now()))}catch(t){v("Failed to set zombie client id.",t)}},t.prototype.ya=function(){try{this.Jc.removeItem(this.wa(this.clientId))}catch(t){}},t.prototype.wa=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.Hc="main",t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t){return t.store(mr.store)}function Br(t){return t.store(Ir.store)}var Vr=function(){function t(t,e){this.db=t,this.Ta=null,this.Wh=new tr(this,e)}return t.prototype.$h=function(t){var e=this.Ea(t);return this.db.Fo().wc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Ea=function(t){var e=0;return this.tc(t,(function(t){e++})).next((function(){return e}))},t.prototype.ce=function(t,e){return this.db.Fo().ce(t,e)},t.prototype.tc=function(t,e){return this.Da(t,(function(t,n){return e(n)}))},t.prototype.Ao=function(t){this.Ta=t},t.prototype.Du=function(t,e){return Gr(t,e)},t.prototype.Ru=function(t,e){return Gr(t,e)},t.prototype.nc=function(t,e,n){return this.db.Fo().nc(t,e,n)},t.prototype.Zs=function(t,e){return Gr(t,e)},t.prototype.Sa=function(t,e){return this.Ta.Ou(e)?An.resolve(!0):function(t,e){var n=!1;return Gn(t).Rs((function(r){return jn(t,r,e).next((function(t){return t&&(n=!0),An.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.ic=function(t,e){var n=this,r=this.db.No().Wo(),i=[],o=0;return this.Da(t,(function(a,s){if(s<=e){var u=n.Sa(t,a).next((function(e){if(!e)return o++,r.Zu(t,a).next((function(){return r.$u(a),or(t).delete([0,yn(a.path)])}))}));i.push(u)}})).next((function(){return An.Wu(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.di(t.Zo);return this.db.Fo().nh(t,n)},t.prototype.ih=function(t,e){return Gr(t,e)},t.prototype.Da=function(t,e){var n,r=or(t),i=dn.Mr;return r.Ss({index:Tr.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==dn.Mr&&e(new pt(wn(n)),i),i=s,n=a):i=dn.Mr})).next((function(){i!==dn.Mr&&e(new pt(wn(n)),i)}))},t.prototype.ec=function(t){return this.db.No().Cc(t)},t}();function Gr(t,e){return or(t).put(function(t,e){return new Tr(0,yn(t.path),e)}(e,t.Zo))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr=function(){function t(){}return t.prototype.xo=function(t){this.Ra=t},t.prototype.do=function(t,e,n,r){var i=this;return y(void 0!==this.Ra,"setLocalDocumentsView() not called"),e.Jn()||n.isEqual(ut.MIN)?this.Ca(t,e):this.Ra.fo(t,r).next((function(o){var a=i.Aa(e,o);return(e.ii()||e.ei())&&i.Pa(e.Fn,a,r,n)?i.Ca(t,e):(f()<=0&&d("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.Ra.do(t,e,n).next((function(t){return a.forEach((function(e){t=t.lt(e.key,e)})),t})))}))},t.prototype.Aa=function(t,e){var n=new yt((function(e,n){return t.Xn(e,n)}));return e.forEach((function(e,r){r instanceof Zt&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.Pa=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.h(r)>0)},t.prototype.Ca=function(t,e){return f()<=0&&d("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Ra.do(t,e,ut.MIN)},t}(),Wr=function(){function t(t,e){this.Cs=t,this.As=e,this.oo=[],this.ka=1,this.lastStreamToken=_e.ai,this.Na=new yt(Tn.Sn)}return t.prototype.Ns=function(t){return An.resolve(0===this.oo.length)},t.prototype.Os=function(t,e,n){var r=e.batchId,i=this.Oa(r,"acknowledged");y(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.oo[i];return y(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,An.resolve()},t.prototype.Vs=function(t){return An.resolve(this.lastStreamToken)},t.prototype.Us=function(t,e){return this.lastStreamToken=e,An.resolve()},t.prototype.xs=function(t,e,n,r){y(0!==r.length,"Mutation batches should not be empty");var i=this.ka;this.ka++,this.oo.length>0&&y(this.oo[this.oo.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new xn(i,e,n,r);this.oo.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.Na=this.Na.add(new Tn(u.key,i)),this.Cs.Ls(t,u.key.path.H())}return An.resolve(o)},t.prototype.qs=function(t,e){return An.resolve(this.Fa(e))},t.prototype.Ms=function(t,e){var n=this.Fa(e);return y(null!=n,"Failed to find local mutation batch."),An.resolve(n.keys())},t.prototype.Qs=function(t,e){var n=e+1,r=this.Va(n),i=r<0?0:r;return An.resolve(this.oo.length>i?this.oo[i]:null)},t.prototype.Gs=function(){return An.resolve(0===this.oo.length?-1:this.ka-1)},t.prototype.Ws=function(t){return An.resolve(this.oo.slice())},t.prototype.zs=function(t,e){var n=this,r=new Tn(e,0),i=new Tn(e,Number.POSITIVE_INFINITY),o=[];return this.Na.Lt([r,i],(function(t){y(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.Fa(t.Fu);y(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),An.resolve(o)},t.prototype.Ks=function(t,e){var n=this,r=new yt(_);return e.forEach((function(t){var e=new Tn(t,0),i=new Tn(t,Number.POSITIVE_INFINITY);n.Na.Lt([e,i],(function(e){y(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.Fu)}))})),An.resolve(this.Ua(r))},t.prototype.Js=function(t,e){y(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;pt.ht(i)||(i=i.child(""));var o=new Tn(new pt(i),0),a=new yt(_);return this.Na.qt((function(t){var e=t.key.path;return!!n.$(e)&&(e.length===r&&(a=a.add(t.Fu)),!0)}),o),An.resolve(this.Ua(a))},t.prototype.Ua=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Fa(t);null!==r&&n.push(r)})),n},t.prototype.Ys=function(t,e){var n=this;y(0===this.Oa(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.oo.shift();var r=this.Na;return An.forEach(e.mutations,(function(i){var o=new Tn(i.key,e.batchId);return r=r.delete(o),n.As.Zs(t,i.key)})).next((function(){n.Na=r}))},t.prototype.$s=function(t){},t.prototype.Ou=function(t,e){var n=new Tn(e,0),r=this.Na.Bt(n);return An.resolve(e.isEqual(r&&r.key))},t.prototype.to=function(t){return 0===this.oo.length&&y(this.Na.J(),"Document leak -- detected dangling mutation references when queue is empty."),An.resolve()},t.prototype.Oa=function(t,e){var n=this.Va(t);return y(n>=0&&n<this.oo.length,"Batches must exist to be "+e),n},t.prototype.Va=function(t){return 0===this.oo.length?0:t-this.oo[0].batchId},t.prototype.Fa=function(t){var e=this.Va(t);if(e<0||e>=this.oo.length)return null;var n=this.oo[e];return y(n.batchId===t,"If found batch must match"),n},t}(),qr=function(){function t(t,e){this.Cs=t,this.xa=e,this.docs=new dt(pt.G),this.size=0}return t.prototype.Yu=function(t,e,n){y(!n.isEqual(ut.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.xa(e);return this.docs=this.docs.lt(r,{bc:e,size:a,readTime:n}),this.size+=a-o,this.Cs.Ls(t,r.path.H())},t.prototype.$u=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Zu=function(t,e){var n=this.docs.get(e);return An.resolve(n?n.bc:null)},t.prototype.getEntries=function(t,e){var n=this,r=Oe();return e.forEach((function(t){var e=n.docs.get(t);r=r.lt(t,e?e.bc:null)})),An.resolve(r)},t.prototype.do=function(t,e,n){y(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Le(),i=new pt(e.path.child("")),o=this.docs.yt(i);o.St();){var a=o.Dt(),s=a.key,u=a.value,c=u.bc,h=u.readTime;if(!e.path.$(s.path))break;h.h(n)<=0||c instanceof Zt&&e.matches(c)&&(r=r.lt(c.key,c))}return An.resolve(r)},t.prototype.ja=function(t,e){return An.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Eh=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.Sh=function(t){return An.resolve(ut.MIN)},t.prototype.Wo=function(e){return new t.Rc(this)},t.prototype.Cc=function(t){return An.resolve(this.size)},t.Rc=function(t){function e(e){var n=t.call(this)||this;return n.Ac=e,n}return o.__extends(e,t),e.prototype.es=function(t){var e=this,n=[];return this.Ku.forEach((function(r,i){i?n.push(e.Ac.Yu(t,i,e.readTime)):e.Ac.$u(r)})),An.Wu(n)},e.prototype.ts=function(t,e){return this.Ac.Zu(t,e)},e.prototype.ns=function(t,e){return this.Ac.getEntries(t,e)},e}(Cn),t}(),Yr=function(){function t(t){this.persistence=t,this.La=new Mn((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=ut.MIN,this.highestTargetId=0,this.qa=0,this.Ba=new Sn,this.targetCount=0,this.uc=Hn.ro()}return t.prototype.ce=function(t,e){return this.La.forEach((function(t,n){return e(n)})),An.resolve()},t.prototype.Jo=function(t){return An.resolve(this.lastRemoteSnapshotVersion)},t.prototype.hc=function(t){return An.resolve(this.qa)},t.prototype.fh=function(t){var e=this.uc.after(this.highestTargetId);return this.highestTargetId=e,An.resolve(e)},t.prototype.eh=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.qa&&(this.qa=e),An.resolve()},t.prototype.cc=function(t){this.La.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.qa&&(this.qa=t.sequenceNumber)},t.prototype.lh=function(t,e){return y(!this.La.has(e.target),"Adding a target that already exists"),this.cc(e),this.targetCount+=1,An.resolve()},t.prototype.nh=function(t,e){return y(this.La.has(e.target),"Updating a non-existent target"),this.cc(e),An.resolve()},t.prototype.fc=function(t,e){return y(this.targetCount>0,"Removing a target from an empty cache"),y(this.La.has(e.target),"Removing a non-existent target from the cache"),this.La.delete(e.target),this.Ba.Pu(e.targetId),this.targetCount-=1,An.resolve()},t.prototype.nc=function(t,e,n){var r=this,i=0,o=[];return this.La.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.La.delete(a),o.push(r.lc(t,s.targetId)),i++)})),An.Wu(o).next((function(){return i}))},t.prototype.wc=function(t){return An.resolve(this.targetCount)},t.prototype.ah=function(t,e){var n=this.La.get(e)||null;return An.resolve(n)},t.prototype.ye=function(t,e){return g("Not yet implemented.")},t.prototype.$o=function(t,e,n){this.Ba.Su(e,n);var r=this.persistence.As,i=[];return r&&e.forEach((function(e){i.push(r.Du(t,e))})),An.Wu(i)},t.prototype.Xo=function(t,e,n){this.Ba.Au(e,n);var r=this.persistence.As,i=[];return r&&e.forEach((function(e){i.push(r.Ru(t,e))})),An.Wu(i)},t.prototype.lc=function(t,e){return this.Ba.Pu(e),An.resolve()},t.prototype.wh=function(t,e){var n=this.Ba.Nu(e);return An.resolve(n)},t.prototype.Ou=function(t,e){return An.resolve(this.Ba.Ou(e))},t}(),Xr=function(){function t(t,e){var n=this;this.clientId=t,this.Ma={},this.ea=new dn(0),this.Bc=!1,this.Bc=!0,this.As=e(this),this.Oo=new Yr(this),this.Cs=new lr,this.so=new qr(this.Cs,(function(t){return n.As.Qa(t)}))}return t.Ga=function(e,n){return new t(e,(function(t){return new Qr(t,n)}))},t.Wa=function(e){return new t(e,(function(t){return new $r(t)}))},t.prototype.shutdown=function(){return this.Bc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),t.prototype.gh=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.ra=function(t){return t(!0)},t.prototype.ua=function(){},t.prototype.yh=function(t){},t.prototype.Uo=function(){return this.Cs},t.prototype.Po=function(t){var e=this.Ma[t.v()];return e||(e=new Wr(this.Cs,this.As),this.Ma[t.v()]=e),e},t.prototype.Fo=function(){return this.Oo},t.prototype.No=function(){return this.so},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new Kr(this.ea.next());return this.As.za(),n(i).next((function(t){return r.As.Ka(i).next((function(){return t}))})).Qu().then((function(t){return i.ss(),t}))},t.prototype.Ha=function(t,e){return An.zu((n=this.Ma,r=[],F(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.Ou(t,e)}})));var n,r},t}(),Kr=function(t){function e(e){var n=t.call(this)||this;return n.Zo=e,n}return o.__extends(e,t),e}(Nn),$r=function(){function t(t){this.persistence=t,this.Ta=null,this.Ja=null}return Object.defineProperty(t.prototype,"Ya",{get:function(){if(this.Ja)return this.Ja;throw g("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.Ao=function(t){this.Ta=t},t.prototype.Du=function(t,e){return this.Ya.delete(e),An.resolve()},t.prototype.Ru=function(t,e){return this.Ya.add(e),An.resolve()},t.prototype.Zs=function(t,e){return this.Ya.add(e),An.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.Fo();return r.wh(t,e.targetId).next((function(t){t.forEach((function(t){return n.Ya.add(t)}))})).next((function(){return r.fc(t,e)}))},t.prototype.za=function(){this.Ja=new Set},t.prototype.Ka=function(t){var e=this,n=this.persistence.No().Wo();return An.forEach(this.Ya,(function(r){return e.Xa(t,r).next((function(t){t||n.$u(r)}))})).next((function(){return e.Ja=null,n.apply(t)}))},t.prototype.ih=function(t,e){var n=this;return this.Xa(t,e).next((function(t){t?n.Ya.delete(e):n.Ya.add(e)}))},t.prototype.Qa=function(t){return 0},t.prototype.Xa=function(t,e){var n=this;return An.zu([function(){return n.persistence.Fo().Ou(t,e)},function(){return n.persistence.Ha(t,e)},function(){return An.resolve(n.Ta.Ou(e))}])},t}(),Qr=function(){function t(t,e){this.persistence=t,this.Ta=null,this.$a=new Mn((function(t){return yn(t.path)})),this.Wh=new tr(this,e)}return t.prototype.za=function(){},t.prototype.Ka=function(t){return An.resolve()},t.prototype.ce=function(t,e){return this.persistence.Fo().ce(t,e)},t.prototype.$h=function(t){var e=this.Za(t);return this.persistence.Fo().wc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Za=function(t){var e=0;return this.tc(t,(function(t){e++})).next((function(){return e}))},t.prototype.tc=function(t,e){var n=this;return An.forEach(this.$a,(function(r,i){return n.Sa(t,r,i).next((function(t){return t?An.resolve():e(i)}))}))},t.prototype.Ao=function(t){this.Ta=t},t.prototype.nc=function(t,e,n){return this.persistence.Fo().nc(t,e,n)},t.prototype.ic=function(t,e){var n=this,r=0,i=this.persistence.No(),o=i.Wo();return i.ja(t,(function(i){return n.Sa(t,i,e).next((function(t){t||(r++,o.$u(i))}))})).next((function(){return o.apply(t)})).next((function(){return r}))},t.prototype.Zs=function(t,e){return this.$a.set(e,t.Zo),An.resolve()},t.prototype.removeTarget=function(t,e){var n=e.di(t.Zo);return this.persistence.Fo().nh(t,n)},t.prototype.Du=function(t,e){return this.$a.set(e,t.Zo),An.resolve()},t.prototype.Ru=function(t,e){return this.$a.set(e,t.Zo),An.resolve()},t.prototype.ih=function(t,e){return this.$a.set(e,t.Zo),An.resolve()},t.prototype.Qa=function(t){var e=t.key.toString().length;return t instanceof Zt&&(e+=t.data().bn()),e},t.prototype.Sa=function(t,e,n){var r=this;return An.zu([function(){return r.persistence.Ha(t,e)},function(){return An.resolve(r.Ta.Ou(e))},function(){return r.persistence.Fo().Ou(t,e)},function(){var t=r.$a.get(e);return An.resolve(void 0!==t&&t>n)}])},t.prototype.ec=function(t){return this.persistence.No().Cc(t)},t}(),Jr=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Lc=t,this.Gr=e,this.tf=n,this.nf=r,this.if=i,this.ef=0,this.rf=null,this.uf=Date.now(),this.reset()}return t.prototype.reset=function(){this.ef=0},t.prototype.sf=function(){this.ef=this.if},t.prototype.hf=function(t){var e=this;this.cancel();var n=Math.floor(this.ef+this.cf()),r=Math.max(0,Date.now()-this.uf),i=Math.max(0,n-r);this.ef>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ef+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.rf=this.Lc.fu(this.Gr,i,(function(){return e.uf=Date.now(),t()})),this.ef*=this.nf,this.ef<this.tf&&(this.ef=this.tf),this.ef>this.if&&(this.ef=this.if)},t.prototype.cancel=function(){null!==this.rf&&(this.rf.cancel(),this.rf=null)},t.prototype.cf=function(){return(Math.random()-.5)*this.ef},t}(),Zr=function(){function t(t,e,n,r,i,o){this.Lc=t,this.af=n,this.connection=r,this.ff=i,this.listener=o,this.state=0,this.lf=0,this.df=null,this.stream=null,this.vf=new Jr(t,e)}return t.prototype.wf=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.mf=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?(y(0===this.state,"Already started"),this.auth()):this.pf()},t.prototype.stop=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.wf()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.gf=function(){y(!this.wf(),"Can only inhibit backoff in a stopped state"),this.state=0,this.vf.reset()},t.prototype.bf=function(){var t=this;this.mf()&&null===this.df&&(this.df=this.Lc.fu(this.af,6e4,(function(){return t.yf()})))},t.prototype._f=function(t){this.If(),this.stream.send(t)},t.prototype.yf=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.mf()?[2,this.close(0)]:[2]}))}))},t.prototype.If=function(){this.df&&(this.df.cancel(),this.df=null)},t.prototype.close=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return y(this.wf(),"Only started streams should be closed."),y(3===t||ne(e),"Can't provide an error when not in an error state."),this.If(),this.vf.cancel(),this.lf++,3!==t?this.vf.reset():e&&e.code===M.RESOURCE_EXHAUSTED?(v(e.toString()),v("Using maximum backoff delay to prevent overloading the backend."),this.vf.sf()):e&&e.code===M.UNAUTHENTICATED&&this.ff.I(),null!==this.stream&&(this.Tf(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ef(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Tf=function(){},t.prototype.auth=function(){var t=this;y(0===this.state,"Must be in initial state to auth"),this.state=1;var e=this.Df(this.lf),n=this.lf;this.ff.getToken().then((function(e){t.lf===n&&t.Sf(e)}),(function(n){e((function(){var e=new A(M.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Rf(e)}))}))},t.prototype.Sf=function(t){var e=this;y(1===this.state,"Trying to start stream in a non-starting state");var n=this.Df(this.lf);this.stream=this.Cf(t),this.stream.Af((function(){n((function(){return y(1===e.state,"Expected stream to be in state Starting, but was "+e.state),e.state=2,e.listener.Af()}))})),this.stream.Ef((function(t){n((function(){return e.Rf(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.pf=function(){var t=this;y(3===this.state,"Should only perform backoff when in Error state"),this.state=4,this.vf.hf((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return y(4===this.state,"Backoff elapsed but state is now: "+this.state),this.state=0,this.start(),y(this.wf(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.Rf=function(t){return y(this.wf(),"Can't handle server close on non-started stream"),d("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Df=function(t){var e=this;return function(n){e.Lc.$r((function(){return e.lf===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ti=function(t){function e(e,n,r,i,o){var a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this;return a.serializer=i,a}return o.__extends(e,t),e.prototype.Cf=function(t){return this.connection.Pf("Listen",t)},e.prototype.onMessage=function(t){this.vf.reset();var e=this.serializer.Ze(t),n=this.serializer.nr(t);return this.listener.kf(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.je,e.addTarget=this.serializer.Yn(t);var n=this.serializer.Tr(t);n&&(e.labels=n),this._f(e)},e.prototype.Nf=function(t){var e={};e.database=this.serializer.je,e.removeTarget=t,this._f(e)},e}(Zr),ei=function(t){function e(e,n,r,i,o){var a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this;return a.serializer=i,a.Of=!1,a.lastStreamToken=_e.ai,a}return o.__extends(e,t),Object.defineProperty(e.prototype,"Ff",{get:function(){return this.Of},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.Of=!1,t.prototype.start.call(this)},e.prototype.Tf=function(){this.Of&&this.Vf([])},e.prototype.Cf=function(t){return this.connection.Pf("Write",t)},e.prototype.onMessage=function(t){if(y(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.Re(t.streamToken),this.Of){this.vf.reset();var e=this.serializer.lr(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Uf(n,e)}return y(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.Of=!0,this.listener.xf()},e.prototype.jf=function(){y(this.mf(),"Writing handshake requires an opened stream"),y(!this.Of,"Handshake already completed");var t={};t.database=this.serializer.je,this._f(t)},e.prototype.Vf=function(t){var e=this;y(this.mf(),"Writing mutations requires an opened stream"),y(this.Of,"Handshake must be complete before writing mutations"),y(this.lastStreamToken.bn()>0,"Trying to write mutation without a token");var n={streamToken:this.serializer.Se(this.lastStreamToken),writes:t.map((function(t){return e.serializer.ir(t)}))};this._f(n)},e}(Zr),ni=function(){function t(t,e,n,r){this.Lc=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.Lf=function(t){return new ei(this.Lc,this.connection,this.credentials,this.serializer,t)},t.prototype.qf=function(t){return new ti(this.Lc,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.je,writes:t.map((function(t){return e.serializer.ir(t)}))};return this.Bf("Commit",n).then((function(t){return e.serializer.lr(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.je,documents:t.map((function(t){return e.serializer.Oe(t)}))};return this.Mf("BatchGetDocuments",n).then((function(n){var r=Re();n.forEach((function(t){var n=e.serializer.Ye(t);r=r.lt(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);y(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},t.prototype.Bf=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.Bf(t,e,r)})).catch((function(t){throw t.code===M.UNAUTHENTICATED&&n.credentials.I(),t}))},t.prototype.Mf=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.Mf(t,e,r)})).catch((function(t){throw t.code===M.UNAUTHENTICATED&&n.credentials.I(),t}))},t}(),ri=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];G("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(H("FieldPath","string",n,t[n]),0===t[n].length)throw new A(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Qf=new ft(t)}return t.documentId=function(){return t.Gf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","FieldPath",1,e);return this.Qf.isEqual(e.Qf)},t.Gf=new t(ft.st().nt()),t}(),ii=new RegExp("[~\\*/\\[\\]]"),oi=function(){function t(t){this.Wf=t}return t.delete=function(){return j("FieldValue.delete",arguments),ai.instance},t.serverTimestamp=function(){return j("FieldValue.serverTimestamp",arguments),si.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return B("FieldValue.arrayUnion",arguments,1),new ui(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return B("FieldValue.arrayRemove",arguments,1),new ci(t)},t.increment=function(t){return H("FieldValue.increment","number",1,t),z("FieldValue.increment",arguments,1),new hi(t)},t.prototype.isEqual=function(t){return this===t},t}(),ai=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return o.__extends(e,t),e.instance=new e,e}(oi),si=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return o.__extends(e,t),e.instance=new e,e}(oi),ui=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n.zf=e,n}return o.__extends(e,t),e}(oi),ci=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n.zf=e,n}return o.__extends(e,t),e}(oi),hi=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n.Kf=e,n}return o.__extends(e,t),e}(oi),li=cn(oi,"Use FieldValue.<field>() instead."),fi=/^__.*__$/,pi=function(){function t(t,e,n){this.data=t,this.un=e,this.fieldTransforms=n}return t.prototype.Hf=function(t,e){var n=[];return null!==this.un?n.push(new Rt(t,this.data,this.un,e)):n.push(new Nt(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Ot(t,this.fieldTransforms)),n},t}(),di=function(){function t(t,e,n){this.data=t,this.un=e,this.fieldTransforms=n}return t.prototype.Hf=function(t,e){var n=[new Rt(t,this.data,this.un,e)];return this.fieldTransforms.length>0&&n.push(new Ot(t,this.fieldTransforms)),n},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g("Unexpected case for UserDataSource: "+t)}}var mi=function(){function t(t,e,n,r,i,o){this.Jf=t,this.methodName=e,this.path=n,this.Yf=r,void 0===i&&this.Xf(),this.Yf=void 0!==r&&r,this.fieldTransforms=i||[],this.un=o||[]}return t.prototype.$f=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.Jf,this.methodName,n,!1,this.fieldTransforms,this.un);return r.Zf(e),r},t.prototype.tl=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.Jf,this.methodName,n,!1,this.fieldTransforms,this.un);return r.Xf(),r},t.prototype.nl=function(e){return new t(this.Jf,this.methodName,null,!0,this.fieldTransforms,this.un)},t.prototype.il=function(t){var e=null===this.path||this.path.J()?"":" (found in field "+this.path.toString()+")";return new A(M.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.un.find((function(e){return t.$(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.$(e.field)}))},t.prototype.Xf=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.Zf(this.path.get(t))},t.prototype.Zf=function(t){if(0===t.length)throw this.il("Document fields must not be empty");if(vi(this.Jf)&&fi.test(t))throw this.il('Document fields cannot begin and end with "__"')},t}(),gi=function(t,e){this.s=t,this.key=e},yi=function(){function t(t){this.el=t}return t.prototype.rl=function(t,e){var n=new mi(0,t,ft.et);_i("Data must be an object, but it was:",n,e);var r=this.ul(e,n);return new pi(r,null,n.fieldTransforms)},t.prototype.sl=function(t,e,n){var r=new mi(2,t,ft.et);_i("Data must be an object, but it was:",r,e);var i,o,a=this.ul(e,r);if(n){for(var s=new yt(ft.G),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof ri)l=h.Qf;else{if("string"!=typeof h)throw g("Expected stringOrFieldPath to be a string or a FieldPath");l=xi(t,h)}if(!r.contains(l))throw new A(M.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");s=s.add(l)}i=Tt.Jt(s),o=r.fieldTransforms.filter((function(t){return i.Xt(t.field)}))}else i=Tt.Yt(r.un),o=r.fieldTransforms;return new pi(a,i,o)},t.prototype.ol=function(t,e){var n=this,r=new mi(1,t,ft.et);_i("Data must be an object, but it was:",r,e);var i=new yt(ft.G),o=Kt.vn();F(e,(function(e,a){var s=xi(t,e),u=r.tl(s);if((a=n.hl(a,u))instanceof ai)i=i.add(s);else{var c=n.ul(a,u);null!=c&&(i=i.add(s),o.set(s,c))}}));var a=Tt.Jt(i);return new di(o.cn(),a,r.fieldTransforms)},t.prototype.cl=function(t,e,n,r){var i=new mi(1,t,ft.et),o=[wi(t,e)],a=[n];if(r.length%2!=0)throw new A(M.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(wi(t,r[s])),a.push(r[s+1]);var u=new yt(ft.G),c=Kt.vn();for(s=0;s<o.length;++s){var h=o[s],l=i.tl(h),f=this.hl(a[s],l);if(f instanceof ai)u=u.add(h);else{var p=this.ul(f,l);null!=p&&(u=u.add(h),c.set(h,p))}}var d=Tt.Jt(u);return new di(c.cn(),d,i.fieldTransforms)},t.prototype.al=function(t,e,n){void 0===n&&(n=!1);var r=new mi(n?4:3,t,ft.et),i=this.ul(e,r);return y(null!=i,"Parsed data should not be null."),y(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},t.prototype.hl=function(t,e){try{return this.el(t)}catch(t){var n=Ei(t);throw e.il(n)}},t.prototype.ul=function(t,e){if(bi(t=this.hl(t,e)))return _i("Unsupported field value:",e,t),this.fl(t,e);if(t instanceof oi)return this.ll(t,e),null;if(e.path&&e.un.push(e.path),t instanceof Array){if(e.Yf&&4!==e.Jf)throw e.il("Nested arrays are not supported");return this.dl(t,e)}return this.vl(t,e)},t.prototype.fl=function(t,e){var n=this,r=new dt(_);return U(t)?e.path&&e.path.length>0&&e.un.push(e.path):F(t,(function(t,i){var o=n.ul(i,e.$f(t));null!=o&&(r=r.lt(t,o))})),new Kt(r)},t.prototype.dl=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.ul(a,e.nl(r));null==s&&(s=Ft.yn),n.push(s),r++}return new Qt(n)},t.prototype.ll=function(t,e){if(!vi(e.Jf))throw e.il(t.Wf+"() can only be used with update() and set()");if(null===e.path)throw e.il(t.Wf+"() is not currently supported inside arrays");if(t instanceof ai){if(2!==e.Jf)throw 1===e.Jf?(y(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.il("FieldValue.delete() can only appear at the top level of your update data")):e.il("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.un.push(e.path)}else if(t instanceof si)e.fieldTransforms.push(new Mt(e.path,_t.instance));else if(t instanceof ui){var n=this.wl(t.Wf,t.zf),r=new wt(n);e.fieldTransforms.push(new Mt(e.path,r))}else if(t instanceof ci){n=this.wl(t.Wf,t.zf);var i=new xt(n);e.fieldTransforms.push(new Mt(e.path,i))}else if(t instanceof hi){var o=this.al("FieldValue.increment",t.Kf),a=new Et(o);e.fieldTransforms.push(new Mt(e.path,a))}else g("Unknown FieldValue type: "+t)},t.prototype.vl=function(t,e){if(null===t)return Ft.yn;if("number"==typeof t)return ie(t)?new Bt(t):new Vt(t);if("boolean"==typeof t)return Ut.of(t);if("string"==typeof t)return new Gt(t);if(t instanceof Date)return new Ht(st.fromDate(t));if(t instanceof st)return new Ht(new st(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof at)return new Xt(t);if(t instanceof fn)return new qt(t);if(t instanceof gi)return new Yt(t.s,t.key);throw e.il("Unsupported field value: "+Z(t))},t.prototype.wl=function(t,e){var n=this;return e.map((function(e,r){var i=new mi(3,t,ft.et);return n.ul(e,i.nl(r))}))},t}();function bi(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof st||t instanceof at||t instanceof fn||t instanceof gi||t instanceof oi)}function _i(t,e,n){if(!bi(n)||!J(n)){var r=Z(n);throw"an object"===r?e.il(t+" a custom object"):e.il(t+" "+r)}}function wi(t,e){if(e instanceof ri)return e.Qf;if("string"==typeof e)return xi(t,e);throw new A(M.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function xi(t,e){try{return function(t){if(t.search(ii)>=0)throw new A(M.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ri.bind.apply(ri,o.__spreadArrays([void 0],t.split("."))))}catch(e){throw new A(M.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Qf}catch(r){var n=Ei(r);throw new A(M.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Ei(t){return t instanceof Error?t.message:t.toString()}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Si=function(){function t(t){this.ml=t,this.pl=ke(),this.mutations=[],this.gl=!1,this.bl=null,this.yl=new Set}return t.prototype.lookup=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:if(this._l(),this.mutations.length>0)throw new A(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.ml.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof te||t instanceof Zt?n.Il(t):g("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.Hf(t,this.in(t))),this.yl.add(t)},t.prototype.update=function(t,e){try{this.write(e.Hf(t,this.Tl(t)))}catch(t){this.bl=t}this.yl.add(t)},t.prototype.delete=function(t){this.write([new Pt(t,this.in(t))]),this.yl.add(t)},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:if(this._l(),this.bl)throw this.bl;return t=this.pl,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new Lt(t,e.in(t)))})),[4,this.ml.commit(this.mutations)];case 1:return n.sent(),this.gl=!0,[2]}}))}))},t.prototype.Il=function(t){var e;if(t instanceof Zt)e=t.version;else{if(!(t instanceof te))throw g("Document in a transaction was a "+t.constructor.name);e=ut.q()}var n=this.pl.get(t.key);if(null!==n){if(!e.isEqual(n))throw new A(M.ABORTED,"Document version changed between two reads.")}else this.pl=this.pl.lt(t.key,e)},t.prototype.in=function(t){var e=this.pl.get(t);return!this.yl.has(t)&&e?Ct.updateTime(e):Ct.NONE},t.prototype.Tl=function(t){var e=this.pl.get(t);if(!this.yl.has(t)&&e){if(e.isEqual(ut.q()))throw new A(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ct.updateTime(e)}return Ct.exists(!0)},t.prototype.write=function(t){this._l(),this.mutations=this.mutations.concat(t)},t.prototype._l=function(){y(!this.gl,"A transaction object cannot be used after its update callback has been invoked.")},t}(),Ti=function(){function t(t,e){this.Qr=t,this.El=e,this.state="Unknown",this.Dl=0,this.Sl=null,this.Rl=!0}return t.prototype.Cl=function(){var t=this;0===this.Dl&&(this.Al("Unknown"),y(null===this.Sl,"onlineStateTimer shouldn't be started yet"),this.Sl=this.Qr.fu("online_state_timeout",1e4,(function(){return t.Sl=null,y("Unknown"===t.state,"Timer should be canceled if we transitioned to a different state."),t.Pl("Backend didn't respond within 10 seconds."),t.Al("Offline"),Promise.resolve()})))},t.prototype.kl=function(t){"Online"===this.state?(this.Al("Unknown"),y(0===this.Dl,"watchStreamFailures must be 0"),y(null===this.Sl,"onlineStateTimer must be null")):(this.Dl++,this.Dl>=1&&(this.Nl(),this.Pl("Connection failed 1 times. Most recent error: "+t.toString()),this.Al("Offline")))},t.prototype.set=function(t){this.Nl(),this.Dl=0,"Online"===t&&(this.Rl=!1),this.Al(t)},t.prototype.Al=function(t){t!==this.state&&(this.state=t,this.El(t))},t.prototype.Pl=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rl?(v(e),this.Rl=!1):d("OnlineStateTracker",e)},t.prototype.Nl=function(){null!==this.Sl&&(this.Sl.cancel(),this.Sl=null)},t}(),Mi=function(){function t(t,e,n,r,i){var a=this;this.zh=t,this.ml=e,this.Ol=[],this.Fl={},this.Vl=null,this.networkEnabled=!1,this.isPrimary=!1,this.Ul=i,this.Ul.xl((function(t){n.$r((function(){return o.__awaiter(a,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.jl()?(d("RemoteStore","Restarting streams for network reachability change."),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.ql=new Ti(n,r),this.Bl=this.ml.qf({Af:this.Ml.bind(this),Ef:this.Ql.bind(this),kf:this.Gl.bind(this)}),this.Wl=this.ml.Lf({Af:this.zl.bind(this),Ef:this.Kl.bind(this),xf:this.Hl.bind(this),Uf:this.Uf.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.jl()?(t=this.Wl,[4,this.zh.Vs()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.Jl()?this.Yl():this.ql.set("Unknown"),[4,this.Xl()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Offline"),[2]}}))}))},t.prototype.$l=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.Wl.stop()];case 1:return t.sent(),[4,this.Bl.stop()];case 2:return t.sent(),this.Ol.length>0&&(d("RemoteStore","Stopping write stream with "+this.Ol.length+" pending writes"),this.Ol=[]),this.Zl(),[2]}}))}))},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return d("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.Ul.shutdown(),this.ql.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){L(this.Fl,t.targetId)||(this.Fl[t.targetId]=t,this.Jl()?this.Yl():this.Bl.mf()&&this.td(t))},t.prototype.nd=function(t){y(L(this.Fl,t),"unlisten called on target no currently watched: "+t),delete this.Fl[t],this.Bl.mf()&&this.ed(t),U(this.Fl)&&(this.Bl.mf()?this.Bl.bf():this.jl()&&this.ql.set("Unknown"))},t.prototype.ye=function(t){return this.Fl[t]||null},t.prototype.be=function(t){return this.rd.be(t)},t.prototype.td=function(t){this.Vl.Xi(t.targetId),this.Bl.watch(t)},t.prototype.ed=function(t){this.Vl.Xi(t),this.Bl.Nf(t)},t.prototype.Yl=function(){y(this.Jl(),"startWatchStream() called when shouldStartWatchStream() is false."),this.Vl=new $e(this),this.Bl.start(),this.ql.Cl()},t.prototype.Jl=function(){return this.jl()&&!this.Bl.wf()&&!U(this.Fl)},t.prototype.jl=function(){return this.isPrimary&&this.networkEnabled},t.prototype.Zl=function(){this.Vl=null},t.prototype.Ml=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){return k(this.Fl,(function(e,n){t.td(n)})),[2]}))}))},t.prototype.Ql=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return void 0===t&&y(!this.Jl(),"Watch stream was stopped gracefully while still needed."),this.Zl(),this.Jl()?(this.ql.kl(t),this.Yl()):this.ql.set("Unknown"),[2]}))}))},t.prototype.Gl=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.ql.set("Online"),t instanceof Xe&&2===t.state&&t.cause?[2,this.ud(t)]:(t instanceof qe?this.Vl.ue(t):t instanceof Ye?this.Vl.de(t):(y(t instanceof Xe,"Expected watchChange to be an instance of WatchTargetChange"),this.Vl.he(t)),e.isEqual(ut.MIN)?[3,3]:[4,this.zh.Jo()]);case 1:return n=r.sent(),e.h(n)>=0?[4,this.sd(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.sd=function(t){var e=this;y(!t.isEqual(ut.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.Vl.me(t);return k(n.Si,(function(n,r){if(r.resumeToken.bn()>0){var i=e.Fl[n];i&&(e.Fl[n]=i.vi(r.resumeToken,t))}})),n.Ri.forEach((function(t){var n=e.Fl[t];if(n){e.Fl[t]=n.vi(_e.ai,n.li),e.ed(t);var r=new Te(n.target,t,1,n.sequenceNumber);e.td(r)}})),this.rd.Yo(n)},t.prototype.ud=function(t){var e=this;y(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return L(this.Fl,t)?(delete this.Fl[t],this.Vl.removeTarget(t),[2,this.rd.od(t,n)]):[2]}))}))}))})),r},t.prototype.Xl=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:return this.hd()?(t=this.Ol.length>0?this.Ol[this.Ol.length-1].batchId:-1,[4,this.zh.sh(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.Ol.length&&this.Wl.bf(),[3,4]);case 2:return this.ad(e),[4,this.Xl()];case 3:n.sent(),n.label=4;case 4:return this.fd()&&this.ld(),[2]}}))}))},t.prototype.hd=function(){return this.jl()&&this.Ol.length<10},t.prototype.dd=function(){return this.Ol.length},t.prototype.ad=function(t){y(this.hd(),"addToWritePipeline called when pipeline is full"),this.Ol.push(t),this.Wl.mf()&&this.Wl.Ff&&this.Wl.Vf(t.mutations)},t.prototype.fd=function(){return this.jl()&&!this.Wl.wf()&&this.Ol.length>0},t.prototype.ld=function(){y(this.fd(),"startWriteStream() called when shouldStartWriteStream() is false."),this.Wl.start()},t.prototype.zl=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.Wl.jf(),[2]}))}))},t.prototype.Hl=function(){var t=this;return this.zh.Us(this.Wl.lastStreamToken).then((function(){for(var e=0,n=t.Ol;e<n.length;e++){var r=n[e];t.Wl.Vf(r.mutations)}})).catch(Xn)},t.prototype.Uf=function(t,e){var n=this;y(this.Ol.length>0,"Got result for empty write pipeline");var r=this.Ol.shift(),i=En.from(r,t,e,this.Wl.lastStreamToken);return this.rd.vd(i).then((function(){return n.Xl()}))},t.prototype.Kl=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(n){return void 0===t&&y(!this.fd(),"Write stream was stopped gracefully while still needed."),t&&this.Ol.length>0?[2,(this.Wl.Ff?this.wd(t):this.md(t)).then((function(){e.fd()&&e.ld()}))]:[2]}))}))},t.prototype.md=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return Ae(t.code)?(d("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.Wl.lastStreamToken),this.Wl.lastStreamToken=_e.ai,[2,this.zh.Us(_e.ai).catch(Xn)]):[2]}))}))},t.prototype.wd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){return Ae(i=t.code)&&i!==M.ABORTED?(e=this.Ol.shift(),this.Wl.gf(),[2,this.rd.pd(e.batchId,t).then((function(){return n.Xl()}))]):[2];var i}))}))},t.prototype.gd=function(){return new Si(this.ml)},t.prototype.Ll=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.bd=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.jl()?(d("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.yd=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.$l()];case 3:e.sent(),this.ql.set("Unknown"),e.label=4;case 4:return[2]}}))}))},t}();
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(t,e){return y(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function Ci(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.l()&&(r+="_"+e.uid),r}function Ii(t,e){return"firestore_targets_"+t+"_"+e}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,y(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t._d=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new A(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(v("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ri=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,y(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t._d=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new A(r.error.code,r.error.message)),i?new t(e,r.state,o):(v("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Oi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t._d=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ze(),a=0;i&&a<r.activeTargetIds.length;++a)i=ie(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(v("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Pi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t._d=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(v("SharedClientState","Failed to parse online state: "+e),null)},t}(),Li=function(){function t(){this.activeTargetIds=ze()}return t.prototype.Td=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ed=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Id=function(){var t={activeTargetIds:this.activeTargetIds.tt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Di=function(){function t(e,n,r,i,o){if(this.Lc=e,this.platform=n,this.persistenceKey=r,this.Dd=i,this.rd=null,this.El=null,this.jr=null,this.Sd={},this.Rd=this.Cd.bind(this),this.Co=!1,this.Ad=[],!t.cs(this.platform))throw new A(M.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.Pd=Ai(this.persistenceKey,this.Dd),this.kd=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Sd[this.Dd]=new Li,this.Nd=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Od=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.Fd=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.Vd=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Rd)}return t.cs=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,a,s,u,c,h,l,f=this;return o.__generator(this,(function(o){switch(o.label){case 0:return y(!this.Co,"WebStorageSharedClientState already started"),y(null!==this.rd,"syncEngine property must be set before calling start()"),y(null!==this.El,"onlineStateHandler property must be set before calling start()"),[4,this.rd.gh()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Dd&&(i=this.getItem(Ai(this.persistenceKey,r)))&&(a=Oi._d(r,i))&&(this.Sd[a.clientId]=a);for(this.Ud(),(s=this.storage.getItem(this.Vd))&&(u=this.xd(s))&&this.jd(u),c=0,h=this.Ad;c<h.length;c++)l=h[c],this.Cd(l);return this.Ad=[],this.platform.window.addEventListener("unload",(function(){return f.shutdown()})),this.Co=!0,[2]}}))}))},t.prototype.Br=function(t){this.setItem(this.kd,JSON.stringify(t))},t.prototype.Ld=function(){var t=ze();return F(this.Sd,(function(e,n){t=t.Mt(n.activeTargetIds)})),t},t.prototype.qd=function(t){for(var e in this.Sd)if(this.Sd.hasOwnProperty(e)&&this.Sd[e].activeTargetIds.has(t))return!0;return!1},t.prototype.Bd=function(t){this.Md(t,"pending")},t.prototype.Qd=function(t,e,n){this.Md(t,e,n),this.Gd(t)},t.prototype.Wd=function(t){var e="not-current";if(this.qd(t)){var n=this.storage.getItem(Ii(this.persistenceKey,t));if(n){var r=Ri._d(t,n);r&&(e=r.state)}}return this.zd.Td(t),this.Ud(),e},t.prototype.Kd=function(t){this.zd.Ed(t),this.Ud()},t.prototype.Hd=function(t){return this.zd.activeTargetIds.has(t)},t.prototype.Jd=function(t){this.removeItem(Ii(this.persistenceKey,t))},t.prototype.Yd=function(t,e,n){this.Xd(t,e,n)},t.prototype.Lo=function(t,e,n){var r=this;e.forEach((function(t){r.Gd(t)})),this.currentUser=t,n.forEach((function(t){r.Bd(t)}))},t.prototype.$d=function(t){this.Zd(t)},t.prototype.shutdown=function(){this.Co&&(this.platform.window.removeEventListener("storage",this.Rd),this.removeItem(this.Pd),this.Co=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){d("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Cd=function(t){var e=this;if(t.storageArea===this.storage){if(d("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Pd)return void v("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Lc.$r((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,n,r,i,a,s;return o.__generator(this,(function(o){if(!this.Co)return this.Ad.push(t),[2];if(null===t.key)return[2];if(this.Nd.test(t.key)){if(null==t.newValue)return n=this.tv(t.key),[2,this.nv(n,null)];if(e=this.iv(t.key,t.newValue))return[2,this.nv(e.clientId,e)]}else if(this.Od.test(t.key)){if(null!==t.newValue&&(r=this.ev(t.key,t.newValue)))return[2,this.rv(r)]}else if(this.Fd.test(t.key)){if(null!==t.newValue&&(i=this.uv(t.key,t.newValue)))return[2,this.sv(i)]}else if(t.key===this.Vd){if(null!==t.newValue&&(a=this.xd(t.newValue)))return[2,this.jd(a)]}else t.key===this.kd&&(y(!!this.jr,"Missing sequenceNumberHandler"),(s=function(t){var e=dn.Mr;if(null!=t)try{var n=JSON.parse(t);y("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){v("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==dn.Mr&&this.jr(s));return[2]}))}))}))}},Object.defineProperty(t.prototype,"zd",{get:function(){return this.Sd[this.Dd]},enumerable:!0,configurable:!0}),t.prototype.Ud=function(){this.setItem(this.Pd,this.zd.Id())},t.prototype.Md=function(t,e,n){var r=new Ni(this.currentUser,t,e,n),i=Ci(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Id())},t.prototype.Gd=function(t){var e=Ci(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Zd=function(t){var e={clientId:this.Dd,onlineState:t};this.storage.setItem(this.Vd,JSON.stringify(e))},t.prototype.Xd=function(t,e,n){var r=Ii(this.persistenceKey,t),i=new Ri(t,e,n);this.setItem(r,i.Id())},t.prototype.tv=function(t){var e=this.Nd.exec(t);return e?e[1]:null},t.prototype.iv=function(t,e){var n=this.tv(t);return y(null!==n,"Cannot parse client state key '"+t+"'"),Oi._d(n,e)},t.prototype.ev=function(t,e){var n=this.Od.exec(t);y(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ni._d(new T(i),r,e)},t.prototype.uv=function(t,e){var n=this.Fd.exec(t);y(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Ri._d(r,e)},t.prototype.xd=function(t){return Pi._d(t)},t.prototype.rv=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(d("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.rd.ov(t.batchId,t.state,t.error)]}))}))},t.prototype.sv=function(t){return this.rd.hv(t.targetId,t.state,t.error)},t.prototype.nv=function(t,e){var n=this,r=this.Ld();e?this.Sd[t]=e:delete this.Sd[t];var i=this.Ld(),a=[],s=[];return i.forEach((function(t){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){return r.has(t)||a.push(t),[2]}))}))})),r.forEach((function(t){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){return i.has(t)||s.push(t),[2]}))}))})),this.rd.cv(a,s)},t.prototype.jd=function(t){this.Sd[t.clientId]&&this.El(t.onlineState)},t}(),ki=function(){function t(){this.av=new Li,this.fv={},this.rd=null,this.El=null,this.jr=null}return t.prototype.Bd=function(t){},t.prototype.Qd=function(t,e,n){},t.prototype.Wd=function(t){return this.av.Td(t),this.fv[t]||"not-current"},t.prototype.Yd=function(t,e,n){this.fv[t]=e},t.prototype.Kd=function(t){this.av.Ed(t)},t.prototype.Hd=function(t){return this.av.activeTargetIds.has(t)},t.prototype.Jd=function(t){delete this.fv[t]},t.prototype.Ld=function(){return this.av.activeTargetIds},t.prototype.qd=function(t){return this.av.activeTargetIds.has(t)},t.prototype.start=function(){return this.av=new Li,Promise.resolve()},t.prototype.Lo=function(t,e,n){},t.prototype.$d=function(t){},t.prototype.shutdown=function(){},t.prototype.Br=function(t){},t}(),Fi=function(t){this.key=t},Ui=function(t){this.key=t},ji=function(){function t(t,e){this.query=t,this.lv=e,this.dv=null,this.Ni=!1,this.vv=Ue(),this.Ii=Ue(),this.wv=new Be(t.Xn.bind(t))}return Object.defineProperty(t.prototype,"mv",{get:function(){return this.lv},enumerable:!0,configurable:!0}),t.prototype.pv=function(t,e){var n=this,r=e?e.gv:new Ve,i=e?e.wv:this.wv,o=e?e.Ii:this.Ii,a=i,s=!1,u=this.query.ii()&&i.size===this.query.limit?i.last():null,c=this.query.ei()&&i.size===this.query.limit?i.first():null;if(t.pt((function(t,e){var h=i.get(t),l=e instanceof Zt?e:null;l&&(y(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var f=!!h&&n.Ii.has(h.key),p=!!l&&(l.en||n.Ii.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.bv(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.query.Xn(l,u)>0||c&&n.query.Xn(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.ii()||this.query.ei())for(;a.size>this.query.limit;){var h=this.query.ii()?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return y(!s||!e,"View was refilled using docs that themselves needed refilling."),{wv:a,gv:r,Pa:s,Ii:o}},t.prototype.bv=function(t,e){return t.en&&e.hasCommittedMutations&&!e.en},t.prototype.es=function(t,e,n){var r=this;y(!t.Pa,"Cannot apply changes that need a refill");var i=this.wv;this.wv=t.wv,this.Ii=t.Ii;var o=t.gv.yi();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g("Unknown ChangeType: "+t)}};return n(t)-n(e)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.type,e.type)||r.query.Xn(t.doc,e.doc)})),this.yv(n);var a=e?this._v():[],s=0===this.vv.size&&this.Ni?1:0,u=s!==this.dv;return this.dv=s,0!==o.length||u?{snapshot:new Ge(this.query,t.wv,i,o,t.Ii,0===s,u,!1),Iv:a}:{Iv:a}},t.prototype.Tv=function(t){return this.Ni&&"Offline"===t?(this.Ni=!1,this.es({wv:this.wv,gv:new Ve,Ii:this.Ii,Pa:!1},!1)):{Iv:[]}},t.prototype.Ev=function(t){return!this.lv.has(t)&&!!this.wv.has(t)&&!this.wv.get(t).en},t.prototype.yv=function(t){var e=this;t&&(t.Oi.forEach((function(t){return e.lv=e.lv.add(t)})),t.Fi.forEach((function(t){return y(e.lv.has(t),"Modified document "+t+" not found in view.")})),t.Vi.forEach((function(t){return e.lv=e.lv.delete(t)})),this.Ni=t.Ni)},t.prototype._v=function(){var t=this;if(!this.Ni)return[];var e=this.vv;this.vv=Ue(),this.wv.forEach((function(e){t.Ev(e.key)&&(t.vv=t.vv.add(e.key))}));var n=[];return e.forEach((function(e){t.vv.has(e)||n.push(new Ui(e))})),this.vv.forEach((function(t){e.has(t)||n.push(new Fi(t))})),n},t.prototype.Dv=function(t){this.lv=t.mh,this.vv=Ue();var e=this.pv(t.documents);return this.es(e,!0)},t.prototype.Sv=function(){return Ge.Di(this.query,this.wv,this.Ii,0===this.dv)},t}(),zi=function(){function t(t,e,n,r){this.Qr=t,this.Rv=e,this.updateFunction=n,this.Kr=r,this.Cv=5,this.vf=new Jr(this.Qr,"retry_transaction")}return t.prototype.run=function(){this.Av()},t.prototype.Av=function(){var t=this;this.vf.hf((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return o.__generator(this,(function(r){return t=this.Rv.gd(),(e=this.Pv(t))&&e.then((function(e){n.Qr.$r((function(){return t.commit().then((function(){n.Kr.resolve(e)})).catch((function(t){n.kv(t)}))}))})).catch((function(t){n.kv(t)})),[2]}))}))}))},t.prototype.Pv=function(t){try{var e=this.updateFunction(t);return!ne(e)&&e.catch&&e.then?e:(this.Kr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Kr.reject(t),null}},t.prototype.kv=function(t){var e=this;this.Cv>0&&this.Nv(t)?(this.Cv-=1,this.Qr.$r((function(){return e.Av(),Promise.resolve()}))):this.Kr.reject(t)},t.prototype.Nv=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ae(e)}return!1},t}(),Bi=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Vi=function(t){this.key=t,this.Ov=!1},Gi=function(){function t(t,e,n,r){this.zh=t,this.Rv=e,this.Fv=n,this.currentUser=r,this.Vv=null,this.Uv=new Mn((function(t){return t.canonicalId()})),this.xv={},this.jv=new dt(pt.G),this.Lv={},this.qv=new Sn,this.Bv={},this.Mv=new Map,this.Qv=Hn.uo(),this.isPrimary=void 0,this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"Gv",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){y(null!==t,"SyncEngine listener cannot be null"),y(null===this.Vv,"SyncEngine already has a subscriber."),this.Vv=t},t.prototype.listen=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return this.Wv("listen()"),(r=this.Uv.get(t))?(e=r.targetId,this.Fv.Wd(e),n=r.view.Sv(),[3,4]):[3,1];case 1:return[4,this.zh.hh(t.Yn())];case 2:return i=o.sent(),a=this.Fv.Wd(i.targetId),e=i.targetId,[4,this.zv(t,e,"current"===a)];case 3:n=o.sent(),this.isPrimary&&this.Rv.listen(i),o.label=4;case 4:return this.Vv.kf([n]),[2,e]}}))}))},t.prototype.zv=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.zh.vh(t,!0)];case 1:return r=o.sent(),i=new ji(t,r.mh),a=i.pv(r.documents),s=We.ki(e,n&&"Offline"!==this.onlineState),y(0===(u=i.es(a,!0===this.isPrimary,s)).Iv.length,"View returned limbo docs before target ack from the server."),y(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new Bi(t,e,i),this.Uv.set(t,c),this.xv[e]||(this.xv[e]=[]),this.xv[e].push(t),[2,u.snapshot]}}))}))},t.prototype.Kv=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.zh.vh(t.query,!0)];case 1:return e=r.sent(),n=t.view.Dv(e),this.isPrimary&&this.Hv(t.targetId,n.Iv),[2,n]}}))}))},t.prototype.nd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return o.__generator(this,(function(i){switch(i.label){case 0:return this.Wv("unlisten()"),y(!!(e=this.Uv.get(t)),"Trying to unlisten on query not found:"+t),(n=this.xv[e.targetId]).length>1?(this.xv[e.targetId]=n.filter((function(e){return!e.isEqual(t)})),this.Uv.delete(t),[2]):this.isPrimary?(this.Fv.Kd(e.targetId),this.Fv.qd(e.targetId)?[3,2]:[4,this.zh.dh(e.targetId,!1).then((function(){r.Fv.Jd(e.targetId),r.Rv.nd(e.targetId),r.Jv(e.targetId)})).catch(Xn)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.Jv(e.targetId),[4,this.zh.dh(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.Wv("write()"),[4,this.zh.Qo(t)];case 1:return n=r.sent(),this.Fv.Bd(n.batchId),this.Yv(n.batchId,e),[4,this.Xv(n.Ku)];case 2:return r.sent(),[4,this.Rv.Xl()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new zi(t,this.Rv,e,n).run()},t.prototype.Yo=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:this.Wv("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zh.Yo(t)];case 2:return e=r.sent(),F(t.Si,(function(t,e){var r=n.Lv[Number(t)];r&&(y(e.Oi.size+e.Fi.size+e.Vi.size<=1,"Limbo resolution for single document contains multiple changes."),e.Oi.size>0?r.Ov=!0:e.Fi.size>0?y(r.Ov,"Received change for limbo target document without add."):e.Vi.size>0&&(y(r.Ov,"Received remove for limbo target document without add."),r.Ov=!1))})),[4,this.Xv(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Xn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Tv=function(t,e){if(this.isPrimary&&0===e||!this.isPrimary&&1===e){this.Wv("applyOnlineStateChange()");var n=[];this.Uv.forEach((function(e,r){var i=r.view.Tv(t);y(0===i.Iv.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.Vv.$v(t),this.Vv.kf(n),this.onlineState=t,this.isPrimary&&this.Fv.$d(t)}},t.prototype.od=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a,s,u=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this.Wv("rejectListens()"),this.Fv.Yd(t,"rejected",e),n=this.Lv[t],(r=n&&n.key)?(this.jv=this.jv.remove(r),delete this.Lv[t],i=(i=new dt(pt.G)).lt(r,new te(r,ut.q())),a=Ue().add(r),s=new He(ut.MIN,{},new yt(_),i,a),[2,this.Yo(s)]):[3,1];case 1:return[4,this.zh.dh(t,!1).then((function(){return u.Jv(t,e)})).catch(Xn)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.ov=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return this.Wv("applyBatchState()"),[4,this.zh.Go(t)];case 1:return null===(r=i.sent())?(d("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.Rv.Xl()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.Zv(t,n||null),this.zh.bh(t)):g("Unknown batchState: "+e),i.label=4;case 4:return[4,this.Xv(r)];case 5:return i.sent(),[2]}}))}))},t.prototype.vd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:this.Wv("applySuccessfulWrite()"),e=t.batch.batchId,this.Zv(e,null),this.tw(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zh.Os(t)];case 2:return n=r.sent(),this.Fv.Qd(e,"acknowledged"),[4,this.Xv(n)];case 3:return r.sent(),[3,6];case 4:return[4,Xn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.pd=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:this.Wv("rejectFailedWrite()"),this.Zv(t,e),this.tw(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zh.Ho(t)];case 2:return n=r.sent(),this.Fv.Qd(t,"rejected",e),[4,this.Xv(n)];case 3:return r.sent(),[3,6];case 4:return[4,Xn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.nw=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.Rv.jl()||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.zh.Gs()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.Mv.get(e)||[]).push(t),this.Mv.set(e,n),[2])}}))}))},t.prototype.tw=function(t){(this.Mv.get(t)||[]).forEach((function(t){t.resolve()})),this.Mv.delete(t)},t.prototype.iw=function(t){this.Mv.forEach((function(e){e.forEach((function(e){e.reject(new A(M.CANCELLED,t))}))})),this.Mv.clear()},t.prototype.Yv=function(t,e){var n=this.Bv[this.currentUser.v()];n||(n=new dt(_)),n=n.lt(t,e),this.Bv[this.currentUser.v()]=n},t.prototype.Zv=function(t,e){var n=this.Bv[this.currentUser.v()];if(n){var r=n.get(t);r&&(y(t===n.vt(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.Bv[this.currentUser.v()]=n}},t.prototype.Jv=function(t,e){var n=this;void 0===e&&(e=null),this.Fv.Kd(t),y(this.xv[t]&&0!==this.xv[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.xv[t];r<i.length;r++){var o=i[r];this.Uv.delete(o),e&&this.Vv.ew(o,e)}if(delete this.xv[t],this.isPrimary){var a=this.qv.Nu(t);this.qv.Pu(t),a.forEach((function(t){n.qv.Ou(t)||n.rw(t)}))}},t.prototype.rw=function(t){var e=this.jv.get(t);null!==e&&(this.Rv.nd(e),this.jv=this.jv.remove(t),delete this.Lv[e])},t.prototype.Hv=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Fi?(this.qv.Du(i.key,t),this.uw(i)):i instanceof Ui?(d("SyncEngine","Document no longer in limbo: "+i.key),this.qv.Ru(i.key,t),this.qv.Ou(i.key)||this.rw(i.key)):g("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.uw=function(t){var e=t.key;if(!this.jv.get(e)){d("SyncEngine","New document in limbo: "+e);var n=this.Qv.next(),r=ae.jn(e.path);this.Lv[n]=new Vi(e),this.Rv.listen(new Te(r.Yn(),n,2,dn.Mr)),this.jv=this.jv.lt(e,n)}},t.prototype.sw=function(){return this.jv},t.prototype.Xv=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a=this;return o.__generator(this,(function(o){switch(o.label){case 0:return n=[],r=[],i=[],this.Uv.forEach((function(o,s){i.push(Promise.resolve().then((function(){var e=s.view.pv(t);return e.Pa?a.zh.vh(s.query,!1).then((function(t){var n=t.documents;return s.view.pv(n,e)})):e})).then((function(t){var i=e&&e.Si[s.targetId],o=s.view.es(t,!0===a.isPrimary,i);if(a.Hv(s.targetId,o.Iv),o.snapshot){a.isPrimary&&a.Fv.Yd(s.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var u=qn.Io(s.targetId,o.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return o.sent(),this.Vv.kf(n),[4,this.zh.uh(r)];case 2:return o.sent(),[2]}}))}))},t.prototype.Wv=function(t){y(null!==this.Vv,"Trying to call "+t+" before calling subscribe().")},t.prototype.bd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.iw("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.zh.Lo(t)]):[3,3];case 1:return n=r.sent(),this.Fv.Lo(t,n.Bo,n.Mo),[4,this.Xv(n.qo)];case 2:r.sent(),r.label=3;case 3:return[4,this.Rv.bd()];case 4:return r.sent(),[2]}}))}))},t.prototype.yd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,a,s,u=this;return o.__generator(this,(function(o){switch(o.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Rv.yd(!0)]);case 1:return o.sent(),a=this.Fv.Ld(),[4,this.ow(a.tt())];case 2:for(e=o.sent(),n=0,r=e;n<r.length;n++)i=r[n],this.Rv.listen(i);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),k(this.xv,(function(t,e){u.Fv.Hd(t)?a.push(t):s=s.then((function(){return u.Jv(t),u.zh.dh(t,!0)})),u.Rv.nd(t)})),[4,s]);case 4:return o.sent(),[4,this.ow(a)];case 5:return o.sent(),this.hw(),[4,this.Rv.yd(!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},t.prototype.hw=function(){var t=this;k(this.Lv,(function(e){t.Rv.nd(e)})),this.qv.ku(),this.Lv=[],this.jv=new dt(pt.G)},t.prototype.ow=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,a,s,u,c,h,l,f,p,d;return o.__generator(this,(function(o){switch(o.label){case 0:e=[],n=[],r=0,i=t,o.label=1;case 1:return r<i.length?(a=i[r],s=void 0,(u=this.xv[a])&&0!==u.length?[4,this.zh.dh(a,!0)]:[3,8]):[3,14];case 2:return o.sent(),[4,this.zh.hh(u[0].Yn())];case 3:s=o.sent(),c=0,h=u,o.label=4;case 4:return c<h.length?(l=h[c],y(!!(f=this.Uv.get(l)),"No query view found for "+l),[4,this.Kv(f)]):[3,7];case 5:(p=o.sent()).snapshot&&n.push(p.snapshot),o.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return y(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.zh.Th(a)];case 9:return y(!!(d=o.sent()),"Target for id "+a+" not found"),[4,this.zh.hh(d)];case 10:return s=o.sent(),[4,this.zv(this.cw(d),a,!1)];case 11:o.sent(),o.label=12;case 12:e.push(s),o.label=13;case 13:return r++,[3,1];case 14:return this.Vv.kf(n),[2,e]}}))}))},t.prototype.cw=function(t){return new ae(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},t.prototype.gh=function(){return this.zh.gh()},t.prototype.hv=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return d("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.xv[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.zh.Eh()];case 2:return r=o.sent(),i=He.Pi(t,"current"===e),[4,this.Xv(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.zh.dh(t,!0)];case 5:return o.sent(),this.Jv(t,n),[3,7];case 6:g("Unexpected target state: "+e),o.label=7;case 7:return[2]}}))}))},t.prototype.cv=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,h,l,f=this;return o.__generator(this,(function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(l=r[n],y(!this.xv[l],"Trying to add an already active target"),[4,this.zh.Th(l)]):[3,6];case 2:return y(!!(i=p.sent()),"Query data for active target "+l+" not found"),[4,this.zh.hh(i)];case 3:return a=p.sent(),[4,this.zv(this.cw(i),a.targetId,!1)];case 4:p.sent(),this.Rv.listen(a),p.label=5;case 5:return n++,[3,1];case 6:s=function(t){return o.__generator(this,(function(e){switch(e.label){case 0:return u.xv[t]?[4,u.zh.dh(t,!1).then((function(){f.Rv.nd(t),f.Jv(t)})).catch(Xn)]:[2,"continue"];case 1:return e.sent(),[2]}}))},u=this,c=0,h=e,p.label=7;case 7:return c<h.length?(l=h[c],[5,s(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.zh.yh(!0),this.Rv.enableNetwork()},t.prototype.disableNetwork=function(){return this.zh.yh(!1),this.Rv.disableNetwork()},t.prototype.be=function(t){var e=this.Lv[t];if(e&&e.Ov)return Ue().add(e.key);var n=Ue(),r=this.xv[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.Uv.get(a);y(!!s,"No query view found for "+a),n=n.Mt(s.view.mv)}return n},t}(),Hi=function(){this.aw=null,this.targetId=0,this.listeners=[]},Wi=function(){function t(t){this.rd=t,this.fw=new Mn((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.lw=new Set,this.rd.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.fw.get(e);return r||(n=!0,r=new Hi,this.fw.set(e,r)),r.listeners.push(t),y(!t.Tv(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.aw&&t.dw(r.aw)&&this.vw(),n?this.rd.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.nd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){return e=t.query,n=!1,(r=this.fw.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.fw.delete(e),[2,this.rd.nd(e)]):[2]}))}))},t.prototype.kf=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.fw.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].dw(i)&&(e=!0);a.aw=i}}e&&this.vw()},t.prototype.ew=function(t,e){var n=this.fw.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.fw.delete(t)},t.prototype.$v=function(t){this.onlineState=t;var e=!1;this.fw.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].Tv(t)&&(e=!0)})),e&&this.vw()},t.prototype.ww=function(t){this.lw.add(t),t.next()},t.prototype.mw=function(t){this.lw.delete(t)},t.prototype.vw=function(){this.lw.forEach((function(t){t.next()}))},t}(),qi=function(){function t(t,e,n){this.query=t,this.pw=e,this.gw=!1,this.bw=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.dw=function(t){if(y(t.docChanges.length>0||t.Ti,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ge(t.query,t.docs,t._i,e,t.Ii,t.fromCache,t.Ti,!0)}var o=!1;return this.gw?this.yw(t)&&(this.pw.next(t),o=!0):this._w(t,this.onlineState)&&(this.Iw(t),o=!0),this.bw=t,o},t.prototype.onError=function(t){this.pw.error(t)},t.prototype.Tv=function(t){this.onlineState=t;var e=!1;return this.bw&&!this.gw&&this._w(this.bw,t)&&(this.Iw(this.bw),e=!0),e},t.prototype._w=function(t,e){if(y(!this.gw,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n="Offline"!==e;return this.options.Tw&&n?(y(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.J()||"Offline"===e},t.prototype.yw=function(t){if(t.docChanges.length>0)return!0;var e=this.bw&&this.bw.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ti&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Iw=function(t){y(!this.gw,"Trying to raise initial events for second time"),t=Ge.Di(t.query,t.docs,t.Ii,t.fromCache),this.gw=!0,this.pw.next(t)},t}(),Yi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.Xc=function(){return Jn.jh(this.cacheSizeBytes)},t}(),Xi=function(){},Ki=function(){function t(t,e,n,r){this.platform=t,this.Ew=e,this.credentials=n,this.Qr=r,this.clientId=b.u()}return t.prototype.start=function(t){var e=this;this.Dw();var n=new vn,r=new vn,i=!1;return this.credentials.T((function(o){i?e.Qr.$r((function(){return e.bd(o)})):(i=!0,e.Sw(t,r,o).then((function(t){return e.Rw(o,t)})).then(n.resolve,n.reject))})),this.Qr.$r((function(){return n.promise})),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue((function(){return t.rd.enableNetwork()}))},t.prototype.Sw=function(t,e,n){var r=this;return t instanceof Yi?this.Cw(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.Aw(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.Pw()})):(e.resolve(),this.Pw())},t.prototype.Aw=function(t){return t instanceof A?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Dw=function(){if(this.Qr.uu)throw new A(M.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Cw=function(t,e){var n=this,r=jr.Ia(this.Ew),i=new sn(this.Ew.s,{Te:!0});return Promise.resolve().then((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,a;return o.__generator(this,(function(o){switch(o.label){case 0:if(e.synchronizeTabs&&!Di.cs(this.platform))throw new A(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.Xc(),this.Fv=e.synchronizeTabs?new Di(this.Qr,this.platform,r,this.clientId,t):new ki,[4,jr.Yc({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,Lc:this.Qr,serializer:i,Xc:n,qc:this.Fv})];case 1:return a=o.sent(),this.persistence=a,[2,a.As.Wh]}}))}))}))},t.prototype.Pw=function(){return this.persistence=Xr.Wa(this.clientId),this.Fv=new ki,Promise.resolve(null)},t.prototype.Rw=function(t,e){var n=this;return d("FirestoreClient","Initializing. user=",t.uid),this.platform.kw(this.Ew).then((function(r){return o.__awaiter(n,void 0,void 0,(function(){var n,i,a,s,u,c,h=this;return o.__generator(this,(function(l){switch(l.label){case 0:return n=new Hr,this.zh=new Yn(this.persistence,n,t),[4,this.zh.start()];case 1:return l.sent(),e&&(this.Nw=new Zn(e,this.Qr,this.zh)),i=this.platform.Ow(),a=this.platform.Fw(this.Ew.s),s=new ni(this.Qr,r,this.credentials,a),u=function(t){return h.rd.Tv(t,0)},c=function(t){return h.rd.Tv(t,1)},this.Rv=new Mi(this.zh,s,this.Qr,u,i),this.rd=new Gi(this.zh,this.Rv,this.Fv,t),this.Fv.El=c,this.Rv.rd=this.rd,this.Fv.rd=this.rd,this.Vw=new Wi(this.rd),[4,this.Fv.start()];case 2:return l.sent(),[4,this.Rv.start()];case 3:return l.sent(),[4,this.persistence.ra((function(t){return o.__awaiter(h,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.rd.yd(t)];case 1:return e.sent(),this.Nw&&(t&&!this.Nw.Co?this.Nw.start():t||this.Nw.stop()),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.ua((function(){return o.__awaiter(h,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},t.prototype.bd=function(t){return this.Qr.du(),d("FirestoreClient","Credential Changed. Current user: "+t.uid),this.rd.bd(t)},t.prototype.disableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue((function(){return t.rd.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Qr.au((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Nw&&this.Nw.stop(),[4,this.Rv.shutdown()];case 1:return t.sent(),[4,this.Fv.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.D(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Dw();var e=new vn;return this.Qr.$r((function(){return t.rd.nw(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Dw();var i=new qi(t,e,n);return this.Qr.$r((function(){return r.Vw.listen(i)})),i},t.prototype.nd=function(t){var e=this;this.Uw||this.Qr.$r((function(){return e.Vw.nd(t)}))},t.prototype.xw=function(t){var e=this;return this.Dw(),this.Qr.enqueue((function(){return e.zh.oh(t)})).then((function(t){if(t instanceof Zt)return t;if(t instanceof te)return null;throw new A(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.jw=function(t){var e=this;return this.Dw(),this.Qr.enqueue((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,this.zh.vh(t,!0)];case 1:return e=i.sent(),n=new ji(t,e.mh),r=n.pv(e.documents),[2,n.es(r,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.Dw();var n=new vn;return this.Qr.$r((function(){return e.rd.write(t,n)})),n.promise},t.prototype.s=function(){return this.Ew.s},t.prototype.ww=function(t){var e=this;this.Dw(),this.Qr.$r((function(){return e.Vw.ww(t),Promise.resolve()}))},t.prototype.mw=function(t){this.Uw||this.Vw.mw(t)},Object.defineProperty(t.prototype,"Uw",{get:function(){return this.Qr.uu},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Dw();var n=new vn;return this.Qr.$r((function(){return e.rd.runTransaction(e.Qr,t,n),Promise.resolve()})),n.promise},t}(),$i=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.Lw(this.observer.next,t)},t.prototype.error=function(t){this.Lw(this.observer.error,t)},t.prototype.qw=function(){this.muted=!0},t.prototype.Lw=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qi(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,["next","error","complete"])}var Ji=Jn.Bh,Zi=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new A(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else q("settings","non-empty string","host",t.host),this.host=t.host,Y("settings","boolean","ssl",t.ssl),this.ssl=D(t.ssl,!0);if(et("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),Y("settings","object","credentials",t.credentials),this.credentials=t.credentials,Y("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?v("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&v("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=D(t.timestampsInSnapshots,!0),Y("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Jn.Qh;else{if(t.cacheSizeBytes!==Ji&&t.cacheSizeBytes<Jn.Mh)throw new A(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Jn.Mh);this.cacheSizeBytes=t.cacheSizeBytes}Y("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),to=function(){function t(e,n){var r=this;if(this.Bw=null,this.Mw=new gn,this.INTERNAL={delete:function(){return o.__awaiter(r,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Qw(),[4,this.Gw.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var i=e;this.Bw=i,this.Ww=t.zw(i),this.Kw=i.name,this.Hw=new N(n)}else{var a=e;if(!a.projectId)throw new A(M.INVALID_ARGUMENT,"Must provide projectId");this.Ww=new S(a.projectId,a.database),this.Kw="[DEFAULT]",this.Hw=new I}this.Jw=new Zi({}),this.Yw=this.Xw(this.Ww)}return t.prototype.settings=function(t){if(z("Firestore.settings",arguments,1),H("Firestore.settings","object",1,t),L(t,"persistence"))throw new A(M.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Zi(t);if(this.Gw&&!this.Jw.isEqual(e))throw new A(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.Jw=e,void 0!==e.credentials&&(this.Hw=P(e.credentials))},t.prototype.enableNetwork=function(){return this.Qw(),this.Gw.enableNetwork()},t.prototype.disableNetwork=function(){return this.Qw(),this.Gw.disableNetwork()},t.prototype.enablePersistence=function(t){if(this.Gw)throw new A(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&v("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=D(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.$w(new Yi(this.Jw.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=jr.Ia(this.Zw()),n=new vn;return this.Mw.su((function(){return o.__awaiter(t,void 0,void 0,(function(){var t;return o.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this.Gw&&!this.Gw.Uw)throw new A(M.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,jr.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"tm",{get:function(){return this.Qw(),this.Gw.Uw},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Qw(),this.Gw.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Qw(),Qi(t))return this.nm(t);H("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.nm(e)},t.prototype.nm=function(t){var e=this,n=new $i({next:function(){t.next&&t.next()},error:function(t){throw g("Uncaught Error in onSnapshotsInSync")}});return this.Gw.ww(n),function(){n.qw(),e.Gw.mw(n)}},t.prototype.Qw=function(){return this.Gw||this.$w(new Xi),this.Gw},t.prototype.Zw=function(){return new E(this.Ww,this.Kw,this.Jw.host,this.Jw.ssl,this.Jw.forceLongPolling)},t.prototype.$w=function(t){y(!!this.Jw.host,"FirestoreSettings.host is not set"),y(!this.Gw,"configureClient() called multiple times");var e=this.Zw();return this.Gw=new Ki(un.t(),e,this.Hw,this.Mw),this.Gw.start(t)},t.prototype.Xw=function(t){return new yi((function(e){if(e instanceof ro){var n=t,r=e.firestore.Ww;if(!r.isEqual(n))throw new A(M.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new gi(t,e.im)}return e}))},t.zw=function(t){var e=t.options;if(!L(e,"projectId"))throw new A(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new A(M.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new S(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Bw)throw new A(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Bw},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return z("Firestore.collection",arguments,1),H("Firestore.collection","non-empty string",1,t),this.Qw(),new co(ht.it(t),this)},t.prototype.doc=function(t){return z("Firestore.doc",arguments,1),H("Firestore.doc","non-empty string",1,t),this.Qw(),ro.em(ht.it(t),this)},t.prototype.collectionGroup=function(t){if(z("Firestore.collectionGroup",arguments,1),H("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new A(M.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Qw(),new so(new ae(ht.et,t),this)},t.prototype.runTransaction=function(t){var e=this;return z("Firestore.runTransaction",arguments,1),H("Firestore.runTransaction","function",1,t),this.Qw().transaction((function(n){return t(new eo(e,n))}))},t.prototype.batch=function(){return this.Qw(),new no(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(f()){case 0:return"debug";case 1:return"error";case 2:return"silent";default:return g("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(z("Firestore.setLogLevel",arguments,1),H("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":p(0);break;case"error":p(1);break;case"silent":p(2);break;default:throw new A(M.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype.rm=function(){return this.Jw.timestampsInSnapshots},t}(),eo=function(){function t(t,e){this.um=t,this.sm=e}return t.prototype.get=function(t){var e=this;z("Transaction.get",arguments,1);var n=po("Transaction.get",t,this.um);return this.sm.lookup([n.im]).then((function(t){if(!t||1!==t.length)return g("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof te)return new oo(e.um,n.im,null,!1,!1,n.om);if(r instanceof Zt)return new oo(e.um,n.im,r,!1,!1,n.om);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){V("Transaction.set",arguments,2,3);var r=po("Transaction.set",t,this.um);n=ho("Transaction.set",n);var i=mo(r.om,e,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this.um.Yw.sl(a,o,n.mergeFields):this.um.Yw.rl(a,o);return this.sm.set(r.im,s),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof ri?(B("Transaction.update",arguments,3),r=po("Transaction.update",t,this.um),i=this.um.Yw.cl("Transaction.update",e,n,o)):(z("Transaction.update",arguments,2),r=po("Transaction.update",t,this.um),i=this.um.Yw.ol("Transaction.update",e)),this.sm.update(r.im,i),this},t.prototype.delete=function(t){z("Transaction.delete",arguments,1);var e=po("Transaction.delete",t,this.um);return this.sm.delete(e.im),this},t}(),no=function(){function t(t){this.um=t,this.hm=[],this.cm=!1}return t.prototype.set=function(t,e,n){V("WriteBatch.set",arguments,2,3),this.am();var r=po("WriteBatch.set",t,this.um);n=ho("WriteBatch.set",n);var i=mo(r.om,e,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this.um.Yw.sl(a,o,n.mergeFields):this.um.Yw.rl(a,o);return this.hm=this.hm.concat(s.Hf(r.im,Ct.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.am(),"string"==typeof e||e instanceof ri?(B("WriteBatch.update",arguments,3),r=po("WriteBatch.update",t,this.um),i=this.um.Yw.cl("WriteBatch.update",e,n,o)):(z("WriteBatch.update",arguments,2),r=po("WriteBatch.update",t,this.um),i=this.um.Yw.ol("WriteBatch.update",e)),this.hm=this.hm.concat(i.Hf(r.im,Ct.exists(!0))),this},t.prototype.delete=function(t){z("WriteBatch.delete",arguments,1),this.am();var e=po("WriteBatch.delete",t,this.um);return this.hm=this.hm.concat(new Pt(e.im,Ct.NONE)),this},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.am(),this.cm=!0,this.hm.length>0?[2,this.um.Qw().write(this.hm)]:[2]}))}))},t.prototype.am=function(){if(this.cm)throw new A(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),ro=function(){function t(t,e,n){this.im=t,this.firestore=e,this.om=n,this.Gw=this.firestore.Qw()}return t.em=function(e,n,r){if(e.length%2!=0)throw new A(M.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.nt()+" has "+e.length);return new t(new pt(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new co(this.im.path.H(),this.firestore,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.im.path.nt()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(z("DocumentReference.collection",arguments,1),H("DocumentReference.collection","non-empty string",1,t),!t)throw new A(M.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=ht.it(t);return new co(this.im.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.im.isEqual(e.im)&&this.om===e.om},t.prototype.set=function(t,e){V("DocumentReference.set",arguments,1,2),e=ho("DocumentReference.set",e);var n=mo(this.om,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.Yw.sl(i,r,e.mergeFields):this.firestore.Yw.rl(i,r);return this.Gw.write(o.Hf(this.im,Ct.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof ri?(B("DocumentReference.update",arguments,2),n=this.firestore.Yw.cl("DocumentReference.update",t,e,r)):(z("DocumentReference.update",arguments,1),n=this.firestore.Yw.ol("DocumentReference.update",t)),this.Gw.write(n.Hf(this.im,Ct.exists(!0)))},t.prototype.delete=function(){return z("DocumentReference.delete",arguments,0),this.Gw.write([new Pt(this.im,Ct.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];V("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Qi(t[i])||(et("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Y("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Qi(t[i])?n=t[i]:(H("DocumentReference.onSnapshot","function",i,t[i]),W("DocumentReference.onSnapshot","function",i+1,t[i+1]),W("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.fm(o,n)},t.prototype.fm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new $i({next:function(t){if(e.next){y(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n.im);e.next(new oo(n.firestore,n.im,r,t.fromCache,t.hasPendingWrites,n.om))}},error:r}),o=this.Gw.listen(ae.jn(this.im.path),i,t);return function(){i.qw(),n.Gw.nd(o)}},t.prototype.get=function(t){var e=this;return V("DocumentReference.get",arguments,0,1),fo("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Qw().xw(e.im).then((function(t){n(new oo(e.firestore,e.im,t,!0,t instanceof Zt&&t.en,e.om))}),r):e.lm(n,r,t)}))},t.prototype.lm=function(t,e,n){var r=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new A(M.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new A(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t.prototype.withConverter=function(e){return new t(this.im,this.firestore,e)},t}(),io=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),oo=function(){function t(t,e,n,r,i,o){this.um=t,this.im=e,this.dm=n,this.vm=r,this.wm=i,this.om=o}return t.prototype.data=function(t){if(V("DocumentSnapshot.data",arguments,0,1),t=lo("DocumentSnapshot.data",t),this.dm){if(this.om){var e=new ao(this.um,this.im,this.dm,this.vm,this.wm);return this.om.fromFirestore(e,t)}return this.mm(this.dm.data(),Dt.mn(t,this.um.rm()))}},t.prototype.get=function(t,e){if(V("DocumentSnapshot.get",arguments,1,2),e=lo("DocumentSnapshot.get",e),this.dm){var n=this.dm.data().field(wi("DocumentSnapshot.get",t));if(null!==n)return this.pm(n,Dt.mn(e,this.um.rm()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ro(this.im,this.um,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.dm},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new io(this.wm,this.vm)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","DocumentSnapshot",1,e);return this.um===e.um&&this.vm===e.vm&&this.im.isEqual(e.im)&&(null===this.dm?null===e.dm:this.dm.isEqual(e.dm))&&this.om===e.om},t.prototype.mm=function(t,e){var n=this,r={};return t.forEach((function(t,i){r[t]=n.pm(i,e)})),r},t.prototype.pm=function(t,e){if(t instanceof Kt)return this.mm(t,e);if(t instanceof Qt)return this.gm(t,e);if(t instanceof Yt){var n=t.value(e),r=this.um.Qw().s();return t.s.isEqual(r)||v("Document "+this.im.path+" contains a document reference within a different database ("+t.s.projectId+"/"+t.s.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new ro(n,this.um,this.om)}return t.value(e)},t.prototype.gm=function(t,e){var n=this;return t.Ht.map((function(t){return n.pm(t,e)}))},t}(),ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return y(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},e}(oo),so=function(){function t(t,e,n){this.bm=t,this.firestore=e,this.om=n}return t.prototype.where=function(e,n,r){z("Query.where",arguments,3),tt("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];$("Query.where",o,2,n);var a=wi("Query.where",e),s=ue.it(n);if(a.ut()){if(s===ue.ARRAY_CONTAINS||s===ue.ARRAY_CONTAINS_ANY)throw new A(M.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===ue.IN){this.ym(r,s);for(var u=[],c=0,h=r;c<h.length;c++){var l=h[c];u.push(this._m(l))}i=new Qt(u)}else i=this._m(r)}else s!==ue.IN&&s!==ue.ARRAY_CONTAINS_ANY||this.ym(r,s),i=this.firestore.Yw.al("Query.where",r,s===ue.IN);var f=ce.create(a,s,i);return this.Im(f),new t(this.bm.Bn(f),this.firestore,this.om)},t.prototype.orderBy=function(e,n){var r;if(V("Query.orderBy",arguments,1,2),W("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=ve.ASCENDING;else{if("desc"!==n)throw new A(M.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=ve.DESCENDING}if(null!==this.bm.startAt)throw new A(M.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.bm.endAt)throw new A(M.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=wi("Query.orderBy",e),o=new ge(i,r);return this.Tm(o),new t(this.bm.Qn(o),this.firestore,this.om)},t.prototype.limit=function(e){return z("Query.limit",arguments,1),H("Query.limit","number",1,e),rt("Query.limit",1,e),new t(this.bm.Gn(e),this.firestore,this.om)},t.prototype.limitToLast=function(e){return z("Query.limitToLast",arguments,1),H("Query.limitToLast","number",1,e),rt("Query.limitToLast",1,e),new t(this.bm.Wn(e),this.firestore,this.om)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];B("Query.startAt",arguments,1);var i=this.Em("Query.startAt",e,n,!0);return new t(this.bm.zn(i),this.firestore,this.om)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];B("Query.startAfter",arguments,1);var i=this.Em("Query.startAfter",e,n,!1);return new t(this.bm.zn(i),this.firestore,this.om)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];B("Query.endBefore",arguments,1);var i=this.Em("Query.endBefore",e,n,!0);return new t(this.bm.Kn(i),this.firestore,this.om)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];B("Query.endAt",arguments,1);var i=this.Em("Query.endAt",e,n,!1);return new t(this.bm.Kn(i),this.firestore,this.om)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","Query",1,e);return this.firestore===e.firestore&&this.bm.isEqual(e.bm)},t.prototype.withConverter=function(e){return new t(this.bm,this.firestore,e)},t.prototype.Em=function(t,e,n,r){if(tt(t,1,e),e instanceof oo){if(n.length>0)throw new A(M.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new A(M.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Dm(t,i.dm,r)}var o=[e].concat(n);return this.Sm(t,o,r)},t.prototype.Dm=function(t,e,n){for(var r=[],i=0,o=this.bm.orderBy;i<o.length;i++){var a=o[i];if(a.field.ut())r.push(new Yt(this.firestore.Ww,e.key));else{var s=e.field(a.field);if(s instanceof Wt)throw new A(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.nt();throw new A(M.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new me(r,n)},t.prototype.Sm=function(t,e,n){var r=this.bm.On;if(e.length>r.length)throw new A(M.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.ut()){if("string"!=typeof a)throw new A(M.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this.bm.ui()&&-1!==a.indexOf("/"))throw new A(M.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this.bm.path.child(ht.it(a));if(!pt.ht(s))throw new A(M.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new pt(s);i.push(new Yt(this.firestore.Ww,u))}else{var c=this.firestore.Yw.al(t,a);i.push(c)}}return new me(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];V("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Qi(t[i])||(et("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Y("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Qi(t[i])?n=t[i]:(H("Query.onSnapshot","function",i,t[i]),W("Query.onSnapshot","function",i+1,t[i+1]),W("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.Rm(this.bm),this.fm(r,n)},t.prototype.fm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new $i({next:function(t){e.next&&e.next(new uo(n.firestore,n.bm,t,n.om))},error:r}),o=this.firestore.Qw(),a=o.listen(this.bm,i,t);return function(){i.qw(),o.nd(a)}},t.prototype.Rm=function(t){if(t.ei()&&0===t.On.length)throw new A(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return V("Query.get",arguments,0,1),fo("Query.get",t),this.Rm(this.bm),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Qw().jw(e.bm).then((function(t){n(new uo(e.firestore,e.bm,t,e.om))}),r):e.lm(n,r,t)}))},t.prototype.lm=function(t,e,n){var r=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new A(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype._m=function(t){if("string"==typeof t){if(""===t)throw new A(M.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.bm.ui()&&-1!==t.indexOf("/"))throw new A(M.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.bm.path.child(ht.it(t));if(!pt.ht(e))throw new A(M.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Yt(this.firestore.Ww,new pt(e))}if(t instanceof ro){var n=t;return new Yt(this.firestore.Ww,n.im)}throw new A(M.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Z(t)+".")},t.prototype.ym=function(t,e){if(!Array.isArray(t)||0===t.length)throw new A(M.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new A(M.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new A(M.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new A(M.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Im=function(t){if(t instanceof ce){var e=[ue.ARRAY_CONTAINS,ue.ARRAY_CONTAINS_ANY],n=[ue.IN,ue.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.Mn()){var o=this.bm.Ln();if(null!==o&&!o.isEqual(t.field))throw new A(M.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this.bm.qn();null!==a&&this.Cm(t.field,a)}else if(i||r){var s=null;if(i&&(s=this.bm.ri(n)),null===s&&r&&(s=this.bm.ri(e)),null!=s)throw s===t.op?new A(M.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new A(M.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.Tm=function(t){if(null===this.bm.qn()){var e=this.bm.Ln();null!==e&&this.Cm(e,t.field)}},t.prototype.Cm=function(t,e){if(!e.isEqual(t))throw new A(M.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),uo=function(){function t(t,e,n,r){this.um=t,this.Am=e,this.Pm=n,this.om=r,this.km=null,this.Nm=null,this.metadata=new io(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Pm.docs.J()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Pm.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;V("QuerySnapshot.forEach",arguments,1,2),H("QuerySnapshot.forEach","function",1,t),this.Pm.docs.forEach((function(r){t.call(e,n.Om(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new so(this.Am,this.um,this.om)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(et("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Y("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Pm.Ei)throw new A(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.km&&this.Nm===e||(this.km=function(t,e,n,r){if(n._i.J()){var i,o=0;return n.docChanges.map((function(e){var a=new ao(t,e.doc.key,e.doc,n.fromCache,n.Ii.has(e.doc.key),r);return y(0===e.type,"Invalid event type for first snapshot"),y(!i||n.query.Xn(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n._i;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new ao(t,e.doc.key,e.doc,n.fromCache,n.Ii.has(e.doc.key),r),o=-1,s=-1;return 0!==e.type&&(y((o=a.indexOf(e.doc.key))>=0,"Index for document not found"),a=a.delete(e.doc.key)),1!==e.type&&(s=(a=a.add(e.doc)).indexOf(e.doc.key)),{type:vo(e.type),doc:i,oldIndex:o,newIndex:s}}))}(this.um,e,this.Pm,this.om),this.Nm=e),this.km},t.prototype.isEqual=function(e){if(!(e instanceof t))throw nt("isEqual","QuerySnapshot",1,e);return this.um===e.um&&this.Am.isEqual(e.Am)&&this.Pm.isEqual(e.Pm)&&this.om===e.om},t.prototype.Om=function(t){return new ao(this.um,t.key,t,this.metadata.fromCache,this.Pm.Ii.has(t.key),this.om)},t}();o.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(uo.prototype.docChanges,t,{get:function(){return function(){throw new A(M.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var co=function(t){function e(e,n,r){var i=t.call(this,ae.jn(e),n,r)||this;if(i.Fm=e,e.length%2!=1)throw new A(M.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.nt()+" has "+e.length);return i}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.bm.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.bm.path.H();return t.J()?null:new ro(new pt(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.bm.path.nt()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(V("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=b.u()),H("CollectionReference.doc","non-empty string",1,t),""===t)throw new A(M.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=ht.it(t);return ro.em(this.bm.path.child(e),this.firestore,this.om)},e.prototype.add=function(t){z("CollectionReference.add",arguments,1);var e=this.om?this.om.toFirestore(t):t;H("CollectionReference.add","object",1,e);var n=this.doc();return n.set(t).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Fm,this.firestore,t)},e}(so);function ho(t,e){if(void 0===e)return{merge:!1};if(et(t,e,["merge","mergeFields"]),Y(t,"boolean","merge",e.merge),X(t,"mergeFields","a string or a FieldPath",e.mergeFields,(function(t){return"string"==typeof t||t instanceof ri})),void 0!==e.mergeFields&&void 0!==e.merge)throw new A(M.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function lo(t,e){return void 0===e?{}:(et(t,e,["serverTimestamps"]),K(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function fo(t,e){W(t,"object",1,e),e&&(et(t,e,["source"]),K(t,0,"source",e.source,["default","server","cache"]))}function po(t,e,n){if(e instanceof ro){if(e.firestore!==n)throw new A(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw nt(t,"DocumentReference",1,e)}function vo(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g("Unknown change type: "+t)}}function mo(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var go=cn(to,"Use firebase.firestore() instead."),yo=cn(eo,"Use firebase.firestore().runTransaction() instead."),bo=cn(no,"Use firebase.firestore().batch() instead."),_o=cn(ro,"Use firebase.firestore().doc() instead."),wo=cn(oo),xo=cn(ao),Eo=cn(so),So=cn(uo),To=cn(co,"Use firebase.firestore().collection() instead."),Mo={Firestore:go,GeoPoint:at,Timestamp:st,Blob:pn,Transaction:yo,WriteBatch:bo,DocumentReference:_o,DocumentSnapshot:wo,Query:Eo,QueryDocumentSnapshot:xo,QuerySnapshot:So,CollectionReference:To,FieldPath:ri,FieldValue:li,setLogLevel:to.setLogLevel,CACHE_SIZE_UNLIMITED:Ji};function Ao(t){var e;t.INTERNAL.registerComponent(new u.Component("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new to(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps((y((e=Mo)&&"object"==typeof e,"shallowCopy() expects object parameter."),o.__assign({},e))))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Co=function(){function t(){}return t.prototype.xl=function(t){},t.prototype.shutdown=function(){},t}(),Io=function(){function t(){var t=this;this.Vm=function(){return t.Um()},this.xm=function(){return t.jm()},this.Lm=[],this.qm()}return t.prototype.xl=function(t){this.Lm.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Vm),window.removeEventListener("offline",this.xm)},t.prototype.qm=function(){window.addEventListener("online",this.Vm),window.addEventListener("offline",this.xm)},t.prototype.Um=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(0)},t.prototype.jm=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(1)},t.cs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),No=function(){function t(t){this.Bm=t.Bm,this.Mm=t.Mm}return t.prototype.Af=function(t){y(!this.Qm,"Called onOpen on stream twice!"),this.Qm=t},t.prototype.Ef=function(t){y(!this.Gm,"Called onClose on stream twice!"),this.Gm=t},t.prototype.onMessage=function(t){y(!this.Wm,"Called onMessage on stream twice!"),this.Wm=t},t.prototype.close=function(){this.Mm()},t.prototype.send=function(t){this.Bm(t)},t.prototype.zm=function(){y(void 0!==this.Qm,"Cannot call onOpen because no callback was set"),this.Qm()},t.prototype.Km=function(t){y(void 0!==this.Gm,"Cannot call onClose because no callback was set"),this.Gm(t)},t.prototype.Hm=function(t){y(void 0!==this.Wm,"Cannot call onMessage because no callback was set"),this.Wm(t)},t}(),Ro={BatchGetDocuments:"batchGet",Commit:"commit"},Oo="gl-js/ fire/"+h,Po=function(){function t(t){this.s=t.s;var e=t.ssl?"https":"http";this.Jm=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Ym=function(t,e){if(e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n]);t["X-Goog-Api-Client"]=Oo},t.prototype.Bf=function(t,e,n){var r=this,i=this.Xm(t);return new Promise((function(a,s){var u=new c.XhrIo;u.listenOnce(c.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case c.ErrorCode.NO_ERROR:var e=u.getResponseJson();d("Connection","XHR received:",JSON.stringify(e)),a(e);break;case c.ErrorCode.TIMEOUT:d("Connection",'RPC "'+t+'" timed out'),s(new A(M.DEADLINE_EXCEEDED,"Request time out"));break;case c.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(d("Connection",'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(o=r.status,h=o.toLowerCase().replace("_","-"),Object.values(M).indexOf(h)>=0?h:M.UNKNOWN);s(new A(i,r.message))}else s(new A(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else d("Connection",'RPC "'+t+'" failed'),s(new A(M.UNAVAILABLE,"Connection failed."));break;default:g('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{d("Connection",'RPC "'+t+'" completed.')}var o,h}));var h=o.__assign({},e);delete h.database;var l=JSON.stringify(h);d("Connection","XHR sending: ",i+" "+l);var f={"Content-Type":"text/plain"};r.Ym(f,n),u.send(i,"POST",l,f,15)}))},t.prototype.Mf=function(t,e,n){return this.Bf(t,e,n)},t.prototype.Pf=function(t,e){var n=[this.Jm,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=c.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Ym(i.initMessageHeaders,e),s.isMobileCordova()||s.isReactNative()||s.isElectron()||s.isIE()||s.isUWP()||s.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d("Connection","Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,h=!1,l=new No({Bm:function(t){h?d("Connection","Not sending because WebChannel is closed:",t):(u||(d("Connection","Opening WebChannel transport."),a.open(),u=!0),d("Connection","WebChannel sending:",t),a.send(t))},Mm:function(){return a.close()}}),f=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(c.WebChannel.EventType.OPEN,(function(){h||d("Connection","WebChannel transport opened.")})),f(c.WebChannel.EventType.CLOSE,(function(){h||(h=!0,d("Connection","WebChannel transport closed"),l.Km())})),f(c.WebChannel.EventType.ERROR,(function(t){h||(h=!0,d("Connection","WebChannel transport errored:",t),l.Km(new A(M.UNAVAILABLE,"The operation could not be completed")))})),f(c.WebChannel.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];y(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){d("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ee[t];if(void 0!==e)return Ce(e)}(o),u=i.message;void 0===s&&(s=M.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),h=!0,l.Km(new A(s,u)),a.close()}else d("Connection","WebChannel received:",n),l.Hm(n)}})),setTimeout((function(){l.zm()}),0),l},t.prototype.Xm=function(t){var e=Ro[t];return y(void 0!==e,"Unknown REST mapping for: "+t),this.Jm+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),Lo=function(){function t(){this.xr="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.kw=function(t){return Promise.resolve(new Po(t))},t.prototype.Ow=function(){return Io.cs()?new Io:new Co},t.prototype.Fw=function(t){return new sn(t,{Te:!0})},t.prototype.i=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Do(t){Ao(t),t.registerVersion("@firebase/firestore","1.12.2")}un.Ur(new Lo),Do(i),e.__PRIVATE_registerFirestore=Do}).call(this,n("4362"))},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e91f:function(t,e,n){"use strict";var r=n("ebb5"),i=n("4d64").indexOf,o=r.aTypedArray,a=r.exportTypedArrayMethod;a("indexOf",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},e95a:function(t,e,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},ebb5:function(t,e,n){"use strict";var r,i=n("a981"),o=n("83ab"),a=n("da84"),s=n("861d"),u=n("5135"),c=n("f5df"),h=n("9112"),l=n("6eeb"),f=n("9bf2").f,p=n("e163"),d=n("d2bb"),v=n("b622"),m=n("90e3"),g=a.Int8Array,y=g&&g.prototype,b=a.Uint8ClampedArray,_=b&&b.prototype,w=g&&p(g),x=y&&p(y),E=Object.prototype,S=E.isPrototypeOf,T=v("toStringTag"),M=m("TYPED_ARRAY_TAG"),A=i&&!!d&&"Opera"!==c(a.opera),C=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N=function(t){var e=c(t);return"DataView"===e||u(I,e)},R=function(t){return s(t)&&u(I,c(t))},O=function(t){if(R(t))return t;throw TypeError("Target is not a typed array")},P=function(t){if(d){if(S.call(w,t))return t}else for(var e in I)if(u(I,r)){var n=a[e];if(n&&(t===n||S.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},L=function(t,e,n){if(o){if(n)for(var r in I){var i=a[r];i&&u(i.prototype,t)&&delete i.prototype[t]}x[t]&&!n||l(x,t,n?e:A&&y[t]||e)}},D=function(t,e,n){var r,i;if(o){if(d){if(n)for(r in I)i=a[r],i&&u(i,t)&&delete i[t];if(w[t]&&!n)return;try{return l(w,t,n?e:A&&g[t]||e)}catch(s){}}for(r in I)i=a[r],!i||i[t]&&!n||l(i,t,e)}};for(r in I)a[r]||(A=!1);if((!A||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},A))for(r in I)a[r]&&d(a[r],w);if((!A||!x||x===E)&&(x=w.prototype,A))for(r in I)a[r]&&d(a[r].prototype,x);if(A&&p(_)!==x&&d(_,x),o&&!u(x,T))for(r in C=!0,f(x,T,{get:function(){return s(this)?this[M]:void 0}}),I)a[r]&&h(a[r],M,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:C&&M,aTypedArray:O,aTypedArrayConstructor:P,exportTypedArrayMethod:L,exportTypedArrayStaticMethod:D,isView:N,isTypedArray:R,TypedArray:w,TypedArrayPrototype:x}},ee7d:function(t,e,n){},f069:function(t,e,n){"use strict";var r=n("1c0b"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},f183:function(t,e,n){var r=n("d012"),i=n("861d"),o=n("5135"),a=n("9bf2").f,s=n("90e3"),u=n("bb2f"),c=s("meta"),h=0,l=Object.isExtensible||function(){return!0},f=function(t){a(t,c,{value:{objectID:"O"+ ++h,weakData:{}}})},p=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!l(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},d=function(t,e){if(!o(t,c)){if(!l(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},v=function(t){return u&&m.REQUIRED&&l(t)&&!o(t,c)&&f(t),t},m=t.exports={REQUIRED:!1,fastKey:p,getWeakData:d,onFreeze:v};r[c]=!0},f5df:function(t,e,n){var r=n("00ee"),i=n("c6b6"),o=n("b622"),a=o("toStringTag"),s="Arguments"==i(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),a))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},f6b4:function(t,e,n){"use strict";var r=n("c532");function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},f8cd:function(t,e,n){var r=n("a691");t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},facb:function(t,e,n){},fb6d:function(t,e,n){},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fdeb:function(t,e,n){},fea9:function(t,e,n){var r=n("da84");t.exports=r.Promise},fed0:function(t,e,n){"use strict";var r=n("5404"),i=n.n(r);i.a}}]);
//# sourceMappingURL=chunk-vendors.3bb08409.js.map